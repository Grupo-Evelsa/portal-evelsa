/*! For license information please see main.6cfe8239.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,w(o)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),I(o,t,r,"",function(e){return e})):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=I(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,r,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var i=[],r=0;return I(e,i,"","",function(e){return t.call(n,e,r++)}),i}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},D={transition:null},R={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,D(_);else{var t=i(u);null!==t&&R(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var s=f;try{for(x(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),x(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,T=null,N=-1,S=5,C=-1;function I(){return!(t.unstable_now()-C<S)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?k():(E=!1,T=null)}}else E=!1}if("function"===typeof b)k=function(){b(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,j=P.port2;P.port1.onmessage=A,k=function(){j.postMessage(null)}}else k=function(){y(A,0)};function D(e){T=e,E||(E=!0,k())}function R(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(v(N),N=-1):g=!0,R(w,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(gr){var i=gr}Reflect.construct(e,[],t)}else{try{t.call()}catch(gr){i=gr}e.call(t.prototype)}else{try{throw Error()}catch(gr){i=gr}e()}}catch(gr){if(gr&&i&&"string"===typeof gr.stack){for(var r=gr.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Dl){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Ee=null;function Te(e){if(e=wr(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=kr(t),_e(e.stateNode,e.type,t))}}function Ne(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Se(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==ke||null!==Ee)&&(Ie(),Se())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var i=kr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){De=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){De=!1}function Me(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,ze=null,Ue={onError:function(e){Oe=!0,Le=e}};function Ve(e,t,n,i,r,s,o,a,l){Oe=!1,Le=null,Me.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return We(r),e;if(o===i)return We(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Xe=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=dt(a):0!==(s&=o)&&(i=dt(s))}else 0!==(o=n&~r)?i=dt(o):0!==s&&(i=dt(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,kt,Et,Tt,Nt=!1,St=[],Ct=null,It=null,At=null,Pt=new Map,jt=new Map,Dt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Ot(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=wr(t))&&_t(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=xr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Tt(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wr(n))&&_t(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Nt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),Pt.forEach(zt),jt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var i=St[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==It&&Vt(It,e),null!==At&&Vt(At,e),Pt.forEach(t),jt.forEach(t),n=0;n<Dt.length;n++)(i=Dt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var Ht=x.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,i){var r=bt,s=Ht.transition;Ht.transition=null;try{bt=1,Kt(e,t,n,i)}finally{bt=r,Ht.transition=s}}function Gt(e,t,n,i){var r=bt,s=Ht.transition;Ht.transition=null;try{bt=4,Kt(e,t,n,i)}finally{bt=r,Ht.transition=s}}function Kt(e,t,n,i){if(Wt){var r=Yt(e,t,n,i);if(null===r)Wi(e,t,i,Qt,n),Mt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,i,r),!0;case"dragenter":return It=Ot(It,e,t,n,i,r),!0;case"mouseover":return At=Ot(At,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Pt.set(s,Ot(Pt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,jt.set(s,Ot(jt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Mt(e,i),4&t&&-1<Rt.indexOf(e)){for(;null!==r;){var s=wr(r);if(null!==s&&wt(s),null===(s=Yt(e,t,n,i))&&Wi(e,t,i,Qt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Qt=null;function Yt(e,t,n,i){if(Qt=null,null!==(e=xr(e=we(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in $t?$t.value:$t.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=L({},cn,{view:0,detail:0}),hn=sn(dn),fn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},dn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return En}var Nn=L({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=sn(Nn),Cn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(Pn),Dn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var On=u&&"TextEvent"in window&&!Mn,Ln=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function qn(e,t,n,i){Ne(i),0<(t=Gi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Qn(e){Fi(e,0)}function Yn(e){if(K(_r(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Gn&&(Gn.detachEvent("onpropertychange",ni),Kn=Gn=null)}function ni(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];qn(t,Kn,e,we(e)),Pe(Qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(Gn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function si(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,yi=null,vi=null,bi=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==gi||gi!==Q(i)||("selectionStart"in(i=gi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Gi(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _i={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},ki={},Ei={};function Ti(e){if(ki[e])return ki[e];if(!_i[e])return e;var t,n=_i[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return ki[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);var Ni=Ti("animationend"),Si=Ti("animationiteration"),Ci=Ti("animationstart"),Ii=Ti("transitionend"),Ai=new Map,Pi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(e,t){Ai.set(e,t),l(t,[e])}for(var Di=0;Di<Pi.length;Di++){var Ri=Pi[Di];ji(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}ji(Ni,"onAnimationEnd"),ji(Si,"onAnimationIteration"),ji(Ci,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(Ii,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Li(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Li(r,a,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zi(e,t){var n=t[yr];void 0===n&&(n=t[yr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[Vi]){e[Vi]=!0,o.forEach(function(t){"selectionchange"!==t&&(Oi.has(t)||Ui(t,!1,e),Ui(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Ui("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Xt(t)){case 1:var r=qt;break;case 4:r=Gt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=xr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Pe(function(){var i=s,r=we(n),o=[];e:{var a=Ai.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Ni:case Si:case Ci:l=yn;break;case Ii:l=An;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=je(p,h))&&u.push(qi(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!xr(c)&&!c[mr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?xr(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:_r(l),f=null==c?a:_r(c),(a=new u(m,p+"leave",l,n,r)).target=d,a.relatedTarget=f,m=null,xr(r)===i&&((u=new u(h,p+"enter",c,n,r)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Ki(f))p++;for(f=0,m=h;m;m=Ki(m))f++;for(;0<p-f;)u=Ki(u),p--;for(;0<f-p;)h=Ki(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Ki(u),h=Ki(h)}u=null}else u=null;null!==l&&Qi(o,a,l,u,!1),null!==c&&null!==d&&Qi(o,d,c,u,!0)}if("select"===(l=(a=i?_r(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Wn(a))if($n)g=oi;else{g=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=si);switch(g&&(g=g(e,i))?qn(o,g,n,r):(y&&y(e,a,i),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=i?_r(i):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gi=y,yi=i,vi=null);break;case"focusout":vi=yi=gi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,xi(o,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(o,n,r)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,Bn=!0)),0<(y=Gi(i,b)).length&&(b=new xn(b,e,null,n,r),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Gi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}Fi(o,t)})}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=je(e,n))&&i.unshift(qi(e,s,r)),null!=(s=je(e,t))&&i.push(qi(e,s,r))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=je(n,s))&&o.unshift(qi(n,l,a)):r||null!=(l=je(n,s))&&o.push(qi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Xi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),fr="__reactFiber$"+dr,pr="__reactProps$"+dr,mr="__reactContainer$"+dr,yr="__reactEvents$"+dr,vr="__reactListeners$"+dr,br="__reactHandles$"+dr;function xr(e){var t=e[fr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mr]||n[fr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[fr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function wr(e){return!(e=e[fr]||e[mr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _r(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function kr(e){return e[pr]||null}var Er=[],Nr=-1;function Sr(e){return{current:e}}function Cr(e){0>Nr||(e.current=Er[Nr],Er[Nr]=null,Nr--)}function Ar(e,t){Nr++,Er[Nr]=e.current,e.current=t}var Pr={},jr=Sr(Pr),Dr=Sr(!1),Rr=Pr;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Pr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Or(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Lr(){Cr(Dr),Cr(jr)}function Fr(e,t,n){if(jr.current!==Pr)throw Error(s(168));Ar(jr,t),Ar(Dr,n)}function zr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return L({},n,i)}function Ur(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pr,Rr=jr.current,Ar(jr,e),Ar(Dr,Dr.current),!0}function Vr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=zr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Dr),Cr(jr),Ar(jr,e)):Cr(Dr),Ar(Dr,n)}var Br=null,Hr=!1,Wr=!1;function qr(e){null===Br?Br=[e]:Br.push(e)}function Gr(){if(!Wr&&null!==Br){Wr=!0;var e=0,t=bt;try{var n=Br;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Br=null,Hr=!1}catch(r){throw null!==Br&&(Br=Br.slice(e+1)),Ke(Ze,Gr),r}finally{bt=t,Wr=!1}}return null}var Kr=[],Qr=0,Yr=null,Xr=0,$r=[],Jr=0,Zr=null,es=1,ts="";function ns(e,t){Kr[Qr++]=Xr,Kr[Qr++]=Yr,Yr=e,Xr=t}function is(e,t,n){$r[Jr++]=es,$r[Jr++]=ts,$r[Jr++]=Zr,Zr=e;var i=es;e=ts;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,es=1<<32-ot(t)+r|n<<r|i,ts=s+e}else es=1<<s|n<<r|i,ts=e}function rs(e){null!==e.return&&(ns(e,1),is(e,1,0))}function ss(e){for(;e===Yr;)Yr=Kr[--Qr],Kr[Qr]=null,Xr=Kr[--Qr],Kr[Qr]=null;for(;e===Zr;)Zr=$r[--Jr],$r[Jr]=null,ts=$r[--Jr],$r[Jr]=null,es=$r[--Jr],$r[Jr]=null}var os=null,as=null,ls=!1,cs=null;function us(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ds(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,os=e,as=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,os=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zr?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,os=e,as=null,!0);default:return!1}}function hs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function fs(e){if(ls){var t=as;if(t){var n=t;if(!ds(e,t)){if(hs(e))throw Error(s(418));t=cr(n.nextSibling);var i=os;t&&ds(e,t)?us(i,n):(e.flags=-4097&e.flags|2,ls=!1,os=e)}}else{if(hs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ls=!1,os=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;os=e}function ms(e){if(e!==os)return!1;if(!ls)return ps(e),ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=as)){if(hs(e))throw gs(),Error(s(418));for(;t;)us(e,t),t=cr(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=os?cr(e.stateNode.nextSibling):null;return!0}function gs(){for(var e=as;e;)e=cr(e.nextSibling)}function ys(){as=os=null,ls=!1}function vs(e){null===cs?cs=[e]:cs.push(e)}var bs=x.ReactCurrentBatchConfig;function xs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _s(e){return(0,e._init)(e._payload)}function ks(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=zc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Hc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===j&&_s(s)===t.type)?((i=r(t,n.props)).ref=xs(e,t,n),i.return=e,i):((i=Uc(n.type,n.key,n.props,null,e.mode,i)).ref=xs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,s){return null===t||7!==t.tag?((t=Vc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Hc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Uc(t.type,t.key,t.props,null,e.mode,n)).ref=xs(e,null,t),n.return=e,n;case _:return(t=Wc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Vc(t,e.mode,n,null)).return=e,t;ws(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case _:return n.key===r?u(e,t,n,i):null;case j:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||M(n))return null!==r?null:d(e,t,n,i,null);ws(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case _:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case j:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||M(i))return d(t,e=e.get(n)||null,i,r,null);ws(t,i)}return null}function m(r,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(r,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(r,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(r,d),ls&&ns(r,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(r,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return ls&&ns(r,m),c}for(d=i(r,d);m<a.length;m++)null!==(g=p(d,r,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(r,e)}),ls&&ns(r,m),c}function g(r,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(r,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(r,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(r,m),ls&&ns(r,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(r,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return ls&&ns(r,g),u}for(m=i(r,m);!v.done;g++,v=l.next())null!==(v=p(m,r,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(r,e)}),ls&&ns(r,g),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&_s(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=xs(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((s=Vc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Uc(o.type,o.key,o.props,null,i.mode,l)).ref=xs(i,s,o),l.return=i,i=l)}return a(i);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Wc(o,i.mode,l)).return=i,i=s}return a(i);case j:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return m(i,s,o,l);if(M(o))return g(i,s,o,l);ws(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Hc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Es=ks(!0),Ts=ks(!1),Ns=Sr(null),Ss=null,Cs=null,Is=null;function As(){Is=Cs=Ss=null}function Ps(e){var t=Ns.current;Cr(Ns),e._currentValue=t}function js(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ds(e,t){Ss=e,Is=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ea=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Ss)throw Error(s(308));Cs=e,Ss.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ms=null;function Os(e){null===Ms?Ms=[e]:Ms.push(e)}function Ls(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Os(t)):(n.next=r.next,r.next=n),t.interleaved=n,Fs(e,i)}function Fs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var zs=!1;function Us(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hs(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Rl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Fs(e,n)}return null===(r=i.interleaved)?(t.next=t,Os(i)):(t.next=r.next,r.next=t),i.interleaved=t,Fs(e,n)}function Ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function qs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gs(e,t,n,i){var r=e.updateQueue;zs=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=r.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:zs=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Bl|=o,e.lanes=o,e.memoizedState=d}}function Ks(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Qs={},Ys=Sr(Qs),Xs=Sr(Qs),$s=Sr(Qs);function Zs(e){if(e===Qs)throw Error(s(174));return e}function eo(e,t){switch(Ar($s,t),Ar(Xs,e),Ar(Ys,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Ys),Ar(Ys,t)}function to(){Cr(Ys),Cr(Xs),Cr($s)}function no(e){Zs($s.current);var t=Zs(Ys.current),n=le(t,e.type);t!==n&&(Ar(Xs,e),Ar(Ys,n))}function io(e){Xs.current===e&&(Cr(Ys),Cr(Xs))}var ro=Sr(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=[];function ao(){for(var e=0;e<oo.length;e++)oo[e]._workInProgressVersionPrimary=null;oo.length=0}var lo=x.ReactCurrentDispatcher,co=x.ReactCurrentBatchConfig,uo=0,ho=null,fo=null,po=null,mo=!1,go=!1,yo=0,vo=0;function bo(){throw Error(s(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function wo(e,t,n,i,r,o){if(uo=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?ra:sa,e=n(i,r),go){o=0;do{if(go=!1,yo=0,25<=o)throw Error(s(301));o+=1,po=fo=null,t.updateQueue=null,lo.current=oa,e=n(i,r)}while(go)}if(lo.current=ia,t=null!==fo&&null!==fo.next,uo=0,po=fo=ho=null,mo=!1,t)throw Error(s(300));return e}function _o(){var e=0!==yo;return yo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?ho.memoizedState=po=e:po=po.next=e,po}function Eo(){if(null===fo){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===po?ho.memoizedState:po.next;if(null!==t)po=t,fo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===po?ho.memoizedState=po=e:po=po.next=e}return po}function To(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=fo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((uo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,ho.lanes|=d,Bl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(Ea=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,ho.lanes|=o,Bl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=Eo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(Ea=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Co(){}function Io(e,t){var n=ho,i=Eo(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,Ea=!0),i=i.queue,Vo(jo.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,Oo(9,Po.bind(null,n,i,r,t),void 0,null),null===Ml)throw Error(s(349));0!==(30&uo)||Ao(n,t,r)}return r}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,i){t.value=n,t.getSnapshot=i,Do(t)&&Ro(e)}function jo(e,t,n){return n(function(){Do(t)&&Ro(e)})}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Ro(e){var t=Fs(e,1);null!==t&&lc(t,e,1,-1)}function Mo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,ho,e),[t.memoizedState,e]}function Oo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Lo(){return Eo().memoizedState}function Fo(e,t,n,i){var r=ko();ho.flags|=e,r.memoizedState=Oo(1|t,n,void 0,void 0===i?null:i)}function zo(e,t,n,i){var r=Eo();i=void 0===i?null:i;var s=void 0;if(null!==fo){var o=fo.memoizedState;if(s=o.destroy,null!==i&&xo(i,o.deps))return void(r.memoizedState=Oo(t,n,s,i))}ho.flags|=e,r.memoizedState=Oo(1|t,n,s,i)}function Uo(e,t){return Fo(8390656,8,e,t)}function Vo(e,t){return zo(2048,8,e,t)}function Bo(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Go(){}function Ko(e,t){var n=Eo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&xo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Eo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&xo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Yo(e,t,n){return 0===(21&uo)?(e.baseState&&(e.baseState=!1,Ea=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),ho.lanes|=n,Bl|=n,e.baseState=!0),t)}function Xo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=co.transition;co.transition={};try{e(!1),t()}finally{bt=n,co.transition=i}}function $o(){return Eo().memoizedState}function Jo(e,t,n){var i=ac(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(null!==(n=Ls(e,t,n,i))){lc(n,e,i,oc()),na(n,t,i)}}function Zo(e,t,n){var i=ac(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Os(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(gr){}null!==(n=Ls(e,t,r,i))&&(lc(n,e,i,r=oc()),na(n,t,i))}}function ea(e){var t=e.alternate;return e===ho||null!==t&&t===ho}function ta(e,t){go=mo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ia={readContext:Rs,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ra={readContext:Rs,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ko();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Jo.bind(null,ho,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Mo,useDebugValue:Go,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Mo(!1),t=e[0];return e=Xo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ho,r=ko();if(ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ml)throw Error(s(349));0!==(30&uo)||Ao(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Uo(jo.bind(null,i,o,e),[e]),i.flags|=2048,Oo(9,Po.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ml.identifierPrefix;if(ls){var n=ts;t=":"+t+"R"+(n=(es&~(1<<32-ot(es)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sa={readContext:Rs,useCallback:Ko,useContext:Rs,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:Bo,useLayoutEffect:Ho,useMemo:Qo,useReducer:No,useRef:Lo,useState:function(){return No(To)},useDebugValue:Go,useDeferredValue:function(e){return Yo(Eo(),fo.memoizedState,e)},useTransition:function(){return[No(To)[0],Eo().memoizedState]},useMutableSource:Co,useSyncExternalStore:Io,useId:$o,unstable_isNewReconciler:!1},oa={readContext:Rs,useCallback:Ko,useContext:Rs,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:Bo,useLayoutEffect:Ho,useMemo:Qo,useReducer:So,useRef:Lo,useState:function(){return So(To)},useDebugValue:Go,useDeferredValue:function(e){var t=Eo();return null===fo?t.memoizedState=e:Yo(t,fo.memoizedState,e)},useTransition:function(){return[So(To)[0],Eo().memoizedState]},useMutableSource:Co,useSyncExternalStore:Io,useId:$o,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function la(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=oc(),r=ac(e),s=Bs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Hs(e,s,r))&&(lc(t,e,r,i),Ws(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=oc(),r=ac(e),s=Bs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Hs(e,s,r))&&(lc(t,e,r,i),Ws(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oc(),i=ac(e),r=Bs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Hs(e,r,i))&&(lc(t,e,i,n),Ws(t,e,i))}};function ua(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function da(e,t,n){var i=!1,r=Pr,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(r=Or(t)?Rr:jr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Mr(e,r):Pr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ha(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Us(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Rs(s):(s=Or(t)?Rr:jr.current,r.context=Mr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(la(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ca.enqueueReplaceState(r,r.state,null),Gs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Xl||(Xl=!0,$l=i),ga(0,t)},n}function ba(e,t,n){(n=Bs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ga(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof i&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function xa(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ya;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Pc.bind(null,e,t,n),t.then(e,e))}function wa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,Hs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ka=x.ReactCurrentOwner,Ea=!1;function Ta(e,t,n,i){t.child=null===e?Ts(t,null,n,i):Es(t,e.child,n,i)}function Na(e,t,n,i,r){n=n.render;var s=t.ref;return Ds(t,r),i=wo(e,t,n,i,s,r),n=_o(),null===e||Ea?(ls&&n&&rs(t),t.flags|=1,Ta(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ya(e,t,r))}function Sa(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Fc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Uc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ca(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ya(e,t,r)}return t.flags|=1,(e=zc(s,i)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ya(e,t,r);0!==(131072&e.flags)&&(Ea=!0)}}return Pa(e,t,n,i,r)}function Ia(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(zl,Fl),Fl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(zl,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Ar(zl,Fl),Fl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Ar(zl,Fl),Fl|=i;return Ta(e,t,r,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pa(e,t,n,i,r){var s=Or(n)?Rr:jr.current;return s=Mr(t,s),Ds(t,r),n=wo(e,t,n,i,s,r),i=_o(),null===e||Ea?(ls&&i&&rs(t),t.flags|=1,Ta(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ya(e,t,r))}function ja(e,t,n,i,r){if(Or(n)){var s=!0;Ur(t)}else s=!1;if(Ds(t,r),null===t.stateNode)Qa(e,t),da(t,n,i),fa(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Mr(t,c=Or(n)?Rr:jr.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&ha(t,o,i,c),zs=!1;var h=t.memoizedState;o.state=h,Gs(t,i,o,r),l=t.memoizedState,a!==i||h!==l||Dr.current||zs?("function"===typeof u&&(la(t,n,u,i),l=t.memoizedState),(a=zs||ua(t,n,a,i,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Vs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:aa(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Mr(t,l=Or(n)?Rr:jr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&ha(t,o,i,l),zs=!1,h=t.memoizedState,o.state=h,Gs(t,i,o,r);var p=t.memoizedState;a!==d||h!==p||Dr.current||zs?("function"===typeof f&&(la(t,n,f,i),p=t.memoizedState),(c=zs||ua(t,n,c,i,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Da(e,t,n,i,s,r)}function Da(e,t,n,i,r,s){Aa(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Vr(t,n,!1),Ya(e,t,s);i=t.stateNode,ka.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Es(t,e.child,null,s),t.child=Es(t,null,a,s)):Ta(e,t,a,s),t.memoizedState=i.state,r&&Vr(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fr(0,t.context,!1),eo(e,t.containerInfo)}function Ma(e,t,n,i,r){return ys(),vs(r),t.flags|=256,Ta(e,t,n,i),t.child}var Oa,La,Fa,za,Ua={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var i,r=t.pendingProps,o=ro.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ar(ro,1&o),null===e)return fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,r,0,null),e=Vc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Va(n),t.memoizedState=Ua,e):Ha(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Wa(e,t,a,i=ma(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Bc({mode:"visible",children:i.children},r,0,null),(o=Vc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Es(t,e.child,null,a),t.child.memoizedState=Va(a),t.memoizedState=Ua,o);if(0===(1&t.mode))return Wa(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Wa(e,t,a,i=ma(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),Ea||l){if(null!==(i=Ml)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Fs(e,r),lc(i,e,r,-1))}return wc(),Wa(e,t,a,i=ma(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,as=cr(r.nextSibling),os=t,ls=!0,cs=null,null!==e&&($r[Jr++]=es,$r[Jr++]=ts,$r[Jr++]=Zr,es=e.id,ts=e.overflow,Zr=t),t=Ha(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=zc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=zc(i,a):(a=Vc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ua,r}return e=(a=e.child).sibling,r=zc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ha(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Wa(e,t,n,i){return null!==i&&vs(i),Es(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),js(e.return,t,n)}function Ga(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ka(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(Ta(e,t,i.children,n),0!==(2&(i=ro.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,n,t);else if(19===e.tag)qa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ar(ro,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ga(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===so(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ya(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=zc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function $a(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ja(e,t,n){var i=t.pendingProps;switch(ss(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(t),null;case 1:case 17:return Or(t.type)&&Lr(),$a(t),null;case 3:return i=t.stateNode,to(),Cr(Dr),Cr(jr),ao(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ms(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==cs&&(hc(cs),cs=null))),La(e,t),$a(t),null;case 5:io(t);var r=Zs($s.current);if(n=t.type,null!==e&&null!=t.stateNode)Fa(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return $a(t),null}if(e=Zs(Ys.current),ms(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[fr]=t,i[pr]=o,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Mi.length;r++)zi(Mi[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":X(i,o),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},zi("invalid",i);break;case"textarea":re(i,o),zi("invalid",i)}for(var l in ve(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":G(i),Z(i,o,!0);break;case"textarea":G(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[fr]=t,e[pr]=i,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Mi.length;r++)zi(Mi[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":X(e,i),r=Y(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=L({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(o in ve(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zi("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":G(e),Z(e,i,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $a(t),null;case 6:if(e&&null!=t.stateNode)za(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Zs($s.current),Zs(Ys.current),ms(t)){if(i=t.stateNode,n=t.memoizedProps,i[fr]=t,(o=i.nodeValue!==n)&&null!==(e=os))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[fr]=t,t.stateNode=i}return $a(t),null;case 13:if(Cr(ro),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ls&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))gs(),ys(),t.flags|=98560,o=!1;else if(o=ms(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fr]=t}else ys(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$a(t),o=!1}else null!==cs&&(hc(cs),cs=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ul&&(Ul=3):wc())),null!==t.updateQueue&&(t.flags|=4),$a(t),null);case 4:return to(),La(e,t),null===e&&Bi(t.stateNode.containerInfo),$a(t),null;case 10:return Ps(t.type._context),$a(t),null;case 19:if(Cr(ro),null===(o=t.memoizedState))return $a(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Xa(o,!1);else{if(0!==Ul||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=so(e))){for(t.flags|=128,Xa(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Ql&&(t.flags|=128,i=!0,Xa(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=so(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ls)return $a(t),null}else 2*$e()-o.renderingStartTime>Ql&&1073741824!==n&&(t.flags|=128,i=!0,Xa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ro.current,Ar(ro,i?1&n|2:1&n),t):($a(t),null);case 22:case 23:return yc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Fl)&&($a(t),6&t.subtreeFlags&&(t.flags|=8192)):$a(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ss(t),t.tag){case 1:return Or(t.type)&&Lr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return to(),Cr(Dr),Cr(jr),ao(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return io(t),null;case 13:if(Cr(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ys()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(ro),null;case 4:return to(),null;case 10:return Ps(t.type._context),null;case 22:case 23:return yc(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Fa=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Zs(Ys.current);var s,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=L({},r,{value:void 0}),i=L({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},za=function(e,t,n,i){n!==i&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,il=null;function rl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ac(e,t,i)}else n.current=null}function sl(e,t,n){try{n()}catch(i){Ac(e,t,i)}}var ol=!1;function al(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&sl(t,n,s)}r=r.next}while(r!==i)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fr],delete t[pr],delete t[yr],delete t[vr],delete t[br])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:tl||rl(n,t);case 6:var i=ml,r=gl;ml=null,yl(e,t,n),gl=r,null!==(ml=i)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(ml,n.stateNode));break;case 4:i=ml,r=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=i,gl=r;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&sl(n,t,o),r=r.next}while(r!==i)}yl(e,t,n);break;case 1:if(!tl&&(rl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ac(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(i=tl)||null!==n.memoizedState,yl(e,t,n),tl=i):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var i=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function xl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(s(160));vl(o,a,r),ml=null,gl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(gr){Ac(r,t,gr)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)wl(t,e),t=t.sibling}function wl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xl(t,e),_l(e),4&i){try{al(3,e,e.return),ll(3,e)}catch(g){Ac(e,e.return,g)}try{al(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:xl(t,e),_l(e),512&i&&null!==n&&rl(n,n.return);break;case 5:if(xl(t,e),_l(e),512&i&&null!==n&&rl(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Ac(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):b(r,d,h,u)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[pr]=o}catch(g){Ac(e,e.return,g)}}break;case 6:if(xl(t,e),_l(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(g){Ac(e,e.return,g)}}break;case 3:if(xl(t,e),_l(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:xl(t,e),_l(e);break;case 13:xl(t,e),_l(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Kl=$e())),4&i&&bl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||d,xl(t,e),tl=u):xl(t,e),_l(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(il=e,d=e.child;null!==d;){for(h=il=d;null!==il;){switch(p=(f=il).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:rl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){i=f,n=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(i,n,g)}}break;case 5:rl(f,f.return);break;case 22:if(null!==f.memoizedState){Nl(h);continue}}null!==p?(p.return=f,il=p):Nl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xl(t,e),_l(e),4&i&&bl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(dl(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),pl(e,hl(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;fl(e,hl(e),o);break;default:throw Error(s(161))}}catch(hr){Ac(e,e.return,hr)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function kl(e,t,n){il=e,El(e,t,n)}function El(e,t,n){for(var i=0!==(1&e.mode);null!==il;){var r=il,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||el;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=o,(tl=l)&&!c)for(il=r;null!==il;)l=(o=il).child,22===o.tag&&null!==o.memoizedState?Sl(r):null!==l?(l.return=o,il=l):Sl(r);for(;null!==s;)il=s,El(s,t,n),s=s.sibling;il=r,el=a,tl=c}Tl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,il=s):Tl(e)}}function Tl(e){for(;null!==il;){var t=il;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!tl)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ks(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ks(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}tl||512&t.flags&&cl(t)}catch(Tr){Ac(t,t.return,Tr)}}if(t===e){il=null;break}if(null!==(n=t.sibling)){n.return=t.return,il=n;break}il=t.return}}function Nl(e){for(;null!==il;){var t=il;if(t===e){il=null;break}var n=t.sibling;if(null!==n){n.return=t.return,il=n;break}il=t.return}}function Sl(e){for(;null!==il;){var t=il;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(hr){Ac(t,n,hr)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(hr){Ac(t,r,hr)}}var s=t.return;try{cl(t)}catch(hr){Ac(t,s,hr)}break;case 5:var o=t.return;try{cl(t)}catch(hr){Ac(t,o,hr)}}}catch(hr){Ac(t,t.return,hr)}if(t===e){il=null;break}var a=t.sibling;if(null!==a){a.return=t.return,il=a;break}il=t.return}}var Cl,Il=Math.ceil,Al=x.ReactCurrentDispatcher,Pl=x.ReactCurrentOwner,jl=x.ReactCurrentBatchConfig,Rl=0,Ml=null,Ol=null,Ll=0,Fl=0,zl=Sr(0),Ul=0,Vl=null,Bl=0,Hl=0,Wl=0,ql=null,Gl=null,Kl=0,Ql=1/0,Yl=null,Xl=!1,$l=null,Jl=null,Zl=!1,ec=null,tc=0,nc=0,ic=null,rc=-1,sc=0;function oc(){return 0!==(6&Rl)?$e():-1!==rc?rc:rc=$e()}function ac(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Ll?Ll&-Ll:null!==bs.transition?(0===sc&&(sc=mt()),sc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function lc(e,t,n,i){if(50<nc)throw nc=0,ic=null,Error(s(185));yt(e,n,i),0!==(2&Rl)&&e===Ml||(e===Ml&&(0===(2&Rl)&&(Hl|=n),4===Ul&&fc(e,Ll)),cc(e,i),1===n&&0===Rl&&0===(1&t.mode)&&(Ql=$e()+500,Hr&&Gr()))}function cc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=ht(e,e===Ml?Ll:0);if(0===i)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Hr=!0,qr(e)}(pc.bind(null,e)):qr(pc.bind(null,e)),or(function(){0===(6&Rl)&&Gr()}),n=null;else{switch(xt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Mc(n,uc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uc(e,t){if(rc=-1,sc=0,0!==(6&Rl))throw Error(s(327));var n=e.callbackNode;if(Cc()&&e.callbackNode!==n)return null;var i=ht(e,e===Ml?Ll:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=_c(e,i);else{t=i;var r=Rl;Rl|=2;var o=xc();for(Ml===e&&Ll===t||(Yl=null,Ql=$e()+500,vc(e,t));;)try{Ec();break}catch(l){bc(e,l)}As(),Al.current=o,Rl=r,null!==Ol?t=0:(Ml=null,Ll=0,t=Ul)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=dc(e,r))),1===t)throw n=Vl,vc(e,0),fc(e,i),cc(e,$e()),n;if(6===t)fc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=_c(e,i))&&(0!==(o=pt(e))&&(i=o,t=dc(e,o))),1===t))throw n=Vl,vc(e,0),fc(e,i),cc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Gl,Yl);break;case 3:if(fc(e,i),(130023424&i)===i&&10<(t=Kl+500-$e())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){oc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Sc.bind(null,e,Gl,Yl),t);break}Sc(e,Gl,Yl);break;case 4:if(fc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Il(i/1960))-i)){e.timeoutHandle=ir(Sc.bind(null,e,Gl,Yl),i);break}Sc(e,Gl,Yl);break;default:throw Error(s(329))}}}return cc(e,$e()),e.callbackNode===n?uc.bind(null,e):null}function dc(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),2!==(e=_c(e,t))&&(t=Gl,Gl=n,null!==t&&hc(t)),e}function hc(e){null===Gl?Gl=e:Gl.push.apply(Gl,e)}function fc(e,t){for(t&=~Wl,t&=~Hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function pc(e){if(0!==(6&Rl))throw Error(s(327));Cc();var t=ht(e,0);if(0===(1&t))return cc(e,$e()),null;var n=_c(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=dc(e,i))}if(1===n)throw n=Vl,vc(e,0),fc(e,t),cc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Gl,Yl),cc(e,$e()),null}function mc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Ql=$e()+500,Hr&&Gr())}}function gc(e){null!==ec&&0===ec.tag&&0===(6&Rl)&&Cc();var t=Rl;Rl|=1;var n=jl.transition,i=bt;try{if(jl.transition=null,bt=1,e)return e()}finally{bt=i,jl.transition=n,0===(6&(Rl=t))&&Gr()}}function yc(){Fl=zl.current,Cr(zl)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ol)for(n=Ol.return;null!==n;){var i=n;switch(ss(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Lr();break;case 3:to(),Cr(Dr),Cr(jr),ao();break;case 5:io(i);break;case 4:to();break;case 13:case 19:Cr(ro);break;case 10:Ps(i.type._context);break;case 22:case 23:yc()}n=n.return}if(Ml=e,Ol=e=zc(e.current,null),Ll=Fl=t,Ul=0,Vl=null,Wl=Hl=Bl=0,Gl=ql=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(i=(n=Ms[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ms=null}return e}function bc(e,t){for(;;){var n=Ol;try{if(As(),lo.current=ia,mo){for(var i=ho.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}mo=!1}if(uo=0,po=fo=ho=null,go=!1,yo=0,Pl.current=null,null===n||null===n.return){Ul=1,Vl=t,Ol=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=wa(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&xa(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){xa(o,u,t),wc();break e}c=Error(s(426))}else if(ls&&1&l.mode){var y=wa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,l,0,t),vs(pa(c,l));break e}}o=c=pa(c,l),4!==Ul&&(Ul=2),null===ql?ql=[o]:ql.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,qs(o,va(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,qs(o,ba(o,l,t));break e}}o=o.return}while(null!==o)}Nc(n)}catch(Ir){t=Ir,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function xc(){var e=Al.current;return Al.current=ia,null===e?ia:e}function wc(){0!==Ul&&3!==Ul&&2!==Ul||(Ul=4),null===Ml||0===(268435455&Bl)&&0===(268435455&Hl)||fc(Ml,Ll)}function _c(e,t){var n=Rl;Rl|=2;var i=xc();for(Ml===e&&Ll===t||(Yl=null,vc(e,t));;)try{kc();break}catch(r){bc(e,r)}if(As(),Rl=n,Al.current=i,null!==Ol)throw Error(s(261));return Ml=null,Ll=0,Ul}function kc(){for(;null!==Ol;)Tc(Ol)}function Ec(){for(;null!==Ol&&!Ye();)Tc(Ol)}function Tc(e){var t=Cl(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?Nc(e):Ol=t,Pl.current=null}function Nc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Fl)))return void(Ol=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Ul=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Ul&&(Ul=5)}function Sc(e,t,n){var i=bt,r=jl.transition;try{jl.transition=null,bt=1,function(e,t,n,i){do{Cc()}while(null!==ec);if(0!==(6&Rl))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Ml&&(Ol=Ml=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Mc(tt,function(){return Cc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=jl.transition,jl.transition=null;var a=bt;bt=1;var l=Rl;Rl|=4,Pl.current=null,function(e,t){if(er=Wt,fi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(Js){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==o||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===r&&(l=a),f===o&&++d===i&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,il=t;null!==il;)if(e=(t=il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,il=e;else for(;null!==il;){t=il;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:aa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(s(163))}}catch(Js){Ac(t,t.return,Js)}if(null!==(e=t.sibling)){e.return=t.return,il=e;break}il=t.return}m=ol,ol=!1}(e,n),wl(n,e),pi(tr),Wt=!!er,tr=er=null,e.current=n,kl(n,e,r),Xe(),Rl=l,bt=a,jl.transition=o}else e.current=n;if(Zl&&(Zl=!1,ec=e,tc=r),o=e.pendingLanes,0===o&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),cc(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Xl)throw Xl=!1,e=$l,$l=null,e;0!==(1&tc)&&0!==e.tag&&Cc(),o=e.pendingLanes,0!==(1&o)?e===ic?nc++:(nc=0,ic=e):nc=0,Gr()}(e,t,n,i)}finally{jl.transition=r,bt=i}return null}function Cc(){if(null!==ec){var e=xt(tc),t=jl.transition,n=bt;try{if(jl.transition=null,bt=16>e?16:e,null===ec)var i=!1;else{if(e=ec,ec=null,tc=0,0!==(6&Rl))throw Error(s(331));var r=Rl;for(Rl|=4,il=e.current;null!==il;){var o=il,a=o.child;if(0!==(16&il.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(il=u;null!==il;){var d=il;switch(d.tag){case 0:case 11:case 15:al(8,d,o)}var h=d.child;if(null!==h)h.return=d,il=h;else for(;null!==il;){var f=(d=il).sibling,p=d.return;if(ul(d),d===u){il=null;break}if(null!==f){f.return=p,il=f;break}il=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}il=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,il=a;else e:for(;null!==il;){if(0!==(2048&(o=il).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,il=v;break e}il=o.return}}var b=e.current;for(il=b;null!==il;){var x=(a=il).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,il=x;else e:for(a=b;null!==il;){if(0!==(2048&(l=il).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(Ir){Ac(l,l.return,Ir)}if(l===a){il=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,il=w;break e}il=l.return}}if(Rl=r,Gr(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(Ir){}i=!0}return i}finally{bt=n,jl.transition=t}}return!1}function Ic(e,t,n){e=Hs(e,t=va(0,t=pa(n,t),1),1),t=oc(),null!==e&&(yt(e,1,t),cc(e,t))}function Ac(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jl||!Jl.has(i))){t=Hs(t,e=ba(t,e=pa(n,e),1),1),e=oc(),null!==t&&(yt(t,1,e),cc(t,e));break}}t=t.return}}function Pc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=oc(),e.pingedLanes|=e.suspendedLanes&n,Ml===e&&(Ll&n)===n&&(4===Ul||3===Ul&&(130023424&Ll)===Ll&&500>$e()-Kl?vc(e,0):Wl|=n),cc(e,t)}function jc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=oc();null!==(e=Fs(e,t))&&(yt(e,t,n),cc(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),jc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),jc(e,n)}function Mc(e,t){return Ke(e,t)}function Oc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,i){return new Oc(e,t,n,i)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Fc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Vc(n.children,r,o,t);case E:a=8,r|=8;break;case T:return(e=Lc(12,n,t,2|r)).elementType=T,e.lanes=o,e;case I:return(e=Lc(13,n,t,r)).elementType=I,e.lanes=o,e;case A:return(e=Lc(19,n,t,r)).elementType=A,e.lanes=o,e;case D:return Bc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case S:a=9;break e;case C:a=11;break e;case P:a=14;break e;case j:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Vc(e,t,n,i){return(e=Lc(7,e,i,t)).lanes=n,e}function Bc(e,t,n,i){return(e=Lc(22,e,i,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Hc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Wc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gc(e,t,n,i,r,s,o,a,l){return e=new qc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Us(s),e}function Kc(e){if(!e)return Pr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Or(n))return zr(e,n,t)}return t}function Qc(e,t,n,i,r,s,o,a,l){return(e=Gc(n,i,!0,e,0,s,0,a,l)).context=Kc(null),n=e.current,(s=Bs(i=oc(),r=ac(n))).callback=void 0!==t&&null!==t?t:null,Hs(n,s,r),e.current.lanes=r,yt(e,r,i),cc(e,i),e}function Yc(e,t,n,i){var r=t.current,s=oc(),o=ac(r);return n=Kc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Hs(r,t,o))&&(lc(e,r,o,s),Ws(e,r,o)),o}function Xc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Dr.current)Ea=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),ys();break;case 5:no(t);break;case 1:Or(t.type)&&Ur(t);break;case 4:eo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Ar(Ns,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Ar(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ar(ro,1&ro.current),null!==(e=Ya(e,t,n))?e.sibling:null);Ar(ro,1&ro.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ka(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(ro,ro.current),i)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ya(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,ls&&0!==(1048576&t.flags)&&is(t,Xr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Qa(e,t),e=t.pendingProps;var r=Mr(t,jr.current);Ds(t,n),r=wo(null,t,i,e,r,n);var o=_o();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(i)?(o=!0,Ur(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Us(t),r.updater=ca,t.stateNode=r,r._reactInternals=t,fa(t,i,e,n),t=Da(null,t,i,!0,o,n)):(t.tag=0,ls&&o&&rs(t),Ta(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Qa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(i),e=aa(i,e),r){case 0:t=Pa(null,t,i,e,n);break e;case 1:t=ja(null,t,i,e,n);break e;case 11:t=Na(null,t,i,e,n);break e;case 14:t=Sa(null,t,i,aa(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Pa(e,t,i,r=t.elementType===i?r:aa(i,r),n);case 1:return i=t.type,r=t.pendingProps,ja(e,t,i,r=t.elementType===i?r:aa(i,r),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Vs(e,t),Gs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ma(e,t,i,n,r=pa(Error(s(423)),t));break e}if(i!==r){t=Ma(e,t,i,n,r=pa(Error(s(424)),t));break e}for(as=cr(t.stateNode.containerInfo.firstChild),os=t,ls=!0,cs=null,n=Ts(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ys(),i===r){t=Ya(e,t,n);break e}Ta(e,t,i,n)}t=t.child}return t;case 5:return no(t),null===e&&fs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Aa(e,t),Ta(e,t,a,n),t.child;case 6:return null===e&&fs(t),null;case 13:return Ba(e,t,n);case 4:return eo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Es(t,null,i,n):Ta(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Na(e,t,i,r=t.elementType===i?r:aa(i,r),n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Ar(Ns,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Dr.current){t=Ya(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Bs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),js(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),js(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ta(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ds(t,n),i=i(r=Rs(r)),t.flags|=1,Ta(e,t,i,n),t.child;case 14:return r=aa(i=t.type,t.pendingProps),Sa(e,t,i,r=aa(i.type,r),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:aa(i,r),Qa(e,t),t.tag=1,Or(i)?(e=!0,Ur(t)):e=!1,Ds(t,n),da(t,i,r),fa(t,i,r,n),Da(null,t,i,!0,e,n);case 19:return Ka(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}function tu(e){this._internalRoot=e}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(){}function su(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Xc(o);a.call(e)}}Yc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Xc(o);s.call(e)}}var o=Qc(t,i,e,0,null,!1,0,"",ru);return e._reactRootContainer=o,e[mr]=o.current,Bi(8===e.nodeType?e.parentNode:e),gc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Xc(l);a.call(e)}}var l=Gc(e,0,!1,null,0,!1,0,"",ru);return e._reactRootContainer=l,e[mr]=l.current,Bi(8===e.nodeType?e.parentNode:e),gc(function(){Yc(t,l,n,i)}),l}(n,t,e,r,i);return Xc(o)}tu.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Yc(e,t,null,null)},tu.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc(function(){Yc(null,e,null,null)}),t[mr]=null}},tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),cc(t,$e()),0===(6&Rl)&&(Ql=$e()+500,Gr()))}break;case 13:gc(function(){var t=Fs(e,1);if(null!==t){var n=oc();lc(t,e,1,n)}}),Jc(e,1)}},_t=function(e){if(13===e.tag){var t=Fs(e,134217728);if(null!==t)lc(t,e,134217728,oc());Jc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ac(e),n=Fs(e,t);if(null!==n)lc(n,e,t,oc());Jc(e,t)}},Et=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=kr(i);if(!r)throw Error(s(90));K(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=mc,Ie=gc;var ou={usingClientEntryPoint:!1,Events:[wr,_r,kr,Ne,Se,mc]},au={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{rt=cu.inject(lu),st=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nu(e))throw Error(s(299));var n=!1,i="",r=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Gc(e,1,!1,null,0,n,0,i,r),e[mr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new eu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!iu(t))throw Error(s(200));return su(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Qc(t,null,e,1,null!=n?n:null,r,0,o,a),e[mr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new tu(t)},t.render=function(e,t,n){if(!iu(t))throw Error(s(200));return su(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(s(40));return!!e._reactRootContainer&&(gc(function(){su(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0)},t.unstable_batchedUpdates=mc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!iu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return su(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var i=n(43),r=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),i.push(n[c],n[u],n[d],n[h])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new h;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return d.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const m=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,g=()=>{try{return m()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/portal",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t,n;return null===(n=null===(t=g())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},v=e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},b=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},x=e=>{var t;return null===(t=g())||void 0===t?void 0:t["_".concat(e)]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){var e;const t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function T(){try{return"object"===typeof indexedDB}catch(e){return!1}}class N extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(C,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new N(n,s,t)}}const C=/\{\$([^}]+)}/g;function I(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(A(n)&&A(s)){if(!I(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function A(e){return null!==e&&"object"===typeof e}function P(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function j(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=M),void 0===i.error&&(i.error=M),void 0===i.complete&&(i.complete=M);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M(){}function O(e){return e&&e._delegate?e._delegate:e}class L{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const F="[DEFAULT]";class z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:F})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===F?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;return this.component?this.component.multipleInstances?e:F:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const V=[];var B;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(B||(B={}));const H={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},W=B.INFO,q={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},G=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=q[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class K{constructor(e){this.name=e,this._logLevel=W,this._logHandler=G,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?H[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...t),this._logHandler(this,B.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...t),this._logHandler(this,B.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.INFO,...t),this._logHandler(this,B.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.WARN,...t),this._logHandler(this,B.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...t),this._logHandler(this,B.ERROR,...t)}}let Q,Y;const X=new WeakMap,$=new WeakMap,J=new WeakMap,Z=new WeakMap,ee=new WeakMap;let te={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $.get(e);if("objectStoreNames"===t)return e.objectStoreNames||J.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return re(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ne(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(se(this),n),re(X.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return re(e.apply(se(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(se(this),t,...i);return J.set(s,t.sort?t.sort():[t]),re(s)}}function ie(e){return"function"===typeof e?ne(e):(e instanceof IDBTransaction&&function(e){if($.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});$.set(e,t)}(e),t=e,(Q||(Q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,te):e);var t}function re(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(re(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&X.set(t,e)}).catch(()=>{}),ee.set(t,e),t}(e);if(Z.has(e))return Z.get(e);const t=ie(e);return t!==e&&(Z.set(e,t),ee.set(t,e)),t}const se=e=>ee.get(e);const oe=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],le=new Map;function ce(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(le.get(t))return le.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=ae.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!oe.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return le.set(t,s),s}!function(e){te=e(te)}(e=>c(c({},e),{},{get:(t,n,i)=>ce(t,n)||e.get(t,n,i),has:(t,n)=>!!ce(t,n)||e.has(t,n)}));class ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const de="@firebase/app",he="0.9.13",fe=new K("@firebase/app"),pe="@firebase/app-compat",me="@firebase/analytics-compat",ge="@firebase/analytics",ye="@firebase/app-check-compat",ve="@firebase/app-check",be="@firebase/auth",xe="@firebase/auth-compat",we="@firebase/database",_e="@firebase/database-compat",ke="@firebase/functions",Ee="@firebase/functions-compat",Te="@firebase/installations",Ne="@firebase/installations-compat",Se="@firebase/messaging",Ce="@firebase/messaging-compat",Ie="@firebase/performance",Ae="@firebase/performance-compat",Pe="@firebase/remote-config",je="@firebase/remote-config-compat",De="@firebase/storage",Re="@firebase/storage-compat",Me="@firebase/firestore",Oe="@firebase/firestore-compat",Le="firebase",Fe="[DEFAULT]",ze={[de]:"fire-core",[pe]:"fire-core-compat",[ge]:"fire-analytics",[me]:"fire-analytics-compat",[ve]:"fire-app-check",[ye]:"fire-app-check-compat",[be]:"fire-auth",[xe]:"fire-auth-compat",[we]:"fire-rtdb",[_e]:"fire-rtdb-compat",[ke]:"fire-fn",[Ee]:"fire-fn-compat",[Te]:"fire-iid",[Ne]:"fire-iid-compat",[Se]:"fire-fcm",[Ce]:"fire-fcm-compat",[Ie]:"fire-perf",[Ae]:"fire-perf-compat",[Pe]:"fire-rc",[je]:"fire-rc-compat",[De]:"fire-gcs",[Re]:"fire-gcs-compat",[Me]:"fire-fst",[Oe]:"fire-fst-compat","fire-js":"fire-js",[Le]:"fire-js-all"},Ue=new Map,Ve=new Map;function Be(e,t){try{e.container.addComponent(t)}catch(n){fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function He(e){const t=e.name;if(Ve.has(t))return fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ve.set(t,e);for(const n of Ue.values())Be(n,e);return!0}function We(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const qe=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ge{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new L("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qe.create("app-deleted",{appName:this._name})}}const Ke="9.23.0";function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw qe.create("bad-app-name",{appName:String(r)});if(n||(n=b()),!n)throw qe.create("no-options");const s=Ue.get(r);if(s){if(I(n,s.options)&&I(i,s.config))return s;throw qe.create("duplicate-app",{appName:r})}const o=new U(r);for(const l of Ve.values())o.addComponent(l);const a=new Ge(n,i,o);return Ue.set(r,a),a}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe;const t=Ue.get(e);if(!t&&e===Fe&&b())return Qe();if(!t)throw qe.create("no-app",{appName:e});return t}function Xe(e,t,n){var i;let r=null!==(i=ze[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fe.warn(e.join(" "))}He(new L("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const $e="firebase-heartbeat-store";let Je=null;function Ze(){return Je||(Je=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=re(o);return i&&o.addEventListener("upgradeneeded",e=>{i(re(o.result),e.oldVersion,e.newVersion,re(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($e)}}).catch(e=>{throw qe.create("idb-open",{originalErrorMessage:e.message})})),Je}async function et(e,t){try{const n=(await Ze()).transaction($e,"readwrite"),i=n.objectStore($e);await i.put(t,tt(e)),await n.done}catch(n){if(n instanceof N)fe.warn(n.message);else{const e=qe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});fe.warn(e.message)}}}function tt(e){return"".concat(e.name,"!").concat(e.options.appId)}class nt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=it();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=it(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),st(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),st(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function it(){return(new Date).toISOString().substring(0,10)}class rt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!T()&&new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ze();return await t.transaction($e).objectStore($e).get(tt(e))}catch(t){if(t instanceof N)fe.warn(t.message);else{const e=qe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});fe.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function st(e){return f(JSON.stringify({version:2,heartbeats:e})).length}var ot;ot="",He(new L("platform-logger",e=>new ue(e),"PRIVATE")),He(new L("heartbeat",e=>new nt(e),"PRIVATE")),Xe(de,he,ot),Xe(de,he,"esm2017"),Xe("fire-js","");Xe("firebase","9.23.0","app");function at(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ct=lt,ut=new S("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dt=new K("@firebase/auth");function ht(e){if(dt.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];dt.error("Auth (".concat(Ke,"): ").concat(e),...n)}}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw gt(e,...n)}function pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return gt(e,...n)}function mt(e,t,n){const i=Object.assign(Object.assign({},ct()),{[t]:n});return new S("auth","Firebase",i).create(t,{appName:e.name})}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return ut.create(e,...n)}function yt(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw gt(t,...i)}}function vt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ht(t),new Error(t)}function bt(e,t){e||vt(t)}function xt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function wt(){return"http:"===_t()||"https:"===_t()}function _t(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function kt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Et{constructor(e,t){this.shortDelay=e,this.longDelay=t,bt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return kt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tt(e,t){bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Nt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const St={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ct=new Et(3e4,6e4);function It(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function At(e,t,n,i){return Pt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=P(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Nt.fetch()(Dt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))})}async function Pt(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},St),t);try{const t=new Rt(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw Mt(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Mt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Mt(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw mt(e,a,o);ft(e,a)}}catch(r){if(r instanceof N)throw r;ft(e,"network-request-failed",{message:String(r)})}}async function jt(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await At(e,t,n,i,r);return"mfaPendingCredential"in s&&ft(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Dt(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?Tt(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}class Rt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pt(this.auth,"network-request-failed")),Ct.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mt(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=pt(e,t,i);return r.customData._tokenResponse=n,r}function Ot(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Lt(e){return 1e3*Number(e)}function Ft(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(ht("Failed to decode base64 JWT payload"),null)}catch(r){return ht("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}async function zt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof N&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ut{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Vt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ot(this.lastLoginAt),this.creationTime=Ot(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bt(e){var t;const n=e.auth,i=await e.getIdToken(),r=await zt(e,async function(e,t){return At(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));yt(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=at(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class Ht{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt("undefined"!==typeof e.idToken,"internal-error"),yt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Ft(e);return yt(t,"internal-error"),yt("undefined"!==typeof t.exp,"internal-error"),yt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yt(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Pt(e,{},async()=>{const n=P({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Dt(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Nt.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Ht;return n&&(yt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(yt("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(yt("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ht,this.toJSON())}_performRefresh(){return vt("not implemented")}}function Wt(e,t){yt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class qt{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=at(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ut(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Vt(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await zt(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=O(e),i=await n.getIdToken(t),r=Ft(i);yt(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ot(Lt(r.auth_time)),issuedAtTime:Ot(Lt(r.iat)),expirationTime:Ot(Lt(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=O(e);await Bt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Bt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await zt(this,async function(e,t){return At(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,h=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:_}=t;yt(v&&_,e,"internal-error");const k=Ht.fromJSON(this.name,_);yt("string"===typeof v,e,"internal-error"),Wt(u,e.name),Wt(d,e.name),yt("boolean"===typeof b,e,"internal-error"),yt("boolean"===typeof x,e,"internal-error"),Wt(h,e.name),Wt(f,e.name),Wt(p,e.name),Wt(m,e.name),Wt(g,e.name),Wt(y,e.name);const E=new qt({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Ht;i.updateFromServerResponse(t);const r=new qt({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Bt(r),r}}const Gt=new Map;function Kt(e){bt(e instanceof Function,"Expected a class definition");let t=Gt.get(e);return t?(bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Gt.set(e,t),t)}class Qt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qt.type="NONE";const Yt=Qt;function Xt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class $t{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Xt(this.userKey,i.apiKey,r),this.fullPersistenceKey=Xt("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new $t(Kt(Yt),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||Kt(Yt);const s=Xt(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=qt._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(l){}})),new $t(r,e,n)):new $t(r,e,n)}}function Jt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(sn(t))return"Blackberry";if(on(t))return"Webos";if(en(t))return"Safari";if((t.includes("chrome/")||tn(t))&&!t.includes("edge/"))return"Chrome";if(rn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/firefox\//i.test(e)}function en(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/crios\//i.test(e)}function nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/iemobile/i.test(e)}function rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/android/i.test(e)}function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/blackberry/i.test(e)}function on(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/webos/i.test(e)}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ln(){return function(){const e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return an(e)||rn(e)||on(e)||sn(e)||/windows phone/i.test(e)||nn(e)}function un(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jt(k());break;case"Worker":t="".concat(Jt(k()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ke,"/").concat(i)}async function dn(e,t){return At(e,"GET","/v2/recaptchaConfig",It(e,t))}function hn(e){return void 0!==e&&void 0!==e.enterprise}class fn{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function pn(e){return new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=pt("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})}function mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gn{constructor(e){this.type="recaptcha-enterprise",this.auth=xn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;hn(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{dn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new fn(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&hn(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));pn("https://www.google.com/recaptcha/enterprise.js?render="+r).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function yn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new gn(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class vn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(r){i(r)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class bn{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wn(this),this.idTokenSubscription=new wn(this),this.beforeStateQueue=new vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ut,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Kt(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?O(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Kt(e))})}async initializeRecaptchaConfig(){const e=await dn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new fn(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new gn(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new S("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Kt(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Kt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return yt(s,this,"internal-error"),s.then(()=>r(this.currentUser)),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(dt.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];dt.warn("Auth (".concat(Ke,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function xn(e){return O(e)}class wn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new R(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(e,t,n){const i=xn(e);yt(i._canInitEmulator,i,"emulator-config-failed"),yt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=kn(t),{host:o,port:a}=function(e){const t=kn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:En(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:En(t)}}}(t),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function kn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function En(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Tn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vt("not implemented")}_getIdTokenResponse(e){return vt("not implemented")}_linkToIdToken(e,t){return vt("not implemented")}_getReauthenticationResolver(e){return vt("not implemented")}}async function Nn(e,t){return At(e,"POST","/v1/accounts:update",t)}async function Sn(e,t){return jt(e,"POST","/v1/accounts:signInWithPassword",It(e,t))}class Cn extends Tn{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Cn(e,t,"password")}static _fromEmailAndCode(e,t){return new Cn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await yn(e,n,"signInWithPassword");return Sn(e,t)}return Sn(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await yn(e,n,"signInWithPassword");return Sn(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return jt(e,"POST","/v1/accounts:signInWithEmailLink",It(e,t))}(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Nn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return jt(e,"POST","/v1/accounts:signInWithEmailLink",It(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function In(e,t){return jt(e,"POST","/v1/accounts:signInWithIdp",It(e,t))}class An extends Tn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new An(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=at(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new An(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return In(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,In(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,In(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=P(t)}return e}}const Pn={USER_NOT_FOUND:"user-not-found"};class jn extends Tn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new jn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new jn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return jt(e,"POST","/v1/accounts:signInWithPhoneNumber",It(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await jt(e,"POST","/v1/accounts:signInWithPhoneNumber",It(e,t));if(n.temporaryProof)throw Mt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return jt(e,"POST","/v1/accounts:signInWithPhoneNumber",It(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Pn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new jn({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Dn{constructor(e){var t,n,i,r,s,o;const a=j(D(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);yt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=j(D(e)).link,n=t?j(D(t)).deep_link_id:null,i=j(D(e)).deep_link_id;return(i?j(D(i)).link:null)||i||n||t||e}(e);try{return new Dn(t)}catch(n){return null}}}class Rn{constructor(){this.providerId=Rn.PROVIDER_ID}static credential(e,t){return Cn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Dn.parseLink(t);return yt(n,"argument-error"),Cn._fromEmailAndCode(e,n.code,n.tenantId)}}Rn.PROVIDER_ID="password",Rn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Rn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Mn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class On extends Mn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ln extends On{constructor(){super("facebook.com")}static credential(e){return An._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ln.credential(t.oauthAccessToken)}catch(n){return null}}}Ln.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ln.PROVIDER_ID="facebook.com";class Fn extends On{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return An._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Fn.credential(n,i)}catch(r){return null}}}Fn.GOOGLE_SIGN_IN_METHOD="google.com",Fn.PROVIDER_ID="google.com";class zn extends On{constructor(){super("github.com")}static credential(e){return An._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zn.credential(t.oauthAccessToken)}catch(n){return null}}}zn.GITHUB_SIGN_IN_METHOD="github.com",zn.PROVIDER_ID="github.com";class Un extends On{constructor(){super("twitter.com")}static credential(e,t){return An._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Un.credential(n,i)}catch(r){return null}}}async function Vn(e,t){return jt(e,"POST","/v1/accounts:signUp",It(e,t))}Un.TWITTER_SIGN_IN_METHOD="twitter.com",Un.PROVIDER_ID="twitter.com";class Bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await qt._fromIdTokenResponse(e,n,i),s=Hn(n);return new Bn({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Hn(n);return new Bn({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Hn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Wn extends N{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Wn.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Wn(e,t,n,i)}}function qn(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wn._fromErrorAndOperation(e,n,t,i);throw n})}async function Gn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await zt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Bn._forOperation(e,"link",i)}async function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e,r="reauthenticate";try{const s=await zt(e,qn(i,r,t,e),n);yt(s.idToken,i,"internal-error");const o=Ft(s.idToken);yt(o,i,"internal-error");const{sub:a}=o;return yt(e.uid===a,i,"user-mismatch"),Bn._forOperation(e,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&ft(i,"user-mismatch"),s}}async function Qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i="signIn",r=await qn(e,i,t),s=await Bn._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function Yn(e,t){return Qn(xn(e),t)}function Xn(e){return O(e).signOut()}new WeakMap;const $n="__sak";class Jn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($n,"1"),this.storage.removeItem($n),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Zn extends Jn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=k();return en(e)||an(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=cn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);ln()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zn.type="LOCAL";const ei=Zn;class ti extends Jn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ti.type="SESSION";const ni=ti;class ii{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ii(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}ii.receivers=[];class si{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const l=ri("",20);i.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function oi(){return window}function ai(){return"undefined"!==typeof oi().WorkerGlobalScope&&"function"===typeof oi().importScripts}const li="firebaseLocalStorageDb",ci="firebaseLocalStorage",ui="fbase_key";class di{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hi(e,t){return e.transaction([ci],t?"readwrite":"readonly").objectStore(ci)}function fi(){const e=indexedDB.open(li,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ci,{keyPath:ui})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ci)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(li);return new di(e).toPromise()}(),t(await fi()))})})}async function pi(e,t,n){const i=hi(e,!0).put({[ui]:t,value:n});return new di(i).toPromise()}function mi(e,t){const n=hi(e,!0).delete(t);return new di(n).toPromise()}class gi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await fi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ai()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ii._getInstance(ai()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new si(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fi();return await pi(e,$n,"1"),await mi(e,$n),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=hi(e,!1).get(t),i=await new di(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=hi(e,!1).getAll();return new di(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}gi.type="LOCAL";const yi=gi;mn("rcb"),new Et(3e4,6e4);const vi="recaptcha";async function bi(e,t,n){var i;const r=await n.verify();try{let s;if(yt("string"===typeof r,e,"argument-error"),yt(n.type===vi,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){yt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return At(e,"POST","/v2/accounts/mfaEnrollment:start",It(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{yt("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;yt(n,e,"missing-multi-factor-info");const o=await function(e,t){return At(e,"POST","/v2/accounts/mfaSignIn:start",It(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return At(e,"POST","/v1/accounts:sendVerificationCode",It(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class xi{constructor(e){this.providerId=xi.PROVIDER_ID,this.auth=xn(e)}verifyPhoneNumber(e,t){return bi(this.auth,e,O(t))}static credential(e,t){return jn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return xi.credentialFromTaggedObject(t)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?jn._fromTokenResponse(n,i):null}}function wi(e,t){return t?Kt(t):(yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xi.PROVIDER_ID="phone",xi.PHONE_SIGN_IN_METHOD="phone";class _i extends Tn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return In(e,this._buildIdpRequest())}_linkToIdToken(e,t){return In(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return In(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ki(e){return Qn(e.auth,new _i(e),e.bypassAuthState)}function Ei(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Kn(n,new _i(e),e.bypassAuthState)}async function Ti(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Gn(n,new _i(e),e.bypassAuthState)}class Ni{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ki;case"linkViaPopup":case"linkViaRedirect":return Ti;case"reauthViaPopup":case"reauthViaRedirect":return Ei;default:ft(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Si=new Et(2e3,1e4);class Ci extends Ni{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Ci.currentPopupAction&&Ci.currentPopupAction.cancel(),Ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){bt(1===this.filter.length,"Popup operations only handle one event");const e=ri();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Si.get())};e()}}Ci.currentPopupAction=null;const Ii=new Map;class Ai extends Ni{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ii.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Di(t),i=ji(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ii.set(this.auth._key(),e)}return this.bypassAuthState||Ii.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Pi(e,t){Ii.set(e._key(),t)}function ji(e){return Kt(e._redirectPersistence)}function Di(e){return Xt("pendingRedirect",e.config.apiKey,e.name)}async function Ri(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=xn(e),r=wi(i,t),s=new Ai(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Mi{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Li(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Li(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oi(e))}saveEventToCache(e){this.cachedEventUids.add(Oi(e)),this.lastProcessedEventTime=Date.now()}}function Oi(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Li(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Fi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zi=/^https?/;async function Ui(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return At(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Vi(i))return}catch(n){}ft(e,"unauthorized-domain")}function Vi(e){const t=xt(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!zi.test(n))return!1;if(Fi.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Bi=new Et(3e4,6e4);function Hi(){const e=oi().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Wi=null;function qi(e){return Wi=Wi||function(e){return new Promise((t,n)=>{var i,r,s;function o(){Hi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Hi(),n(pt(e,"network-request-failed"))},timeout:Bi.get()})}if(null===(r=null===(i=oi().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=oi().gapi)||void 0===s?void 0:s.load)){const t=mn("iframefcb");return oi()[t]=()=>{gapi.load?o():n(pt(e,"network-request-failed"))},pn("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Wi=null,e})}(e),Wi}const Gi=new Et(5e3,15e3),Ki={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yi(e){const t=e.config;yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Tt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:Ke},r=Qi.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(P(i).slice(1))}const Xi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $i{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Ji(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Xi),{width:i.toString(),height:r.toString(),top:s,left:o}),c=k().toLowerCase();n&&(a=tn(c)?"_blank":n),Zt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return an(arguments.length>0&&void 0!==arguments[0]?arguments[0]:k())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new $i(null);const d=window.open(t||"",a,u);yt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new $i(d)}const Zi="__/auth/handler",er="emulator/auth/handler",tr=encodeURIComponent("fac");async function nr(e,t,n,i,r,s){yt(e.config.authDomain,e,"auth-domain-config-required"),yt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Ke,eventId:r};if(t instanceof Mn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof On){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(tr,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Zi);return Tt(t,er)}(e),"?").concat(P(a).slice(1)).concat(c)}const ir="webStorageSupport";const rr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ni,this._completeRedirectFn=Ri,this._overrideRedirectResult=Pi}async _openPopup(e,t,n,i){var r;bt(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Ji(e,await nr(e,t,n,xt(),i),ri())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){oi().location.href=e}(await nr(e,t,n,xt(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await qi(e),n=oi().gapi;return yt(n,e,"internal-error"),t.open({where:document.body,url:Yi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ki,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=pt(e,"network-request-failed"),s=oi().setTimeout(()=>{i(r)},Gi.get());function o(){oi().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}(e),n=new Mi(e);return t.register("authEvent",t=>{yt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ir,{type:ir},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[ir];void 0!==r&&t(!!r),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ui(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cn()||en()||an()}};var sr="@firebase/auth",or="0.23.2";class ar{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const lr=x("authIdTokenMaxAge")||300;let cr=null;function ur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();const t=We(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=We(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(I(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ft(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:rr,persistence:[yi,ei,ni]}),i=x("authTokenSyncURL");if(i){const e=(r=i,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>lr)return;const i=null===t||void 0===t?void 0:t.token;cr!==i&&(cr=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){O(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,i){O(e).onIdTokenChanged(t,n,i)}(n,t=>e(t))}var r;const s=y("auth");return s&&_n(n,"http://".concat(s)),n}var dr;dr="Browser",He(new L("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:dr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:un(dr)},c=new bn(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Kt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),He(new L("auth-internal",e=>(e=>new ar(e))(xn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(sr,or,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(dr)),Xe(sr,or,"esm2017");var hr,fr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pr={},mr=mr||{},gr=fr||self;function yr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function vr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var br="closure_uid_"+(1e9*Math.random()>>>0),xr=0;function wr(e,t,n){return e.call.apply(e.bind,arguments)}function _r(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function kr(e,t,n){return(kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wr:_r).apply(null,arguments)}function Er(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Tr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function Nr(){this.s=this.s,this.o=this.o}Nr.prototype.s=!1,Nr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,br)&&e[br]||(e[br]=++xr))},Nr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Sr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Cr(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Ir(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(yr(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function Ar(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ar.prototype.h=function(){this.defaultPrevented=!0};var Pr=function(){if(!gr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{gr.addEventListener("test",()=>{},t),gr.removeEventListener("test",()=>{},t)}catch(n){}return e}();function jr(e){return/^[\s\xa0]*$/.test(e)}function Dr(){var e=gr.navigator;return e&&(e=e.userAgent)?e:""}function Rr(e){return-1!=Dr().indexOf(e)}function Mr(e){return Mr[" "](e),e}Mr[" "]=function(){};var Or,Lr,Fr=Rr("Opera"),zr=Rr("Trident")||Rr("MSIE"),Ur=Rr("Edge"),Vr=Ur||zr,Br=Rr("Gecko")&&!(-1!=Dr().toLowerCase().indexOf("webkit")&&!Rr("Edge"))&&!(Rr("Trident")||Rr("MSIE"))&&!Rr("Edge"),Hr=-1!=Dr().toLowerCase().indexOf("webkit")&&!Rr("Edge");function Wr(){var e=gr.document;return e?e.documentMode:void 0}e:{var qr="",Gr=function(){var e=Dr();return Br?/rv:([^\);]+)(\)|;)/.exec(e):Ur?/Edge\/([\d\.]+)/.exec(e):zr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Hr?/WebKit\/(\S+)/.exec(e):Fr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Gr&&(qr=Gr?Gr[1]:""),zr){var Kr=Wr();if(null!=Kr&&Kr>parseFloat(qr)){Or=String(Kr);break e}}Or=qr}if(gr.document&&zr){var Qr=Wr();Lr=Qr||(parseInt(Or,10)||void 0)}else Lr=void 0;var Yr=Lr;function Xr(e,t){if(Ar.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Br){e:{try{Mr(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$r[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Xr.$.h.call(this)}}Tr(Xr,Ar);var $r={2:"touch",3:"pen",4:"mouse"};Xr.prototype.h=function(){Xr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Jr="closure_listenable_"+(1e6*Math.random()|0),Zr=0;function es(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++Zr,this.fa=this.ia=!1}function ts(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ns(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function is(e){const t={};for(const n in e)t[n]=e[n];return t}const rs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ss(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<rs.length;t++)n=rs[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function os(e){this.src=e,this.g={},this.h=0}function as(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Sr(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ts(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ls(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}os.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ls(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new es(t,this.src,s,!!i,r)).ia=n,e.push(t)),t};var cs="closure_lm_"+(1e6*Math.random()|0),us={};function ds(e,t,n,i,r){if(i&&i.once)return fs(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ds(e,t[s],n,i,r);return null}return n=xs(n),e&&e[Jr]?e.O(t,n,vr(i)?!!i.capture:!!i,r):hs(e,t,n,!1,i,r)}function hs(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=vr(r)?!!r.capture:!!r,a=vs(e);if(a||(e[cs]=a=new os(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ys;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Pr||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(gs(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function fs(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)fs(e,t[s],n,i,r);return null}return n=xs(n),e&&e[Jr]?e.P(t,n,vr(i)?!!i.capture:!!i,r):hs(e,t,n,!0,i,r)}function ps(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)ps(e,t[s],n,i,r);else i=vr(i)?!!i.capture:!!i,n=xs(n),e&&e[Jr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ls(s=e.g[t],n,i,r))&&(ts(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=vs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ls(t,n,i,r)),(n=-1<e?t[e]:null)&&ms(n))}function ms(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Jr])as(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(gs(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=vs(t))?(as(n,e),0==n.h&&(n.src=null,t[cs]=null)):ts(e)}}}function gs(e){return e in us?us[e]:us[e]="on"+e}function ys(e,t){if(e.fa)e=!0;else{t=new Xr(t,this);var n=e.listener,i=e.la||e.src;e.ia&&ms(e),e=n.call(i,t)}return e}function vs(e){return(e=e[cs])instanceof os?e:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(e){return"function"===typeof e?e:(e[bs]||(e[bs]=function(t){return e.handleEvent(t)}),e[bs])}function ws(){Nr.call(this),this.i=new os(this),this.S=this,this.J=null}function _s(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new Ar(t,e);else if(t instanceof Ar)t.target=t.target||e;else{var r=t;ss(t=new Ar(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=ks(o,i,!0,t)&&r}if(r=ks(o=t.g=e,i,!0,t)&&r,r=ks(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=ks(o=t.g=n[s],i,!1,t)&&r}function ks(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&as(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}Tr(ws,Nr),ws.prototype[Jr]=!0,ws.prototype.removeEventListener=function(e,t,n,i){ps(this,e,t,n,i)},ws.prototype.N=function(){if(ws.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)ts(n[i]);delete t.g[e],t.h--}}this.J=null},ws.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ws.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Es=gr.JSON.stringify;function Ts(){var e=js;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ns=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ss,e=>e.reset());class Ss{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Cs(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Is(e){gr.setTimeout(()=>{throw e},0)}let As,Ps=!1,js=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ns.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ds=()=>{const e=gr.Promise.resolve(void 0);As=()=>{e.then(Rs)}};var Rs=()=>{for(var e;e=Ts();){try{e.h.call(e.g)}catch(n){Is(n)}var t=Ns;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ps=!1};function Ms(e,t){ws.call(this),this.h=e||1,this.g=t||gr,this.j=kr(this.qb,this),this.l=Date.now()}function Os(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ls(e,t,n){if("function"===typeof e)n&&(e=kr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=kr(e.handleEvent,e)}return 2147483647<Number(t)?-1:gr.setTimeout(e,t||0)}function Fs(e){e.g=Ls(()=>{e.g=null,e.i&&(e.i=!1,Fs(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Tr(Ms,ws),(hr=Ms.prototype).ga=!1,hr.T=null,hr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_s(this,"tick"),this.ga&&(Os(this),this.start()))}},hr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},hr.N=function(){Ms.$.N.call(this),Os(this),delete this.g};class zs extends Nr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fs(this)}N(){super.N(),this.g&&(gr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(e){Nr.call(this),this.h=e,this.g={}}Tr(Us,Nr);var Vs=[];function Bs(e,t,n,i){Array.isArray(n)||(n&&(Vs[0]=n.toString()),n=Vs);for(var r=0;r<n.length;r++){var s=ds(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Hs(e){ns(e.g,function(e,t){this.g.hasOwnProperty(t)&&ms(e)},e),e.g={}}function Ws(){this.g=!0}function qs(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Es(n)}catch(a){return t}}(e,n)+(i?" "+i:"")})}Us.prototype.N=function(){Us.$.N.call(this),Hs(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ws.prototype.Ea=function(){this.g=!1},Ws.prototype.info=function(){};var Gs={},Ks=null;function Qs(){return Ks=Ks||new ws}function Ys(e){Ar.call(this,Gs.Ta,e)}function Xs(e){const t=Qs();_s(t,new Ys(t))}function $s(e,t){Ar.call(this,Gs.STAT_EVENT,e),this.stat=t}function Js(e){const t=Qs();_s(t,new $s(t,e))}function Zs(e,t){Ar.call(this,Gs.Ua,e),this.size=t}function eo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return gr.setTimeout(function(){e()},t)}Gs.Ta="serverreachability",Tr(Ys,Ar),Gs.STAT_EVENT="statevent",Tr($s,Ar),Gs.Ua="timingevent",Tr(Zs,Ar);var to={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},no={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function io(){}function ro(e){return e.h||(e.h=e.i())}function so(){}io.prototype.h=null;var oo,ao={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lo(){Ar.call(this,"d")}function co(){Ar.call(this,"c")}function uo(){}function ho(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Us(this),this.P=po,e=Vr?125:void 0,this.V=new Ms(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fo}function fo(){this.i=null,this.g="",this.h=!1}Tr(lo,Ar),Tr(co,Ar),Tr(uo,io),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},oo=new uo;var po=45e3,mo={},go={};function yo(e,t,n){e.L=1,e.v=Oo(Po(t)),e.s=n,e.S=!0,vo(e,null)}function vo(e,t){e.G=Date.now(),_o(e),e.A=Po(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),Yo(n.i,"t",i),e.C=0,n=e.l.J,e.h=new fo,e.g=Xa(e.l,n?t:null,!e.s),0<e.O&&(e.M=new zs(kr(e.Pa,e,e.g),e.O)),Bs(e.U,e.g,"readystatechange",e.nb),t=e.I?is(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Xs(),function(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function bo(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function xo(e,t,n){let i,r=!0;for(;!e.J&&e.C<n.length;){if(i=wo(e,n),i==go){4==t&&(e.o=4,Js(14),r=!1),qs(e.j,e.m,null,"[Incomplete Response]");break}if(i==mo){e.o=4,Js(15),qs(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}qs(e.j,e.m,i,null),So(e,i)}bo(e)&&i!=go&&i!=mo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Js(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ba(t),t.M=!0,Js(11))):(qs(e.j,e.m,n,"[Invalid Chunked Response]"),No(e),To(e))}function wo(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?go:(n=Number(t.substring(n,i)),isNaN(n)?mo:(i+=1)+n>t.length?go:(t=t.slice(i,i+n),e.C=i+n,t))}function _o(e){e.Y=Date.now()+e.P,ko(e,e.P)}function ko(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eo(kr(e.lb,e),t)}function Eo(e){e.B&&(gr.clearTimeout(e.B),e.B=null)}function To(e){0==e.l.H||e.J||qa(e.l,e)}function No(e){Eo(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Os(e.V),Hs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function So(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||na(n.i,e)))if(!e.K&&na(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Wa(n),Ra(n)}Va(n),Js(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=eo(kr(n.ib,n),6e3));if(1>=ta(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Ka(n,11)}else if((e.K||n.g==e)&&Wa(n),!jr(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ia(s,s.h),s.h=null))}if(i.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,Mo(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((i=n).wa=Ya(i,i.J?i.pa:null,i.Y),o.K){ra(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(Eo(a),_o(a)),i.g=o}else Ua(i);0<n.j.length&&Oa(n)}else"stop"!=c[0]&&"close"!=c[0]||Ka(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ka(n,7):Da(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Xs()}catch(c){}}function Co(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(yr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(yr(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(hr=ho.prototype).setTimeout=function(e){this.P=e},hr.nb=function(e){e=e.target;const t=this.M;t&&3==Sa(e)?t.l():this.Pa(e)},hr.Pa=function(e){try{if(e==this.g)e:{const u=Sa(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Vr||this.g&&(this.h.h||this.g.ja()||Ca(this.g)))){this.J||4!=u||7==t||Xs(),Eo(this);var n=this.g.da();this.ca=n;t:if(bo(this)){var i=Ca(this.g);e="";var r=i.length,s=4==Sa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){No(this),To(this);var o="";break t}this.h.i=new gr.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jr(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Js(12),No(this),To(this);break e}qs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,So(this,n)}this.S?(xo(this,u,o),Vr&&this.i&&3==u&&(Bs(this.U,this.V,"tick",this.mb),this.V.start())):(qs(this.j,this.m,o,null),So(this,o)),4==u&&No(this),this.i&&!this.J&&(4==u?qa(this.l,this):(this.i=!1,_o(this)))}else(function(e){const t={};e=(e.g&&2<=Sa(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(jr(e[i]))continue;var n=Cs(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Js(12)):(this.o=0,Js(13)),No(this),To(this)}}}catch(u){}},hr.mb=function(){if(this.g){var e=Sa(this.g),t=this.g.ja();this.C<t.length&&(Eo(this),xo(this,e,t),this.i&&4!=e&&_o(this))}},hr.cancel=function(){this.J=!0,No(this)},hr.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Xs(),Js(17)),No(this),this.o=2,To(this)):ko(this,this.Y-e)};var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ao(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ao){this.h=e.h,jo(this,e.j),this.s=e.s,this.g=e.g,Do(this,e.m),this.l=e.l;var t=e.i,n=new qo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ro(this,n),this.o=e.o}else e&&(t=String(e).match(Io))?(this.h=!1,jo(this,t[1]||"",!0),this.s=Lo(t[2]||""),this.g=Lo(t[3]||"",!0),Do(this,t[4]),this.l=Lo(t[5]||"",!0),Ro(this,t[6]||"",!0),this.o=Lo(t[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}function Po(e){return new Ao(e)}function jo(e,t,n){e.j=n?Lo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Do(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ro(e,t,n){t instanceof qo?(e.i=t,function(e,t){t&&!e.j&&(Go(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Ko(this,t),Yo(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Fo(t,Ho)),e.i=new qo(t,e.h))}function Mo(e,t,n){e.i.set(t,n)}function Oo(e){return Mo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Lo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Fo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,zo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ao.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Fo(t,Uo,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Fo(t,Uo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Fo(n,"/"==n.charAt(0)?Bo:Vo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Fo(n,Wo)),e.join("")};var Uo=/[#\/\?@]/g,Vo=/[#\?:]/g,Bo=/[#\?]/g,Ho=/[#\?@]/g,Wo=/#/g;function qo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Go(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ko(e,t){Go(e),t=Xo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qo(e,t){return Go(e),t=Xo(e,t),e.g.has(t)}function Yo(e,t,n){Ko(e,t),0<n.length&&(e.i=null,e.g.set(Xo(e,t),Cr(n)),e.h+=n.length)}function Xo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(hr=qo.prototype).add=function(e,t){Go(this),this.i=null,e=Xo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},hr.forEach=function(e,t){Go(this),this.g.forEach(function(n,i){n.forEach(function(n){e.call(t,n,i,this)},this)},this)},hr.ta=function(){Go(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},hr.Z=function(e){Go(this);let t=[];if("string"===typeof e)Qo(this,e)&&(t=t.concat(this.g.get(Xo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},hr.set=function(e,t){return Go(this),this.i=null,Qo(this,e=Xo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},hr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},hr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};var $o=class{constructor(e,t){this.g=e,this.map=t}};function Jo(e){this.l=e||Zo,gr.PerformanceNavigationTiming?e=0<(e=gr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(gr.g&&gr.g.Ka&&gr.g.Ka()&&gr.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zo=10;function ea(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ta(e){return e.h?1:e.g?e.g.size:0}function na(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ia(e,t){e.g?e.g.add(t):e.h=t}function ra(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sa(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Cr(e.i)}Jo.prototype.cancel=function(){if(this.i=sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var oa,aa=class{stringify(e){return gr.JSON.stringify(e,void 0)}parse(e){return gr.JSON.parse(e,void 0)}};function la(){this.g=new aa}function ca(e,t,n){const i=n||"";try{Co(e,function(e,n){let r=e;vr(e)&&(r=Es(e)),t.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function ua(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function da(e){this.l=e.fc||null,this.j=e.ob||!1}function ha(e,t){ws.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=fa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tr(da,io),da.prototype.g=function(){return new ha(this.l,this.j)},da.prototype.i=(oa={},function(){return oa}),Tr(ha,ws);var fa=0;function pa(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ma(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ga(e)}function ga(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(hr=ha.prototype).open=function(e,t){if(this.readyState!=fa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ga(this)},hr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||gr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},hr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ma(this)),this.readyState=fa},hr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof gr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pa(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},hr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ma(this):ga(this),3==this.readyState&&pa(this)}},hr.Za=function(e){this.g&&(this.response=this.responseText=e,ma(this))},hr.Ya=function(e){this.g&&(this.response=e,ma(this))},hr.ka=function(){this.g&&ma(this)},hr.setRequestHeader=function(e,t){this.v.append(e,t)},hr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},hr.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ya=gr.JSON.parse;function va(e){ws.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ba,this.L=this.M=!1}Tr(va,ws);var ba="",xa=/^https?$/i,wa=["POST","PUT"];function _a(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ka(e),Ta(e)}function ka(e){e.F||(e.F=!0,_s(e,"complete"),_s(e,"error"))}function Ea(e){if(e.h&&"undefined"!=typeof mr&&(!e.C[1]||4!=Sa(e)||2!=e.da()))if(e.v&&4==Sa(e))Ls(e.La,0,e);else if(_s(e,"readystatechange"),4==Sa(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var r=String(e.I).match(Io)[1]||null;!r&&gr.self&&gr.self.location&&(r=gr.self.location.protocol.slice(0,-1)),i=!xa.test(r?r.toLowerCase():"")}n=i}if(n)_s(e,"complete"),_s(e,"success");else{e.m=6;try{var s=2<Sa(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",ka(e)}}finally{Ta(e)}}}function Ta(e,t){if(e.g){Na(e);const i=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||_s(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function Na(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(gr.clearTimeout(e.A),e.A=null)}function Sa(e){return e.g?e.g.readyState:0}function Ca(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ba:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Dl){return null}}function Ia(e){let t="";return ns(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Aa(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Ia(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Mo(e,t,n))}function Pa(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ja(e){this.Ga=0,this.j=[],this.l=new Ws,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pa("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pa("baseRetryDelayMs",5e3,e),this.hb=Pa("retryDelaySeedMs",1e4,e),this.eb=Pa("forwardChannelMaxRetries",2,e),this.xa=Pa("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Jo(e&&e.concurrentRequestLimit),this.Ja=new la,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Da(e){if(Ma(e),3==e.H){var t=e.W++,n=Po(e.I);if(Mo(n,"SID",e.K),Mo(n,"RID",t),Mo(n,"TYPE","terminate"),Fa(e,n),(t=new ho(e,e.l,t)).L=2,t.v=Oo(Po(n)),n=!1,gr.navigator&&gr.navigator.sendBeacon)try{n=gr.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&gr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Xa(t.l,null),t.g.ha(t.v)),t.G=Date.now(),_o(t)}Qa(e)}function Ra(e){e.g&&(Ba(e),e.g.cancel(),e.g=null)}function Ma(e){Ra(e),e.u&&(gr.clearTimeout(e.u),e.u=null),Wa(e),e.i.cancel(),e.m&&("number"===typeof e.m&&gr.clearTimeout(e.m),e.m=null)}function Oa(e){if(!ea(e.i)&&!e.m){e.m=!0;var t=e.Na;As||Ds(),Ps||(As(),Ps=!0),js.add(t,e),e.C=0}}function La(e,t){var n;n=t?t.m:e.W++;const i=Po(e.I);Mo(i,"SID",e.K),Mo(i,"RID",n),Mo(i,"AID",e.V),Fa(e,i),e.o&&e.s&&Aa(i,e.o,e.s),n=new ho(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=za(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ia(e.i,n),yo(n,i,t)}function Fa(e,t){e.na&&ns(e.na,function(e,n){Mo(t,n,e)}),e.h&&Co({},function(e,n){Mo(t,n,e)})}function za(e,t,n){n=Math.min(e.j.length,n);var i=e.h?kr(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{ca(a,e,"req"+n+"_")}catch(Wl){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function Ua(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;As||Ds(),Ps||(As(),Ps=!0),js.add(t,e),e.A=0}}function Va(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=eo(kr(e.Ma,e),Ga(e,e.A)),e.A++,!0)}function Ba(e){null!=e.B&&(gr.clearTimeout(e.B),e.B=null)}function Ha(e){e.g=new ho(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Po(e.wa);Mo(t,"RID","rpc"),Mo(t,"SID",e.K),Mo(t,"AID",e.V),Mo(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Mo(t,"TO",e.qa),Mo(t,"TYPE","xmlhttp"),Fa(e,t),e.o&&e.s&&Aa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Oo(Po(t)),n.s=null,n.S=!0,vo(n,e)}function Wa(e){null!=e.v&&(gr.clearTimeout(e.v),e.v=null)}function qa(e,t){var n=null;if(e.g==t){Wa(e),Ba(e),e.g=null;var i=2}else{if(!na(e.i,t))return;n=t.F,ra(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;_s(i=Qs(),new Zs(i,n)),Oa(e)}else Ua(e);else if(3==(r=t.o)||0==r&&0<t.ca||!(1==i&&function(e,t){return!(ta(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=eo(kr(e.Na,e,t),Ga(e,e.C)),e.C++,!0))}(e,t)||2==i&&Va(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Ka(e,5);break;case 4:Ka(e,10);break;case 3:Ka(e,6);break;default:Ka(e,2)}}function Ga(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Ka(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=kr(e.pb,e);n||(n=new Ao("//www.google.com/images/cleardot.gif"),gr.location&&"http"==gr.location.protocol||jo(n,"https"),Oo(n)),function(e,t){const n=new Ws;if(gr.Image){const i=new Image;i.onload=Er(ua,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Er(ua,n,i,"TestLoadImage: error",!1,t),i.onabort=Er(ua,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Er(ua,n,i,"TestLoadImage: timeout",!1,t),gr.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(n.toString(),i)}else Js(2);e.H=0,e.h&&e.h.za(t),Qa(e),Ma(e)}function Qa(e){if(e.H=0,e.ma=[],e.h){const t=sa(e.i);0==t.length&&0==e.j.length||(Ir(e.ma,t),Ir(e.ma,e.j),e.i.i.length=0,Cr(e.j),e.j.length=0),e.h.ya()}}function Ya(e,t,n){var i=n instanceof Ao?Po(n):new Ao(n);if(""!=i.g)t&&(i.g=t+"."+i.g),Do(i,i.m);else{var r=gr.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Ao(null);i&&jo(s,i),t&&(s.g=t),r&&Do(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&Mo(i,n,t),Mo(i,"VER",e.ra),Fa(e,i),i}function Xa(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new va(new da({ob:!0})):new va(e.va)).Oa(e.J),t}function $a(){}function Ja(){if(zr&&!(10<=Number(Yr)))throw Error("Environmental error: no available transport.")}function Za(e,t){ws.call(this),this.g=new ja(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!jr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!jr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nl(this)}function el(e){lo.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tl(){co.call(this),this.status=1}function nl(e){this.g=e}function il(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function rl(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function sl(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(hr=va.prototype).Oa=function(e){this.M=e},hr.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oo.g(),this.C=this.u?ro(this.u):ro(oo),this.g.onreadystatechange=kr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void _a(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),r=gr.FormData&&e instanceof gr.FormData,!(0<=Sr(wa,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Na(this),0<this.B&&((this.L=function(e){return zr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.ua,this)):this.A=Ls(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){_a(this,s)}},hr.ua=function(){"undefined"!=typeof mr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_s(this,"timeout"),this.abort(8))},hr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_s(this,"complete"),_s(this,"abort"),Ta(this))},hr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ta(this,!0)),va.$.N.call(this)},hr.La=function(){this.s||(this.G||this.v||this.l?Ea(this):this.kb())},hr.kb=function(){Ea(this)},hr.isActive=function(){return!!this.g},hr.da=function(){try{return 2<Sa(this)?this.g.status:-1}catch(oa){return-1}},hr.ja=function(){try{return this.g?this.g.responseText:""}catch(oa){return""}},hr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ya(t)}},hr.Ia=function(){return this.m},hr.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(hr=ja.prototype).ra=8,hr.H=1,hr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new ho(this,this.l,e);let s=this.s;if(this.U&&(s?(s=is(s),ss(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=za(this,r,t),Mo(n=Po(this.I),"RID",e),Mo(n,"CVER",22),this.F&&Mo(n,"X-HTTP-Session-Id",this.F),Fa(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ia(s)))+"&"+t:this.o&&Aa(n,this.o,s)),ia(this.i,r),this.bb&&Mo(n,"TYPE","init"),this.P?(Mo(n,"$req",t),Mo(n,"SID","null"),r.aa=!0,yo(r,n,null)):yo(r,n,t),this.H=2}}else 3==this.H&&(e?La(this,e):0==this.j.length||ea(this.i)||La(this))},hr.Ma=function(){if(this.u=null,Ha(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=eo(kr(this.jb,this),e)}},hr.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Js(10),Ra(this),Ha(this))},hr.ib=function(){null!=this.v&&(this.v=null,Ra(this),Va(this),Js(19))},hr.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Js(2)):(this.l.info("Failed to ping google.com"),Js(1))},hr.isActive=function(){return!!this.h&&this.h.isActive(this)},(hr=$a.prototype).Ba=function(){},hr.Aa=function(){},hr.za=function(){},hr.ya=function(){},hr.isActive=function(){return!0},hr.Va=function(){},Ja.prototype.g=function(e,t){return new Za(e,t)},Tr(Za,ws),Za.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Js(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ya(e,null,e.Y),Oa(e)},Za.prototype.close=function(){Da(this.g)},Za.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Es(e),e=n);t.j.push(new $o(t.fb++,e)),3==t.H&&Oa(t)},Za.prototype.N=function(){this.g.h=null,delete this.j,Da(this.g),delete this.g,Za.$.N.call(this)},Tr(el,lo),Tr(tl,co),Tr(nl,$a),nl.prototype.Ba=function(){_s(this.g,"a")},nl.prototype.Aa=function(e){_s(this.g,new el(e))},nl.prototype.za=function(e){_s(this.g,new tl)},nl.prototype.ya=function(){_s(this.g,"b")},Tr(il,function(){this.blockSize=-1}),il.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},il.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=n;)rl(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){rl(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){rl(this,i),r=0;break}}this.h=r,this.i+=t},il.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var ol={};function al(e){return-128<=e&&128>e?function(e,t){var n=ol;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new sl([0|e],0>e?-1:0)}):new sl([0|e],0>e?-1:0)}function ll(e){if(isNaN(e)||!isFinite(e))return ul;if(0>e)return ml(ll(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=cl;return new sl(t,0)}var cl=4294967296,ul=al(0),dl=al(1),hl=al(16777216);function fl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function pl(e){return-1==e.h}function ml(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new sl(n,~e.h).add(dl)}function gl(e,t){return e.add(ml(t))}function yl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function vl(e,t){this.g=e,this.h=t}function bl(e,t){if(fl(t))throw Error("division by zero");if(fl(e))return new vl(ul,ul);if(pl(e))return t=bl(ml(e),t),new vl(ml(t.g),ml(t.h));if(pl(t))return t=bl(e,ml(t)),new vl(ml(t.g),t.h);if(30<e.g.length){if(pl(e)||pl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=dl,i=t;0>=i.X(e);)n=xl(n),i=xl(i);var r=wl(n,1),s=wl(i,1);for(i=wl(i,2),n=wl(n,2);!fl(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=wl(i,1),n=wl(n,1)}return t=gl(e,r.R(t)),new vl(r,t)}for(r=ul;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=ll(n)).R(t);pl(o)||0<o.X(e);)o=(s=ll(n-=i)).R(t);fl(s)&&(s=dl),r=r.add(s),e=gl(e,o)}return new vl(r,e)}function xl(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new sl(n,e.h)}function wl(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new sl(r,e.h)}(hr=sl.prototype).ea=function(){if(pl(this))return-ml(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:cl+i)*t,t*=cl}return e},hr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(fl(this))return"0";if(pl(this))return"-"+ml(this).toString(e);for(var t=ll(Math.pow(e,6)),n=this,i="";;){var r=bl(n,t).g,s=((0<(n=gl(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(fl(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},hr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},hr.X=function(e){return pl(e=gl(this,e))?-1:fl(e)?0:1},hr.abs=function(){return pl(this)?ml(this):this},hr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&e.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new sl(n,-2147483648&n[n.length-1]?-1:0)},hr.R=function(e){if(fl(this)||fl(e))return ul;if(pl(this))return pl(e)?ml(this).R(ml(e)):ml(ml(this).R(e));if(pl(e))return ml(this.R(ml(e)));if(0>this.X(hl)&&0>e.X(hl))return ll(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=e.D(r)>>>16,l=65535&e.D(r);n[2*i+2*r]+=o*l,yl(n,2*i+2*r),n[2*i+2*r+1]+=s*l,yl(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,yl(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,yl(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new sl(n,0)},hr.gb=function(e){return bl(this,e).h},hr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new sl(n,this.h&e.h)},hr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new sl(n,this.h|e.h)},hr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new sl(n,this.h^e.h)},Ja.prototype.createWebChannel=Ja.prototype.g,Za.prototype.send=Za.prototype.u,Za.prototype.open=Za.prototype.m,Za.prototype.close=Za.prototype.close,to.NO_ERROR=0,to.TIMEOUT=8,to.HTTP_ERROR=6,no.COMPLETE="complete",so.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",ws.prototype.listen=ws.prototype.O,va.prototype.listenOnce=va.prototype.P,va.prototype.getLastError=va.prototype.Sa,va.prototype.getLastErrorCode=va.prototype.Ia,va.prototype.getStatus=va.prototype.da,va.prototype.getResponseJson=va.prototype.Wa,va.prototype.getResponseText=va.prototype.ja,va.prototype.send=va.prototype.ha,va.prototype.setWithCredentials=va.prototype.Oa,il.prototype.digest=il.prototype.l,il.prototype.reset=il.prototype.reset,il.prototype.update=il.prototype.j,sl.prototype.add=sl.prototype.add,sl.prototype.multiply=sl.prototype.R,sl.prototype.modulo=sl.prototype.gb,sl.prototype.compare=sl.prototype.X,sl.prototype.toNumber=sl.prototype.ea,sl.prototype.toString=sl.prototype.toString,sl.prototype.getBits=sl.prototype.D,sl.fromNumber=ll,sl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ml(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=ll(Math.pow(n,8)),r=ul,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ll(Math.pow(n,o)),r=r.R(o).add(ll(a))):r=(r=r.R(i)).add(ll(a))}return r};var _l=pr.createWebChannelTransport=function(){return new Ja},kl=pr.getStatEventTarget=function(){return Qs()},El=pr.ErrorCode=to,Tl=pr.EventType=no,Nl=pr.Event=Gs,Sl=pr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Cl=pr.FetchXmlHttpFactory=da,Il=pr.WebChannel=so,Al=pr.XhrIo=va,Pl=pr.Md5=il,jl=pr.Integer=sl;const Dl="@firebase/firestore";class Rl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rl.UNAUTHENTICATED=new Rl(null),Rl.GOOGLE_CREDENTIALS=new Rl("google-credentials-uid"),Rl.FIRST_PARTY=new Rl("first-party-uid"),Rl.MOCK_USER=new Rl("mock-user");let Ml="9.23.0";const Ol=new K("@firebase/firestore");function Ll(){return Ol.logLevel}function Fl(e){if(Ol.logLevel<=B.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Vl);Ol.debug("Firestore (".concat(Ml,"): ").concat(e),...r)}}function zl(e){if(Ol.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Vl);Ol.error("Firestore (".concat(Ml,"): ").concat(e),...r)}}function Ul(e){if(Ol.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Vl);Ol.warn("Firestore (".concat(Ml,"): ").concat(e),...r)}}function Vl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ml,") INTERNAL ASSERTION FAILED: ")+e;throw zl(t),new Error(t)}function Hl(e,t){e||Bl()}function Wl(e,t){return e}const ql={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gl extends N{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Kl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ql{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Yl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rl.UNAUTHENTICATED))}shutdown(){}}class Xl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $l{constructor(e){this.t=e,this.currentUser=Rl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Kl;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Kl,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},o=e=>{Fl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Fl("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Kl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Fl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Hl("string"==typeof t.accessToken),new Ql(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Hl(null===e||"string"==typeof e),new Rl(e)}}class Jl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Rl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Zl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Jl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ec{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Fl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Fl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{Fl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?i(e):Fl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Hl("string"==typeof e.token),this.T=e.token,new ec(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class ic{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=nc(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function rc(e,t){return e<t?-1:e>t?1:0}function sc(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}class oc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Gl(ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Gl(ql.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Gl(ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Gl(ql.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return oc.fromMillis(Date.now())}static fromDate(e){return oc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new oc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rc(this.nanoseconds,e.nanoseconds):rc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ac{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ac(e)}static min(){return new ac(new oc(0,0))}static max(){return new ac(new oc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bl(),void 0===n?n=e.length-t:n>e.length-t&&Bl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cc extends lc{construct(e,t,n){return new cc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Gl(ql.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new cc(e)}static emptyPath(){return new cc([])}}const uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dc extends lc{construct(e,t,n){return new dc(e,t,n)}static isValidIdentifier(e){return uc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dc(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Gl(ql.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Gl(ql.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Gl(ql.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new Gl(ql.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dc(t)}static emptyPath(){return new dc([])}}class hc{constructor(e){this.path=e}static fromPath(e){return new hc(cc.fromString(e))}static fromName(e){return new hc(cc.fromString(e).popFirst(5))}static empty(){return new hc(cc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hc(new cc(e.slice()))}}class fc{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}fc.UNKNOWN_ID=-1;function pc(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=ac.fromTimestamp(1e9===i?new oc(n+1,0):new oc(n,i));return new gc(r,hc.empty(),t)}function mc(e){return new gc(e.readTime,e.key,-1)}class gc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gc(ac.min(),hc.empty(),-1)}static max(){return new gc(ac.max(),hc.empty(),-1)}}function yc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=hc.comparator(e.documentKey,t.documentKey),0!==n?n:rc(e.largestBatchId,t.largestBatchId))}const vc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function xc(e){if(e.code!==ql.FAILED_PRECONDITION||e.message!==vc)throw e;Fl("LocalStore","Unexpectedly lost primary lease")}class wc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wc((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof wc?t:wc.resolve(t)}catch(e){return wc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):wc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):wc.reject(t)}static resolve(e){return new wc((t,n)=>{t(e)})}static reject(e){return new wc((t,n)=>{n(e)})}static waitFor(e){return new wc((t,n)=>{let i=0,r=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++r,s&&r===i&&t()},e=>n(e))}),s=!0,r===i&&t()})}static or(e){let t=wc.resolve(!1);for(const n of e)t=t.next(e=>e?wc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}static mapArray(e,t){return new wc((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===r&&n(s)},e=>i(e))}})}static doWhile(e,t){return new wc((n,i)=>{const r=()=>{!0===e()?t().next(()=>{r()},i):n()};r()})}}function _c(e){return"IndexedDbTransactionError"===e.name}class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Ec(e){return null==e}function Tc(e){return 0===e&&1/e==-1/0}function Nc(e){return"number"==typeof e&&Number.isInteger(e)&&!Tc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}kc.ct=-1;const Sc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ic=Cc;function Ac(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Dc{constructor(e,t){this.comparator=e,this.root=t||Mc.EMPTY}insert(e,t){return new Dc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mc.BLACK,null,null))}remove(e){return new Dc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mc{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Mc.RED,this.left=null!=i?i:Mc.EMPTY,this.right=null!=r?r:Mc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new Mc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Mc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bl();if(this.right.isRed())throw Bl();const e=this.left.check();if(e!==this.right.check())throw Bl();return e+(this.isRed()?0:1)}}Mc.EMPTY=null,Mc.RED=!0,Mc.BLACK=!1,Mc.EMPTY=new class{constructor(){this.size=0}get key(){throw Bl()}get value(){throw Bl()}get color(){throw Bl()}get left(){throw Bl()}get right(){throw Bl()}copy(e,t,n,i,r){return this}insert(e,t,n){return new Mc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Oc{constructor(e){this.comparator=e,this.data=new Dc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lc(this.data.getIterator())}getIteratorFrom(e){return new Lc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Oc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Oc(this.comparator);return t.data=e,t}}class Lc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fc{constructor(e){this.fields=e,e.sort(dc.comparator)}static empty(){return new Fc([])}unionWith(e){let t=new Oc(dc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class zc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Uc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new zc("Invalid base64 string: "+e):e}}(e);return new Uc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Uc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Uc.EMPTY_BYTE_STRING=new Uc("");const Vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bc(e){if(Hl(!!e),"string"==typeof e){let t=0;const n=Vc.exec(e);if(Hl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hc(e.seconds),nanos:Hc(e.nanos)}}function Hc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wc(e){return"string"==typeof e?Uc.fromBase64String(e):Uc.fromUint8Array(e)}function qc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gc(e){const t=e.mapValue.fields.__previous_value__;return qc(t)?Gc(t):t}function Kc(e){const t=Bc(e.mapValue.fields.__local_write_time__.timestampValue);return new oc(t.seconds,t.nanos)}class Qc{constructor(e,t,n,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Yc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yc&&e.projectId===this.projectId&&e.database===this.database}}const Xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $c(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qc(e)?4:du(e)?9007199254740991:10:Bl()}function Jc(e,t){if(e===t)return!0;const n=$c(e);if(n!==$c(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Kc(e).isEqual(Kc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bc(e.timestampValue),i=Bc(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wc(e.bytesValue).isEqual(Wc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hc(e.geoPointValue.latitude)===Hc(t.geoPointValue.latitude)&&Hc(e.geoPointValue.longitude)===Hc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hc(e.integerValue)===Hc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Hc(e.doubleValue),i=Hc(t.doubleValue);return n===i?Tc(n)===Tc(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return sc(e.arrayValue.values||[],t.arrayValue.values||[],Jc);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Ac(n)!==Ac(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Jc(n[r],i[r])))return!1;return!0}(e,t);default:return Bl()}}function Zc(e,t){return void 0!==(e.values||[]).find(e=>Jc(e,t))}function eu(e,t){if(e===t)return 0;const n=$c(e),i=$c(t);if(n!==i)return rc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return rc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Hc(e.integerValue||e.doubleValue),i=Hc(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return tu(e.timestampValue,t.timestampValue);case 4:return tu(Kc(e),Kc(t));case 5:return rc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Wc(e),i=Wc(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=rc(n[r],i[r]);if(0!==e)return e}return rc(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rc(Hc(e.latitude),Hc(t.latitude));return 0!==n?n:rc(Hc(e.longitude),Hc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=eu(n[r],i[r]);if(e)return e}return rc(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Xc.mapValue&&t===Xc.mapValue)return 0;if(e===Xc.mapValue)return 1;if(t===Xc.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=rc(i[o],s[o]);if(0!==e)return e;const t=eu(n[i[o]],r[s[o]]);if(0!==t)return t}return rc(i.length,s.length)}(e.mapValue,t.mapValue);default:throw Bl()}}function tu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rc(e,t);const n=Bc(e),i=Bc(t),r=rc(n.seconds,i.seconds);return 0!==r?r:rc(n.nanos,i.nanos)}function nu(e){return iu(e)}function iu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Wc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,hc.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=iu(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(iu(e.fields[r]));return n+"}"}(e.mapValue):Bl();var t,n}function ru(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function su(e){return!!e&&"integerValue"in e}function ou(e){return!!e&&"arrayValue"in e}function au(e){return!!e&&"nullValue"in e}function lu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cu(e){return!!e&&"mapValue"in e}function uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Pc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=uu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=uu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function du(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class hu{constructor(e){this.value=e}static empty(){return new hu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=dc.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=uu(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());cu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];cu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Pc(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new hu(uu(this.value))}}function fu(e){const t=[];return Pc(e.fields,(e,n)=>{const i=new dc([e]);if(cu(n)){const e=fu(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)}),new Fc(t)}class pu{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new pu(e,0,ac.min(),ac.min(),ac.min(),hu.empty(),0)}static newFoundDocument(e,t,n,i){return new pu(e,1,t,ac.min(),n,i,0)}static newNoDocument(e,t){return new pu(e,2,t,ac.min(),ac.min(),hu.empty(),0)}static newUnknownDocument(e,t){return new pu(e,3,t,ac.min(),ac.min(),hu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ac.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ac.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mu{constructor(e,t){this.position=e,this.inclusive=t}}function gu(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?hc.comparator(hc.fromName(o.referenceValue),n.key):eu(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function yu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Jc(e.position[n],t.position[n]))return!1;return!0}class vu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xu{}class wu extends xu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Iu(e,t,n):"array-contains"===t?new Du(e,n):"in"===t?new Ru(e,n):"not-in"===t?new Mu(e,n):"array-contains-any"===t?new Ou(e,n):new wu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Au(e,n):new Pu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(eu(t,this.value)):null!==t&&$c(this.value)===$c(t)&&this.matchesComparison(eu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _u extends xu{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _u(e,t)}matches(e){return ku(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ku(e){return"and"===e.op}function Eu(e){return Tu(e)&&ku(e)}function Tu(e){for(const t of e.filters)if(t instanceof _u)return!1;return!0}function Nu(e){if(e instanceof wu)return e.field.canonicalString()+e.op.toString()+nu(e.value);if(Eu(e))return e.filters.map(e=>Nu(e)).join(",");{const t=e.filters.map(e=>Nu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Su(e,t){return e instanceof wu?function(e,t){return t instanceof wu&&e.op===t.op&&e.field.isEqual(t.field)&&Jc(e.value,t.value)}(e,t):e instanceof _u?function(e,t){return t instanceof _u&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,i)=>e&&Su(n,t.filters[i]),!0)}(e,t):void Bl()}function Cu(e){return e instanceof wu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(nu(e.value))}(e):e instanceof _u?function(e){return e.op.toString()+" {"+e.getFilters().map(Cu).join(" ,")+"}"}(e):"Filter"}class Iu extends wu{constructor(e,t,n){super(e,t,n),this.key=hc.fromName(n.referenceValue)}matches(e){const t=hc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Au extends wu{constructor(e,t){super(e,"in",t),this.keys=ju("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pu extends wu{constructor(e,t){super(e,"not-in",t),this.keys=ju("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ju(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>hc.fromName(e.referenceValue))}class Du extends wu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&Zc(t.arrayValue,this.value)}}class Ru extends wu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zc(this.value.arrayValue,t)}}class Mu extends wu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zc(this.value.arrayValue,t)}}class Ou extends wu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Zc(this.value.arrayValue,e))}}class Lu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.dt=null}}function Fu(e){return new Lu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function zu(e){const t=Wl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Nu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ec(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>nu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>nu(e)).join(",")),t.dt=e}return t.dt}function Uu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Su(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yu(e.startAt,t.startAt)&&yu(e.endAt,t.endAt)}function Vu(e){return hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function Hu(e,t,n,i,r,s,o,a){return new Bu(e,t,n,i,r,s,o,a)}function Wu(e){return new Bu(e)}function qu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Gu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ku(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Qu(e){return null!==e.collectionGroup}function Yu(e){const t=Wl(e);if(null===t.wt){t.wt=[];const e=Ku(t),n=Gu(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new vu(e)),t.wt.push(new vu(dc.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new vu(dc.keyField(),e))}}}return t.wt}function Xu(e){const t=Wl(e);if(!t._t)if("F"===t.limitType)t._t=Fu(t.path,t.collectionGroup,Yu(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const r of Yu(t)){const t="desc"===r.dir?"asc":"desc";e.push(new vu(r.field,t))}const n=t.endAt?new mu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new mu(t.startAt.position,t.startAt.inclusive):null;t._t=Fu(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t._t}function $u(e,t){t.getFirstInequalityField(),Ku(e);const n=e.filters.concat([t]);return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ju(e,t,n){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zu(e,t){return Uu(Xu(e),Xu(t))&&e.limitType===t.limitType}function ed(e){return"".concat(zu(Xu(e)),"|lt:").concat(e.limitType)}function td(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Cu(e)).join(", "),"]")),Ec(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>nu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>nu(e)).join(",")),"Target(".concat(t,")")}(Xu(e)),"; limitType=").concat(e.limitType,")")}function nd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):hc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Yu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=gu(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Yu(e),t))&&!(e.endAt&&!function(e,t,n){const i=gu(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Yu(e),t))}(e,t)}function id(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rd(e){return(t,n)=>{let i=!1;for(const r of Yu(e)){const e=sd(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function sd(e,t,n){const i=e.field.isKeyField()?hc.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?eu(i,r):Bl()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Bl()}}class od{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return jc(this.inner)}size(){return this.innerSize}}const ad=new Dc(hc.comparator);function ld(){return ad}const cd=new Dc(hc.comparator);function ud(){let e=cd;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function dd(e){let t=cd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function hd(){return pd()}function fd(){return pd()}function pd(){return new od(e=>e.toString(),(e,t)=>e.isEqual(t))}const md=new Dc(hc.comparator),gd=new Oc(hc.comparator);function yd(){let e=gd;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const vd=new Oc(rc);function bd(){return vd}function xd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(t)?"-0":t}}function wd(e){return{integerValue:""+e}}function _d(e,t){return Nc(t)?wd(t):xd(e,t)}class kd{constructor(){this._=void 0}}function Ed(e,t,n){return e instanceof Sd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&qc(t)&&(t=Gc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Cd?Id(e,t):e instanceof Ad?Pd(e,t):function(e,t){const n=Nd(e,t),i=Dd(n)+Dd(e.gt);return su(n)&&su(e.gt)?wd(i):xd(e.serializer,i)}(e,t)}function Td(e,t,n){return e instanceof Cd?Id(e,t):e instanceof Ad?Pd(e,t):n}function Nd(e,t){return e instanceof jd?su(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Sd extends kd{}class Cd extends kd{constructor(e){super(),this.elements=e}}function Id(e,t){const n=Rd(t);for(const i of e.elements)n.some(e=>Jc(e,i))||n.push(i);return{arrayValue:{values:n}}}class Ad extends kd{constructor(e){super(),this.elements=e}}function Pd(e,t){let n=Rd(t);for(const i of e.elements)n=n.filter(e=>!Jc(e,i));return{arrayValue:{values:n}}}class jd extends kd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Dd(e){return Hc(e.integerValue||e.doubleValue)}function Rd(e){return ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Md{constructor(e,t){this.field=e,this.transform=t}}class Od{constructor(e,t){this.version=e,this.transformResults=t}}class Ld{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ld}static exists(e){return new Ld(void 0,e)}static updateTime(e){return new Ld(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zd{}function Ud(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Xd(e.key,Ld.none()):new qd(e.key,e.data,Ld.none());{const n=e.data,i=hu.empty();let r=new Oc(dc.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new Gd(e.key,i,new Fc(r.toArray()),Ld.none())}}function Vd(e,t,n){e instanceof qd?function(e,t,n){const i=e.value.clone(),r=Qd(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Gd?function(e,t,n){if(!Fd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Qd(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Kd(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bd(e,t,n,i){return e instanceof qd?function(e,t,n,i){if(!Fd(e.precondition,t))return n;const r=e.value.clone(),s=Yd(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof Gd?function(e,t,n,i){if(!Fd(e.precondition,t))return n;const r=Yd(e.fieldTransforms,i,t),s=t.data;return s.setAll(Kd(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,i):function(e,t,n){return Fd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hd(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=Nd(i.transform,e||null);null!=r&&(null===n&&(n=hu.empty()),n.set(i.field,r))}return n||null}function Wd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sc(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Cd&&t instanceof Cd||e instanceof Ad&&t instanceof Ad?sc(e.elements,t.elements,Jc):e instanceof jd&&t instanceof jd?Jc(e.gt,t.gt):e instanceof Sd&&t instanceof Sd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qd extends zd{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gd extends zd{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Kd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Qd(e,t,n){const i=new Map;Hl(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,Td(o,a,n[r]))}return i}function Yd(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Ed(e,s,t))}return i}class Xd extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $d extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jd{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&Vd(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Bd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Bd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fd();return this.mutations.forEach(i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=Ud(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(ac.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yd())}isEqual(e){return this.batchId===e.batchId&&sc(this.mutations,e.mutations,(e,t)=>Wd(e,t))&&sc(this.baseMutations,e.baseMutations,(e,t)=>Wd(e,t))}}class Zd{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Hl(e.mutations.length===n.length);let i=md;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Zd(e,t,n,i)}}class eh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class th{constructor(e,t){this.count=e,this.unchangedNames=t}}var nh,ih;function rh(e){switch(e){default:return Bl();case ql.CANCELLED:case ql.UNKNOWN:case ql.DEADLINE_EXCEEDED:case ql.RESOURCE_EXHAUSTED:case ql.INTERNAL:case ql.UNAVAILABLE:case ql.UNAUTHENTICATED:return!1;case ql.INVALID_ARGUMENT:case ql.NOT_FOUND:case ql.ALREADY_EXISTS:case ql.PERMISSION_DENIED:case ql.FAILED_PRECONDITION:case ql.ABORTED:case ql.OUT_OF_RANGE:case ql.UNIMPLEMENTED:case ql.DATA_LOSS:return!0}}function sh(e){if(void 0===e)return zl("GRPC error has no .code"),ql.UNKNOWN;switch(e){case nh.OK:return ql.OK;case nh.CANCELLED:return ql.CANCELLED;case nh.UNKNOWN:return ql.UNKNOWN;case nh.DEADLINE_EXCEEDED:return ql.DEADLINE_EXCEEDED;case nh.RESOURCE_EXHAUSTED:return ql.RESOURCE_EXHAUSTED;case nh.INTERNAL:return ql.INTERNAL;case nh.UNAVAILABLE:return ql.UNAVAILABLE;case nh.UNAUTHENTICATED:return ql.UNAUTHENTICATED;case nh.INVALID_ARGUMENT:return ql.INVALID_ARGUMENT;case nh.NOT_FOUND:return ql.NOT_FOUND;case nh.ALREADY_EXISTS:return ql.ALREADY_EXISTS;case nh.PERMISSION_DENIED:return ql.PERMISSION_DENIED;case nh.FAILED_PRECONDITION:return ql.FAILED_PRECONDITION;case nh.ABORTED:return ql.ABORTED;case nh.OUT_OF_RANGE:return ql.OUT_OF_RANGE;case nh.UNIMPLEMENTED:return ql.UNIMPLEMENTED;case nh.DATA_LOSS:return ql.DATA_LOSS;default:return Bl()}}(ih=nh||(nh={}))[ih.OK=0]="OK",ih[ih.CANCELLED=1]="CANCELLED",ih[ih.UNKNOWN=2]="UNKNOWN",ih[ih.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ih[ih.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ih[ih.NOT_FOUND=5]="NOT_FOUND",ih[ih.ALREADY_EXISTS=6]="ALREADY_EXISTS",ih[ih.PERMISSION_DENIED=7]="PERMISSION_DENIED",ih[ih.UNAUTHENTICATED=16]="UNAUTHENTICATED",ih[ih.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ih[ih.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ih[ih.ABORTED=10]="ABORTED",ih[ih.OUT_OF_RANGE=11]="OUT_OF_RANGE",ih[ih.UNIMPLEMENTED=12]="UNIMPLEMENTED",ih[ih.INTERNAL=13]="INTERNAL",ih[ih.UNAVAILABLE=14]="UNAVAILABLE",ih[ih.DATA_LOSS=15]="DATA_LOSS";class oh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ah}static getOrCreateInstance(){return null===ah&&(ah=new oh),ah}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ah=null;function lh(){return new TextEncoder}const ch=new jl([4294967295,4294967295],0);function uh(e){const t=lh().encode(e),n=new Pl;return n.update(t),new Uint8Array(n.digest())}function dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new jl([n,i],0),new jl([r,s],0)]}class hh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new fh("Invalid padding: ".concat(t));if(n<0)throw new fh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new fh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new fh("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=jl.fromNumber(this.It)}Et(e,t,n){let i=e.add(t.multiply(jl.fromNumber(n)));return 1===i.compare(ch)&&(i=new jl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=uh(e),[n,i]=dh(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,i,r);if(!this.At(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new hh(r,i,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=uh(e),[n,i]=dh(t);for(let r=0;r<this.hashCount;r++){const e=this.Et(n,i,r);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ph{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ph(ac.min(),i,new Dc(rc),ld(),yd())}}class mh{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new mh(n,t,yd(),yd(),yd())}}class gh{constructor(e,t,n,i){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=i}}class yh{constructor(e,t){this.targetId=e,this.Vt=t}}class vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class bh{constructor(){this.St=0,this.Dt=_h(),this.Ct=Uc.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=yd(),t=yd(),n=yd();return this.Dt.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Bl()}}),new mh(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=_h()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class xh{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ld(),this.zt=wh(),this.Wt=new Dc(rc)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Bl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,i=e.Vt.count,r=this.se(n);if(r){const s=r.target;if(Vu(s))if(0===i){const e=new hc(s.path);this.Yt(n,e,pu.newNoDocument(e,ac.min()))}else Hl(1===i);else{const r=this.ie(n);if(r!==i){const i=this.re(e,r);if(0!==i){this.ee(n);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=oh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var i,r,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(i=null==u?void 0:u.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(s=null===(r=null==u?void 0:u.bits)||void 0===r?void 0:r.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(i,r,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:i}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Wc(r).toUint8Array()}catch(e){if(e instanceof zc)return Ul("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new hh(a,s,o)}catch(e){return Ul(e instanceof fh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:i!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let i=0;return n.forEach(n=>{const r=this.Gt.ue(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((n,i)=>{const r=this.se(i);if(r){if(n.current&&Vu(r.target)){const t=new hc(r.target.path);null!==this.jt.get(t)||this.ae(i,t)||this.Yt(i,t,pu.newNoDocument(t,e))}n.Mt&&(t.set(i,n.Ot()),n.Ft())}});let n=yd();this.zt.forEach((e,t)=>{let i=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)}),i&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const i=new ph(e,t,this.Wt,this.jt,n);return this.jt=ld(),this.zt=wh(),this.Wt=new Dc(rc),i}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new bh,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Oc(rc),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Fl("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new bh),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function wh(){return new Dc(hc.comparator)}function _h(){return new Dc(hc.comparator)}const kh={asc:"ASCENDING",desc:"DESCENDING"},Eh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Th={and:"AND",or:"OR"};class Nh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sh(e,t){return e.useProto3Json||Ec(t)?t:{value:t}}function Ch(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ih(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ah(e,t){return Ch(e,t.toTimestamp())}function Ph(e){return Hl(!!e),ac.fromTimestamp(function(e){const t=Bc(e);return new oc(t.seconds,t.nanos)}(e))}function jh(e,t){return function(e){return new cc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Dh(e){const t=cc.fromString(e);return Hl(Zh(t)),t}function Rh(e,t){return jh(e.databaseId,t.path)}function Mh(e,t){const n=Dh(t);if(n.get(1)!==e.databaseId.projectId)throw new Gl(ql.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gl(ql.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new hc(zh(n))}function Oh(e,t){return jh(e.databaseId,t)}function Lh(e){const t=Dh(e);return 4===t.length?cc.emptyPath():zh(t)}function Fh(e){return new cc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zh(e){return Hl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Uh(e,t,n){return{name:Rh(e,t),fields:n.value.mapValue.fields}}function Vh(e,t){let n;if(t instanceof qd)n={update:Uh(e,t.key,t.value)};else if(t instanceof Xd)n={delete:Rh(e,t.key)};else if(t instanceof Gd)n={update:Uh(e,t.key,t.data),updateMask:Jh(t.fieldMask)};else{if(!(t instanceof $d))return Bl();n={verify:Rh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Sd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Cd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jd)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Bl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bl()}(e,t.precondition)),n}function Bh(e,t){return{documents:[Oh(e,t.path)]}}function Hh(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Oh(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Oh(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(e){if(0!==e.length)return $h(_u.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Yh(e.field),direction:Gh(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Sh(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Wh(e){let t=Lh(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Hl(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=qh(e);return t instanceof _u&&Eu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new vu(Xh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ec(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new mu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new mu(n,t)}(n.endAt)),Hu(t,r,o,s,a,"F",l,c)}function qh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xh(e.unaryFilter.field);return wu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Xh(e.unaryFilter.field);return wu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xh(e.unaryFilter.field);return wu.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Xh(e.unaryFilter.field);return wu.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Bl()}}(e):void 0!==e.fieldFilter?function(e){return wu.create(Xh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _u.create(e.compositeFilter.filters.map(e=>qh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Bl()}}(e.compositeFilter.op))}(e):Bl()}function Gh(e){return kh[e]}function Kh(e){return Eh[e]}function Qh(e){return Th[e]}function Yh(e){return{fieldPath:e.canonicalString()}}function Xh(e){return dc.fromServerFormat(e.fieldPath)}function $h(e){return e instanceof wu?function(e){if("=="===e.op){if(lu(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NAN"}};if(au(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lu(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NOT_NAN"}};if(au(e.value))return{unaryFilter:{field:Yh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(e.field),op:Kh(e.op),value:e.value}}}(e):e instanceof _u?function(e){const t=e.getFilters().map(e=>$h(e));return 1===t.length?t[0]:{compositeFilter:{op:Qh(e.op),filters:t}}}(e):Bl()}function Jh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ef{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ac.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ac.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Uc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ef(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tf{constructor(e){this.fe=e}}function nf(e){const t=Wh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ju(t,t.limit,"L"):t}class rf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Hc(e.integerValue));else if("doubleValue"in e){const n=Hc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Tc(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Wc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?du(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Bl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const i of Object.keys(n))this.Te(i,t),this.me(n[i],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const i of n)this.me(i,t)}ve(e,t){this.ye(t,37),hc.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}rf.Ve=new rf;class sf{constructor(){this.rn=new of}addToCollectionParentIndex(e,t){return this.rn.add(t),wc.resolve()}getCollectionParents(e,t){return wc.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return wc.resolve()}deleteFieldIndex(e,t){return wc.resolve()}getDocumentsMatchingTarget(e,t){return wc.resolve(null)}getIndexType(e,t){return wc.resolve(0)}getFieldIndexes(e,t){return wc.resolve([])}getNextCollectionGroupToUpdate(e){return wc.resolve(null)}getMinOffset(e,t){return wc.resolve(gc.min())}getMinOffsetFromCollectionGroup(e,t){return wc.resolve(gc.min())}updateCollectionGroup(e,t,n){return wc.resolve()}updateIndexEntries(e,t){return wc.resolve()}}class of{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Oc(cc.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Oc(cc.comparator)).toArray()}}new Uint8Array(0);class af{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new af(e,af.DEFAULT_COLLECTION_PERCENTILE,af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}af.DEFAULT_COLLECTION_PERCENTILE=10,af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,af.DEFAULT=new af(41943040,af.DEFAULT_COLLECTION_PERCENTILE,af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),af.DISABLED=new af(-1,0,0);class lf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new lf(0)}static Mn(){return new lf(-1)}}class cf{constructor(){this.changes=new od(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class df{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Bd(n.mutation,e,Fc.empty(),oc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,yd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yd();const i=hd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(e=>{let t=ud();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=hd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,yd()))}populateOverlays(e,t,n){const i=[];return n.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,i){let r=ld();const s=pd(),o=pd();return t.forEach((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof Gd)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Bd(o.mutation,t,o.mutation.getFieldMask(),oc.now())):s.set(t.key,Fc.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new uf(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=pd();let i=new Dc((e,t)=>e-t),r=yd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Fc.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||yd()).add(e);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=fd();l.forEach(e=>{if(!r.has(e)){const i=Ud(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return wc.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):wc.resolve(hd());let o=-1,a=r;return s.next(t=>wc.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?wc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,a,t,yd())).next(e=>({batchId:o,changes:dd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hc(t)).next(e=>{let t=ud();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const i=t.collectionGroup;let r=ud();return this.indexManager.getCollectionParents(e,i).next(s=>wc.forEach(s,s=>{const o=function(e,t){return new Bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{r=r.insert(e,t)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i))).next(e=>{i.forEach((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,pu.newInvalidDocument(i)))});let n=ud();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Bd(s.mutation,r,Fc.empty(),oc.now()),nd(t,r)&&(n=n.insert(e,r))}),n})}}class hf{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return wc.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Ph(n.createTime)}),wc.resolve()}getNamedQuery(e,t){return wc.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:nf(e.bundledQuery),readTime:Ph(e.readTime)}}(t)),wc.resolve()}}class ff{constructor(){this.overlays=new Dc(hc.comparator),this.ls=new Map}getOverlay(e,t){return wc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hd();return wc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.we(e,t,i)}),wc.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.ls.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),wc.resolve()}getOverlaysForCollection(e,t,n){const i=hd(),r=t.length+1,s=new hc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return wc.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new Dc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=hd(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=hd(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=i)););return wc.resolve(o)}we(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new eh(t,n));let r=this.ls.get(t);void 0===r&&(r=yd(),this.ls.set(t,r)),this.ls.set(t,r.add(n.key))}}class pf{constructor(){this.fs=new Oc(mf.ds),this.ws=new Oc(mf._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new mf(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new mf(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new hc(new cc([])),n=new mf(t,e),i=new mf(t,e+1),r=[];return this.ws.forEachInRange([n,i],e=>{this.ys(e),r.push(e.key)}),r}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new hc(new cc([])),n=new mf(t,e),i=new mf(t,e+1);let r=yd();return this.ws.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new mf(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class mf{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return hc.comparator(e.key,t.key)||rc(e.As,t.As)}static _s(e,t){return rc(e.As,t.As)||hc.comparator(e.key,t.key)}}class gf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Oc(mf.ds)}checkEmpty(e){return wc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Jd(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.Rs=this.Rs.add(new mf(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wc.resolve(s)}lookupMutationBatch(e,t){return wc.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.bs(n),r=i<0?0:i;return wc.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return wc.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return wc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new mf(t,0),i=new mf(t,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([n,i],e=>{const t=this.Ps(e.As);r.push(t)}),wc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Oc(rc);return t.forEach(e=>{const t=new mf(e,0),i=new mf(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,i],e=>{n=n.add(e.As)})}),wc.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;hc.isDocumentKey(r)||(r=r.child(""));const s=new mf(new hc(r),0);let o=new Oc(rc);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.As)),!0)},s),wc.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Hl(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return wc.forEach(t.mutations,i=>{const r=new mf(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new mf(t,0),i=this.Rs.firstAfterOrEqual(n);return wc.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,wc.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yf{constructor(e){this.Ds=e,this.docs=new Dc(hc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wc.resolve(n?n.document.mutableCopy():pu.newInvalidDocument(t))}getEntries(e,t){let n=ld();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pu.newInvalidDocument(e))}),wc.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=ld();const s=t.path,o=new hc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||yc(mc(o),n)<=0||(i.has(o.key)||nd(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return wc.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Bl()}Cs(e,t){return wc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vf(this)}getSize(e){return wc.resolve(this.size)}}class vf extends cf{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(n)}),wc.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class bf{constructor(e){this.persistence=e,this.xs=new od(e=>zu(e),Uu),this.lastRemoteSnapshotVersion=ac.min(),this.highestTargetId=0,this.Ns=0,this.ks=new pf,this.targetCount=0,this.Ms=lf.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),wc.resolve()}getLastRemoteSnapshotVersion(e){return wc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wc.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),wc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),wc.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new lf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,wc.resolve()}updateTargetData(e,t){return this.Fn(t),wc.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,wc.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.xs.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),wc.waitFor(r).next(()=>i)}getTargetCount(e){return wc.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return wc.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),wc.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),wc.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),wc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return wc.resolve(n)}containsKey(e,t){return wc.resolve(this.ks.containsKey(t))}}class xf{constructor(e,t){this.$s={},this.overlays={},this.Os=new kc(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new bf(this),this.indexManager=new sf,this.remoteDocumentCache=function(e){return new yf(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new tf(t),this.qs=new hf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ff,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new gf(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Fl("MemoryPersistence","Starting transaction:",e);const i=new wf(this.Os.next());return this.referenceDelegate.Us(),n(i).next(e=>this.referenceDelegate.Ks(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Gs(e,t){return wc.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class wf extends bc{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Qs=new pf,this.js=null}static zs(e){return new _f(e)}get Ws(){if(this.js)return this.js;throw Bl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),wc.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),wc.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),wc.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wc.forEach(this.Ws,n=>{const i=hc.fromPath(n);return this.Hs(e,i).next(e=>{e||t.removeEntry(i,ac.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return wc.or([()=>wc.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class kf{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=i}static Li(e,t){let n=yd(),i=yd();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new kf(e,t.fromCache,n,i)}}class Ef{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,i){return this.Ki(e,t).next(r=>r||this.Gi(e,t,i,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(qu(t))return wc.resolve(null);let n=Xu(t);return this.indexManager.getIndexType(e,n).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ju(t,null,"F"),n=Xu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const r=yd(...i);return this.Ui.getDocuments(e,r).next(i=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,i);return this.zi(t,s,r,n.readTime)?this.Ki(e,Ju(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,i){return qu(t)||i.isEqual(ac.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(r=>{const s=this.ji(t,r);return this.zi(t,s,n,i)?this.Qi(e,t):(Ll()<=B.DEBUG&&Fl("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),td(t)),this.Wi(e,s,t,pc(i,-1)))})}ji(e,t){let n=new Oc(rd(e));return t.forEach((t,i)=>{nd(e,i)&&(n=n.add(i))}),n}zi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Qi(e,t){return Ll()<=B.DEBUG&&Fl("QueryEngine","Using full collection scan to execute query:",td(t)),this.Ui.getDocumentsMatchingQuery(e,t,gc.min())}Wi(e,t,n,i){return this.Ui.getDocumentsMatchingQuery(e,n,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Tf{constructor(e,t,n,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Dc(rc),this.Yi=new od(e=>zu(e),Uu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new df(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Nf(e,t,n,i){return new Tf(e,t,n,i)}async function Sf(e,t){const n=Wl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next(r=>(i=r,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],s=[];let o=yd();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:r,addedBatchIds:s}))})})}function Cf(e){const t=Wl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function If(e,t,n){let i=yd(),r=yd();return n.forEach(e=>i=i.add(e)),t.getEntries(e,i).next(e=>{let i=ld();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(ac.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Fl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{nr:i,sr:r}})}function Af(e,t){const n=Wl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Pf(e,t){const n=Wl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let i;return n.Bs.getTargetData(e,t).next(r=>r?(i=r,wc.resolve(i)):n.Bs.allocateTargetId(e).next(r=>(i=new ef(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,i).next(()=>i))))}).then(e=>{const i=n.Ji.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function jf(e,t,n){const i=Wl(e),r=i.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,e=>i.persistence.referenceDelegate.removeTarget(e,r))}catch(e){if(!_c(e))throw e;Fl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.Ji=i.Ji.remove(t),i.Yi.delete(r.target)}function Df(e,t,n){const i=Wl(e);let r=ac.min(),s=yd();return i.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const i=Wl(e),r=i.Yi.get(n);return void 0!==r?wc.resolve(i.Ji.get(r)):i.Bs.getTargetData(t,n)}(i,e,Xu(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>i.Hi.getDocumentsMatchingQuery(e,t,n?r:ac.min(),n?s:yd())).next(e=>(Rf(i,id(t),e),{documents:e,ir:s})))}function Rf(e,t,n){let i=e.Xi.get(t)||ac.min();n.forEach((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)}),e.Xi.set(t,i)}class Mf{constructor(){this.activeTargetIds=bd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Of{constructor(){this.Hr=new Mf,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Mf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Lf{Yr(e){}shutdown(){}}class Ff{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Fl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Fl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zf=null;function Uf(){return null===zf?zf=268435456+Math.round(2147483648*Math.random()):zf++,"0x"+zf.toString(16)}const Vf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bf{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Hf="WebChannelConnection";class Wf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,i,r){const s=Uf(),o=this.To(e,t);Fl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,i,r),this.Ao(e,o,a,n).then(t=>(Fl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Ul("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}vo(e,t,n,i,r,s){return this.Io(e,t,n,i,r)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ml,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Vf[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,i){const r=Uf();return new Promise((s,o)=>{const a=new Al;a.setWithCredentials(!0),a.listenOnce(Tl.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case El.NO_ERROR:const t=a.getResponseJson();Fl(Hf,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),s(t);break;case El.TIMEOUT:Fl(Hf,"RPC '".concat(e,"' ").concat(r," timed out")),o(new Gl(ql.DEADLINE_EXCEEDED,"Request time out"));break;case El.HTTP_ERROR:const n=a.getStatus();if(Fl(Hf,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ql).indexOf(t)>=0?t:ql.UNKNOWN}(t.status);o(new Gl(e,t.message))}else o(new Gl(ql.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Gl(ql.UNAVAILABLE,"Connection failed."));break;default:Bl()}}finally{Fl(Hf,"RPC '".concat(e,"' ").concat(r," completed."))}});const l=JSON.stringify(i);Fl(Hf,"RPC '".concat(e,"' ").concat(r," sending request:"),i),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const i=Uf(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_l(),o=kl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Cl({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Fl(Hf,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new Bf({ro:t=>{h?Fl(Hf,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(d||(Fl(Hf,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),d=!0),Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Il.EventType.OPEN,()=>{h||Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," transport opened."))}),p(u,Il.EventType.CLOSE,()=>{h||(h=!0,Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.wo())}),p(u,Il.EventType.ERROR,t=>{h||(h=!0,Ul(Hf,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.wo(new Gl(ql.UNAVAILABLE,"The operation could not be completed")))}),p(u,Il.EventType.MESSAGE,t=>{var n;if(!h){const r=t.data[0];Hl(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=nh[e];if(void 0!==t)return sh(t)}(t),r=o.message;void 0===n&&(n=ql.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),h=!0,f.wo(new Gl(n,r)),u.close()}else Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f._o(r)}}),p(o,Nl.STAT_EVENT,t=>{t.stat===Sl.PROXY?Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===Sl.NOPROXY&&Fl(Hf,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function qf(){return"undefined"!=typeof document?document:null}function Gf(e){return new Nh(e,!0)}class Kf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=i,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-n);i>0&&Fl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Qf{constructor(e,t,n,i,r,s,o,a){this.ii=e,this.$o=n,this.Oo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Kf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===ql.RESOURCE_EXHAUSTED?(zl(t.toString()),zl("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===ql.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,i]=e;this.Fo===t&&this.Zo(n,i)},t=>{e(()=>{const e=new Gl(ql.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Fl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Fl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yf extends Qf{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bl()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Hl(void 0===t||"string"==typeof t),Uc.fromBase64String(t||"")):(Hl(void 0===t||t instanceof Uint8Array),Uc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ql.UNKNOWN:sh(e.code);return new Gl(t,e.message||"")}(o);n=new vh(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Mh(e,i.document.name),s=Ph(i.document.updateTime),o=i.document.createTime?Ph(i.document.createTime):ac.min(),a=new hu({mapValue:{fields:i.document.fields}}),l=pu.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new gh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Mh(e,i.document),s=i.readTime?Ph(i.readTime):ac.min(),o=pu.newNoDocument(r,s),a=i.removedTargetIds||[];n=new gh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Mh(e,i.document),s=i.removedTargetIds||[];n=new gh([],s,r,null)}else{if(!("filter"in t))return Bl();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new th(i,r),o=e.targetId;n=new yh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ac.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ac.min():t.readTime?Ph(t.readTime):ac.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Fh(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=Vu(i)?{documents:Bh(e,i)}:{query:Hh(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ih(e,t.resumeToken);const i=Sh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(ac.min())>0){n.readTime=Ch(e,t.snapshotVersion.toTimestamp());const i=Sh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Fh(this.serializer),t.removeTarget=e,this.Wo(t)}}class Xf extends Qf{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Hl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(Hl(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Ph(e.updateTime):Ph(t);return n.isEqual(ac.min())&&(n=Ph(t)),new Od(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ph(e.commitTime);return this.listener.cu(n,t)}return Hl(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Fh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Vh(this.serializer,e))};this.Wo(t)}}class $f extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Gl(ql.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[r,s]=i;return this.connection.Io(e,t,n,r,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ql.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Gl(ql.UNKNOWN,e.toString())})}vo(e,t,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,o]=r;return this.connection.vo(e,t,n,s,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===ql.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Gl(ql.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Jf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(zl(t),this.mu=!1):Fl("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Zf{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{lp(this)&&(Fl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Wl(e);t.vu.add(4),await tp(t),t.bu.set("Unknown"),t.vu.delete(4),await ep(t)}(this))})}),this.bu=new Jf(n,i)}}async function ep(e){if(lp(e))for(const t of e.Ru)await t(!0)}async function tp(e){for(const t of e.Ru)await t(!1)}function np(e,t){const n=Wl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),ap(n)?op(n):Np(n).Ko()&&rp(n,t))}function ip(e,t){const n=Wl(e),i=Np(n);n.Au.delete(t),i.Ko()&&sp(n,t),0===n.Au.size&&(i.Ko()?i.jo():lp(n)&&n.bu.set("Unknown"))}function rp(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ac.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Np(e).su(t)}function sp(e,t){e.Vu.qt(t),Np(e).iu(t)}function op(e){e.Vu=new xh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Np(e).start(),e.bu.gu()}function ap(e){return lp(e)&&!Np(e).Uo()&&e.Au.size>0}function lp(e){return 0===Wl(e).vu.size}function cp(e){e.Vu=void 0}async function up(e){e.Au.forEach((t,n)=>{rp(e,t)})}async function dp(e,t){cp(e),ap(e)?(e.bu.Iu(t),op(e)):e.bu.set("Unknown")}async function hp(e,t,n){if(e.bu.set("Online"),t instanceof vh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.Au.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.Au.delete(i),e.Vu.removeTarget(i))}(e,t)}catch(n){Fl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fp(e,n)}else if(t instanceof gh?e.Vu.Ht(t):t instanceof yh?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(ac.min()))try{const t=await Cf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Au.get(i);r&&e.Au.set(i,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const i=e.Au.get(t);if(!i)return;e.Au.set(t,i.withResumeToken(Uc.EMPTY_BYTE_STRING,i.snapshotVersion)),sp(e,t);const r=new ef(i.target,t,n,i.sequenceNumber);rp(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Fl("RemoteStore","Failed to raise snapshot:",t),await fp(e,t)}}async function fp(e,t,n){if(!_c(t))throw t;e.vu.add(1),await tp(e),e.bu.set("Offline"),n||(n=()=>Cf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Fl("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await ep(e)})}function pp(e,t){return t().catch(n=>fp(e,n,t))}async function mp(e){const t=Wl(e),n=Sp(t);let i=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;gp(t);)try{const e=await Af(t.localStore,i);if(null===e){0===t.Eu.length&&n.jo();break}i=e.batchId,yp(t,e)}catch(e){await fp(t,e)}vp(t)&&bp(t)}function gp(e){return lp(e)&&e.Eu.length<10}function yp(e,t){e.Eu.push(t);const n=Sp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function vp(e){return lp(e)&&!Sp(e).Uo()&&e.Eu.length>0}function bp(e){Sp(e).start()}async function xp(e){Sp(e).hu()}async function wp(e){const t=Sp(e);for(const n of e.Eu)t.uu(n.mutations)}async function _p(e,t,n){const i=e.Eu.shift(),r=Zd.from(i,t,n);await pp(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await mp(e)}async function kp(e,t){t&&Sp(e).ou&&await async function(e,t){if(rh(n=t.code)&&n!==ql.ABORTED){const n=e.Eu.shift();Sp(e).Qo(),await pp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await mp(e)}var n}(e,t),vp(e)&&bp(e)}async function Ep(e,t){const n=Wl(e);n.asyncQueue.verifyOperationInProgress(),Fl("RemoteStore","RemoteStore received new credentials");const i=lp(n);n.vu.add(3),await tp(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await ep(n)}async function Tp(e,t){const n=Wl(e);t?(n.vu.delete(2),await ep(n)):t||(n.vu.add(2),await tp(n),n.bu.set("Unknown"))}function Np(e){return e.Su||(e.Su=function(e,t,n){const i=Wl(e);return i.fu(),new Yf(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:up.bind(null,e),ao:dp.bind(null,e),nu:hp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),ap(e)?op(e):e.bu.set("Unknown")):(await e.Su.stop(),cp(e))})),e.Su}function Sp(e){return e.Du||(e.Du=function(e,t,n){const i=Wl(e);return i.fu(),new Xf(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:xp.bind(null,e),ao:kp.bind(null,e),au:wp.bind(null,e),cu:_p.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await mp(e)):(await e.Du.stop(),e.Eu.length>0&&(Fl("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class Cp{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Kl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new Cp(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gl(ql.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(e,t){if(zl("AsyncQueue","".concat(t,": ").concat(e)),_c(e))return new Gl(ql.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ap{constructor(e){this.comparator=e?(t,n)=>e(t,n)||hc.comparator(t.key,n.key):(e,t)=>hc.comparator(e.key,t.key),this.keyedMap=ud(),this.sortedSet=new Dc(this.comparator)}static emptySet(e){return new Ap(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ap))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ap;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Pp{constructor(){this.Cu=new Dc(hc.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Bl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class jp{constructor(e,t,n,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new jp(e,t,Ap.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class Dp{constructor(){this.Nu=void 0,this.listeners=[]}}class Rp{constructor(){this.queries=new od(e=>ed(e),Zu),this.onlineState="Unknown",this.ku=new Set}}async function Mp(e,t){const n=Wl(e),i=t.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new Dp),r)try{s.Nu=await n.onListen(i)}catch(e){const n=Ip(e,"Initialization of query '".concat(td(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&zp(n)}async function Op(e,t){const n=Wl(e),i=t.query;let r=!1;const s=n.queries.get(i);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),r=0===s.listeners.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function Lp(e,t){const n=Wl(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(r)&&(i=!0);t.Nu=r}}i&&zp(n)}function Fp(e,t,n){const i=Wl(e),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(t)}function zp(e){e.ku.forEach(e=>{e.next()})}class Up{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new jp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Vp{constructor(e){this.key=e}}class Bp{constructor(e){this.key=e}}class Hp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=yd(),this.mutatedKeys=yd(),this.tc=rd(e),this.ec=new Ap(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Pp,i=t?t.ec:this.ec;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((e,t)=>{const c=i.get(e),u=nd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),r=h?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:r}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==r.length||a?{snapshot:new jp(this.query,e.ec,i,r,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Pp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=yd(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Bp(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Vp(n))}),t}hc(e){this.Yu=e.ir,this.Zu=yd();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return jp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Wp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class qp{constructor(e){this.key=e,this.fc=!1}}class Gp{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new od(e=>ed(e),Zu),this._c=new Map,this.mc=new Set,this.gc=new Dc(hc.comparator),this.yc=new Map,this.Ic=new pf,this.Tc={},this.Ec=new Map,this.Ac=lf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Kp(e,t){const n=dm(e);let i,r;const s=n.wc.get(t);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const e=await Pf(n.localStore,Xu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,r=await Qp(n,t,i,"current"===s,e.resumeToken),n.isPrimaryClient&&np(n.remoteStore,e)}return r}async function Qp(e,t,n,i,r){e.Rc=(t,n,i)=>async function(e,t,n,i){let r=t.view.sc(n);r.zi&&(r=await Df(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,r)}));const s=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(r,e.isPrimaryClient,s);return sm(e,t.targetId,o.cc),o.snapshot}(e,t,n,i);const s=await Df(e.localStore,t,!0),o=new Hp(t,s.ir),a=o.sc(s.documents),l=mh.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);sm(e,n,c.cc);const u=new Wp(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Yp(e,t){const n=Wl(e),i=n.wc.get(t),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(e=>!Zu(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await jf(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),ip(n.remoteStore,i.targetId),im(n,i.targetId)}).catch(xc)):(im(n,i.targetId),await jf(n.localStore,i.targetId,!0))}async function Xp(e,t){const n=Wl(e);try{const e=await function(e,t){const n=Wl(e),i=t.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const o=[];t.targetChanges.forEach((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Uc.EMPTY_BYTE_STRING,ac.min()).withLastLimboFreeSnapshotVersion(ac.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))});let a=ld(),l=yd();if(t.documentUpdates.forEach(i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))}),o.push(If(e,s,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!i.isEqual(ac.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,i));o.push(t)}return wc.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=r,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const i=n.yc.get(t);i&&(Hl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.fc=!0:e.modifiedDocuments.size>0?Hl(i.fc):e.removedDocuments.size>0&&(Hl(i.fc),i.fc=!1))}),await lm(n,e,t)}catch(e){await xc(e)}}function $p(e,t,n){const i=Wl(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.wc.forEach((n,i)=>{const r=i.view.Mu(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=Wl(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.listeners)r.Mu(t)&&(i=!0)}),i&&zp(n)}(i.eventManager,t),e.length&&i.dc.nu(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Jp(e,t,n){const i=Wl(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.yc.get(t),s=r&&r.key;if(s){let e=new Dc(hc.comparator);e=e.insert(s,pu.newNoDocument(s,ac.min()));const n=yd().add(s),r=new ph(ac.min(),new Map,new Dc(rc),e,n);await Xp(i,r),i.gc=i.gc.remove(s),i.yc.delete(t),am(i)}else await jf(i.localStore,t,!1).then(()=>im(i,t,n)).catch(xc)}async function Zp(e,t){const n=Wl(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Wl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const i=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=wc.resolve();return s.forEach(e=>{o=o.next(()=>i.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Hl(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,i))})}(n.localStore,t);nm(n,i,null),tm(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await lm(n,e)}catch(e){await xc(e)}}async function em(e,t,n){const i=Wl(e);try{const e=await function(e,t){const n=Wl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Hl(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)).next(()=>n.localDocuments.getDocuments(e,i))})}(i.localStore,t);nm(i,t,n),tm(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await lm(i,e)}catch(n){await xc(n)}}function tm(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function nm(e,t,n){const i=Wl(e);let r=i.Tc[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function im(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e._c.get(t))e.wc.delete(i),n&&e.dc.Pc(i,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||rm(e,t)})}function rm(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(ip(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),am(e))}function sm(e,t,n){for(const i of n)i instanceof Vp?(e.Ic.addReference(i.key,t),om(e,i)):i instanceof Bp?(Fl("SyncEngine","Document no longer in limbo: "+i.key),e.Ic.removeReference(i.key,t),e.Ic.containsKey(i.key)||rm(e,i.key)):Bl()}function om(e,t){const n=t.key,i=n.path.canonicalString();e.gc.get(n)||e.mc.has(i)||(Fl("SyncEngine","New document in limbo: "+n),e.mc.add(i),am(e))}function am(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new hc(cc.fromString(t)),i=e.Ac.next();e.yc.set(i,new qp(n)),e.gc=e.gc.insert(n,i),np(e.remoteStore,new ef(Xu(Wu(n.path)),i,"TargetPurposeLimboResolution",kc.ct))}}async function lm(e,t,n){const i=Wl(e),r=[],s=[],o=[];i.wc.isEmpty()||(i.wc.forEach((e,a)=>{o.push(i.Rc(a,t,n).then(e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=kf.Li(a.targetId,e);s.push(t)}}))}),await Promise.all(o),i.dc.nu(r),await async function(e,t){const n=Wl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>wc.forEach(t,t=>wc.forEach(t.Fi,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>wc.forEach(t.Bi,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!_c(e))throw e;Fl("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ji.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(e,r)}}}(i.localStore,s))}async function cm(e,t){const n=Wl(e);if(!n.currentUser.isEqual(t)){Fl("SyncEngine","User change. New user:",t.toKey());const e=await Sf(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Gl(ql.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await lm(n,e.er)}}function um(e,t){const n=Wl(e),i=n.yc.get(t);if(i&&i.fc)return yd().add(i.key);{let e=yd();const i=n._c.get(t);if(!i)return e;for(const t of i){const i=n.wc.get(t);e=e.unionWith(i.view.nc)}return e}}function dm(e){const t=Wl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=um.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jp.bind(null,t),t.dc.nu=Lp.bind(null,t.eventManager),t.dc.Pc=Fp.bind(null,t.eventManager),t}function hm(e){const t=Wl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=em.bind(null,t),t}class fm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Nf(this.persistence,new Ef,e.initialUser,this.serializer)}createPersistence(e){return new xf(_f.zs,this.serializer)}createSharedClientState(e){return new Of}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$p(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=cm.bind(null,this.syncEngine),await Tp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Rp}createDatastore(e){const t=Gf(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new Wf(i));var i;return function(e,t,n,i){return new $f(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=e=>$p(this.syncEngine,e,0),s=Ff.D()?new Ff:new Lf,new Zf(t,n,i,r,s);var t,n,i,r,s}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Gp(e,t,n,i,r,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Wl(e);Fl("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await tp(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class mm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zl("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Gl(ql.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Wl(e),i=Fh(n.serializer)+"/documents",r={documents:t.map(e=>Rh(n.serializer,e))},s=await n.vo("BatchGetDocuments",i,r,t.length),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Hl(!!t.found),t.found.name,t.found.updateTime;const n=Mh(e,t.found.name),i=Ph(t.found.updateTime),r=t.found.createTime?Ph(t.found.createTime):ac.min(),s=new hu({mapValue:{fields:t.found.fields}});return pu.newFoundDocument(n,i,r,s)}(e,t):"missing"in t?function(e,t){Hl(!!t.missing),Hl(!!t.readTime);const n=Mh(e,t.missing),i=Ph(t.readTime);return pu.newNoDocument(n,i)}(e,t):Bl()}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Hl(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=hc.fromPath(t);this.mutations.push(new $d(n,this.precondition(n)))}),await async function(e,t){const n=Wl(e),i=Fh(n.serializer)+"/documents",r={writes:t.map(e=>Vh(n.serializer,e))};await n.Io("Commit",i,r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bl();t=ac.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Gl(ql.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ac.min())?Ld.exists(!1):Ld.updateTime(t):Ld.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ac.min()))throw new Gl(ql.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ld.updateTime(t)}return Ld.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ym{constructor(e,t,n,i,r){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=r,this.Bc=n.maxAttempts,this.qo=new Kf(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new gm(this.datastore),t=this.qc(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Uc(e)}))}).catch(e=>{this.Uc(e)})})}qc(e){try{const t=this.updateFunction(e);return!Ec(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rh(t)}return!1}}class vm{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Rl.UNAUTHENTICATED,this.clientId=ic.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Fl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Fl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Gl(ql.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ip(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function bm(e,t){e.asyncQueue.verifyOperationInProgress(),Fl("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async e=>{i.isEqual(e)||(await Sf(t.localStore,e),i=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function xm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _m(e);Fl("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener(e=>Ep(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ep(t.remoteStore,n)),e._onlineComponents=t}function wm(e){return"FirebaseError"===e.name?e.code===ql.FAILED_PRECONDITION||e.code===ql.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function _m(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Fl("FirestoreClient","Using user provided OfflineComponentProvider");try{await bm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!wm(n))throw n;Ul("Error using user provided cache. Falling back to memory cache: "+n),await bm(e,new fm)}}else Fl("FirestoreClient","Using default OfflineComponentProvider"),await bm(e,new fm);return e._offlineComponents}async function km(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Fl("FirestoreClient","Using user provided OnlineComponentProvider"),await xm(e,e._uninitializedComponentsProvider._online)):(Fl("FirestoreClient","Using default OnlineComponentProvider"),await xm(e,new pm))),e._onlineComponents}function Em(e){return km(e).then(e=>e.syncEngine)}function Tm(e){return km(e).then(e=>e.datastore)}async function Nm(e){const t=await km(e),n=t.eventManager;return n.onListen=Kp.bind(null,t.syncEngine),n.onUnlisten=Yp.bind(null,t.syncEngine),n}function Sm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Kl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,i,r){const s=new mm({next:s=>{t.enqueueAndForget(()=>Op(e,o));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new Gl(ql.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new Gl(ql.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new Up(Wu(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Mp(e,o)}(await Nm(e),e.asyncQueue,t,n,i)),i.promise}function Cm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Kl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,i,r){const s=new mm({next:n=>{t.enqueueAndForget(()=>Op(e,o)),n.fromCache&&"server"===i.source?r.reject(new Gl(ql.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new Up(n,s,{includeMetadataChanges:!0,Ku:!0});return Mp(e,o)}(await Nm(e),e.asyncQueue,t,n,i)),i.promise}function Im(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Am=new Map;function Pm(e,t,n){if(!n)throw new Gl(ql.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function jm(e){if(!hc.isDocumentKey(e))throw new Gl(ql.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dm(e){if(hc.isDocumentKey(e))throw new Gl(ql.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Bl()}function Mm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gl(ql.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rm(e);throw new Gl(ql.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Om{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Gl(ql.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Gl(ql.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new Gl(ql.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Im(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Gl(ql.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Gl(ql.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Gl(ql.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Lm{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Om({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Gl(ql.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Gl(ql.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Om(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Yl;switch(e.type){case"firstParty":return new Zl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Gl(ql.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Am.get(e);t&&(Fl("ComponentProvider","Removing Datastore"),Am.delete(e),t.terminate())}(this),Promise.resolve()}}class Fm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Um(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fm(this.firestore,e,this._key)}}class zm{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new zm(this.firestore,e,this._query)}}class Um extends zm{constructor(e,t,n){super(e,t,Wu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fm(this.firestore,null,new hc(e))}withConverter(e){return new Um(this.firestore,e,this._path)}}function Vm(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=O(e),Pm("collection","path",t),e instanceof Lm){const n=cc.fromString(t,...i);return Dm(n),new Um(e,null,n)}{if(!(e instanceof Fm||e instanceof Um))throw new Gl(ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...i));return Dm(n),new Um(e.firestore,null,n)}}function Bm(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=O(e),1===arguments.length&&(t=ic.A()),Pm("doc","path",t),e instanceof Lm){const n=cc.fromString(t,...i);return jm(n),new Fm(e,null,new hc(n))}{if(!(e instanceof Fm||e instanceof Um))throw new Gl(ql.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...i));return jm(n),new Fm(e.firestore,e instanceof Um?e.converter:null,new hc(n))}}class Hm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Kf(this,"async_queue_retry"),this.Xc=()=>{const e=qf();e&&Fl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=qf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=qf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Kl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!_c(e))throw e;Fl("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw zl("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=Cp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(i),i}Zc(){this.Wc&&Bl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Wm(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class qm extends Lm{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Hm,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Km(this),this._firestoreClient.terminate()}}function Gm(e){return e._firestoreClient||Km(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Km(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Qc(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Im(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new vm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}class Qm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qm(Uc.fromBase64String(e))}catch(e){throw new Gl(ql.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Qm(Uc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ym{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new Gl(ql.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xm{constructor(e){this._methodName=e}}class $m{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Gl(ql.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Gl(ql.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rc(this._lat,e._lat)||rc(this._long,e._long)}}const Jm=/^__.*__$/;class Zm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Gd(e,this.data,this.fieldMask,t,this.fieldTransforms):new qd(e,this.data,t,this.fieldTransforms)}}class eg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Gd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bl()}}class ng{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.fa(e),i}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return bg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(tg(this.ca)&&Jm.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ig{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Gf(e)}ya(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ng({ca:e,methodName:t,ga:n,path:dc.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rg(e){const t=e._freezeSettings(),n=Gf(e._databaseId);return new ig(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sg(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,r);mg("Data must be an object, but it was:",o,i);const a=fg(i,o);let l,c;if(s.merge)l=new Fc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=gg(t,i,n);if(!o.contains(r))throw new Gl(ql.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));xg(e,r)||e.push(r)}l=new Fc(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Zm(new hu(a),l,c)}class og extends Xm{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof og}}function ag(e,t,n){return new ng({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class lg extends Xm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ag(this,e,!0),n=this.pa.map(e=>hg(e,t)),i=new Cd(n);return new Md(e.path,i)}isEqual(e){return this===e}}function cg(e,t,n,i){const r=e.ya(1,t,n);mg("Data must be an object, but it was:",r,i);const s=[],o=hu.empty();Pc(i,(e,i)=>{const a=vg(t,e,n);i=O(i);const l=r.da(a);if(i instanceof og)s.push(a);else{const e=hg(i,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Fc(s);return new eg(o,a,r.fieldTransforms)}function ug(e,t,n,i,r,s){const o=e.ya(1,t,n),a=[gg(t,i,n)],l=[r];if(s.length%2!=0)throw new Gl(ql.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(gg(t,s[h])),l.push(s[h+1]);const c=[],u=hu.empty();for(let h=a.length-1;h>=0;--h)if(!xg(c,a[h])){const e=a[h];let t=l[h];t=O(t);const n=o.da(e);if(t instanceof og)c.push(e);else{const i=hg(t,n);null!=i&&(c.push(e),u.set(e,i))}}const d=new Fc(c);return new eg(u,d,o.fieldTransforms)}function dg(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hg(n,e.ya(i?4:3,t))}function hg(e,t){if(pg(e=O(e)))return mg("Unsupported field value:",t,e),fg(e,t);if(e instanceof Xm)return function(e,t){if(!tg(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=hg(r,t.wa(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=O(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _d(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=oc.fromDate(e);return{timestampValue:Ch(t.serializer,n)}}if(e instanceof oc){const n=new oc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ch(t.serializer,n)}}if(e instanceof $m)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qm)return{bytesValue:Ih(t.serializer,e._byteString)};if(e instanceof Fm){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t._a("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:jh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Rm(e)))}(e,t)}function fg(e,t){const n={};return jc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pc(e,(e,i)=>{const r=hg(i,t.ha(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function pg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof oc||e instanceof $m||e instanceof Qm||e instanceof Fm||e instanceof Xm)}function mg(e,t,n){if(!pg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=Rm(n);throw"an object"===i?t._a(e+" a custom object"):t._a(e+" "+i)}}function gg(e,t,n){if((t=O(t))instanceof Ym)return t._internalPath;if("string"==typeof t)return vg(e,t);throw bg("Field path arguments must be of type string or ",e,!1,void 0,n)}const yg=new RegExp("[~\\*/\\[\\]]");function vg(e,t,n){if(t.search(yg)>=0)throw bg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ym(...t.split("."))._internalPath}catch(i){throw bg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function bg(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new Gl(ql.INVALID_ARGUMENT,a+e+l)}function xg(e,t){return e.some(e=>e.isEqual(t))}class wg{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Fm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _g(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _g extends wg{data(){return super.data()}}function kg(e,t){return"string"==typeof t?vg(e,t):t instanceof Ym?t._internalPath:t._delegate._internalPath}function Eg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Gl(ql.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class Ng extends Tg{}function Sg(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof Tg&&n.push(t),n=n.concat(r),function(e){const t=e.filter(e=>e instanceof Ag).length,n=e.filter(e=>e instanceof Cg).length;if(t>1||t>0&&n>0)throw new Gl(ql.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Cg extends Ng{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Cg(e,t,n)}_apply(e){const t=this._parse(e);return Mg(e._query,t),new zm(e.firestore,e.converter,$u(e._query,t))}_parse(e){const t=rg(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Gl(ql.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Rg(o,s);const t=[];for(const n of o)t.push(Dg(i,e,n));a={arrayValue:{values:t}}}else a=Dg(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Rg(o,s),a=dg(n,"where",o,"in"===s||"not-in"===s);return wu.create(r,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ig(e,t,n){const i=t,r=kg("where",e);return Cg._create(r,i,n)}class Ag extends Tg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ag(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:_u.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)Mg(n,r),n=$u(n,r)}(e._query,t),new zm(e.firestore,e.converter,$u(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Pg extends Ng{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Pg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new vu(t,n);return function(e,t){if(null===Gu(e)){const n=Ku(e);null!==n&&Og(e,n,t.field)}}(e,i),i}(e._query,this._field,this._direction);return new zm(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function jg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kg("orderBy",e);return Pg._create(n,t)}function Dg(e,t,n){if("string"==typeof(n=O(n))){if(""===n)throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qu(t)&&-1!==n.indexOf("/"))throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=t.path.child(cc.fromString(n));if(!hc.isDocumentKey(i))throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return ru(e,new hc(i))}if(n instanceof Fm)return ru(e,n._key);throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Rm(n),"."))}function Rg(e,t){if(!Array.isArray(e)||0===e.length)throw new Gl(ql.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Mg(e,t){if(t.isInequality()){const n=Ku(e),i=t.field;if(null!==n&&!n.isEqual(i))throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(i.toString(),"'"));const r=Gu(e);null!==r&&Og(e,i,r)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Gl(ql.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Gl(ql.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Og(e,t,n){if(!n.isEqual(t))throw new Gl(ql.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Lg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pc(e,(e,i)=>{n[e]=this.convertValue(i,t)}),n}convertGeoPoint(e){return new $m(Hc(e.latitude),Hc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Gc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){const t=Bc(e);return new oc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cc.fromString(e);Hl(Zh(n));const i=new Yc(n.get(1),n.get(3)),r=new hc(n.popFirst(5));return i.isEqual(t)||zl("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function Fg(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class zg extends Lg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fm(this.firestore,null,t)}}class Ug{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vg extends wg{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Bg extends Vg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Hg{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ug(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bg(this._firestore,this._userDataWriter,n.key,n,new Ug(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Gl(ql.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const i=new Bg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ug(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const i=new Bg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ug(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wg(t.type),doc:i,oldIndex:r,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Wg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bl()}}class qg extends Lg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fm(this.firestore,null,t)}}function Gg(e){e=Mm(e,zm);const t=Mm(e.firestore,qm),n=Gm(t),i=new qg(t);return Eg(e._query),Cm(n,e._query).then(n=>new Hg(t,i,e,n))}function Kg(e,t,n){e=Mm(e,Fm);const i=Mm(e.firestore,qm),r=Fg(e.converter,t,n);return $g(i,[sg(rg(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Ld.none())])}function Qg(e,t,n){e=Mm(e,Fm);const i=Mm(e.firestore,qm),r=rg(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=O(t))||t instanceof Ym?ug(r,"updateDoc",e._key,t,n,a):cg(r,"updateDoc",e._key,t),$g(i,[s.toMutation(e._key,Ld.exists(!0))])}function Yg(e,t){const n=Mm(e.firestore,qm),i=Bm(e),r=Fg(e.converter,t);return $g(n,[sg(rg(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,Ld.exists(!1))]).then(()=>i)}function Xg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,s,o;e=O(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Wm(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Wm(n[l])){const e=n[l];n[l]=null===(r=e.next)||void 0===r?void 0:r.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof Fm)d=Mm(e.firestore,qm),h=Wu(e._key.path),u={next:t=>{n[l]&&n[l](Jg(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Mm(e,zm);d=Mm(t.firestore,qm),h=t._query;const i=new qg(d);u={next:e=>{n[l]&&n[l](new Hg(d,i,t,e))},error:n[l+1],complete:n[l+2]},Eg(e._query)}return function(e,t,n,i){const r=new mm(i),s=new Up(t,r,n);return e.asyncQueue.enqueueAndForget(async()=>Mp(await Nm(e),s)),()=>{r.Dc(),e.asyncQueue.enqueueAndForget(async()=>Op(await Nm(e),s))}}(Gm(d),h,c,u)}function $g(e,t){return function(e,t){const n=new Kl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const i=hm(e);try{const e=await function(e,t){const n=Wl(e),i=oc.now(),r=t.reduce((e,t)=>e.add(t.key),yd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ld(),l=yd();return n.Zi.getEntries(e,r).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(r=>{s=r;const o=[];for(const e of t){const t=Hd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Gd(e.key,t,fu(t.value.mapValue),Ld.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)}).next(t=>{o=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)})}).then(()=>({batchId:o.batchId,changes:dd(s)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Tc[e.currentUser.toKey()];i||(i=new Dc(rc)),i=i.insert(t,n),e.Tc[e.currentUser.toKey()]=i}(i,e.batchId,n),await lm(i,e.changes),await mp(i.remoteStore)}catch(e){const t=Ip(e,"Failed to persist write");n.reject(t)}}(await Em(e),t,n)),n.promise}(Gm(e),t)}function Jg(e,t,n){const i=n.docs.get(t._key),r=new qg(e);return new Vg(e,r,t._key,i,new Ug(n.hasPendingWrites,n.fromCache),t.converter)}const Zg={maxAttempts:5};class ey{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rg(e)}set(e,t,n){this._verifyNotCommitted();const i=ty(e,this._firestore),r=Fg(i.converter,t,n),s=sg(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,Ld.none())),this}update(e,t,n){this._verifyNotCommitted();const i=ty(e,this._firestore);let r;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return r="string"==typeof(t=O(t))||t instanceof Ym?ug(this._dataReader,"WriteBatch.update",i._key,t,n,o):cg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ld.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ty(e,this._firestore);return this._mutations=this._mutations.concat(new Xd(t._key,Ld.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gl(ql.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ty(e,t){if((e=O(e)).firestore!==t)throw new Gl(ql.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ny extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rg(e)}get(e){const t=ty(e,this._firestore),n=new zg(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Bl();const i=e[0];if(i.isFoundDocument())return new wg(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new wg(this._firestore,n,t._key,null,t.converter);throw Bl()})}set(e,t,n){const i=ty(e,this._firestore),r=Fg(i.converter,t,n),s=sg(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(e,t,n){const i=ty(e,this._firestore);let r;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return r="string"==typeof(t=O(t))||t instanceof Ym?ug(this._dataReader,"Transaction.update",i._key,t,n,o):cg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}delete(e){const t=ty(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ty(e,this._firestore),n=new qg(this._firestore);return super.get(e).then(e=>new Vg(this._firestore,n,t._key,e._document,new Ug(!1,!1),t.converter))}}function iy(e,t,n){e=Mm(e,qm);const i=Object.assign(Object.assign({},Zg),n);return function(e){if(e.maxAttempts<1)throw new Gl(ql.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(e,t,n){const i=new Kl;return e.asyncQueue.enqueueAndForget(async()=>{const r=await Tm(e);new ym(e.asyncQueue,r,n,t,i).run()}),i.promise}(Gm(e),n=>t(new ny(e,n)),i)}function ry(){return new og("deleteField")}function sy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lg("arrayUnion",t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ml=e}(Ke),He(new L("firestore",(e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new qm(new $l(e.getProvider("auth-internal")),new tc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gl(ql.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yc(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Xe(Dl,"3.13.0",e),Xe(Dl,"3.13.0","esm2017")}();const oy="firebasestorage.googleapis.com",ay="storageBucket";class ly extends N{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(dy(e),"Firebase Storage: ".concat(t," (").concat(dy(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ly.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var cy,uy;function dy(e){return"storage/"+e}function hy(){return new ly(cy.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function fy(){return new ly(cy.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function py(){return new ly(cy.CANCELED,"User canceled the upload/download.")}function my(){return new ly(cy.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gy(e){return new ly(cy.INVALID_ARGUMENT,e)}function yy(){return new ly(cy.APP_DELETED,"The Firebase app was deleted.")}function vy(e,t){return new ly(cy.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function by(e){throw new ly(cy.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(cy||(cy={}));class xy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=xy.makeFromUrl(e,t)}catch(r){return new xy(e,"")}if(""===n.path)return n;throw i=e,new ly(cy.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===oy?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new xy(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new ly(cy.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class wy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function _y(e){return"string"===typeof e||e instanceof String}function ky(e){return Ey()&&e instanceof Blob}function Ey(){return"undefined"!==typeof Blob&&!E()}function Ty(e,t,n,i){if(i<t)throw gy("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw gy("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ny(e,t,n){let i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function Sy(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function Cy(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(uy||(uy={}));class Iy{constructor(e,t,n,i,r,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ay(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===uy.NO_ERROR,r=n.getStatus();if(!t||Cy(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===uy.ABORT;return void e(!1,new Ay(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new Ay(s,n))})},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){i(s)}else if(null!==r){const e=hy();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?yy():py())}else{i(fy())}};this.canceled_?t(0,new Ay(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function d(t){r=setTimeout(()=>{r=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==r?(e||(a=2),clearTimeout(r),d(0)):e||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ay{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Py(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function jy(){const e=Py();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ey())return new Blob(n);throw new ly(cy.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Dy(e){if("undefined"===typeof atob)throw t="base-64",new ly(cy.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Ry="raw",My="base64",Oy="base64url",Ly="data_url";class Fy{constructor(e,t){this.data=e,this.contentType=t||null}}function zy(e,t){switch(e){case Ry:return new Fy(Uy(t));case My:case Oy:return new Fy(Vy(e,t));case Ly:return new Fy(function(e){const t=new By(e);return t.base64?Vy(My,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw vy(Ly,"Malformed data URL.")}return Uy(t)}(t.rest)}(t),new By(t).contentType)}throw hy()}function Uy(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)}else t.push(239,191,189)}else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Vy(e,t){switch(e){case My:{const n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i){throw vy(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Oy:{const n=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(n||i){throw vy(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Dy(t)}catch(r){if(r.message.includes("polyfill"))throw r;throw vy(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class By{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw vy(Ly,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Hy{constructor(e,t){let n=0,i="";ky(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ky(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Hy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Hy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ey()){const e=t.map(e=>e instanceof Hy?e.data_:e);return new Hy(jy.apply(null,e))}{const e=t.map(e=>_y(e)?zy(Ry,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const i=new Uint8Array(n);let r=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)i[r++]=e[t]}),new Hy(i,!0)}}uploadData(){return this.data_}}function Wy(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function qy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Gy(e,t){return t}class Ky{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||Gy}}let Qy=null;function Yy(){if(Qy)return Qy;const e=[];e.push(new Ky("bucket")),e.push(new Ky("generation")),e.push(new Ky("metageneration")),e.push(new Ky("name","fullPath",!0));const t=new Ky("name");t.xform=function(e,t){return function(e){return!_y(e)||e.length<2?e:qy(e)}(t)},e.push(t);const n=new Ky("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ky("timeCreated")),e.push(new Ky("updated")),e.push(new Ky("md5Hash",null,!0)),e.push(new Ky("cacheControl",null,!0)),e.push(new Ky("contentDisposition",null,!0)),e.push(new Ky("contentEncoding",null,!0)),e.push(new Ky("contentLanguage",null,!0)),e.push(new Ky("contentType",null,!0)),e.push(new Ky("metadata","customMetadata",!0)),Qy=e,Qy}function Xy(e,t,n){const i={type:"file"},r=n.length;for(let s=0;s<r;s++){const e=n[s];i[e.local]=e.xform(i,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,i=e.fullPath,r=new xy(n,i);return t._makeStorageReference(r)}})}(i,e),i}function $y(e,t,n){const i=Wy(t);if(null===i)return null;return Xy(e,i,n)}function Jy(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const i=t[r];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}class Zy{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ev(e){if(!e)throw hy()}function tv(e,t){return function(n,i){const r=$y(e,i,t);return ev(null!==r),r}}function nv(e,t){return function(n,i){const r=$y(e,i,t);return ev(null!==r),function(e,t,n,i){const r=Wy(t);if(null===r)return null;if(!_y(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const r=e.bucket,s=e.fullPath;return Ny("/b/"+o(r)+"/o/"+o(s),n,i)+Sy({alt:"media",token:t})})[0]}(r,i,e.host,e._protocol)}}function iv(e){return function(t,n){let i;var r,s;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new ly(cy.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ly(cy.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,i=new ly(cy.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new ly(cy.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function rv(e){const t=iv(e);return function(n,i){let r=t(n,i);var s;return 404===n.getStatus()&&(s=e.path,r=new ly(cy.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),r.serverResponse=i.serverResponse,r}}function sv(e,t,n){const i=Ny(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new Zy(i,"GET",tv(e,n),r);return s.errorHandler=rv(t),s}function ov(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function av(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=ov(t,i,r),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Jy(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Hy.getBlob(c,i,u);if(null===d)throw my();const h={name:l.fullPath},f=Ny(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Zy(f,"POST",tv(e,n),p);return m.urlParams=h,m.headers=o,m.body=d.uploadData(),m.errorHandler=iv(t),m}class lv{constructor(e,t,n,i){this.current=e,this.total=t,this.finalized=!!n,this.metadata=i||null}}function cv(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){ev(!1)}return ev(!!n&&-1!==(t||["active"]).indexOf(n)),n}const uv=262144;function dv(e,t,n,i,r,s,o,a){const l=new lv(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw new ly(cy.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=i.slice(d,h);if(null===m)throw my();const g=t.maxUploadRetryTime,y=new Zy(n,"POST",function(e,n){const r=cv(e,["active","final"]),o=l.current+u,a=i.size();let c;return c="final"===r?tv(t,s)(e,n):null,new lv(o,a,"final"===r,c)},g);return y.headers=p,y.body=m.uploadData(),y.progressCallback=a||null,y.errorHandler=iv(e),y}const hv="running",fv="paused",pv="success",mv="canceled",gv="error";function yv(e){switch(e){case"running":case"pausing":case"canceling":return hv;case"paused":return fv;case"success":return pv;case"canceled":return mv;default:return gv}}class vv{constructor(e,t,n){const i=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(i)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function bv(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Promise.resolve().then(()=>e(...n))}}class xv{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uy.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uy.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uy.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw by("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw by("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw by("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw by("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw by("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class wv extends xv{initXhr(){this.xhr_.responseType="text"}}function _v(){return new wv}class kv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Yy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(cy.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Cy(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=fy()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(cy.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(t=>{let[n,i]=t;switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o=ov(t,i,r),a={name:o.fullPath},l=Ny(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(i.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Jy(o,n),d=e.maxUploadRetryTime,h=new Zy(l,"POST",function(e){let t;cv(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){ev(!1)}return ev(_y(t)),t},d);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=iv(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,_v,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const i=function(e,t,n,i){const r=e.maxUploadRetryTime,s=new Zy(n,"POST",function(e){const t=cv(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){ev(!1)}n||ev(!1);const r=Number(n);return ev(!isNaN(r)),new lv(r,i.size(),"final"===t)},r);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=iv(t),s}(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(i,_v,t,n);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=uv*this._chunkMultiplier,t=new lv(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((i,r)=>{let s;try{s=dv(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,_v,i,r,!1);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(uv*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=sv(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(n,_v,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=av(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(n,_v,e,t);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=py(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,i){const r=new vv(t||void 0,n||void 0,i||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yv(this._state)){case pv:bv(this._resolve.bind(null,this.snapshot))();break;case mv:case gv:bv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yv(this._state)){case hv:case fv:e.next&&bv(e.next.bind(e,this.snapshot))();break;case pv:e.complete&&bv(e.complete.bind(e))();break;default:e.error&&bv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ev{constructor(e,t){this._service=e,this._location=t instanceof xy?t:xy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ev(e,t)}get root(){const e=new xy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new xy(this._location.bucket,e);return new Ev(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ly(cy.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Tv(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const i=Ny(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new Zy(i,"GET",nv(e,n),r);return s.errorHandler=rv(t),s}(e.storage,e._location,Yy());return e.storage.makeRequestWithTokens(t,_v).then(e=>{if(null===e)throw new ly(cy.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Nv(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new xy(e._location.bucket,n);return new Ev(e.storage,i)}function Sv(e,t){if(e instanceof Av){const n=e;if(null==n._bucket)throw new ly(cy.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ay+"' property when initializing the app?");const i=new Ev(n,n._bucket);return null!=t?Sv(i,t):i}return void 0!==t?Nv(e,t):e}function Cv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Av)return new Ev(e,t);throw gy("To use ref(service, url), the first argument must be a Storage instance.")}return Sv(e,t)}function Iv(e,t){const n=null===t||void 0===t?void 0:t[ay];return null==n?null:xy.makeFromBucketSpec(n,e)}class Av{constructor(e,t,n,i,r){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=oy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?xy.makeFromBucketSpec(i,this._host):Iv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=xy.makeFromBucketSpec(this._url,e):this._bucket=Iv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ty("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ty("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ev(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new wy(yy());{const s=function(e,t,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Sy(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,i),new Iy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(e,this._appId,n,i,t,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const Pv="@firebase/storage",jv="0.11.2",Dv="storage";function Rv(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new kv(e,new Hy(t),n)}(e=O(e),t,n)}function Mv(e){return Tv(e=O(e))}function Ov(e,t){return Cv(e=O(e),t)}function Lv(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Av(i,r,s,n,Ke)}function Fv(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zv(e){return e+.5|0}He(new L(Dv,Lv,"PUBLIC").setMultipleInstances(!0)),Xe(Pv,jv,""),Xe(Pv,jv,"esm2017");const Uv=(e,t,n)=>Math.max(Math.min(e,n),t);function Vv(e){return Uv(zv(2.55*e),0,255)}function Bv(e){return Uv(zv(255*e),0,255)}function Hv(e){return Uv(zv(e/2.55)/100,0,1)}function Wv(e){return Uv(zv(100*e),0,100)}const qv={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Gv=[..."0123456789ABCDEF"],Kv=e=>Gv[15&e],Qv=e=>Gv[(240&e)>>4]+Gv[15&e],Yv=e=>(240&e)>>4===(15&e);function Xv(e){var t=(e=>Yv(e.r)&&Yv(e.g)&&Yv(e.b)&&Yv(e.a))(e)?Kv:Qv;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const $v=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jv(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function Zv(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function eb(e,t,n){const i=Jv(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function tb(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function nb(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Bv)}function ib(e,t,n){return nb(Jv,e,t,n)}function rb(e){return(e%360+360)%360}function sb(e){const t=$v.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Vv(+t[5]):Bv(+t[5]));const r=rb(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return nb(eb,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return nb(Zv,e,t,n)}(r,s,o):ib(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const ob={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ab={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let lb;function cb(e){lb||(lb=function(){const e={},t=Object.keys(ab),n=Object.keys(ob);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,ob[s]);s=parseInt(ab[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),lb.transparent=[0,0,0,0]);const t=lb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const ub=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const db=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,hb=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function fb(e,t,n){if(e){let i=tb(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=ib(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function pb(e,t){return e?Object.assign(t||{},e):e}function mb(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Bv(e[3]))):(t=pb(e,{r:0,g:0,b:0,a:1})).a=Bv(t.a),t}function gb(e){return"r"===e.charAt(0)?function(e){const t=ub.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Vv(e):Uv(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Vv(n):Uv(n,0,255)),i=255&(t[4]?Vv(i):Uv(i,0,255)),r=255&(t[6]?Vv(r):Uv(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):sb(e)}class yb{constructor(e){if(e instanceof yb)return e;const t=typeof e;let n;"object"===t?n=mb(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*qv[e[1]],g:255&17*qv[e[2]],b:255&17*qv[e[3]],a:5===n?17*qv[e[4]]:255}:7!==n&&9!==n||(t={r:qv[e[1]]<<4|qv[e[2]],g:qv[e[3]]<<4|qv[e[4]],b:qv[e[5]]<<4|qv[e[6]],a:9===n?qv[e[7]]<<4|qv[e[8]]:255})),t}(e)||cb(e)||gb(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=pb(this._rgb);return e&&(e.a=Hv(e.a)),e}set rgb(e){this._rgb=mb(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Hv(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?Xv(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=tb(e),n=t[0],i=Wv(t[1]),r=Wv(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(Hv(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=hb(Hv(e.r)),r=hb(Hv(e.g)),s=hb(Hv(e.b));return{r:Bv(db(i+n*(hb(Hv(t.r))-i))),g:Bv(db(r+n*(hb(Hv(t.g))-r))),b:Bv(db(s+n*(hb(Hv(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new yb(this.rgb)}alpha(e){return this._rgb.a=Bv(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=zv(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fb(this._rgb,2,e),this}darken(e){return fb(this._rgb,2,-e),this}saturate(e){return fb(this._rgb,1,e),this}desaturate(e){return fb(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=tb(e);n[0]=rb(n[0]+t),n=ib(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function vb(){}const bb=(()=>{let e=0;return()=>e++})();function xb(e){return null===e||void 0===e}function wb(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function _b(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function kb(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Eb(e,t){return kb(e)?e:t}function Tb(e,t){return"undefined"===typeof e?t:e}const Nb=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Sb(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Cb(e,t,n,i){let r,s,o;if(wb(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(_b(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function Ib(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ab(e){if(wb(e))return e.map(Ab);if(_b(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=Ab(e[n[r]]);return t}return e}function Pb(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function jb(e,t,n,i){if(!Pb(e))return;const r=t[e],s=n[e];_b(r)&&_b(s)?Db(r,s,i):t[e]=Ab(s)}function Db(e,t,n){const i=wb(t)?t:[t],r=i.length;if(!_b(e))return e;const s=(n=n||{}).merger||jb;let o;for(let a=0;a<r;++a){if(o=i[a],!_b(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function Rb(e,t){return Db(e,t,{merger:Mb})}function Mb(e,t,n){if(!Pb(e))return;const i=t[e],r=n[e];_b(i)&&_b(r)?Rb(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Ab(r))}const Ob={"":e=>e,x:e=>e.x,y:e=>e.y};function Lb(e,t){const n=Ob[t]||(Ob[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Fb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const zb=e=>"undefined"!==typeof e,Ub=e=>"function"===typeof e,Vb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Bb=Math.PI,Hb=2*Bb,Wb=Hb+Bb,qb=Number.POSITIVE_INFINITY,Gb=Bb/180,Kb=Bb/2,Qb=Bb/4,Yb=2*Bb/3,Xb=Math.log10,$b=Math.sign;function Jb(e,t,n){return Math.abs(e-t)<n}function Zb(e){const t=Math.round(e);e=Jb(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Xb(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function ex(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function tx(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function nx(e){return e*(Bb/180)}function ix(e){return e*(180/Bb)}function rx(e){if(!kb(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function sx(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Bb&&(s+=Hb),{angle:s,distance:r}}function ox(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ax(e,t){return(e-t+Wb)%Hb-Bb}function lx(e){return(e%Hb+Hb)%Hb}function cx(e,t,n,i){const r=lx(e),s=lx(t),o=lx(n),a=lx(s-r),l=lx(o-r),c=lx(r-s),u=lx(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function ux(e,t,n){return Math.max(t,Math.min(n,e))}function dx(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function hx(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const fx=(e,t,n,i)=>hx(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),px=(e,t,n)=>hx(e,n,i=>e[i][t]>=n);const mx=["push","pop","shift","splice","unshift"];function gx(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(mx.forEach(t=>{delete e[t]}),delete e._chartjs)}function yx(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const vx="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function bx(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,vx.call(window,()=>{i=!1,e.apply(t,n)}))}}const xx=e=>"start"===e?"left":"end"===e?"right":"center",wx=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function _x(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(fx(l,u,d).lo,n?i:fx(t,u,o.getPixelForValue(d)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!xb(e[a.axis]));r-=Math.max(0,e)}r=ux(r,0,i-1)}if(p){let e=Math.max(fx(l,o.axis,h,!0).hi+1,n?0:fx(t,u,o.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!xb(e[a.axis]));e+=Math.max(0,t)}s=ux(e,r,i)-r}else s=i-r}return{start:r,count:s}}function kx(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Ex=e=>0===e||1===e,Tx=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Hb/n),Nx=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Hb/n)+1,Sx={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Kb),easeOutSine:e=>Math.sin(e*Kb),easeInOutSine:e=>-.5*(Math.cos(Bb*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Ex(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ex(e)?e:Tx(e,.075,.3),easeOutElastic:e=>Ex(e)?e:Nx(e,.075,.3),easeInOutElastic(e){const t=.1125;return Ex(e)?e:e<.5?.5*Tx(2*e,t,.45):.5+.5*Nx(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Sx.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Sx.easeInBounce(2*e):.5*Sx.easeOutBounce(2*e-1)+.5};function Cx(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Ix(e){return Cx(e)?e:new yb(e)}function Ax(e){return Cx(e)?e:new yb(e).saturate(.5).darken(.1).hexString()}const Px=["x","y","borderWidth","radius","tension"],jx=["color","borderColor","backgroundColor"];const Dx=new Map;function Rx(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=Dx.get(n);return i||(i=new Intl.NumberFormat(e,t),Dx.set(n,i)),i}(t,n).format(e)}const Mx={values:e=>wb(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=Xb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Rx(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(Xb(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?Mx.numeric.call(this,e,t,n):""}};var Ox={formatters:Mx};const Lx=Object.create(null),Fx=Object.create(null);function zx(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function Ux(e,t,n){return"string"===typeof t?Db(zx(e,t),n):Db(zx(e,""),t)}class Vx{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Ax(t.backgroundColor),this.hoverBorderColor=(e,t)=>Ax(t.borderColor),this.hoverColor=(e,t)=>Ax(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Ux(this,e,t)}get(e){return zx(this,e)}describe(e,t){return Ux(Fx,e,t)}override(e,t){return Ux(Lx,e,t)}route(e,t,n,i){const r=zx(this,e),s=zx(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return _b(e)?Object.assign({},t,e):Tb(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var Bx=new Vx({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:jx},numbers:{type:"number",properties:Px}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ox.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Hx(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function Wx(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],void 0===d||null===d||wb(d)){if(wb(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||wb(h)||(o=Hx(e,r,s,o,h))}else o=Hx(e,r,s,o,d);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function qx(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function Gx(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Kx(e,t,n,i){Qx(e,t,n,i,null)}function Qx(e,t,n,i,r){let s,o,a,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*Gb;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,m,0,0,Hb):e.arc(n,i,m,0,Hb),e.closePath();break;case"triangle":u=r?r/2:m,e.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=Yb,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=Yb,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,o=Math.cos(g+Qb)*l,d=Math.cos(g+Qb)*(r?r/2-c:l),a=Math.sin(g+Qb)*l,h=Math.sin(g+Qb)*(r?r/2-c:l),e.arc(n-d,i-a,c,g-Bb,g-Kb),e.arc(n+h,i-o,c,g-Kb,g),e.arc(n+d,i+a,c,g,g+Kb),e.arc(n-h,i+o,c,g+Kb,g+Bb),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}g+=Qb;case"rectRot":d=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-a),e.lineTo(n+h,i-o),e.lineTo(n+d,i+a),e.lineTo(n-h,i+o),e.closePath();break;case"crossRot":g+=Qb;case"cross":d=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o);break;case"star":d=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o),g+=Qb,d=Math.cos(g)*(r?r/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),e.moveTo(n-d,i-a),e.lineTo(n+d,i+a),e.moveTo(n+h,i-o),e.lineTo(n-h,i+o);break;case"line":o=r?r/2:Math.cos(g)*m,a=Math.sin(g)*m,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Yx(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Xx(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function $x(e){e.restore()}function Jx(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Zx(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function ew(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function tw(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function nw(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=wb(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),xb(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&tw(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),xb(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),ew(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function iw(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Bb,Bb,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Bb,Kb,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Kb,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Kb,!0),e.lineTo(n+o.topLeft,i)}const rw=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,sw=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ow(e,t){const n=(""+e).match(rw);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const aw=e=>+e||0;function lw(e,t){const n={},i=_b(t),r=i?Object.keys(t):t,s=_b(e)?i?n=>Tb(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=aw(s(o));return n}function cw(e){return lw(e,{top:"y",right:"x",bottom:"y",left:"x"})}function uw(e){return lw(e,["topLeft","topRight","bottomLeft","bottomRight"])}function dw(e){const t=cw(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function hw(e,t){e=e||{},t=t||Bx.font;let n=Tb(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Tb(e.style,t.style);i&&!(""+i).match(sw)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Tb(e.family,t.family),lineHeight:ow(Tb(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Tb(e.weight,t.weight),string:""};return r.string=function(e){return!e||xb(e.size)||xb(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function fw(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&wb(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function pw(e,t){return Object.assign(Object.create(e),t)}function mw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Nw("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>mw([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>xw(n,i,()=>function(e,t,n,i){let r;for(const s of t)if(r=Nw(vw(s,e),n),"undefined"!==typeof r)return bw(e,r)?Ew(n,i,e,r):r}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Sw(e).includes(t),ownKeys:e=>Sw(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function gw(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:yw(e,i),setContext:t=>gw(e,t,n,i),override:r=>gw(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>xw(e,t,()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];Ub(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);a.delete(e),bw(e,l)&&(l=Ew(r._scopes,r,e,l));return l}(t,a,e,n));wb(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(_b(t[0])){const n=t,i=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Ew(i,r,e,l);t.push(gw(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));bw(t,a)&&(a=gw(a,r,s&&s[t],o));return a}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function yw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Ub(n)?n:()=>n,isIndexable:Ub(i)?i:()=>i}}const vw=(e,t)=>e?e+Fb(t):t,bw=(e,t)=>_b(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function xw(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function ww(e,t,n){return Ub(e)?e(t,n):e}const _w=(e,t)=>!0===e?t:"string"===typeof e?Lb(t,e):void 0;function kw(e,t,n,i,r){for(const s of t){const t=_w(n,s);if(t){e.add(t);const s=ww(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Ew(e,t,n,i){const r=t._rootScopes,s=ww(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=Tw(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=Tw(a,o,s,l,i),null!==l))&&mw(Array.from(a),[""],r,s,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(wb(r)&&_b(n))return n;return r||{}}(t,n,i)))}function Tw(e,t,n,i,r){for(;n;)n=kw(e,t,n,i,r);return n}function Nw(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Sw(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Cw(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:r.parse(Lb(u,s),c)};return o}const Iw=Number.EPSILON||1e-14,Aw=(e,t)=>t<e.length&&!e[t].skip&&e[t],Pw=e=>"x"===e?"y":"x";function jw(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=ox(s,r),l=ox(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function Dw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Pw(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Aw(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=Aw(e,o+1),l){if(c){const e=c[t]-l[t];r[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?$b(r[o-1])!==$b(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(e,t,n){const i=e.length;let r,s,o,a,l,c=Aw(e,0);for(let u=0;u<i-1;++u)l=c,c=Aw(e,u+1),l&&c&&(Jb(t[u],0,Iw)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*t[u],n[u+1]=s*o*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Pw(n),r=e.length;let s,o,a,l=Aw(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Aw(e,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function Rw(e,t,n){return Math.max(Math.min(e,n),t)}function Mw(e,t,n,i,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Dw(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=jw(n,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,i,r,s,o,a=Yx(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&Yx(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=Rw(r.cp1x,t.left,t.right),r.cp1y=Rw(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Rw(r.cp2x,t.left,t.right),r.cp2y=Rw(r.cp2y,t.top,t.bottom)))}(e,n)}function Ow(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Lw(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Fw(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const zw=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Uw=["top","right","bottom","left"];function Vw(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Uw[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Bw(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=zw(n),s="border-box"===r.boxSizing,o=Vw(r,"padding"),a=Vw(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/p*n.height/i)}}const Hw=e=>Math.round(10*e)/10;function Ww(e,t,n,i){const r=zw(e),s=Vw(r,"margin"),o=Fw(r.maxWidth,e,"clientWidth")||qb,a=Fw(r.maxHeight,e,"clientHeight")||qb,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&Lw(e);if(s){const e=s.getBoundingClientRect(),o=zw(s),a=Vw(o,"border","width"),l=Vw(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,i=Fw(o.maxWidth,s,"clientWidth"),r=Fw(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||qb,maxHeight:r||qb}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Vw(r,"border","width"),t=Vw(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Hw(Math.min(c,o,l.maxWidth)),u=Hw(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Hw(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=Hw(Math.floor(u*i))),{width:c,height:u}}function qw(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const Gw=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Ow()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Kw(e,t){const n=function(e,t){return zw(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Qw(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Yw(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function Xw(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=Qw(e,r,n),a=Qw(r,s,n),l=Qw(s,t,n),c=Qw(o,a,n),u=Qw(a,l,n);return Qw(c,u,n)}function $w(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Jw(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Zw(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function e_(e){return"angle"===e?{between:cx,compare:ax,normalize:lx}:{between:dx,compare:(e,t)=>e-t,normalize:e=>e}}function t_(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function n_(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=e_(i),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=e_(i),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&o(a(t[d%l][i]),r,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,y,v=!1,b=null;const x=()=>v||l(r,y,m)&&0!==a(r,y),w=()=>!v||0===a(s,m)||l(s,y,m);for(let _=u,k=u;_<=d;++_)g=t[_%o],g.skip||(m=c(g[i]),m!==y&&(v=l(m,r,s),null===b&&x()&&(b=0===a(m,r)?_:k),null!==b&&w()&&(p.push(t_({start:b,end:_,loop:h,count:o,style:f})),b=null),k=_,y=m));return null!==b&&p.push(t_({start:b,end:d,loop:h,count:o,style:f})),p}function i_(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=n_(i[r],e.points,t);s.length&&n.push(...s)}return n}function r_(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=s_(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function f(e,t,i,r){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,d=t%l)}}for(const p of t){d=a?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const s=n[h%l];e=s_(i.setContext(pw(r,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),o_(e,u)&&f(d,h-1,p.loop,u),t=s,u=e}d<h-1&&f(d,h-1,p.loop,u)}return c}(e,t,n,i):t}function s_(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function o_(e,t){if(!t)return!1;const n=[],i=function(e,t){return Cx(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function a_(e,t,n){return e.options.clip?e[n]:t[n]}function l_(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:a_(n,t,"left"),right:a_(n,t,"right"),top:a_(i,t,"top"),bottom:a_(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class c_{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach(i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=vx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var u_=new c_;const d_="transparent",h_={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=Ix(e||d_),r=i.valid&&Ix(t||d_);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class f_{constructor(e,t,n,i){const r=t[n];i=fw([e.to,i,r,e.from]);const s=fw([e.from,r,i]);this._active=!0,this._fn=e.fn||h_[e.type||typeof s],this._easing=Sx[e.easing]||Sx.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=fw([e.to,t,i,e.from]),this._from=fw([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class p_{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!_b(e))return;const t=Object.keys(Bx.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!_b(r))return;const s={};for(const e of t)s[e]=r[e];(wb(r.properties)&&r.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,o);continue}u.cancel()}d&&d.duration?(r[l]=u=new f_(d,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(u_.add(this._chart,n),!0):void 0}}function m_(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function g_(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function y_(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=e.values[l],kb(c)&&(s||0===t||$b(t)===$b(c))&&(t+=c)}return u||i.all?t:0}function v_(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function b_(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function x_(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function w_(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,i),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=b_(r,u,n),h[a]=s,h._top=x_(h,o,!0,i.type),h._bottom=x_(h,o,!1,i.type);(h._visualValues||(h._visualValues={}))[a]=s}}function __(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function k_(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const E_=e=>"reset"===e||"none"===e,T_=(e,t)=>t?e:Object.assign({},e);class N_{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=v_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&k_(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Tb(n.xAxisID,__(e,"x")),s=t.yAxisID=Tb(n.yAxisID,__(e,"y")),o=t.rAxisID=Tb(n.rAxisID,__(e,"r")),a=t.indexAxis,l=t.iAxisID=i(a,r,s,o),c=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gx(this._data,this),e._stacked&&k_(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(_b(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){gx(n,this);const e=this._cachedMeta;k_(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),mx.forEach(e=>{const t="_onData"+Fb(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const o=n.apply(this,r);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),o}})}))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=v_(t.vScale,t),t.stack!==n.stack&&(i=!0,k_(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(w_(this,t._parsed),t._stacked=v_(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===e&&t===i.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=wb(i[e])?this.parseArrayData(n,i,e,t):_b(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[o]||d&&l[o]<d[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(r()&&(u=!1),d=l);n._sorted=u}s&&w_(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let d,h,f;for(d=0,h=i;d<h;++d)f=d+n,u[d]={[o]:c||r.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,d,h;for(c=0,u=i;c<u;++c)d=c+n,h=t[d],l[c]={x:r.parse(Lb(h,o),d),y:s.parse(Lb(h,a),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return y_({keys:g_(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=y_(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:g_(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let d,h;function f(){h=i[d];const t=h[o.axis];return!kb(h[e.axis])||c>t||u<t}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,e,h,a),!r));++d);if(r)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],kb(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return _b(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Tb(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=m_(e,n),r=m_(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return pw(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return pw(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&zb(n);if(o)return T_(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Bx.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,i,t),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(T_(f,a))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const l=new p_(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||E_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){E_(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!E_(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&k_(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function S_(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=yx(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,r,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(zb(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return a}function C_(e,t,n,i){return wb(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function I_(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,d,h;for(c=n,u=n+i;c<u;++c)h=t[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(C_(h,d,s,c));return l}function A_(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function P_(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[j_(u,o,a,l)]=!0,r=c)),s[j_(r,o,a,l)]=!0,e.borderSkipped=s}function j_(e,t,n,i){var r,s,o;return i?(o=n,e=D_(e=(r=e)===(s=t)?o:r===o?s:r,n,t)):e=D_(e,t,n),e}function D_(e,t,n){return"start"===e?t:"end"===e?n:e}function R_(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}a(N_,"defaults",{}),a(N_,"datasetElementType",null),a(N_,"dataElementType",null);class M_ extends N_{parsePrimitiveData(e,t,n,i){return I_(e,t,n,i)}parseArrayData(e,t,n,i){return I_(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let d,h,f,p;for(d=n,h=n+i;d<h;++d)p=t[d],f={},f[r.axis]=r.parse(Lb(p,l),d),u.push(C_(Lb(p,c),f,s,d));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,o=A_(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,i);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||xb(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[o.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||A_(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(m.options=u||this.resolveDataElementOptions(h,e[h].active?"active":i));const g=m.options||e[h].options;P_(m,g,p,s),R_(m,g,c.ratio),this.updateElement(e[h],h,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),a=o&&o[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===a),i=t&&t[e.vScale.axis];if(xb(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Tb("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||S_(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(e),l=a._custom,c=A_(l);let u,d,h=a[t.axis],f=0,p=n?this.applyStack(t,a,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&$b(h)!==$b(l.barEnd)&&(f=0),f+=h);const m=xb(r)||c?f:r;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,d=u-g,Math.abs(d)<s){d=function(e,t,n){return 0!==e?$b(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,o)*s,h===o&&(g-=d/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(a._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(o)){const e=$b(d)*t.getLineWidthForValue(o)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=Tb(i.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const r=n.barThickness;let s,o;return xb(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}(e,t,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(Tb(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+d;o=c.start+c.chunk*h+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}a(M_,"id","bar"),a(M_,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),a(M_,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class O_ extends N_{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Tb(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Tb(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=o.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!r&&this.getParsed(d),h={},f=h[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=h[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=a||this.resolveDataElementOptions(d,t.active?"active":i),r&&(h.options.radius=0)),this.updateElement(t,d,h,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Tb(n&&n._custom,r),i}}a(O_,"id","bubble"),a(O_,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),a(O_,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class L_ extends N_{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(_b(n[e])){const{key:e="value"}=this._parsing;o=t=>+Lb(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return nx(this.options.rotation-90)}_getCircumference(){return nx(this.options.circumference)}_getRotationExtents(){let e=Hb,t=-Hb;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<Hb){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(e,t,i)=>cx(e,a,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>cx(e,a,l,!0)?-1:Math.min(t,t*n,i,i*n),m=f(0,c,d),g=f(Kb,u,h),y=p(Bb,c,d),v=p(Bb+Kb,u,h);i=(m-y)/2,r=(g-v)/2,s=-(m+y)/2,o=-(g+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(h,d,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),x=Nb(this.options.radius,b),w=(x-Math.max(x*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,i.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Hb)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Hb*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Rx(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Tb(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}a(L_,"id","doughnut"),a(L_,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),a(L_,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),a(L_,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class F_ extends N_{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=_x(t,i,s);this._drawStart=o,this._drawCount=a,kx(t)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,o,a,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),d=s.axis,h=o.axis,{spanGaps:f,segment:p}=this.options,m=ex(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],f=g?n:{};if(x<t||x>=y){f.skip=!0;continue}const v=this.getParsed(x),w=xb(v[h]),_=f[d]=s.getPixelForValue(v[d],x),k=f[h]=r||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[h],x);f.skip=isNaN(_)||isNaN(k)||w,f.stop=x>0&&Math.abs(v[d]-b[d])>m,p&&(f.parsed=v,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":i)),g||this.updateElement(n,x,f,i),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}a(F_,"id","line"),a(F_,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),a(F_,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class z_ extends N_{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Rx(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Cw.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*Bb;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,i,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,p=h+this._computeAngle(d,i,f),m=s.getDataVisibility(d)?a.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,r&&(o.animateScale&&(m=0),o.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,t.active?"active":i)};this.updateElement(t,d,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?nx(this.resolveDataElementOptions(e,t).angle||n):0}}a(z_,"id","polarArea"),a(z_,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),a(z_,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class U_ extends L_{}a(U_,"id","pie"),a(U_,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class V_ extends N_{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Cw.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,i)}}}a(V_,"id","radar"),a(V_,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),a(V_,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class B_ extends N_{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=_x(t,n,i);if(this._drawStart=r,this._drawCount=s,kx(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),d=this.includeOptions(i,u),h=s.axis,f=o.axis,{spanGaps:p,segment:m}=this.options,g=ex(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=xb(n[f]),x=c[h]=s.getPixelForValue(n[h],b),w=c[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(x)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[h]-v[h])>g,m&&(c.parsed=n,c.raw=l.data[b]),d&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":i)),y||this.updateElement(t,b,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}a(B_,"id","scatter"),a(B_,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),a(B_,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function H_(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class W_{static override(e){Object.assign(W_.prototype,e)}constructor(e){a(this,"options",void 0),this.options=e||{}}init(){}formats(){return H_()}parse(){return H_()}format(){return H_()}add(){return H_()}diff(){return H_()}startOf(){return H_()}endOf(){return H_()}}var q_=W_;function G_(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const o=a._reversePixels?px:fx;if(!i){const i=o(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,i.lo+1).reverse().findIndex(e=>!xb(e[t.axis]));i.lo-=Math.max(0,s);const o=n.slice(i.hi).findIndex(e=>!xb(e[t.axis]));i.hi+=Math.max(0,o)}return i}if(r._sharedOptions){const e=s[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=o(s,t,n-i),r=o(s,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function K_(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=G_(s[a],t,o,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function Q_(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return K_(e,n,t,function(n,o,a){(r||Yx(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function Y_(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return K_(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,r);if(i&&!d)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!d)return;const f=a(t,h);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function X_(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?Y_(e,t,n,i,r,s):function(e,t,n,i){let r=[];return K_(e,n,t,function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:l}=sx(e,{x:t.x,y:t.y});cx(l,o,a)&&r.push({element:e,datasetIndex:n,index:s})}),r}(e,t,n,r):[]}function $_(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return K_(e,n,t,(e,i,l)=>{e[o]&&e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),a=a||e.inRange(t.x,t.y,r))}),i&&!a?[]:s}var J_={evaluateInteractionItems:K_,modes:{index(e,t,n,i){const r=Bw(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Q_(e,r,s,i,o):X_(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const r=Bw(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Q_(e,r,s,i,o):X_(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>Q_(e,Bw(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=Bw(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return X_(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>$_(e,Bw(t,e),"x",n.intersect,i),y:(e,t,n,i)=>$_(e,Bw(t,e),"y",n.intersect,i)}};const Z_=["left","top","right","bottom"];function ek(e,t){return e.filter(e=>e.pos===t)}function tk(e,t){return e.filter(e=>-1===Z_.indexOf(e.pos)&&e.box.axis===t)}function nk(e,t){return e.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function ik(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!Z_.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&t.availableHeight)}return n}function rk(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function sk(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ok(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!_b(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&sk(o,s.getPadding());const a=Math.max(0,t.outerWidth-rk(o,e,"left","right")),l=Math.max(0,t.outerHeight-rk(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function ak(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function lk(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,ak(a.horizontal,t));const{same:o,other:d}=ok(t,n,a,i);c|=o&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&lk(r,t,n,i)||u}function ck(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function uk(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=t.w*c,s=l.size||e.height;zb(l.start)&&(o=l.start),e.fullSize?ck(e,r.left,o,n.outerWidth-r.right-r.left,s):ck(e,t.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=e.bottom}else{const i=t.h*c,o=l.size||e.width;zb(l.start)&&(s=l.start),e.fullSize?ck(e,s,r.top,o,n.outerHeight-r.bottom-r.top):ck(e,s,t.top+l.placed,o,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=o}var dk={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=dw(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=nk(t.filter(e=>e.box.fullSize),!0),i=nk(ek(t,"left"),!0),r=nk(ek(t,"right")),s=nk(ek(t,"top"),!0),o=nk(ek(t,"bottom")),a=tk(t,"x"),l=tk(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:ek(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Cb(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);sk(h,dw(i));const f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),p=ik(l.concat(c),d);lk(a.fullSize,f,d,p),lk(l,f,d,p),lk(c,f,d,p)&&lk(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),uk(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,uk(a.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Cb(a.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class hk{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class fk extends hk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const pk="$chartjs",mk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},gk=e=>null===e||""===e;const yk=!!Gw&&{passive:!0};function vk(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,yk)}function bk(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function xk(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||bk(n.addedNodes,i),t=t&&!bk(n.removedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function wk(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||bk(n.removedNodes,i),t=t&&!bk(n.addedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const _k=new Map;let kk=0;function Ek(){const e=window.devicePixelRatio;e!==kk&&(kk=e,_k.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Tk(e,t,n){const i=e.canvas,r=i&&Lw(i);if(!r)return;const s=bx((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()},window),o=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)});return o.observe(r),function(e,t){_k.size||window.addEventListener("resize",Ek),_k.set(e,t)}(e,s),o}function Nk(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){_k.delete(e),_k.size||window.removeEventListener("resize",Ek)}(e)}function Sk(e,t,n){const i=e.canvas,r=bx(t=>{null!==e.ctx&&n(function(e,t){const n=mk[e.type]||e.type,{x:i,y:r}=Bw(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,yk)}(i,t,r),r}class Ck extends hk{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[pk]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",gk(r)){const t=Kw(e,"width");void 0!==t&&(e.width=t)}if(gk(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Kw(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[pk])return!1;const n=t[pk].initial;["height","width"].forEach(e=>{const i=n[e];xb(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[pk],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:xk,detach:wk,resize:Tk}[t]||Sk;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:Nk,detach:Nk,resize:Nk}[t]||vk)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return Ww(e,t,n,i)}isAttached(e){const t=e&&Lw(e);return!(!t||!t.isConnected)}}class Ik{constructor(){a(this,"x",void 0),a(this,"y",void 0),a(this,"active",!1),a(this,"options",void 0),a(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return ex(this.x)&&ex(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function Ak(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,c,s,o/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(Pk(t,c,u,xb(i)?0:a-i,a),e=0,n=o-1;e<n;e++)Pk(t,c,u,s[e],s[e+1]);return Pk(t,c,u,l,xb(i)?t.length:l+i),c}return Pk(t,c,u),c}function Pk(e,t,n,i,r){const s=Tb(i,0),o=Math.min(Tb(r,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}a(Ik,"defaults",{}),a(Ik,"defaultRoutes",void 0);const jk=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Dk=(e,t)=>Math.min(t||e,e);function Rk(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function Mk(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function Ok(e){return e.drawTicks?e.tickLength:0}function Lk(e,t){if(!e.display)return 0;const n=hw(e.font,t),i=dw(e.padding);return(wb(e.text)?e.text.length:1)*n.lineHeight+i.height}function Fk(e,t,n){let i=xx(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class zk extends Ik{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Eb(e,Number.POSITIVE_INFINITY),t=Eb(t,Number.NEGATIVE_INFINITY),n=Eb(n,Number.POSITIVE_INFINITY),i=Eb(i,Number.NEGATIVE_INFINITY),{min:Eb(e,n),max:Eb(t,i),minDefined:kb(e),maxDefined:kb(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Eb(n,Eb(i,n)),max:Eb(i,Eb(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Sb(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Nb(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Rk(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Ak(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Sb(this.options.afterUpdate,[this])}beforeSetDimensions(){Sb(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Sb(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Sb(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Sb(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Sb(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Sb(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Sb(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Dk(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=ux(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),o=this.maxHeight-Ok(e.grid)-t.padding-Lk(e.title,this.chart.options.font),a=Math.sqrt(u*u+d*d),l=ix(Math.min(Math.asin(ux((c.highest.height+6)/s,-1,1)),Math.asin(ux(o/a,-1,1))-Math.asin(ux(d/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Sb(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Sb(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=Lk(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=Ok(r)+s):(e.height=this.maxHeight,e.width=Ok(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=nx(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;a?l?(u=i*e.width,d=n*t.height):(u=n*e.height,d=i*t.width):"start"===r?d=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Sb(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)xb(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Rk(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/Dk(t,n));let l,c,u,d,h,f,p,m,g,y,v,b=0,x=0;for(l=0;l<t;l+=a){if(d=e[l].label,h=this._resolveTickFontOptions(l),i.font=f=h.string,p=r[f]=r[f]||{data:{},gc:[]},m=h.lineHeight,g=y=0,xb(d)||wb(d)){if(wb(d))for(c=0,u=d.length;c<u;++c)v=d[c],xb(v)||wb(v)||(g=Hx(i,p.data,p.gc,g,v),y+=m)}else g=Hx(i,p.data,p.gc,g,d),y=m;s.push(g),o.push(y),b=Math.max(g,b),x=Math.max(y,x)}!function(e,t){Cb(e,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}(r,t);const w=s.indexOf(b),_=o.indexOf(x),k=e=>({width:s[e]||0,height:o[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(_),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ux(this._alignToPixels?qx(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return pw(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=pw(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=nx(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=Ok(r),d=[],h=o.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return qx(n,e,f)};let g,y,v,b,x,w,_,k,E,T,N,S;if("top"===s)g=m(this.bottom),w=this.bottom-u,k=g-p,T=m(e.top)+p,S=e.bottom;else if("bottom"===s)g=m(this.top),T=e.top,S=m(e.bottom)-p,w=g+p,k=this.top+u;else if("left"===s)g=m(this.right),x=this.right-u,_=g-p,E=m(e.left)+p,N=e.right;else if("right"===s)g=m(this.left),E=e.left,N=m(e.right)-p,x=g+p,_=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(_b(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}T=e.top,S=e.bottom,w=g+p,k=w+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(_b(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-p,_=x-u,E=e.left,N=e.right}const C=Tb(i.ticks.maxTicksLimit,c),I=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=I){const e=this.getContext(y),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],h=i.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=Mk(this,y,a),void 0!==v&&(b=qx(n,v,s),l?x=_=E=N=b:w=k=T=S=b,d.push({tx1:x,ty1:w,tx2:_,ty2:k,x1:E,y1:T,x2:N,y2:S,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,d=Ok(n.grid),h=d+c,f=u?-c:h,p=-nx(this.labelRotation),m=[];let g,y,v,b,x,w,_,k,E,T,N,S,C="middle";if("top"===i)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(d);_=e.textAlign,x=e.x}else if("x"===t){if("center"===i)w=(e.top+e.bottom)/2+h;else if(_b(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)x=(e.left+e.right)/2-h;else if(_b(i)){const e=Object.keys(i)[0],t=i[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===a?C="top":"end"===a&&(C="bottom"));const I=this._getLabelSizes();for(g=0,y=o.length;g<y;++g){v=o[g],b=v.label;const e=r.setContext(this.getContext(g));k=this.getPixelForTick(g)+r.labelOffset,E=this._resolveTickFontOptions(g),T=E.lineHeight,N=wb(b)?b.length:1;const t=N/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let d,h=_;if(s?(x=k,"inner"===_&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),S="top"===i?"near"===l||0!==p?-N*T+T/2:"center"===l?-I.highest.height/2-t*T+T:-I.highest.height+T/2:"near"===l||0!==p?T/2:"center"===l?I.highest.height/2-t*T:I.highest.height-N*T,u&&(S*=-1),0===p||e.showLabelBackdrop||(x+=T/2*Math.sin(p))):(w=k,S=(1-N)*T/2),e.showLabelBackdrop){const t=dw(e.backdropPadding),n=I.heights[g],i=I.widths[g];let r=S-t.top,s=0-t.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(_){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":g===y-1?s-=i:g>0&&(s-=i/2)}d={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:E,textOffset:S,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:h,textBaseline:C,translation:[x,w],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-nx(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=qx(e,this.left,s)-s/2,c=qx(e,this.right,o)+o/2,u=d=a):(u=qx(e,this.top,s)-s/2,d=qx(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Xx(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;nw(t,r.label,0,r.textOffset,n,e)}n&&$x(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=hw(n.font),s=dw(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||_b(t)?(a+=s.bottom,wb(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const m=o-r,g=a-s;if(e.isHorizontal()){if(h=wx(i,s,a),_b(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:jk(e,n,t);d=a-s}else{if(_b(n)){const e=Object.keys(n)[0],i=n[e];h=u[e].getPixelForValue(i)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:jk(e,n,t);f=wx(i,o,r),p="left"===n?-Kb:Kb}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,a,t,o);nw(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:d,textAlign:Fk(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Tb(e.grid&&e.grid.z,-1),i=Tb(e.border&&e.border.z,0);return this._isVisible()&&this.draw===zk.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return hw(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Uk{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=Db(Object.create(null),[n?Bx.get(n):{},Bx.get(t),e.defaults]);Bx.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Bx.route(s,r,l,a)})}(t,e.defaultRoutes);e.descriptors&&Bx.describe(t,e.descriptors)}(e,s,n),this.override&&Bx.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in Bx[i]&&(delete Bx[i][n],this.override&&delete Lx[n])}}class Vk{constructor(){this.controllers=new Uk(N_,"datasets",!0),this.elements=new Uk(Ik,"elements"),this.plugins=new Uk(Object,"plugins"),this.scales=new Uk(zk,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Cb(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=Fb(e);Sb(n["before"+i],[],n),t[e](n),Sb(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var Bk=new Vk;class Hk{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Sb(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){xb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Tb(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(Bk.plugins.items);for(let s=0;s<i.length;s++)n.push(Bk.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const l of r){const t=l.id,r=Wk(n[t],i);null!==r&&o.push({plugin:l,options:qk(e.config,{plugin:l,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function Wk(e,t){return t||!1!==e?!0===e?{}:e:null}function qk(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gk(e,t){const n=Bx.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Kk(e){if("x"===e||"y"===e||"r"===e)return e}function Qk(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Yk(e){if(Kk(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){const t=r.axis||Qk(r.position)||e.length>1&&Kk(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Xk(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function $k(e,t){const n=Lx[e.type]||{scales:{}},i=t.scales||{},r=Gk(e.type,t),s=Object.create(null);return Object.keys(i).forEach(t=>{const o=i[t];if(!_b(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=Yk(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Xk(e,"x",n[0])||Xk(e,"y",n[0])}return{}}(t,e),Bx.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[t]=Rb(Object.create(null),[{axis:a},o,c[a],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,o=n.indexAxis||Gk(r,t),a=(Lx[r]||{}).scales||{};Object.keys(a).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),Rb(s[r],[{axis:t},i[r],a[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];Rb(t,[Bx.scales[t.type],Bx.scale])}),s}function Jk(e){const t=e.options||(e.options={});t.plugins=Tb(t.plugins,{}),t.scales=$k(e,t)}function Zk(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const eE=new Map,tE=new Set;function nE(e,t){let n=eE.get(e);return n||(n=t(),eE.set(e,n),tE.add(n)),n}const iE=(e,t,n)=>{const i=Lb(t,n);void 0!==i&&e.add(i)};class rE{constructor(e){this._config=function(e){return(e=e||{}).data=Zk(e.data),Jk(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Zk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Jk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return nE(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return nE("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return nE("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return nE("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>iE(a,e,t))),t.forEach(e=>iE(a,i,e)),t.forEach(e=>iE(a,Lx[r]||{},e)),t.forEach(e=>iE(a,Bx,e)),t.forEach(e=>iE(a,Fx,e))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),tE.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Lx[t]||{},Bx.datasets[t]||{},{type:t},Bx,Fx]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=sE(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=yw(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&(Ub(o)||oE(o))||s&&wb(o))return!0}return!1}(s,t)){r.$shared=!1;a=gw(s,n=Ub(n)?n():n,this.createResolver(e,n,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=sE(this._resolverCache,e,n);return _b(t)?gw(r,t,void 0,i):r}}function sE(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:mw(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(r,s)}return s}const oE=e=>_b(e)&&Object.getOwnPropertyNames(e).some(t=>Ub(e[t]));const aE=["top","bottom","left","right","chartArea"];function lE(e,t){return"top"===e||"bottom"===e||-1===aE.indexOf(e)&&"x"===t}function cE(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function uE(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Sb(n&&n.onComplete,[e],t)}function dE(e){const t=e.chart,n=t.options.animation;Sb(n&&n.onProgress,[e],t)}function hE(e){return Ow()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const fE={},pE=e=>{const t=hE(e);return Object.values(fE).filter(e=>e.canvas===t).pop()};function mE(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class gE{static register(){Bk.add(...arguments),yE()}static unregister(){Bk.remove(...arguments),yE()}constructor(e,t){const n=this.config=new rE(t),i=hE(e),r=pE(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Ow()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?fk:Ck}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=bb(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hk,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],fE[this.id]=this,o&&a?(u_.listen(this,"complete",uE),u_.listen(this,"progress",dE),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return xb(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Bk}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Gx(this.canvas,this.ctx),this}stop(){return u_.stop(this),this}resize(e,t){u_.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,qw(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Sb(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Cb(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],i=Yk(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),Cb(r,t=>{const r=t.options,s=r.id,o=Yk(s,r),a=Tb(r.type,t.dtype);void 0!==r.position&&lE(r.position,o)===lE(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(Bk.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),Cb(i,(e,t)=>{e||delete n[t]}),Cb(n,e=>{dk.configure(this,e,e.options),dk.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(cE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||Gk(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=Bk.getController(s),{datasetElementType:i,dataElementType:o}=Bx.datasets[s];Object.assign(t,{dataElementType:Bk.getElement(o),datasetElementType:i&&Bk.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Cb(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Cb(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(cE("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Cb(this.scales,e=>{dk.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Vb(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){mE(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!Vb(i,n(r)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;dk.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Cb(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Ub(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(u_.has(this)?this.attached&&!u_.running(this)&&u_.start(this):(this.draw(),uE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=l_(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&Xx(t,i),e.controller.draw(),i&&$x(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Yx(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=J_.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=pw(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);zb(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),u_.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Gx(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete fE[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Cb(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){Cb(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Cb(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!Ib(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Sb(r.onHover,[e,o,this],this),a&&Sb(r.onClick,[e,o,this],this));const c=!Ib(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function yE(){return Cb(gE.instances,e=>e._plugins.invalidate())}function vE(e,t,n,i){const r=lw(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return ux(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ux(r.innerStart,0,o),innerEnd:ux(r.innerEnd,0,o)}}function bE(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function xE(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(d>0?d-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const m=(p-Math.max(.001,p*d-n/Bb)/d)/2,g=l+m+f,y=r-m-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=vE(t,h,d,y-g),_=d-v,k=d-b,E=g+v/_,T=y-b/k,N=h+x,S=h+w,C=g+x/N,I=y-w/S;if(e.beginPath(),s){const t=(E+T)/2;if(e.arc(o,a,d,E,t),e.arc(o,a,d,t,T),b>0){const t=bE(k,T,o,a);e.arc(t.x,t.y,b,T,y+Kb)}const n=bE(S,y,o,a);if(e.lineTo(n.x,n.y),w>0){const t=bE(S,I,o,a);e.arc(t.x,t.y,w,y+Kb,I+Math.PI)}const i=(y-w/h+(g+x/h))/2;if(e.arc(o,a,h,y-w/h,i,!0),e.arc(o,a,h,i,g+x/h,!0),x>0){const t=bE(N,C,o,a);e.arc(t.x,t.y,x,C+Math.PI,g-Kb)}const r=bE(_,g,o,a);if(e.lineTo(r.x,r.y),v>0){const t=bE(_,E,o,a);e.arc(t.x,t.y,v,g-Kb,E)}}else{e.moveTo(o,a);const t=Math.cos(E)*d+o,n=Math.sin(E)*d+a;e.lineTo(t,n);const i=Math.cos(T)*d+o,r=Math.sin(T)*d+a;e.lineTo(i,r)}e.closePath()}function wE(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(s){xE(e,t,n,i,m,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(m=o+(a%Hb||Hb))}p&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+Kb,i-Kb),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-o>=Bb&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,lx(i-n));if(e.beginPath(),e.arc(r,s,o-c/2,i+d/2,n-d/2),a>0){const t=Math.min(c/a,lx(i-n));e.arc(r,s,a+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,o*lx(i-n));if("round"===u)e.arc(r,s,t,n-Bb/2,i+Bb/2,!0);else if("bevel"===u){const o=2*t*t,a=-o*Math.cos(n+Bb/2)+r,l=-o*Math.sin(n+Bb/2)+s,c=o*Math.cos(i+Bb/2)+r,u=o*Math.sin(i+Bb/2)+s;e.lineTo(a,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(xE(e,t,n,i,m,r),e.stroke())}a(gE,"defaults",Bx),a(gE,"instances",fE),a(gE,"overrides",Lx),a(gE,"registry",Bk),a(gE,"version","4.5.0"),a(gE,"getChart",pE);class _E extends Ik{constructor(e){super(),a(this,"circumference",void 0),a(this,"endAngle",void 0),a(this,"fullCircles",void 0),a(this,"innerRadius",void 0),a(this,"outerRadius",void 0),a(this,"pixelMargin",void 0),a(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=sx(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=Tb(u,a-o),f=cx(r,o,a)&&o!==a,p=h>=Hb||f,m=dx(s,l+d,c+d);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Hb?Math.floor(n/Hb):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(Bb,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){xE(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%Hb||Hb))}xE(e,t,n,i,l,r),e.fill()}(e,this,a,r,s),wE(e,this,a,r,s),e.restore()}}function kE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Tb(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Tb(n.borderDash,t.borderDash)),e.lineDashOffset=Tb(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Tb(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Tb(n.borderWidth,t.borderWidth),e.strokeStyle=Tb(n.borderColor,t.borderColor)}function EE(e,t,n){e.lineTo(n.x,n.y)}function TE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function NE(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=TE(r,n,i),u=function(e){return e.stepped?Jx:e.tension||"monotone"===e.cubicInterpolationMode?Zx:EE}(s);let d,h,f,{move:p=!0,reverse:m}=i||{};for(d=0;d<=c;++d)h=r[(a+(m?c-d:d))%o],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,m,s.stepped),f=h);return l&&(h=r[(a+(m?c:0))%o],u(e,f,h,m,s.stepped)),!!l}function SE(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=TE(r,n,i),{move:l=!0,reverse:c}=i||{};let u,d,h,f,p,m,g=0,y=0;const v=e=>(o+(c?a-e:e))%s,b=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=r[v(0)],e.moveTo(d.x,d.y)),u=0;u<=a;++u){if(d=r[v(u)],d.skip)continue;const t=d.x,n=d.y,i=0|t;i===h?(n<f?f=n:n>p&&(p=n),g=(y*g+t)/++y):(b(),e.lineTo(t,n),h=i,y=0,f=p=n),m=n}b()}function CE(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?SE:NE}a(_E,"id","arc"),a(_E,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),a(_E,"defaultRoutes",{backgroundColor:"backgroundColor"}),a(_E,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const IE="function"===typeof Path2D;function AE(e,t,n,i){IE&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),kE(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,o=CE(t);for(const a of r)kE(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class PE extends Ik{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Mw(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return r_(e,!0===i?[{start:o,end:a,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(o-1)%r,loop:i}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!e._fullLoop&&0===o&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=i_(this,{property:t,start:i,end:i});if(!s.length)return;const o=[],a=function(e){return e.stepped?Yw:e.tension||"monotone"===e.cubicInterpolationMode?Xw:Qw}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=r[c],h=r[u];if(d===h){o.push(d);continue}const f=a(d,h,Math.abs((i-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return CE(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=CE(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)s&=r(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),AE(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function jE(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}a(PE,"id","line"),a(PE,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),a(PE,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),a(PE,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class DE extends Ik{constructor(e){super(),a(this,"parsed",void 0),a(this,"skip",void 0),a(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return jE(this,e,"x",t)}inYRange(e,t){return jE(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Yx(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Kx(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function RE(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,d;return e.horizontal?(d=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=s/2,a=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function ME(e,t,n,i){return e?0:ux(t,n,i)}function OE(e){const t=RE(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=cw(i);return{t:ME(r.top,s.top,0,n),r:ME(r.right,s.right,0,t),b:ME(r.bottom,s.bottom,0,n),l:ME(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=uw(r),o=Math.min(t,n),a=e.borderSkipped,l=i||_b(r);return{topLeft:ME(!l||a.top||a.left,s.topLeft,0,o),topRight:ME(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ME(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ME(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function LE(e,t,n,i){const r=null===t,s=null===n,o=e&&!(r&&s)&&RE(e,i);return o&&(r||dx(t,o.left,o.right))&&(s||dx(n,o.top,o.bottom))}function FE(e,t){e.rect(t.x,t.y,t.w,t.h)}function zE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}a(DE,"id","point"),a(DE,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),a(DE,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class UE extends Ik{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=OE(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?iw:FE;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),o(e,zE(s,t,r)),e.clip(),o(e,zE(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,zE(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return LE(this,e,t,n)}inXRange(e,t){return LE(this,e,null,t)}inYRange(e,t){return LE(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}a(UE,"id","bar"),a(UE,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),a(UE,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const VE=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class BE extends Ik{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Sb(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=hw(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=VE(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=e;r.textAlign="left",r.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),a[f]={left:0,top:h,row:d,width:p,height:i},l[l.length-1]+=p+o}),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,d=0,h=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(r).width}(i,e,t,n),o=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=HE(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,r,e,i);s>0&&h+g+2*o>c&&(u+=d+o,l.push({width:d,height:h}),f+=d+o,p++,d=h=0),a[s]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+o}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=$w(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=wx(n,this.left+i,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=wx(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+e+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=wx(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=wx(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Xx(e,this),this._draw(),$x(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,o=Bx.color,a=$w(e.rtl,this.left,this.width),l=hw(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=VE(s,u),g=this.isHorizontal(),y=this._computeTitleHeight();h=g?{x:wx(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:wx(r,this.top+y+c,this.bottom-t[0].height),line:0},Jw(this.ctx,e.textDirection);const v=m+c;this.legendItems.forEach((b,x)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const w=i.measureText(b.text).width,_=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+d+w;let E=h.x,T=h.y;a.setWidth(this.width),g?x>0&&E+k+c>this.right&&(T=h.y+=v,h.line++,E=h.x=wx(r,this.left+c,this.right-n[h.line])):x>0&&T+v>this.bottom&&(E=h.x=E+t[h.line].width+c,h.line++,T=h.y=wx(r,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=Tb(n.lineWidth,1);if(i.fillStyle=Tb(n.fillStyle,o),i.lineCap=Tb(n.lineCap,"butt"),i.lineDashOffset=Tb(n.lineDashOffset,0),i.lineJoin=Tb(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Tb(n.strokeStyle,o),i.setLineDash(Tb(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(e,f/2);Qx(i,o,l,t+d,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=uw(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?iw(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(E),T,b),E=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(_,E+f+d,g?E+k:this.right,e.rtl),function(e,t,n){nw(i,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(E),T,b),g)h.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=HE(b,e)+c}else h.y+=v}),Zw(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=hw(t.font),i=dw(t.padding);if(!t.display)return;const r=$w(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=i.top+a;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=wx(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+wx(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=wx(o,u,u+d);s.textAlign=r.textAlign(xx(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,nw(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=hw(e.font),n=dw(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(dx(e,this.left,this.right)&&dx(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],dx(e,i.left,i.left+i.width)&&dx(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Sb(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Sb(t.onHover,[e,n,this],this)}else n&&Sb(t.onClick,[e,n,this],this)}}function HE(e,t){return t*(e.text?e.text.length:0)}var WE={id:"legend",_element:BE,start(e,t,n){const i=e.legend=new BE({ctx:e.ctx,options:n,chart:e});dk.configure(e,i,n),dk.addBox(e,i)},stop(e){dk.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;dk.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=dw(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class qE extends Ik{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=wb(n.text)?n.text.length:1;this._padding=dw(n.padding);const r=i*hw(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=wx(o,n,r),c=t+e,a=r-n):("left"===s.position?(l=n+e,c=wx(o,i,t),u=-.5*Bb):(l=r-e,c=wx(o,t,i),u=.5*Bb),a=i-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=hw(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);nw(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:xx(t.align),textBaseline:"middle",translation:[r,s]})}}var GE={id:"title",_element:qE,start(e,t,n){!function(e,t){const n=new qE({ctx:e.ctx,options:t,chart:e});dk.configure(e,n,t),dk.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;dk.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;dk.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const KE={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;const o=[...i].reduce((e,t)=>e+t)/i.size;return{x:o,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=ox(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function QE(e,t){return t&&(wb(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function YE(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function XE(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function $E(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=hw(t.bodyFont),c=hw(t.titleFont),u=hw(t.footerFont),d=s.length,h=r.length,f=i.length,p=dw(t.padding);let m=p.height,g=0,y=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){m+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,Cb(e.title,b),n.font=l.string,Cb(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,Cb(i,e=>{Cb(e.before,b),Cb(e.lines,b),Cb(e.after,b)}),v=0,n.font=u.string,Cb(e.footer,b),n.restore(),g+=p.width,{width:g,height:m}}function JE(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function ZE(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||JE(e,t,n,i),yAlign:i}}function eT(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=uw(o);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,h)+r:"right"===a&&(p+=Math.max(d,f)+r),{x:ux(p,0,i.width-t.width),y:ux(m,0,i.height-t.height)}}function tT(e,t,n){const i=dw(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function nT(e){return QE([],YE(e))}function iT(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const rT={beforeTitle:vb,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:vb,beforeBody:vb,beforeLabel:vb,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return xb(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:vb,afterBody:vb,beforeFooter:vb,footer:vb,afterFooter:vb};function sT(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?rT[t].call(n,i):r}class oT extends Ik{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new p_(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,pw(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=sT(n,"beforeTitle",this,e),r=sT(n,"title",this,e),s=sT(n,"afterTitle",this,e);let o=[];return o=QE(o,YE(i)),o=QE(o,YE(r)),o=QE(o,YE(s)),o}getBeforeBody(e,t){return nT(sT(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Cb(e,e=>{const t={before:[],lines:[],after:[]},r=iT(n,e);QE(t.before,YE(sT(r,"beforeLabel",this,e))),QE(t.lines,sT(r,"label",this,e)),QE(t.after,YE(sT(r,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return nT(sT(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=sT(n,"beforeFooter",this,e),r=sT(n,"footer",this,e),s=sT(n,"afterFooter",this,e);let o=[];return o=QE(o,YE(i)),o=QE(o,YE(r)),o=QE(o,YE(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(XE(this.chart,t[o]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),Cb(l,t=>{const n=iT(e.callbacks,t);i.push(sT(n,"labelColor",this,t)),r.push(sT(n,"labelPointStyle",this,t)),s.push(sT(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=KE[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=$E(this,n),o=Object.assign({},e,t),a=ZE(this.chart,n,o),l=eT(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=uw(o),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,y,v,b,x;return"center"===r?(b=h+p/2,"left"===i?(m=d,g=m-s,v=b+s,x=b-s):(m=d+f,g=m+s,v=b-s,x=b+s),y=m):(g="left"===i?d+Math.max(a,c)+s:"right"===i?d+f-Math.max(l,u)-s:this.caretX,"top"===r?(v=h,b=v-s,m=g-s,y=g+s):(v=h+p,b=v+s,m=g+s,y=g-s),x=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=$w(n.rtl,this.x,this.width);for(e.x=tT(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=hw(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=hw(r.bodyFont),u=tT(this,"left",r),d=i.x(u),h=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(d,l)+l/2,c=f+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Kx(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Kx(e,t,n,c)}else{e.lineWidth=_b(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(d,l),n=i.leftForLtr(i.xPlus(d,1),l-2),o=uw(s.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,iw(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),iw(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=hw(n.bodyFont);let d=u.lineHeight,h=0;const f=$w(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+r},m=f.textAlign(s);let g,y,v,b,x,w,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=tT(this,m,n),t.fillStyle=n.bodyColor,Cb(this.beforeBody,p),h=o&&"right"!==m?"center"===s?l/2+c:l+2+c:0,b=0,w=i.length;b<w;++b){for(g=i[b],y=this.labelTextColors[b],t.fillStyle=y,Cb(g.before,p),v=g.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,n),d=Math.max(u.lineHeight,a)),x=0,_=v.length;x<_;++x)p(v[x]),d=u.lineHeight;Cb(g.after,p)}h=0,d=u.lineHeight,Cb(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=$w(n.rtl,this.x,this.width);for(e.x=tT(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=hw(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=uw(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+l-d,a),t.quadraticCurveTo(o+l,a,o+l,a+d),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+h,a+c),t.quadraticCurveTo(o,a+c,o,a+c-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=KE[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=$E(this,e),o=Object.assign({},n,this._size),a=ZE(t,e,o),l=eT(e,o,a,t);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=dw(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),Jw(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Zw(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),r=!Ib(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!Ib(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=KE[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}a(oT,"positioners",KE);var aT={id:"tooltip",_element:oT,positioners:KE,afterInit(e,t,n){n&&(e.tooltip=new oT({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:rT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function lT(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function cT(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class uT extends zk{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(xb(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:ux(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:lT(n,e,Tb(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return cT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function dT(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=r||1,f=c-1,{min:p,max:m}=t,g=!xb(s),y=!xb(o),v=!xb(l),b=(m-p)/(u+1);let x,w,_,k,E=Zb((m-p)/f/h)*h;if(E<1e-14&&!g&&!y)return[{value:p},{value:m}];k=Math.ceil(m/E)-Math.floor(p/E),k>f&&(E=Zb(k*E/f/h)*h),xb(a)||(x=Math.pow(10,a),E=Math.ceil(E*x)/x),"ticks"===i?(w=Math.floor(p/E)*E,_=Math.ceil(m/E)*E):(w=p,_=m),g&&y&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,E/1e3)?(k=Math.round(Math.min((o-s)/E,c)),E=(o-s)/k,w=s,_=o):v?(w=g?s:w,_=y?o:_,k=l-1,E=(_-w)/k):(k=(_-w)/E,k=Jb(k,Math.round(k),E/1e3)?Math.round(k):Math.ceil(k));const T=Math.max(rx(E),rx(w));x=Math.pow(10,xb(a)?T:a),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let N=0;for(g&&(d&&w!==s?(n.push({value:s}),w<s&&N++,Jb(Math.round((w+N*E)*x)/x,s,hT(s,b,e))&&N++):w<s&&N++);N<k;++N){const e=Math.round((w+N*E)*x)/x;if(y&&e>o)break;n.push({value:e})}return y&&d&&_!==o?n.length&&Jb(n[n.length-1].value,o,hT(o,b,e))?n[n.length-1].value=o:n.push({value:o}):y&&_!==o||n.push({value:_}),n}function hT(e,t,n){let{horizontal:i,minRotation:r}=n;const s=nx(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}a(uT,"id","category"),a(uT,"defaults",{ticks:{callback:cT}});class fT extends zk{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return xb(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=$b(i),t=$b(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=dT({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&tx(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Rx(e,this.chart.options.locale,this.options.ticks.format)}}class pT extends fT{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=kb(e)?e:0,this.max=kb(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=nx(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}a(pT,"id","linear"),a(pT,"defaults",{ticks:{callback:Ox.formatters.numeric}});const mT=e=>Math.floor(Xb(e)),gT=(e,t)=>Math.pow(10,mT(e)+t);function yT(e){return 1===e/Math.pow(10,mT(e))}function vT(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function bT(e,t){let{min:n,max:i}=t;n=Eb(e.min,n);const r=[],s=mT(n);let o=function(e,t){let n=mT(t-e);for(;vT(e,t,n)>10;)n++;for(;vT(e,t,n)<10;)n--;return Math.min(n,mT(e))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,o)),f=Eb(e.min,Math.round((c+d+h*Math.pow(10,o))*a)/a);for(;f<i;)r.push({value:f,major:yT(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),f=Math.round((c+d+h*Math.pow(10,o))*a)/a;const p=Eb(e.max,f);return r.push({value:p,major:yT(p),significand:h}),r}class xT extends zk{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=fT.prototype.parse.apply(this,[e,t]);if(0!==n)return kb(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=kb(e)?Math.max(0,e):null,this.max=kb(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!kb(this._userMin)&&(this.min=e===gT(this.min,0)?gT(this.min,-1):gT(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(gT(n,-1)),s(gT(i,1)))),n<=0&&r(gT(i,-1)),i<=0&&s(gT(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=bT({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&tx(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Rx(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Xb(e),this._valueRange=Xb(this.max)-Xb(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Xb(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function wT(e){const t=e.ticks;if(t.display&&e.display){const e=dw(t.backdropPadding);return Tb(t.font&&t.font.size,Bx.font.size)+e.height}return 0}function _T(e,t,n){return n=wb(n)?n:[n],{w:Wx(e,t.string,n),h:n.length*t.lineHeight}}function kT(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function ET(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Bb/s:0;for(let l=0;l<s;l++){const s=o.setContext(e.getPointLabelContext(l));r[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],a),u=hw(s.font),d=_T(e.ctx,u,e._pointLabels[l]);i[l]=d;const h=lx(e.getIndexAngle(l)+a),f=Math.round(ix(h));TT(n,t,h,kT(f,c.x,d.w,0,180),kT(f,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:wT(s)/2,additionalAngle:o?Bb/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=NT(e,u,l);i.push(r),"auto"===a&&(r.visible=ST(r,c),r.visible&&(c=r))}return i}(e,i,r)}function TT(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function NT(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,i+r+o,s),c=Math.round(ix(lx(l.angle+Kb))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function ST(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(Yx({x:n,y:i},t)||Yx({x:n,y:s},t)||Yx({x:r,y:i},t)||Yx({x:r,y:s},t))}function CT(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!xb(a)){const n=uw(t.borderRadius),l=dw(t.backdropPadding);e.fillStyle=a;const c=i-l.left,u=r-l.top,d=s-i+l.width,h=o-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),iw(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function IT(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Hb);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}a(xT,"id","logarithmic"),a(xT,"defaults",{ticks:{callback:Ox.formatters.logarithmic,major:{enabled:!0}}});class AT extends fT{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=dw(wT(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=kb(e)&&!isNaN(e)?e:0,this.max=kb(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wT(this.options))}generateTickLabels(e){fT.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Sb(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?ET(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return lx(e*(Hb/(this._pointLabels.length||1))+nx(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(xb(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(xb(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return pw(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-Kb+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),IT(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));CT(n,s,t);const o=hw(s.font),{x:a,y:l,textAlign:c}=t;nw(n,e._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),IT(e,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(e.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((i,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=hw(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=a.backdropColor;const t=dw(a.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}nw(e,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),e.restore()}drawTitle(){}}a(AT,"id","radialLinear"),a(AT,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ox.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),a(AT,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),a(AT,"descriptors",{angleLines:{_fallback:"grid"}});const PT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jT=Object.keys(PT);function DT(e,t){return e-t}function RT(e,t){if(xb(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),kb(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!ex(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function MT(e,t,n,i){const r=jT.length;for(let s=jT.indexOf(e);s<r-1;++s){const e=PT[jT[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return jT[s]}return jT[r-1]}function OT(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=hx(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function LT(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class FT extends zk{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new q_(e.adapters.date);i.init(t),Rb(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:RT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=kb(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=kb(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?MT(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=jT.length-1;s>=jT.indexOf(n);s--){const n=jT[s];if(PT[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return jT[n?jT.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=jT.indexOf(e)+1,n=jT.length;t<n;++t)if(PT[jT[t]].common)return jT[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),LT(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=ux(i,0,s),r=ux(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||MT(r.minUnit,t,n,this._getLabelCapacity(t)),o=Tb(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=ex(a)||!0===a,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",a)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,o,s),d++)OT(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==d||OT(c,u,f),Object.keys(c).sort(DT).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Sb(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,i||(h?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=nx(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,LT(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(RT(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return yx(e.sort(DT))}}function zT(e,t,n){let i,r,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=fx(e,"pos",t)),({pos:i,time:s}=e[a]),({pos:r,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=fx(e,"time",t)),({time:i,pos:s}=e[a]),({time:r,pos:o}=e[l]));const c=r-i;return c?s+(o-s)*(t-i)/c:s}a(FT,"id","time"),a(FT,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class UT extends FT{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=zT(t,this.min),this._tableRange=zT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(zT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return zT(this._table,n*this._tableRange+this._minPos,!0)}}a(UT,"id","timeseries"),a(UT,"defaults",FT.defaults);const VT=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],BT="label";function HT(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function WT(e,t){e.labels=t}function qT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:BT;const i=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):c({},t)})}function GT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BT;const n={labels:[],datasets:[]};return WT(n,e.labels),qT(n,e.datasets,t),n}function KT(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:u,plugins:d=[],fallbackContent:h,updateMode:f}=e,p=Fv(e,VT),m=(0,i.useRef)(null),g=(0,i.useRef)(null),y=()=>{m.current&&(g.current=new gE(m.current,{type:a,data:GT(l,o),options:u&&c({},u),plugins:d}),HT(t,g.current))},v=()=>{HT(t,null),g.current&&(g.current.destroy(),g.current=null)};return(0,i.useEffect)(()=>{!s&&g.current&&u&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,u)},[s,u]),(0,i.useEffect)(()=>{!s&&g.current&&WT(g.current.config.data,l.labels)},[s,l.labels]),(0,i.useEffect)(()=>{!s&&g.current&&l.datasets&&qT(g.current.config.data,l.datasets,o)},[s,l.datasets]),(0,i.useEffect)(()=>{g.current&&(s?(v(),setTimeout(y)):g.current.update(f))},[s,u,l.labels,l.datasets,f]),(0,i.useEffect)(()=>{g.current&&(v(),setTimeout(y))},[a]),(0,i.useEffect)(()=>(y(),()=>v()),[]),i.createElement("canvas",c({ref:m,role:"img",height:n,width:r},p),h)}const QT=(0,i.forwardRef)(KT);function YT(e,t){return gE.register(t),(0,i.forwardRef)((t,n)=>i.createElement(QT,c(c({},t),{},{ref:n,type:e})))}const XT=YT("bar",M_);function $T(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=$T(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const JT=function(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=$T(e))&&(i&&(i+=" "),i+=t);return i},ZT=["theme","type","isLoading"];!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var eN=e=>"number"==typeof e&&!isNaN(e),tN=e=>"string"==typeof e,nN=e=>"function"==typeof e,iN=e=>tN(e)||nN(e)?e:null,rN=(e,t)=>!1===e||eN(e)&&e>0?e:t,sN=e=>(0,i.isValidElement)(e)||tN(e)||nN(e)||eN(e);function oN(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:o=300}=e;return function(e){let{children:a,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,p=r?"".concat(t,"--").concat(l):t,m=r?"".concat(n,"--").concat(l):n,g=(0,i.useRef)(0);return(0,i.useLayoutEffect)(()=>{let e=d.current,t=p.split(" "),n=i=>{i.target===d.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==i.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),(0,i.useEffect)(()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:i,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition="all ".concat(n,"ms"),requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)})})}(e,u,o):u()};h||(c?t():(g.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))},[h]),i.createElement(i.Fragment,null,a)}}function aN(e,t){return{content:lN(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function lN(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,i.isValidElement)(e)&&!tN(e.type)?(0,i.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):nN(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function cN(e){let{delay:t,isRunning:n,closeToast:r,type:s="default",hide:o,className:a,controlledProgress:l,progress:u,rtl:d,isIn:h,theme:f}=e,p=o||l&&0===u,m={animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused"};l&&(m.transform="scaleX(".concat(u,")"));let g=JT("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(f),"Toastify__progress-bar--".concat(s),{"Toastify__progress-bar--rtl":d}),y=nN(a)?a({rtl:d,type:s,defaultClassName:g}):JT(g,a),v={[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{h&&r()}};return i.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},i.createElement("div",{className:"Toastify__progress-bar--bg Toastify__progress-bar-theme--".concat(f," Toastify__progress-bar--").concat(s)}),i.createElement("div",c({role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:y,style:m},v)))}var uN=1,dN=()=>"".concat(uN++);function hN(e,t,n){let i=1,r=0,s=[],o=[],a=t,l=new Map,u=new Set,d=()=>{o=Array.from(l.values()),u.forEach(e=>e())},h=e=>{var t,n;null==(n=null==(t=e.props)?void 0:t.onClose)||n.call(t,e.removalReason),e.isActive=!1},f=e=>{if(null==e)l.forEach(h);else{let t=l.get(e);t&&h(t)}d()},p=e=>{var t,i;let{toastId:r,updateId:s}=e.props,o=null==s;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(r,e),d(),n(aN(e,o?"added":"updated")),o&&(null==(i=(t=e.props).onOpen)||i.call(t))};return{id:e,props:a,observe:e=>(u.add(e),()=>u.delete(e)),toggle:(e,t)=>{l.forEach(n=>{var i;(null==t||t===n.props.toastId)&&(null==(i=n.toggle)||i.call(n,e))})},removeToast:f,toasts:l,clearQueue:()=>{r-=s.length,s=[]},buildToast:(t,o)=>{if((t=>{let{containerId:n,toastId:i,updateId:r}=t,s=n?n!==e:1!==e,o=l.has(i)&&null==r;return s||o})(o))return;let{toastId:u,updateId:h,data:m,staleId:g,delay:y}=o,v=null==h;v&&r++;let b=c(c(c({},a),{},{style:a.toastStyle,key:i++},Object.fromEntries(Object.entries(o).filter(e=>{let[t,n]=e;return null!=n}))),{},{toastId:u,updateId:h,data:m,isIn:!1,className:iN(o.className||a.toastClassName),progressClassName:iN(o.progressClassName||a.progressClassName),autoClose:!o.isLoading&&rN(o.autoClose,a.autoClose),closeToast(e){l.get(u).removalReason=e,f(u)},deleteToast(){let e=l.get(u);if(null!=e){if(n(aN(e,"removed")),l.delete(u),r--,r<0&&(r=0),s.length>0)return void p(s.shift());d()}}});b.closeButton=a.closeButton,!1===o.closeButton||sN(o.closeButton)?b.closeButton=o.closeButton:!0===o.closeButton&&(b.closeButton=!sN(a.closeButton)||a.closeButton);let x={content:t,props:b,staleId:g};a.limit&&a.limit>0&&r>a.limit&&v?s.push(x):eN(y)?setTimeout(()=>{p(x)},y):p(x)},setProps(e){a=e},setToggle:(e,t)=>{let n=l.get(e);n&&(n.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>o}}var fN=new Map,pN=[],mN=new Set,gN=e=>mN.forEach(t=>t(e)),yN=()=>fN.size>0;function vN(e,t){var n;if(t)return!(null==(n=fN.get(t))||!n.isToastActive(e));let i=!1;return fN.forEach(t=>{t.isToastActive(e)&&(i=!0)}),i}function bN(e){if(yN()){if(null==e||(e=>tN(e)||eN(e))(e))fN.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=fN.get(e.containerId);t?t.removeToast(e.id):fN.forEach(t=>{t.removeToast(e.id)})}}else pN=pN.filter(t=>null!=e&&t.options.toastId!==e)}function xN(e,t){sN(e)&&(yN()||pN.push({content:e,options:t}),fN.forEach(n=>{n.buildToast(e,t)}))}function wN(e,t){fN.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function _N(e){let t=e.containerId||1;return{subscribe(n){let i=hN(t,e,gN);fN.set(t,i);let r=i.observe(n);return pN.forEach(e=>xN(e.content,e.options)),pN=[],()=>{r(),fN.delete(t)}},setProps(e){var n;null==(n=fN.get(t))||n.setProps(e)},getSnapshot(){var e;return null==(e=fN.get(t))?void 0:e.getSnapshot()}}}function kN(e){return e&&(tN(e.toastId)||eN(e.toastId))?e.toastId:dN()}function EN(e,t){return xN(e,t),t.toastId}function TN(e,t){return c(c({},t),{},{type:t&&t.type||e,toastId:kN(t)})}function NN(e){return(t,n)=>EN(t,TN(e,n))}function SN(e,t){return EN(e,TN("default",t))}function CN(e){let[t,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),o=(0,i.useRef)(null),a=(0,i.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;function f(){n(!0)}function p(){n(!1)}function m(n){let i=o.current;if(a.canDrag&&i){a.didMove=!0,t&&p(),"x"===e.draggableDirection?a.delta=n.clientX-a.start:a.delta=n.clientY-a.start,a.start!==n.clientX&&(a.canCloseOnClick=!1);let r="x"===e.draggableDirection?"".concat(a.delta,"px, var(--y)"):"0, calc(".concat(a.delta,"px + var(--y))");i.style.transform="translate3d(".concat(r,",0)"),i.style.opacity="".concat(1-Math.abs(a.delta/a.removalDistance))}}function g(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g);let t=o.current;if(a.canDrag&&a.didMove&&t){if(a.canDrag=!1,Math.abs(a.delta)>a.removalDistance)return s(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=fN.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:n}),(0,i.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||p(),window.addEventListener("focus",f),window.addEventListener("blur",p),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",p)}},[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){a.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",g);let n=o.current;a.canCloseOnClick=!0,a.canDrag=!0,n.style.transition="none","x"===e.draggableDirection?(a.start=t.clientX,a.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(a.start=t.clientY,a.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:n,bottom:i,left:r,right:s}=o.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=r&&t.clientX<=s&&t.clientY>=n&&t.clientY<=i?p():f()}};return l&&c&&(y.onMouseEnter=p,e.stacked||(y.onMouseLeave=f)),h&&(y.onClick=e=>{d&&d(e),a.canCloseOnClick&&u(!0)}),{playToast:f,pauseToast:p,isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:y}}SN.loading=(e,t)=>EN(e,TN("default",c({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),SN.promise=function(e,t,n){let i,{pending:r,error:s,success:o}=t;r&&(i=tN(r)?SN.loading(r,n):SN.loading(r.render,c(c({},n),r)));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,r)=>{if(null==t)return void SN.dismiss(i);let s=c(c(c({type:e},a),n),{},{data:r}),o=tN(t)?{render:t}:t;return i?SN.update(i,c(c({},s),o)):SN(o.render,c(c({},s),o)),r},u=nN(e)?e():e;return u.then(e=>l("success",o,e)).catch(e=>l("error",s,e)),u},SN.success=NN("success"),SN.info=NN("info"),SN.error=NN("error"),SN.warning=NN("warning"),SN.warn=SN.warning,SN.dark=(e,t)=>EN(e,TN("default",c({theme:"dark"},t))),SN.dismiss=function(e){bN(e)},SN.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fN.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},SN.isActive=vN,SN.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var i;return null==(i=fN.get(n||1))?void 0:i.toasts.get(e)})(e,t);if(n){let{props:i,content:r}=n,s=c(c(c({delay:100},i),t),{},{toastId:t.toastId||e,updateId:dN()});s.toastId!==e&&(s.staleId=e);let o=s.render||r;delete s.render,EN(o,s)}},SN.done=e=>{SN.update(e,{progress:1})},SN.onChange=function(e){return mN.add(e),()=>{mN.delete(e)}},SN.play=e=>wN(!0,e),SN.pause=e=>wN(!1,e);var IN="undefined"!=typeof window?i.useLayoutEffect:i.useEffect,AN=e=>{let{theme:t,type:n,isLoading:r}=e,s=Fv(e,ZT);return i.createElement("svg",c({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},s))};var PN={info:function(e){return i.createElement(AN,c({},e),i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return i.createElement(AN,c({},e),i.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return i.createElement(AN,c({},e),i.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return i.createElement(AN,c({},e),i.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return i.createElement("div",{className:"Toastify__spinner"})}};function jN(e){let{theme:t,type:n,isLoading:r,icon:s}=e,o=null,a={theme:t,type:n};return!1===s||(nN(s)?o=s(c(c({},a),{},{isLoading:r})):(0,i.isValidElement)(s)?o=(0,i.cloneElement)(s,a):r?o=PN.spinner():(e=>e in PN)(n)&&(o=PN[n](a))),o}var DN=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:o}=CN(e),{closeButton:a,children:l,autoClose:u,onClick:d,type:h,hideProgressBar:f,closeToast:p,transition:m,position:g,className:y,style:v,progressClassName:b,updateId:x,role:w,progress:_,rtl:k,toastId:E,deleteToast:T,isIn:N,isLoading:S,closeOnClick:C,theme:I,ariaLabel:A}=e,P=JT("Toastify__toast","Toastify__toast-theme--".concat(I),"Toastify__toast--".concat(h),{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":C}),j=nN(y)?y({rtl:k,position:g,type:h,defaultClassName:P}):JT(P,y),D=jN(e),R=!!_||!u,M={closeToast:p,type:h,theme:I},O=null;return!1===a||(O=nN(a)?a(M):(0,i.isValidElement)(a)?(0,i.cloneElement)(a,M):function(e){let{closeToast:t,theme:n,ariaLabel:r="close"}=e;return i.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:e=>{e.stopPropagation(),t(!0)},"aria-label":r},i.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},i.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(M)),i.createElement(m,{isIn:N,done:T,position:g,preventExitTransition:n,nodeRef:r,playToast:o},i.createElement("div",c(c({id:E,tabIndex:0,onClick:d,"data-in":N,className:j},s),{},{style:v,ref:r},N&&{role:w,"aria-label":A}),null!=D&&i.createElement("div",{className:JT("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!S})},D),lN(l,e,!t),O,!e.customProgressBar&&i.createElement(cN,c(c({},x&&!R?{key:"p-".concat(x)}:{}),{},{rtl:k,theme:I,delay:u,isRunning:t,isIn:N,closeToast:p,hide:f,type:h,className:b,controlledProgress:R,progress:_||0}))))},RN=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},MN=oN(RN("bounce",!0)),ON=(oN(RN("slide",!0)),oN(RN("zoom")),oN(RN("flip")),{position:"top-right",transition:MN,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function LN(e){let t=c(c({},ON),e),n=e.stacked,[r,s]=(0,i.useState)(!0),o=(0,i.useRef)(null),{getToastToRender:a,isToastActive:l,count:u}=function(e){var t;let{subscribe:n,getSnapshot:r,setProps:s}=(0,i.useRef)(_N(e)).current;s(e);let o=null==(t=(0,i.useSyncExternalStore)(n,r,r))?void 0:t.slice();return{getToastToRender:function(t){if(!o)return[];let n=new Map;return e.newestOnTop&&o.reverse(),o.forEach(e=>{let{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},isToastActive:vN,count:null==o?void 0:o.length}}(t),{className:d,style:h,rtl:f,containerId:p,hotKeys:m}=t;function g(e){let t=JT("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":f});return nN(d)?d({position:e,rtl:f,defaultClassName:t}):JT(t,iN(d))}function y(){n&&(s(!0),SN.play())}return IN(()=>{var e;if(n){let n=o.current.querySelectorAll('[data-in="true"]'),i=12,s=null==(e=t.position)?void 0:e.includes("top"),a=0,l=0;Array.from(n).reverse().forEach((e,t)=>{let n=e;n.classList.add("Toastify__toast--stacked"),t>0&&(n.dataset.collapsed="".concat(r)),n.dataset.pos||(n.dataset.pos=s?"top":"bot");let o=a*(r?.2:1)+(r?0:i*t);n.style.setProperty("--y","".concat(s?o:-1*o,"px")),n.style.setProperty("--g","".concat(i)),n.style.setProperty("--s","".concat(1-(r?l:0))),a+=n.offsetHeight,l+=.025})}},[r,u,n]),(0,i.useEffect)(()=>{function e(e){var t;let n=o.current;m(e)&&(null==(t=n.querySelector('[tabIndex="0"]'))||t.focus(),s(!1),SN.pause()),"Escape"===e.key&&(document.activeElement===n||null!=n&&n.contains(document.activeElement))&&(s(!0),SN.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[m]),i.createElement("section",{ref:o,className:"Toastify",id:p,onMouseEnter:()=>{n&&(s(!1),SN.pause())},onMouseLeave:y,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},a((e,t)=>{let r=t.length?c({},h):c(c({},h),{},{pointerEvents:"none"});return i.createElement("div",{tabIndex:-1,className:g(e),"data-stacked":n,style:r,key:"c-".concat(e)},t.map(e=>{let{content:t,props:r}=e;return i.createElement(DN,c(c({},r),{},{stacked:n,collapseAll:y,isIn:l(r.toastId,r.containerId),key:"t-".concat(r.key)}),t)}))}))}const FN={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},zN=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",UN=new RegExp("^"+("["+zN+"]["+(zN+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function VN(e,t){const n=[];let i=t.exec(e);for(;i;){const r=[];r.startIndex=t.lastIndex-i[0].length;const s=i.length;for(let e=0;e<s;e++)r.push(i[e]);n.push(r),i=t.exec(e)}return n}const BN=function(e){const t=UN.exec(e);return!(null===t||"undefined"===typeof t)};let HN;HN="function"!==typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class WN{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==t&&(this.child[this.child.length-1][HN]={startIndex:t})}static getMetaDataSymbol(){return HN}}function qN(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let i=1,r=!1,s=!1,o="";for(;t<e.length;t++)if("<"!==e[t]||s)if(">"===e[t]){if(s?"-"===e[t-1]&&"-"===e[t-2]&&(s=!1,i--):i--,0===i)break}else"["===e[t]?r=!0:o+=e[t];else{if(r&&$N(e,"!ENTITY",t)){let i,r;t+=7,[i,r,t]=KN(e,t+1),-1===r.indexOf("&")&&(n[i]={regx:RegExp("&".concat(i,";"),"g"),val:r})}else if(r&&$N(e,"!ELEMENT",t)){t+=8;const{index:n}=XN(e,t+1);t=n}else if(r&&$N(e,"!ATTLIST",t))t+=8;else if(r&&$N(e,"!NOTATION",t)){t+=9;const{index:n}=QN(e,t+1);t=n}else{if(!$N(e,"!--",t))throw new Error("Invalid DOCTYPE");s=!0}i++,o=""}if(0!==i)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}const GN=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function KN(e,t){t=GN(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)n+=e[t],t++;if(JN(n),t=GN(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw new Error("External entities are not supported");if("%"===e[t])throw new Error("Parameter entities are not supported");let i="";return[t,i]=YN(e,t,"entity"),[n,i,--t]}function QN(e,t){t=GN(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;JN(n),t=GN(e,t);const i=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==i&&"PUBLIC"!==i)throw new Error('Expected SYSTEM or PUBLIC, found "'.concat(i,'"'));t+=i.length,t=GN(e,t);let r=null,s=null;if("PUBLIC"===i)[t,r]=YN(e,t,"publicIdentifier"),'"'!==e[t=GN(e,t)]&&"'"!==e[t]||([t,s]=YN(e,t,"systemIdentifier"));else if("SYSTEM"===i&&([t,s]=YN(e,t,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:r,systemIdentifier:s,index:--t}}function YN(e,t,n){let i="";const r=e[t];if('"'!==r&&"'"!==r)throw new Error('Expected quoted string, found "'.concat(r,'"'));for(t++;t<e.length&&e[t]!==r;)i+=e[t],t++;if(e[t]!==r)throw new Error("Unterminated ".concat(n," value"));return[++t,i]}function XN(e,t){t=GN(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!JN(n))throw new Error('Invalid element name: "'.concat(n,'"'));let i="";if("E"===e[t=GN(e,t)]&&$N(e,"MPTY",t))t+=4;else if("A"===e[t]&&$N(e,"NY",t))t+=2;else{if("("!==e[t])throw new Error('Invalid Element Expression, found "'.concat(e[t],'"'));for(t++;t<e.length&&")"!==e[t];)i+=e[t],t++;if(")"!==e[t])throw new Error("Unterminated content model")}return{elementName:n,contentModel:i.trim(),index:t}}function $N(e,t,n){for(let i=0;i<t.length;i++)if(t[i]!==e[n+i+1])return!1;return!0}function JN(e){if(BN(e))return e;throw new Error("Invalid entity name ".concat(e))}const ZN=/^[-+]?0x[a-fA-F0-9]+$/,eS=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,tS={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function nS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=Object.assign({},tS,t),!e||"string"!==typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if("0"===e)return 0;if(t.hex&&ZN.test(n))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(-1!==n.search(/.+[eE].+/))return function(e,t,n){if(!n.eNotation)return e;const i=t.match(iS);if(i){let r=i[1]||"";const s=-1===i[3].indexOf("e")?"E":"e",o=i[2],a=r?e[o.length+1]===s:e[o.length]===s;return o.length>1&&a?e:1!==o.length||!i[3].startsWith(".".concat(s))&&i[3][0]!==s?n.leadingZeros&&!a?(t=(i[1]||"")+i[3],Number(t)):e:Number(t)}return e}(e,n,t);{const i=eS.exec(n);if(i){const r=i[1]||"",s=i[2];let o=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),e;return e}(i[3]);const a=r?"."===e[s.length+1]:"."===e[s.length];if(!t.leadingZeros&&(s.length>1||1===s.length&&!a))return e;{const i=Number(n),a=String(i);if(0===i)return i;if(-1!==a.search(/[eE]/))return t.eNotation?i:e;if(-1!==n.indexOf("."))return"0"===a||a===o||a==="".concat(r).concat(o)?i:e;let l=s?o:n;return s?l===a||r+l===a?i:e:l===a||l===r+a?i:e}}return e}}const iS=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class rS{constructor(e){var t;this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xa2"},pound:{regex:/&(pound|#163);/g,val:"\xa3"},yen:{regex:/&(yen|#165);/g,val:"\xa5"},euro:{regex:/&(euro|#8364);/g,val:"\u20ac"},copyright:{regex:/&(copy|#169);/g,val:"\xa9"},reg:{regex:/&(reg|#174);/g,val:"\xae"},inr:{regex:/&(inr|#8377);/g,val:"\u20b9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=sS,this.parseXml=uS,this.parseTextData=oS,this.resolveNameSpace=aS,this.buildAttributesMap=cS,this.isItStopNode=pS,this.replaceEntitiesValue=hS,this.readStopNodeData=yS,this.saveTextToParentTag=fS,this.addChild=dS,this.ignoreAttributesFn="function"===typeof(t=this.options.ignoreAttributes)?t:Array.isArray(t)?e=>{for(const n of t){if("string"===typeof n&&e===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}}:()=>!1}}function sS(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=t[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function oS(e,t,n,i,r,s,o){if(void 0!==e&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const i=this.options.tagValueProcessor(t,e,n,r,s);if(null===i||void 0===i)return e;if(typeof i!==typeof e||i!==e)return i;if(this.options.trimValues)return vS(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?vS(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function aS(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const lS=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function cS(e,t,n){if(!0!==this.options.ignoreAttributes&&"string"===typeof e){const n=VN(e,lS),i=n.length,r={};for(let e=0;e<i;e++){const i=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(i,t))continue;let s=n[e][4],o=this.options.attributeNamePrefix+i;if(i.length)if(this.options.transformAttributeName&&(o=this.options.transformAttributeName(o)),"__proto__"===o&&(o="#__proto__"),void 0!==s){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);const e=this.options.attributeValueProcessor(i,s,t);r[o]=null===e||void 0===e?s:typeof e!==typeof s||e!==s?e:vS(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[o]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=r,e}return r}}const uS=function(e){e=e.replace(/\r\n?/g,"\n");const t=new WN("!xml");let n=t,i="",r="";for(let s=0;s<e.length;s++){if("<"===e[s])if("/"===e[s+1]){const t=mS(e,">",s,"Closing Tag is not closed.");let o=e.substring(s+2,t).trim();if(this.options.removeNSPrefix){const e=o.indexOf(":");-1!==e&&(o=o.substr(e+1))}this.options.transformTagName&&(o=this.options.transformTagName(o)),n&&(i=this.saveTextToParentTag(i,n,r));const a=r.substring(r.lastIndexOf(".")+1);if(o&&-1!==this.options.unpairedTags.indexOf(o))throw new Error("Unpaired tag can not be used as closing tag: </".concat(o,">"));let l=0;a&&-1!==this.options.unpairedTags.indexOf(a)?(l=r.lastIndexOf(".",r.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=r.lastIndexOf("."),r=r.substring(0,l),n=this.tagsNodeStack.pop(),i="",s=t}else if("?"===e[s+1]){let t=gS(e,s,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,r),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new WN(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,r,t.tagName)),this.addChild(n,e,r,s)}s=t.closeIndex+1}else if("!--"===e.substr(s+1,3)){const t=mS(e,"--\x3e",s+4,"Comment is not closed.");if(this.options.commentPropName){const o=e.substring(s+4,t-2);i=this.saveTextToParentTag(i,n,r),n.add(this.options.commentPropName,[{[this.options.textNodeName]:o}])}s=t}else if("!D"===e.substr(s+1,2)){const t=qN(e,s);this.docTypeEntities=t.entities,s=t.i}else if("!["===e.substr(s+1,2)){const t=mS(e,"]]>",s,"CDATA is not closed.")-2,o=e.substring(s+9,t);i=this.saveTextToParentTag(i,n,r);let a=this.parseTextData(o,n.tagname,r,!0,!1,!0,!0);void 0==a&&(a=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:o}]):n.add(this.options.textNodeName,a),s=t+2}else{let o=gS(e,s,this.options.removeNSPrefix),a=o.tagName;const l=o.rawTagName;let c=o.tagExp,u=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),n&&i&&"!xml"!==n.tagname&&(i=this.saveTextToParentTag(i,n,r,!1));const h=n;h&&-1!==this.options.unpairedTags.indexOf(h.tagname)&&(n=this.tagsNodeStack.pop(),r=r.substring(0,r.lastIndexOf("."))),a!==t.tagname&&(r+=r?"."+a:a);const f=s;if(this.isItStopNode(this.options.stopNodes,r,a)){let t="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)"/"===a[a.length-1]?(a=a.substr(0,a.length-1),r=r.substr(0,r.length-1),c=a):c=c.substr(0,c.length-1),s=o.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(a))s=o.closeIndex;else{const n=this.readStopNodeData(e,l,d+1);if(!n)throw new Error("Unexpected end of ".concat(l));s=n.i,t=n.tagContent}const i=new WN(a);a!==c&&u&&(i[":@"]=this.buildAttributesMap(c,r,a)),t&&(t=this.parseTextData(t,a,r,!0,u,!0,!0)),r=r.substr(0,r.lastIndexOf(".")),i.add(this.options.textNodeName,t),this.addChild(n,i,r,f)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===a[a.length-1]?(a=a.substr(0,a.length-1),r=r.substr(0,r.length-1),c=a):c=c.substr(0,c.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const e=new WN(a);a!==c&&u&&(e[":@"]=this.buildAttributesMap(c,r,a)),this.addChild(n,e,r,f),r=r.substr(0,r.lastIndexOf("."))}else{const e=new WN(a);this.tagsNodeStack.push(n),a!==c&&u&&(e[":@"]=this.buildAttributesMap(c,r,a)),this.addChild(n,e,r,f),n=e}i="",s=d}}else i+=e[s]}return t.child};function dS(e,t,n,i){this.options.captureMetaData||(i=void 0);const r=this.options.updateTag(t.tagname,n,t[":@"]);!1===r||("string"===typeof r?(t.tagname=r,e.addChild(t,i)):e.addChild(t,i))}const hS=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function fS(e,t,n,i){return e&&(void 0===i&&(i=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,i))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function pS(e,t,n){const i="*."+n;for(const r in e){const n=e[r];if(i===n||t===n)return!0}return!1}function mS(e,t,n,i){const r=e.indexOf(t,n);if(-1===r)throw new Error(i);return r+t.length-1}function gS(e,t,n){const i=function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",r="";for(let s=t;s<e.length;s++){let t=e[s];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else if(t===i[0]){if(!i[1])return{data:r,index:s};if(e[s+1]===i[1])return{data:r,index:s}}else"\t"===t&&(t=" ");r+=t}}(e,t+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(!i)return;let r=i.data;const s=i.index,o=r.search(/\s/);let a=r,l=!0;-1!==o&&(a=r.substring(0,o),r=r.substring(o+1).trimStart());const c=a;if(n){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1),l=a!==i.data.substr(e+1))}return{tagName:a,tagExp:r,closeIndex:s,attrExpPresent:l,rawTagName:c}}function yS(e,t,n){const i=n;let r=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const s=mS(e,">",n,"".concat(t," is not closed"));if(e.substring(n+2,s).trim()===t&&(r--,0===r))return{tagContent:e.substring(i,n),i:s};n=s}else if("?"===e[n+1]){n=mS(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=mS(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=mS(e,"]]>",n,"StopNode is not closed.")-2}else{const i=gS(e,n,">");if(i){(i&&i.tagName)===t&&"/"!==i.tagExp[i.tagExp.length-1]&&r++,n=i.closeIndex}}}function vS(e,t,n){if(t&&"string"===typeof e){const t=e.trim();return"true"===t||"false"!==t&&nS(e,n)}return function(e){return"undefined"!==typeof e}(e)?e:""}const bS=WN.getMetaDataSymbol();function xS(e,t){return wS(e,t)}function wS(e,t,n){let i;const r={};for(let s=0;s<e.length;s++){const o=e[s],a=_S(o);let l="";if(l=void 0===n?a:n+"."+a,a===t.textNodeName)void 0===i?i=o[a]:i+=""+o[a];else{if(void 0===a)continue;if(o[a]){let e=wS(o[a],t,l);const n=ES(e,t);void 0!==o[bS]&&(e[bS]=o[bS]),o[":@"]?kS(e,o[":@"],l,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==r[a]&&r.hasOwnProperty(a)?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(e)):t.isArray(a,l,n)?r[a]=[e]:r[a]=e}}}return"string"===typeof i?i.length>0&&(r[t.textNodeName]=i):void 0!==i&&(r[t.textNodeName]=i),r}function _S(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const e=t[n];if(":@"!==e)return e}}function kS(e,t,n,i){if(t){const r=Object.keys(t),s=r.length;for(let o=0;o<s;o++){const s=r[o];i.isArray(s,n+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}}function ES(e,t){const{textNodeName:n}=t,i=Object.keys(e).length;return 0===i||!(1!==i||!e[n]&&"boolean"!==typeof e[n]&&0!==e[n])}const TS={allowBooleanAttributes:!1,unpairedTags:[]};function NS(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function SS(e,t){const n=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){const i=e.substr(n,t-n);if(t>5&&"xml"===i)return MS("InvalidXml","XML declaration allowed only at the start of the document.",FS(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}continue}return t}function CS(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}const IS='"',AS="'";function PS(e,t){let n="",i="",r=!1;for(;t<e.length;t++){if(e[t]===IS||e[t]===AS)""===i?i=e[t]:i!==e[t]||(i="");else if(">"===e[t]&&""===i){r=!0;break}n+=e[t]}return""===i&&{value:n,index:t,tagClosed:r}}const jS=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function DS(e,t){const n=VN(e,jS),i={};for(let r=0;r<n.length;r++){if(0===n[r][1].length)return MS("InvalidAttr","Attribute '"+n[r][2]+"' has no space in starting.",zS(n[r]));if(void 0!==n[r][3]&&void 0===n[r][4])return MS("InvalidAttr","Attribute '"+n[r][2]+"' is without value.",zS(n[r]));if(void 0===n[r][3]&&!t.allowBooleanAttributes)return MS("InvalidAttr","boolean attribute '"+n[r][2]+"' is not allowed.",zS(n[r]));const e=n[r][2];if(!OS(e))return MS("InvalidAttr","Attribute '"+e+"' is an invalid name.",zS(n[r]));if(i.hasOwnProperty(e))return MS("InvalidAttr","Attribute '"+e+"' is repeated.",zS(n[r]));i[e]=1}return!0}function RS(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function MS(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function OS(e){return BN(e)}function LS(e){return BN(e)}function FS(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function zS(e){return e.startIndex+e[1].length}class US{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},FN,e)}(e)}parse(e,t){if("string"===typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=function(e,t){t=Object.assign({},TS,t);const n=[];let i=!1,r=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let s=0;s<e.length;s++)if("<"===e[s]&&"?"===e[s+1]){if(s+=2,s=SS(e,s),s.err)return s}else{if("<"!==e[s]){if(NS(e[s]))continue;return MS("InvalidChar","char '"+e[s]+"' is not expected.",FS(e,s))}{let o=s;if(s++,"!"===e[s]){s=CS(e,s);continue}{let a=!1;"/"===e[s]&&(a=!0,s++);let l="";for(;s<e.length&&">"!==e[s]&&" "!==e[s]&&"\t"!==e[s]&&"\n"!==e[s]&&"\r"!==e[s];s++)l+=e[s];if(l=l.trim(),"/"===l[l.length-1]&&(l=l.substring(0,l.length-1),s--),!LS(l)){let t;return t=0===l.trim().length?"Invalid space after '<'.":"Tag '"+l+"' is an invalid name.",MS("InvalidTag",t,FS(e,s))}const c=PS(e,s);if(!1===c)return MS("InvalidAttr","Attributes for '"+l+"' have open quote.",FS(e,s));let u=c.value;if(s=c.index,"/"===u[u.length-1]){const n=s-u.length;u=u.substring(0,u.length-1);const r=DS(u,t);if(!0!==r)return MS(r.err.code,r.err.msg,FS(e,n+r.err.line));i=!0}else if(a){if(!c.tagClosed)return MS("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",FS(e,s));if(u.trim().length>0)return MS("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",FS(e,o));if(0===n.length)return MS("InvalidTag","Closing tag '"+l+"' has not been opened.",FS(e,o));{const t=n.pop();if(l!==t.tagName){let n=FS(e,t.tagStartPos);return MS("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+l+"'.",FS(e,o))}0==n.length&&(r=!0)}}else{const a=DS(u,t);if(!0!==a)return MS(a.err.code,a.err.msg,FS(e,s-u.length+a.err.line));if(!0===r)return MS("InvalidXml","Multiple possible root nodes found.",FS(e,s));-1!==t.unpairedTags.indexOf(l)||n.push({tagName:l,tagStartPos:o}),i=!0}for(s++;s<e.length;s++)if("<"===e[s]){if("!"===e[s+1]){s++,s=CS(e,s);continue}if("?"!==e[s+1])break;if(s=SS(e,++s),s.err)return s}else if("&"===e[s]){const t=RS(e,s);if(-1==t)return MS("InvalidChar","char '&' is not expected.",FS(e,s));s=t}else if(!0===r&&!NS(e[s]))return MS("InvalidXml","Extra text at the end",FS(e,s));"<"===e[s]&&s--}}}return i?1==n.length?MS("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",FS(e,n[0].tagStartPos)):!(n.length>0)||MS("InvalidXml","Invalid '"+JSON.stringify(n.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):MS("InvalidXml","Start tag expected.",1)}(e,t);if(!0!==n)throw Error("".concat(n.err.msg,":").concat(n.err.line,":").concat(n.err.col))}const n=new rS(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(e);return this.options.preserveOrder||void 0===i?i:xS(i,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return WN.getMetaDataSymbol()}}var VS=n(579);gE.register(uT,pT,UE,PE,DE,F_,GE,aT,WE,_E);const BS={apiKey:"AIzaSyA7H6G0mXCy9DmoLg3fSW3TrxIRcEzz9jg",authDomain:"portal-evelsa.firebaseapp.com",projectId:"portal-evelsa",storageBucket:"portal-evelsa.firebasestorage.app",messagingSenderId:"847174487471",appId:"1:847174487471:web:c3a57fd8315ce619a2335a"},HS=Qe(BS),WS=ur(HS),qS=function(e,t){const n="string"==typeof e?e:t||"(default)",i=We("object"==typeof e?e:Ye(),"firestore").getImmediate({identifier:n});if(!i._initialized){const e=v("firestore");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=Mm(e,Lm))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Rl.MOCK_USER;else{t=_(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Gl(ql.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Rl(s)}e._authCredentials=new Xl(new Ql(t,n))}}(i,...e)}return i}(HS),GS="proyectos_v2",KS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye(),t=arguments.length>1?arguments[1]:void 0;e=O(e);const n=We(e,Dv).getImmediate({identifier:t}),i=v("storage");return i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken="string"===typeof r?r:_(r,e.app.options.projectId))}(e,t,n,i)}(n,...i),n}(HS),QS=e=>{if(!e)return"---";let t;if("function"===typeof e.toDate)t=e.toDate();else try{if(t=new Date(e),isNaN(t.getTime()))return"Fecha Inv\xe1lida"}catch(i){return"Fecha Inv\xe1lida"}const n=6e4*t.getTimezoneOffset();return new Date(t.getTime()+n).toLocaleDateString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit"})},YS=e=>{let{breakInfo:t,onEndBreak:n}=e;const r=(e=>{const[t,n]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if(!e)return void n(0);const t=e.toDate().getTime(),i=setInterval(()=>{const e=Date.now(),i=t-e;n(i>0?i:0)},1e3);return()=>clearInterval(i)},[e]),(e=>{if(e<=0)return"00:00";const t=Math.floor(e/1e3),n=String(Math.floor(t/60)).padStart(2,"0"),i=String(t%60).padStart(2,"0");return"".concat(n,":").concat(i)})(t)})(new oc(t.inicio.seconds+4500,t.inicio.nanoseconds));return(0,VS.jsxs)("div",{className:"bg-yellow-500 text-white p-4 rounded-lg shadow-lg mb-8 flex justify-between items-center sticky top-20 z-30",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-bold",children:"En Descanso"}),(0,VS.jsx)("p",{className:"text-lg",children:"El trabajo se reanudar\xe1 autom\xe1ticamente."})]}),(0,VS.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,VS.jsxs)("div",{className:"text-right",children:[(0,VS.jsx)("p",{className:"text-2xl font-mono",children:r}),(0,VS.jsx)("p",{className:"text-xs",children:"Tiempo Restante"})]}),(0,VS.jsx)("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 font-bold py-3 px-4 rounded-lg",children:"Volver al Trabajo"})]})]})},XS=e=>{let{message:t,type:n,onClose:i}=e;if(!t)return null;return(0,VS.jsxs)("div",{className:"".concat("p-4 mb-4 text-sm rounded-lg relative"," ").concat({error:"bg-red-100 text-red-800",success:"bg-green-100 text-green-800"}[n]),role:"alert",children:[(0,VS.jsx)("span",{className:"font-medium",children:t}),(0,VS.jsx)("button",{onClick:i,className:"absolute top-0 right-0 mt-2 mr-3 text-2xl font-semibold leading-none",children:"\xd7"})]})},$S=(e,t)=>{if(!e)return null;let n=new Date(e),i=0;for(;i<t;){n.setDate(n.getDate()+1);const e=n.getDay();0!==e&&6!==e&&i++}return n},JS=e=>{try{var t,n,i;const r=new US({ignoreAttributes:!1,attributeNamePrefix:"@_",parseAttributeValue:!0}),s=r.parse(e)["cfdi:Comprobante"];if(!s)throw new Error("Nodo <cfdi:Comprobante> no encontrado.");const o=null===(t=s["cfdi:Complemento"])||void 0===t?void 0:t["tfd:TimbreFiscalDigital"];if(!o)throw new Error("Nodo <tfd:TimbreFiscalDigital> no encontrado.");let a=0;const l=s["cfdi:Impuestos"];if(l&&l["@_TotalImpuestosTrasladados"])a=l["@_TotalImpuestosTrasladados"];else if(l&&l["cfdi:Traslados"]){const e=l["cfdi:Traslados"];(Array.isArray(e["cfdi:Traslado"])?e["cfdi:Traslado"]:[e["cfdi:Traslado"]]).forEach(e=>{e&&"002"===e["@_Impuesto"]&&(a+=e["@_Importe"])})}return{folio:s["@_Folio"]||"S/F",uuid:o["@_UUID"],subtotal:s["@_SubTotal"],iva:a,monto:s["@_Total"],fechaEmision:new Date(s["@_Fecha"]),rfcEmisor:null===(n=s["cfdi:Emisor"])||void 0===n?void 0:n["@_Rfc"],rfcReceptor:null===(i=s["cfdi:Receptor"])||void 0===i?void 0:i["@_Rfc"]}}catch(r){return console.error("Error al parsear el XML:",r),null}},ZS=()=>{const[e,t]=(0,i.useState)(!0),[n,r]=(0,i.useState)(null);if((0,i.useEffect)(()=>{(async()=>{t(!0);const e=Sg(Vm(qS,"facturas"),Ig("tipo","==","cliente"),Ig("estado","==","Pendiente")),n=(await Gg(e)).docs.map(e=>e.data()),i=new Date,s={"0-30 D\xedas":0,"31-60 D\xedas":0,"61-90 D\xedas":0,"+90 D\xedas":0};n.forEach(e=>{const t=e.fechaEmision.toDate(),n=Math.abs(i-t),r=Math.ceil(n/864e5);r<=30?s["0-30 D\xedas"]+=e.monto:r<=60?s["31-60 D\xedas"]+=e.monto:r<=90?s["61-90 D\xedas"]+=e.monto:s["+90 D\xedas"]+=e.monto}),r({labels:Object.keys(s),datasets:[{label:"Monto Pendiente de Cobro",data:Object.values(s),backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 206, 86, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]}),t(!1)})()},[]),e)return(0,VS.jsx)("p",{children:"Calculando reporte de antig\xfcedad..."});return(0,VS.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:n&&(0,VS.jsx)(XT,{data:n,options:{indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Monto Pendiente de Cobro por Antig\xfcedad"}}}})})},eC=e=>{let{title:t,message:n,onConfirm:i,onCancel:r,confirmText:s="Confirmar",cancelText:o="Cancelar",confirmColor:a="bg-green-600"}=e;return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,VS.jsx)("h3",{className:"text-lg font-bold mb-4",children:t}),(0,VS.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:n}),(0,VS.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:r,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:o}),(0,VS.jsx)("button",{onClick:i,className:"".concat(a," hover:opacity-90 text-white font-bold py-2 px-4 rounded"),children:s})]})]})})},tC=e=>{let{project:t,onClose:n,onFinalized:r}=e;const[s,o]=(0,i.useState)([]),[a,l]=(0,i.useState)(t.asignadoTecnicosIds&&t.asignadoTecnicosIds[0]||""),[u,d]=(0,i.useState)(t.fechaEntregaInterna?t.fechaEntregaInterna.toDate().toISOString().split("T")[0]:""),[h,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{const e=Sg(Vm(qS,"usuarios"),Ig("rol","==","tecnico")),t=Sg(Vm(qS,"usuarios"),Ig("roles","array-contains","tecnico")),[n,i]=await Promise.all([Gg(e),Gg(t)]),r=new Map;n.forEach(e=>r.set(e.id,c({id:e.id},e.data()))),i.forEach(e=>r.set(e.id,c({id:e.id},e.data()))),o(Array.from(r.values()))})()},[]);return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Asignar Proyecto: ",t.npu]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xe9cnico Asignado"}),(0,VS.jsx)("div",{className:"mt-2 max-h-48 overflow-y-auto border rounded-md p-2",children:s.map(e=>(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("input",{type:"radio",name:"technician",id:e.id,value:e.id,checked:a===e.id,onChange:e=>l(e.target.value),className:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,VS.jsx)("label",{htmlFor:e.id,className:"ml-3 text-sm text-gray-700",children:e.nombreCompleto})]},e.id))})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha L\xedmite de Entrega (Interna)"}),(0,VS.jsx)("input",{type:"date",value:u,onChange:e=>d(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]})]}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:n,disabled:h,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,VS.jsx)("button",{onClick:async()=>{var e;if(!a)return void alert("Debes seleccionar un t\xe9cnico.");f(!0);const i=Bm(qS,GS,t.id),s={};s[a]=(null===(e=t.tecnicosStatus)||void 0===e?void 0:e[a])||"No Visto",await Qg(i,{asignadoTecnicosIds:[a],tecnicosStatus:s,fechaAsignacionTecnico:oc.now(),fechaEntregaInterna:u?oc.fromDate(new Date(u)):null}),f(!1),r(),n()},disabled:h,className:"bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded",children:h?"Asignando...":"Guardar Asignaci\xf3n"})]})]})})},nC=e=>{let{project:t,onClose:n,onUpdate:r,user:s,userData:o,userRole:a}=e;const[l,u]=(0,i.useState)({prioridad:t.prioridad||"1 - Normal",fechaEntregaInterna:t.fechaEntregaInterna?t.fechaEntregaInterna.toDate().toISOString().split("T")[0]:"",notasSupervisor:t.notasSupervisor||"",precioCotizacionCliente:t.precioCotizacionCliente||"",costoProveedor:t.costoProveedor||"",cotizacionClienteRef:t.cotizacionClienteRef||"",poClienteRef:t.poClienteRef||"",cotizacionProveedorRef:t.cotizacionProveedorRef||""}),[d,h]=(0,i.useState)(!1),[f,p]=(0,i.useState)([]),[m,g]=(0,i.useState)(!0);(0,i.useEffect)(()=>{g(!0);const e=Xg(Sg(Vm(qS,"bitacoras_proyectos"),Ig("projectId","==",t.id),jg("fecha","desc")),e=>{p(e.docs.map(e=>c({id:e.id},e.data()))),g(!1)});return()=>e()},[t.id]);const y=e=>{const{name:t,value:n}=e.target;u(e=>c(c({},e),{},{[t]:n}))};return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Proyecto: ",t.npu]}),(0,VS.jsxs)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:["supervisor"===a&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Prioridad"}),(0,VS.jsxs)("select",{name:"prioridad",value:l.prioridad,onChange:y,className:"mt-1 block w-full p-2 border rounded-md",children:[(0,VS.jsx)("option",{value:"1 - Normal",children:"Normal"}),(0,VS.jsx)("option",{value:"2 - Alta",children:"Alta"}),(0,VS.jsx)("option",{value:"3 - Urgente",children:"Urgente"})]})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Fecha L\xedmite de Entrega"}),(0,VS.jsx)("input",{type:"date",name:"fechaEntregaInterna",value:l.fechaEntregaInterna,onChange:y,className:"mt-1 block w-full p-2 border rounded-md"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Notas del Supervisor"}),(0,VS.jsx)("textarea",{name:"notasSupervisor",value:l.notasSupervisor,onChange:y,rows:"8",className:"mt-1 block w-full p-2 border rounded-md"})]})]}),"administrador"===a&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,VS.jsx)("input",{type:"number",name:"precioCotizacionCliente",value:l.precioCotizacionCliente,onChange:y,placeholder:"Precio Cliente",className:"px-3 py-2 border rounded-md"}),(0,VS.jsx)("input",{type:"number",name:"costoProveedor",value:l.costoProveedor,onChange:y,placeholder:"Costo Proveedor",className:"px-3 py-2 border rounded-md"})]}),(0,VS.jsx)("input",{type:"text",name:"cotizacionClienteRef",value:l.cotizacionClienteRef,onChange:y,placeholder:"Ref. Cotizaci\xf3n Cliente",className:"w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("input",{type:"text",name:"poClienteRef",value:l.poClienteRef,onChange:y,placeholder:"Ref. PO Cliente",className:"w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("input",{type:"text",name:"cotizacionProveedorRef",value:l.cotizacionProveedorRef,onChange:y,placeholder:"Ref. Cotizaci\xf3n Proveedor",className:"w-full px-3 py-2 border rounded-md"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Bit\xe1cora (Solo Lectura)"}),(0,VS.jsx)("div",{className:"bg-gray-50 border rounded-md p-2 h-96 overflow-y-auto space-y-2",children:m?(0,VS.jsx)("p",{children:"Cargando..."}):f.length>0?f.map(e=>(0,VS.jsxs)("div",{className:"text-xs border-b pb-1",children:[(0,VS.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.mensaje}),e.adjuntoUrl&&(0,VS.jsx)("a",{href:e.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Ver adjunto"}),(0,VS.jsxs)("p",{className:"text-gray-500 mt-1 text-right",children:[e.autorNombre," - ",QS(e.fecha)]})]},e.id)):(0,VS.jsx)("p",{className:"text-gray-500",children:"No hay entradas."})})]})]}),(0,VS.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,VS.jsx)("button",{onClick:n,className:"bg-gray-300 hover:bg-gray-400 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,VS.jsx)("button",{onClick:async()=>{h(!0);const e=Bm(qS,GS,t.id),i={};"supervisor"===a?(i.prioridad=l.prioridad,i.fechaEntregaInterna=l.fechaEntregaInterna?oc.fromDate(new Date(l.fechaEntregaInterna)):null,i.notasSupervisor=l.notasSupervisor):"administrador"===a&&(i.precioCotizacionCliente=Number(l.precioCotizacionCliente)||0,i.costoProveedor=Number(l.costoProveedor)||0,i.cotizacionClienteRef=l.cotizacionClienteRef,i.poClienteRef=l.poClienteRef,i.cotizacionProveedorRef=l.cotizacionProveedorRef);try{Object.keys(i).length>0&&await Qg(e,i),r(),n(),SN.success("Proyecto actualizado correctamente.")}catch(s){SN.error("Error al guardar los cambios."),console.error("Error al guardar:",s)}finally{h(!1)}},disabled:d,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:d?"Guardando...":"Guardar Cambios"})]})]})})},iC=e=>{let{title:t,message:n,onConfirm:r,onCancel:s,confirmText:o="Confirmar",cancelText:a="Cancelar",confirmColor:l="bg-orange-600"}=e;const[c,u]=(0,i.useState)("");return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,VS.jsx)("h3",{className:"text-lg font-bold mb-4",children:t}),(0,VS.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:n}),(0,VS.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Escribe el motivo aqu\xed...",rows:"3",className:"w-full p-2 border rounded-md"}),(0,VS.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,VS.jsx)("button",{onClick:s,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:a}),(0,VS.jsx)("button",{onClick:()=>r(c),className:"".concat(l," hover:opacity-90 text-white font-bold py-2 px-4 rounded"),children:o})]})]})})},rC=e=>{let{user:t,userData:n,selectedRole:r,setSelectedRole:s}=e;const o=(null===n||void 0===n?void 0:n.roles)&&n.roles.length>1;return(0,i.useEffect)(()=>{if(null===t||void 0===t||!t.uid)return;const e=new Audio("https://freesound.org/data/previews/131/131660_2398463-lq.mp3"),n=Xg(Sg(Vm(qS,"notificaciones"),Ig("recipientId","==",t.uid),Ig("read","==",!1)),t=>{const n=[];if(t.docChanges().forEach(e=>{"added"===e.type&&n.push(c({id:e.doc.id},e.doc.data()))}),n.length>2?(SN.info("\ud83d\udd14 Tienes ".concat(n.length," notificaciones nuevas sin leer.")),e.play().catch(e=>console.log("La interacci\xf3n del usuario es necesaria para reproducir sonido."))):n.forEach((t,n)=>{setTimeout(()=>{SN.info("\ud83d\udd14 ".concat(t.message)),e.play().catch(e=>console.log("La interacci\xf3n del usuario es necesaria para reproducir sonido."))},1e3*n)}),n.length>0){const e=(Gm(i=Mm(i=qS,qm)),new ey(i,e=>$g(i,e)));n.forEach(t=>{const n=Bm(qS,"notificaciones",t.id);e.update(n,{read:!0})}),e.commit()}var i});return()=>n()},[t]),(0,VS.jsx)("header",{className:"bg-white shadow-md sticky top-0 z-40",children:(0,VS.jsxs)("div",{className:"max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,VS.jsx)("div",{className:"flex items-center",children:n&&"cliente"===n.rol&&n.logoUrl?(0,VS.jsx)("img",{src:n.logoUrl,onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/150x50/FFFFFF/000000?text=Logo+Cliente"},alt:"Logo Cliente",className:"h-12 w-auto mr-4 object-contain"}):(0,VS.jsx)("img",{src:"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png",alt:"Logo Grupo Evelsa",className:"h-12 w-auto mr-4"})}),t&&(0,VS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,VS.jsxs)("span",{className:"text-gray-600 hidden sm:block",children:["Hola, ",n?n.nombreCompleto.split(" ")[0]:t.email]}),o&&(0,VS.jsx)("div",{className:"relative",children:(0,VS.jsx)("select",{value:r,onChange:e=>s(e.target.value),className:"appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 pl-3 pr-8 text-sm font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:n.roles.map(e=>(0,VS.jsx)("option",{value:e,className:"capitalize",children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,VS.jsx)("button",{onClick:()=>Xn(WS),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300",children:"Salir"})]})]})})},sC=e=>{let{project:t,user:n,userData:r,onClose:s,selectedRole:o}=e;const[a,l]=(0,i.useState)([]),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(!0),[g,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)(""),x="supervisor"!==o;(0,i.useEffect)(()=>{const e=Xg(Sg(Vm(qS,"bitacoras_proyectos"),Ig("projectId","==",t.id),jg("fecha","asc")),e=>{l(e.docs.map(e=>c({id:e.id},e.data()))),m(!1)},e=>{console.error("Error fetching log entries:",e),b("No se pudo cargar la bit\xe1cora."),m(!1)});return()=>e()},[t.id]);return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl h-[90vh] flex flex-col",children:[(0,VS.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold",children:["Bit\xe1cora del Proyecto: ",t.npu]}),(0,VS.jsx)("button",{onClick:s,className:"text-gray-600 hover:text-gray-900 text-2xl font-bold",children:"\xd7"})]}),(0,VS.jsx)("div",{className:"flex-grow overflow-y-auto border rounded-md p-4 space-y-4 mb-4 bg-gray-50",children:p?(0,VS.jsx)("p",{children:"Cargando bit\xe1cora..."}):0===a.length?(0,VS.jsx)("p",{children:"No hay entradas en la bit\xe1cora."}):a.map(e=>{return(0,VS.jsxs)("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[(0,VS.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.mensaje}),e.adjuntoUrl&&(0,VS.jsx)("a",{href:e.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"Ver adjunto"}),(0,VS.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-right",children:[e.autorNombre," - ",(t=e.fecha,t?new Date(1e3*t.seconds).toLocaleString("es-MX"):"---")]})]},e.id);var t})}),x&&(0,VS.jsxs)("div",{className:"border-t pt-4",children:[(0,VS.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:"A\xf1adir nueva nota...",rows:"3",className:"w-full p-2 border rounded-md"}),(0,VS.jsx)("input",{type:"file",id:"file-input-".concat(t.id),onChange:e=>{e.target.files[0]&&f(e.target.files[0])},className:"w-full text-sm mt-2"}),(0,VS.jsx)(XS,{message:v,type:"error",onClose:()=>b("")}),(0,VS.jsx)("button",{onClick:async()=>{if(u||h){y(!0),b("");try{let e="";if(h){const n=Rv(Ov(KS,"bitacoras/".concat(t.id,"/").concat(Date.now(),"_").concat(h.name)),h);e=await Mv((await n).ref)}await Yg(Vm(qS,"bitacoras_proyectos"),{projectId:t.id,autorId:n.uid,autorNombre:r.nombreCompleto,mensaje:u,adjuntoUrl:e,fecha:oc.now()}),d(""),f(null);const i=document.getElementById("file-input-".concat(t.id));i&&(i.value="")}catch(e){console.error("Error al guardar en bit\xe1cora:",e),b("No se pudo guardar la nota. Por favor, intente de nuevo.")}finally{y(!1)}}},disabled:g,className:"w-full mt-2 bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg disabled:bg-gray-300",children:g?"Guardando...":"A\xf1adir a la Bit\xe1cora"})]})]})})},oC=e=>{let{onUserAdded:t}=e;const[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)("cliente"),[d,h]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)("");return(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,VS.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Crear Nuevo Usuario"}),(0,VS.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),v(""),a&&n&&s)if("cliente"!==c||d)try{const e=ur(Qe(BS,"Secondary-".concat((new Date).getTime()))),i=await async function(e,t,n){var i;const r=xn(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=r._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await yn(r,s,"signUpPassword");o=Vn(r,e)}else o=Vn(r,s).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await yn(r,s,"signUpPassword");return Vn(r,e)}return Promise.reject(e)});const a=await o.catch(e=>Promise.reject(e)),l=await Bn._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}(e,n,s);await Kg(Bm(qS,"usuarios",i.user.uid),{email:n,rol:c,nombreCompleto:a,clienteIdNumerico:"cliente"===c?d.padStart(3,"0"):"",logoUrl:"cliente"===c?f:""}),v("\xa1Usuario ".concat(n," con rol '").concat(c,"' creado con \xe9xito!")),r(""),o(""),l(""),u("cliente"),h(""),p(""),t&&t()}catch(i){g("Error al crear usuario: ".concat(i.message))}else g("Para clientes, el ID Num\xe9rico es obligatorio.");else g("Nombre, email y contrase\xf1a son obligatorios.")},className:"space-y-4",children:[(0,VS.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Nombre Completo",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),(0,VS.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,VS.jsx)("option",{value:"cliente",children:"Cliente"}),(0,VS.jsx)("option",{value:"administrador",children:"Administrador"}),(0,VS.jsx)("option",{value:"directivo",children:"Directivo"}),(0,VS.jsx)("option",{value:"ecotech",children:"Encargada Ecotech"}),(0,VS.jsx)("option",{value:"supervisor",children:"Supervisor de Proyectos"}),(0,VS.jsx)("option",{value:"tecnico",children:"T\xe9cnico"}),(0,VS.jsx)("option",{value:"finanzas",children:"Finanzas"}),(0,VS.jsx)("option",{value:"practicante",children:"Practicante"})]}),(0,VS.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"Email de Acceso",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),(0,VS.jsx)("input",{type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"Contrase\xf1a (m\xednimo 6 caracteres)",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),"cliente"===c&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"ID Num\xe9rico Cliente (ej: 001)",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),(0,VS.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"URL del Logo (Opcional)",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,VS.jsx)(XS,{message:m,type:"error",onClose:()=>g("")}),(0,VS.jsx)(XS,{message:y,type:"success",onClose:()=>v("")}),(0,VS.jsx)("button",{type:"submit",className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg",children:"Crear Usuario"})]})]})},aC=e=>{let{collectionName:t,title:n,fields:r,placeholderTexts:s}=e;const[o,a]=(0,i.useState)([]),[l,u]=(0,i.useState)({}),[d,h]=(0,i.useState)(!0),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)("");(0,i.useEffect)(()=>{const e=Xg(Sg(Vm(qS,t)),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));a(t),h(!1)},e=>{console.error("Error fetching ".concat(t,":"),e),p("No se pudieron cargar los datos de ".concat(n,".")),h(!1)});return()=>e()},[t,n]);const y=e=>{const{name:t,value:n}=e.target;u(e=>c(c({},e),{},{[t]:n}))};return(0,VS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,VS.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:["A\xf1adir Nuevo ",n.slice(0,-1)]}),(0,VS.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.some(e=>!l[e]))p("Todos los campos son obligatorios.");else{p(""),g("");try{await Yg(Vm(qS,t),l),g("\xa1".concat(n.slice(0,-1)," a\xf1adido con \xe9xito!")),u({})}catch(i){p("Error al a\xf1adir el nuevo \xedtem: ".concat(i.message))}}},className:"space-y-4",children:[r.map((e,t)=>(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700 capitalize",children:e.replace(/([A-Z])/g," $1")}),(0,VS.jsx)("input",{type:"text",name:e,value:l[e]||"",onChange:y,placeholder:s[t],className:"mt-1 block w-full px-3 py-2 border rounded-md"})]},e)),(0,VS.jsx)(XS,{message:f,type:"error",onClose:()=>p("")}),(0,VS.jsx)(XS,{message:m,type:"success",onClose:()=>g("")}),(0,VS.jsx)("button",{type:"submit",className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg",children:"A\xf1adir"})]})]}),(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,VS.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:[n," Existentes"]}),(0,VS.jsx)("div",{className:"overflow-y-auto max-h-96",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsx)("tr",{children:r.map(e=>(0,VS.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:e.replace(/([A-Z])/g," $1")},e))})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d?(0,VS.jsx)("tr",{children:(0,VS.jsx)("td",{colSpan:r.length,children:"Cargando..."})}):o.map(e=>(0,VS.jsx)("tr",{children:r.map(t=>(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e[t]},"".concat(e.id,"-").concat(t)))},e.id))})]})})]})]})},lC=()=>{const[e,t]=(0,i.useState)("projects"),[n,r]=(0,i.useState)([]),[s,o]=(0,i.useState)(!0),a=()=>{o(!0);return Xg(Sg(Vm(qS,GS),jg("fechaApertura","desc")),e=>{r(e.docs.map(e=>c({id:e.id},e.data()))),o(!1)})};return(0,i.useEffect)(()=>{const e=a();return()=>e()},[]),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,VS.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,VS.jsx)("button",{onClick:()=>t("projects"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("projects"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Proyectos"}),(0,VS.jsx)("button",{onClick:()=>t("users"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("users"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Usuarios"}),(0,VS.jsx)("button",{onClick:()=>t("services"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("services"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Servicios"}),(0,VS.jsx)("button",{onClick:()=>t("providers"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("providers"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Proveedores"})]})}),"users"===e&&(0,VS.jsx)(oC,{onUserAdded:()=>{}}),"projects"===e&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)(dC,{onProjectAdded:a}),(0,VS.jsx)("h2",{className:"text-2xl font-bold text-gray-800 my-6",children:"Todos los Proyectos"}),s?(0,VS.jsx)("p",{children:"Cargando tabla..."}):(0,VS.jsx)(hC,{projects:n,onUpdateProject:a,userRole:"administrador"})]}),"services"===e&&(0,VS.jsx)(aC,{collectionName:"servicios",title:"Servicios",fields:["nombre","servicioIdNumerico","dependencia"],placeholderTexts:["Nombre del Servicio","ID Num\xe9rico (ej: 0001)","Dependencia"]}),"providers"===e&&(0,VS.jsx)(aC,{collectionName:"proveedores",title:"Proveedores",fields:["nombre","proveedorIdNumerico"],placeholderTexts:["Nombre del Proveedor","ID Num\xe9rico (ej: 01)"]})]})},cC=e=>{let{url:t,onClose:n}=e;return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50",children:(0,VS.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col",children:[(0,VS.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,VS.jsx)("h3",{className:"text-lg font-bold",children:"Visor de Documentos"}),(0,VS.jsx)("button",{onClick:n,className:"text-gray-600 hover:text-gray-900 text-2xl font-bold",children:"\xd7"})]}),(0,VS.jsx)("div",{className:"flex-grow",children:(0,VS.jsx)("iframe",{src:t,title:"Visor de Heyzine",className:"w-full h-full",frameBorder:"0",allowFullScreen:!0})})]})})},uC=e=>{let{projects:t,onOpenModal:n}=e;const i=t.filter(e=>"Terminado"===e.estadoCliente&&e.urlHeyzine);return(0,VS.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8",children:i.map(e=>(0,VS.jsxs)("button",{className:"group text-left focus:outline-none",onClick:()=>n(e.urlHeyzine),children:[(0,VS.jsxs)("div",{className:"relative pt-[141%] bg-gray-200 rounded-lg shadow-lg group-hover:shadow-2xl transition-all duration-300 transform group-hover:-translate-y-1 overflow-hidden",children:[(0,VS.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/portal-evelsa.firebasestorage.app/o/portada%20Carpetas.jpeg?alt=media&token=417eb65c-1694-4efc-9e2a-55528d43a8d6",alt:"Portada de proyecto",className:"absolute inset-0 w-full h-full object-cover"}),(0,VS.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),(0,VS.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-center items-center p-4 text-white text-center",children:[(0,VS.jsx)("h4",{className:"font-bold text-lg leading-tight",children:e.clienteNombre}),(0,VS.jsx)("hr",{className:"w-1/4 my-2 border-gray-400"}),(0,VS.jsx)("p",{className:"text-sm",children:e.servicioNombre})]})]}),(0,VS.jsx)("p",{className:"text-sm font-semibold text-gray-700 mt-3 truncate group-hover:text-blue-600",children:e.servicioNombre})]},e.id))})},dC=e=>{var t;let{onProjectAdded:n}=e;const[r,s]=(0,i.useState)({clienteId:"",servicioId:"",proveedorId:"",comentariosApertura:"",fechaApertura:(new Date).toISOString().split("T")[0],precioCotizacionCliente:"",costoProveedor:"",cotizacionClienteRef:"",poClienteRef:"",cotizacionProveedorRef:"",cantidadUnidades:1}),[o,a]=(0,i.useState)(null),l=i.useRef(null),[u,d]=(0,i.useState)({clientes:[],servicios:[],proveedores:[]}),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)(!1),g="ecologia y asesoria ambiental"===(null===(t=u.proveedores.find(e=>e.id===r.proveedorId))||void 0===t?void 0:t.nombre.toLowerCase().trim());(0,i.useEffect)(()=>{(async()=>{try{const[e,t,n]=await Promise.all([Gg(Sg(Vm(qS,"usuarios"),Ig("rol","==","cliente"))),Gg(Vm(qS,"servicios")),Gg(Vm(qS,"proveedores"))]),i=(e,t)=>(e.nombreCompleto||e.nombre).localeCompare(t.nombreCompleto||t.nombre);d({clientes:e.docs.map(e=>c({id:e.id},e.data())).sort(i),servicios:t.docs.map(e=>c({id:e.id},e.data())).sort(i),proveedores:n.docs.map(e=>c({id:e.id},e.data())).sort(i)})}catch(e){f("Error al cargar datos maestros.")}})()},[]),(0,i.useEffect)(()=>{g&&s(e=>c(c({},e),{},{costoProveedor:"0"}))},[r.proveedorId,g]);const y=e=>{const{name:t,value:n}=e.target;if(s(e=>c(c({},e),{},{[t]:n})),"servicioId"===t){const e=u.servicios.find(e=>e.id===n);a(e)}},v=o&&o.calculoDuracion&&o.calculoDuracion.porUnidad;return(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8",children:[(0,VS.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Crear Nuevo Proyecto"}),(0,VS.jsxs)("form",{ref:l,onSubmit:async e=>{if(e.preventDefault(),r.clienteId&&r.servicioId&&r.proveedorId){m(!0),f("");try{var t;let e=0;if(o&&o.calculoDuracion)if(o.calculoDuracion.totalHoras)e=o.calculoDuracion.totalHoras;else if(void 0!==o.calculoDuracion.baseHoras){const t=o.calculoDuracion.baseHoras||0,n=o.calculoDuracion.porUnidad||0;e=t+n*(Number(r.cantidadUnidades)||1)}const i=new Date(r.fechaApertura).getFullYear(),c=Bm(qS,"contadores","proyectos_".concat(i)),d=await iy(qS,async e=>{const t=await e.get(c),n=(t.exists()?t.data().consecutivo:0)+1;return e.set(c,{consecutivo:n},{merge:!0}),n}),h=i.toString().slice(-2),f=d.toString().padStart(3,"0"),p=u.clientes.find(e=>e.id===r.clienteId),m=u.servicios.find(e=>e.id===r.servicioId),y=u.proveedores.find(e=>e.id===r.proveedorId),v="".concat(p.clienteIdNumerico,"-").concat(m.servicioIdNumerico,"-").concat(y.proveedorIdNumerico,"-").concat(f).concat(h);await Yg(Vm(qS,GS),{npu:v,clienteId:r.clienteId,clienteNombre:p.nombreCompleto,servicioId:r.servicioId,servicioNombre:m.nombre,proveedorId:r.proveedorId,proveedorNombre:y.nombre,fechaApertura:oc.fromDate(new Date(r.fechaApertura)),estado:r.poClienteRef?"Activo":"Cotizaci\xf3n",prioridad:"1 - Normal",dependencia:m.dependencia||"Sin Dependencia",precioCotizacionCliente:Number(r.precioCotizacionCliente)||0,costoProveedor:Number(r.costoProveedor)||0,horasEstimadas:e,horasRegistradas:0,facturasClienteIds:[],facturasProveedorIds:[],faseFacturacion:"N/A",cotizacionClienteRef:r.cotizacionClienteRef,poClienteRef:r.poClienteRef,cotizacionProveedorRef:r.cotizacionProveedorRef,poProveedor:g?"N/A":v.slice(-8),cantidadUnidades:null!==o&&void 0!==o&&null!==(t=o.calculoDuracion)&&void 0!==t&&t.porUnidad?Number(r.cantidadUnidades):null,asignadoTecnicosIds:[],comentariosApertura:r.comentariosApertura,fechaAsignacionTecnico:null,fechaEntregaInterna:null,notasSupervisor:"",fechaFinTecnicoReal:null}),s({clienteId:"",servicioId:"",proveedorId:"",comentariosApertura:"",fechaApertura:(new Date).toISOString().split("T")[0],precioCotizacionCliente:"",costoProveedor:"",cotizacionClienteRef:"",poClienteRef:"",cotizacionProveedorRef:"",cantidadUnidades:1}),a(null),l.current.reset(),n&&n()}catch(i){console.error("Error al crear proyecto:",i),f("Ocurri\xf3 un error: ".concat(i.message))}m(!1)}else f("Cliente, Servicio y Proveedor son obligatorios.")},className:"space-y-6",children:[(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Apertura"}),(0,VS.jsx)("input",{type:"date",name:"fechaApertura",value:r.fechaApertura,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,VS.jsxs)("select",{name:"clienteId",value:r.clienteId,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,VS.jsx)("option",{value:"",children:"Seleccione un Cliente"}),u.clientes.map(e=>(0,VS.jsx)("option",{value:e.id,children:e.nombreCompleto},e.id))]}),(0,VS.jsxs)("select",{name:"servicioId",value:r.servicioId,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,VS.jsx)("option",{value:"",children:"Seleccione un Proyecto/Servicio"}),u.servicios.map(e=>(0,VS.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,VS.jsxs)("select",{name:"proveedorId",value:r.proveedorId,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,VS.jsx)("option",{value:"",children:"Seleccione un Proveedor"}),u.proveedores.map(e=>(0,VS.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,VS.jsx)("textarea",{name:"comentariosApertura",value:r.comentariosApertura,onChange:y,placeholder:"Comentarios de apertura",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),v&&(0,VS.jsxs)("div",{children:[(0,VS.jsxs)("label",{className:"block text-sm font-medium text-gray-700 capitalize",children:["Cantidad de ",o.calculoDuracion.nombreUnidad||"Unidades"]}),(0,VS.jsx)("input",{type:"number",name:"cantidadUnidades",value:r.cantidadUnidades,onChange:y,className:"mt-1 block w-full px-3 py-2 border rounded-md"})]})]}),(0,VS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 border-t pt-6",children:[(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsx)("h4",{className:"font-semibold text-gray-700",children:"Informaci\xf3n del Cliente"}),(0,VS.jsx)("input",{type:"number",name:"precioCotizacionCliente",value:r.precioCotizacionCliente,onChange:y,placeholder:"Precio Cotizaci\xf3n (con IVA)",className:"mt-1 block w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("input",{type:"text",name:"cotizacionClienteRef",value:r.cotizacionClienteRef,onChange:y,placeholder:"N\xba o Referencia de Cotizaci\xf3n",className:"mt-1 block w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("input",{type:"text",name:"poClienteRef",value:r.poClienteRef,onChange:y,placeholder:"N\xba de Orden de Compra (PO)",className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsx)("h4",{className:"font-semibold text-gray-700",children:"Informaci\xf3n del Proveedor"}),(0,VS.jsx)("input",{type:"number",name:"costoProveedor",value:r.costoProveedor,onChange:y,placeholder:"Costo (con IVA)",disabled:g,className:"mt-1 block w-full px-3 py-2 border rounded-md disabled:bg-gray-100"}),(0,VS.jsx)("input",{type:"text",name:"cotizacionProveedorRef",value:r.cotizacionProveedorRef,onChange:y,placeholder:"N\xba o Ref. de Cotizaci\xf3n Proveedor",disabled:g,className:"mt-1 block w-full px-3 py-2 border rounded-md"})]})]}),(0,VS.jsx)(XS,{message:h,type:"error",onClose:()=>f("")}),(0,VS.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg disabled:bg-gray-400",children:p?"Creando...":"Crear Proyecto y Generar NPU"})]})]})},hC=e=>{let{projects:t,onUpdateProject:n,userRole:r,supervisorView:s,onManageClick:o,onAssignClick:a,onLogClick:l,user:u,userData:d,selectedRole:h}=e;const[f,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(1),[y,v]=(0,i.useState)(10),[b,x]=(0,i.useState)({}),[w,_]=(0,i.useState)({}),[k,E]=(0,i.useState)(null),[T,N]=(0,i.useState)("");(0,i.useEffect)(()=>{const e=(()=>{const e=Sg(Vm(qS,"usuarios"),Ig("rol","==","tecnico")),t=Xg(Sg(Vm(qS,"usuarios"),Ig("roles","array-contains","tecnico")),t=>{const n={};t.forEach(e=>{n[e.id]=e.data().nombreCompleto}),Gg(e).then(e=>{e.forEach(e=>{n[e.id]||(n[e.id]=e.data().nombreCompleto)}),x(n)})}),n=Xg(Sg(Vm(qS,"facturas")),e=>{const t={};e.forEach(e=>{t[e.id]=e.data().folio}),_(t)});return()=>{t(),n()}})();return()=>e()},[]);const S="administrador"===r?t.filter(e=>{var t,n,i;return(null===(t=e.npu)||void 0===t?void 0:t.toLowerCase().includes(T.toLowerCase()))||(null===(n=e.clienteNombre)||void 0===n?void 0:n.toLowerCase().includes(T.toLowerCase()))||(null===(i=e.servicioNombre)||void 0===i?void 0:i.toLowerCase().includes(T.toLowerCase()))}):t,C=S.slice((m-1)*y,m*y),I=Math.ceil(S.length/y),A=e=>g(e),P=async e=>{var t;await(t=Bm(qS,GS,e),$g(Mm(t.firestore,qm),[new Xd(t._key,Ld.none())])),E(null)};return(0,VS.jsxs)(VS.Fragment,{children:["administrador"===r&&(0,VS.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,VS.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente, servicio o dependencia...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{N(e.target.value),g(1)}}),(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:y,onChange:e=>{v(Number(e.target.value)),g(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:25,children:"25"}),(0,VS.jsx)("option",{value:50,children:"50"}),(0,VS.jsx)("option",{value:100,children:"100"})]})]})]}),(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsxs)("thead",{className:"bg-gray-50",children:["supervisor"===r&&"new"===s&&(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha Apertura"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]}),"supervisor"===r&&"techDetail"===s&&(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase",children:"Estado"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase",children:"Prioridad"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase",children:"Horas (Reg/Est)"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase",children:"Ver M\xe1s"})]}),"administrador"===r&&(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha Apertura"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xba Proy. Lab."}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Comentarios"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Prov."}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Precio"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Costo"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ref. Cliente"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ref. Proveedor"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fact. Cliente"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fact. Proveedor"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,VS.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})]}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(e=>{var t,n,l,c,u,d;const h=f===e.id;let m="A Tiempo";if("supervisor"===r){var g;const t=new Date;t.setHours(0,0,0,0);const n=null===(g=e.fechaEntregaInterna)||void 0===g?void 0:g.toDate();n?(n.setHours(0,0,0,0),n<t?m="Atrasado":(n-t)/864e5<=3&&(m="Por Vencer")):m="Sin Fecha"}const y=null===(t=e.proveedorNombre)||void 0===t?void 0:t.toLowerCase().includes("ecotech");return(0,VS.jsxs)(i.Fragment,{children:[(0,VS.jsx)("tr",{className:h?"bg-blue-50":"",children:"administrador"===r&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:QS(e.fechaApertura)}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:e.npu}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.proveedorNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(null===(n=e.datosEcotech)||void 0===n?void 0:n.numeroProyecto)||"---"}),(0,VS.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",title:e.comentariosApertura,children:(0,VS.jsx)("p",{className:"w-32 truncate",children:e.comentariosApertura||"---"})}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.poProveedor}),(0,VS.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-green-600",children:["$",(e.precioCotizacionCliente||0).toFixed(2)]}),(0,VS.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-red-600",children:["$",(e.costoProveedor||0).toFixed(2)]}),(0,VS.jsxs)("td",{className:"px-4 py-2 text-xs",children:[(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Cot:"})," ",e.cotizacionClienteRef||"N/A"]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"PO:"})," ",e.poClienteRef||"N/A"]})]}),(0,VS.jsx)("td",{className:"px-4 py-2 text-xs",children:(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Cot:"})," ",e.cotizacionProveedorRef||"N/A"]})}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:w[e.facturaClienteId]||"---"}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:w[e.facturaProveedorId]||("ecologia y asesoria ambiental"===(null===(l=e.proveedorNombre)||void 0===l?void 0:l.toLowerCase().trim())?"N/A":"---")}),(0,VS.jsx)("td",{className:"px-4 py-2",children:(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Activo"===e.estado?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.estado})}),(0,VS.jsx)("td",{className:"px-4 py-2",children:(0,VS.jsxs)("div",{className:"flex items-center space-x-4",children:["Cotizaci\xf3n"===e.estado&&(0,VS.jsx)("button",{onClick:()=>(async e=>{await Qg(Bm(qS,GS,e),{estado:"Activo",estadoCliente:"Activo"})})(e.id),className:"text-green-600",children:"Activar"}),(0,VS.jsx)("button",{onClick:()=>o(e),className:"text-indigo-600",children:"Gestionar"}),"Terminado"!==e.estado&&"Archivado"!==e.estado&&(0,VS.jsx)("button",{onClick:()=>{return t=e.id,n=e.npu,void E({title:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que quieres borrar el proyecto ".concat(n,"? Esta acci\xf3n no se puede deshacer."),onConfirm:()=>P(t),confirmText:"S\xed, Borrar",confirmColor:"bg-red-600"});var t,n},className:"text-red-600",children:"Borrar"})]})})]})}),"supervisor"===r&&"new"===s&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:QS(e.fechaApertura)}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:e.npu}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,VS.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-4 py-2",children:(0,VS.jsx)("button",{onClick:()=>a(e),className:"text-indigo-600 font-medium",children:"Asignar"})})]}),"supervisor"===r&&"techDetail"===s&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("td",{className:"px-4 py-3",children:(0,VS.jsx)(wC,{status:m})}),(0,VS.jsx)("td",{className:"px-4 py-3 text-sm",children:e.prioridad||"1 - Normal"}),(0,VS.jsxs)("td",{className:"px-4 py-3 text-sm",children:[(0,VS.jsxs)("span",{className:"font-semibold",children:[(e.horasRegistradas||0).toFixed(1),"h"]})," /",(0,VS.jsxs)("span",{className:"text-gray-600",children:[(e.horasEstimadas||0).toFixed(1),"h"]})]}),(0,VS.jsx)("td",{className:"px-4 py-3 text-sm",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-4 py-3",children:(0,VS.jsx)("button",{onClick:()=>{return t=e.id,void p(e=>e===t?null:t);var t},className:"text-indigo-600 font-medium",children:f===e.id?"Ocultar":"Detalles..."})})]}),h&&(0,VS.jsx)("tr",{className:"bg-gray-50 border-b-2 border-blue-200",children:(0,VS.jsx)("td",{colSpan:"5",className:"p-4",children:(0,VS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-semibold",children:"Cliente:"}),(0,VS.jsx)("p",{children:e.clienteNombre})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-semibold",children:"Fecha L\xedmite (Supervisor):"}),(0,VS.jsx)("p",{children:QS(e.fechaEntregaInterna)})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-semibold",children:"Estado Detallado:"}),e.fechaFinTecnicoReal?(0,VS.jsxs)("p",{className:"text-purple-800",children:["T\xe9cnico finaliz\xf3 el ",QS(e.fechaFinTecnicoReal),". En espera de proveedor."]}):(0,VS.jsx)("p",{className:"text-gray-600",children:"El t\xe9cnico est\xe1 trabajando en el proyecto."})]}),(0,VS.jsxs)("div",{className:"col-span-full",children:[(0,VS.jsx)("p",{className:"font-semibold",children:"Notas del Supervisor:"}),(0,VS.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:e.notasSupervisor||"No hay notas."})]}),y&&(0,VS.jsxs)("div",{className:"col-span-3 border-t pt-2 mt-2",children:[(0,VS.jsx)("p",{className:"font-semibold text-gray-800",children:"Info Ecotech:"}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"N\xba Proy:"})," ",(null===(c=e.datosEcotech)||void 0===c?void 0:c.numeroProyecto)||"N/A",", ",(0,VS.jsx)("strong",{children:"Puntos:"})," ",(null===(u=e.datosEcotech)||void 0===u?void 0:u.puntosDeTrabajo)||"N/A",", ",(0,VS.jsx)("strong",{children:"Estatus:"})," ",(null===(d=e.datosEcotech)||void 0===d?void 0:d.estatus)||"N/A"]})]}),(0,VS.jsx)("div",{className:"col-span-3 text-right border-t pt-3 mt-2",children:(0,VS.jsx)("button",{onClick:()=>o(e),className:"bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700",children:"Gestionar"})})]})})})]},e.id)})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",m," de ",I]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>A(m-1),disabled:1===m,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>A(m+1),disabled:m===I||0===I,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),k&&(0,VS.jsx)(eC,c(c({},k),{},{onCancel:()=>E(null)}))]})},fC=e=>{let{projects:t,onUpdateProject:n}=e;const[r,s]=(0,i.useState)(null);return(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Documentos Finales"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,VS.jsxs)("div",{className:"flex space-x-4",children:[(0,VS.jsx)("button",{onClick:()=>(e=>{const t=!!e.urlDocumento2,n="Preliminar"===e.faseFacturacion||"Fase 2 Pendiente"===e.faseFacturacion;s({action:"approve",payload:{project:e},title:"Confirmar Aprobaci\xf3n",message:t?n?"Aprobar y finalizar este proyecto? Se archivar\xe1 y no se volver\xe1 a facturar.":"Aprobar esta entrega final y enviarla a facturaci\xf3n?":"Aprobar esta entrega preliminar y enviarla a facturaci\xf3n?"})})(e),className:"text-green-600 hover:text-green-900",children:"Aprobar"}),(0,VS.jsx)("button",{onClick:()=>{return t=e.id,void s({action:"reject",payload:{projectId:t},title:"Rechazar Proyecto",message:"Por favor, introduce el motivo del rechazo para notificar al practicante.",confirmText:"Rechazar",confirmColor:"bg-orange-600"});var t},className:"text-orange-600 hover:text-orange-900",children:"Rechazar"})]})}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,VS.jsxs)("div",{className:"flex flex-col space-y-1",children:[e.urlHeyzine&&(0,VS.jsx)("a",{href:e.urlHeyzine,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Proyecto (Heyzine)"}),e.fase1_urlNotaEntregaFirmada&&(0,VS.jsx)("a",{href:e.fase1_urlNotaEntregaFirmada,target:"_blank",rel:"noopener noreferrer",className:"text-red-600",children:"Ver Nota 1 (Firmada)"}),e.fase2_urlNotaEntregaFirmada&&(0,VS.jsx)("a",{href:e.fase2_urlNotaEntregaFirmada,target:"_blank",rel:"noopener noreferrer",className:"text-red-600",children:"Ver Nota 2 (Firmada)"})]})}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.npu})]},e.id))})]})}),"approve"===(null===r||void 0===r?void 0:r.action)&&(0,VS.jsx)(eC,{title:r.title,message:r.message,onConfirm:async()=>{if(!r||"approve"!==r.action)return;const{project:e}=r.payload,t=Bm(qS,GS,e.id),i=!!e.urlDocumento2;try{i?"Preliminar"===e.faseFacturacion||"Fase 2 Pendiente"===e.faseFacturacion?await Qg(t,{estado:"Archivado",estadoCliente:"Terminado"}):await Qg(t,{estado:"Pendiente de Factura",estadoCliente:"Terminado"}):await Qg(t,{estado:"Pendiente de Factura",faseFacturacion:"Preliminar"})}catch(o){console.error("Error al aprobar proyecto:",o),alert("Ocurri\xf3 un error al aprobar el proyecto.")}finally{s(null),n()}},onCancel:()=>s(null)}),"reject"===(null===r||void 0===r?void 0:r.action)&&(0,VS.jsx)(iC,{title:r.title,message:r.message,onConfirm:async e=>{if(!r||"reject"!==r.action)return;if(!e||""===e.trim())return void alert("El motivo del rechazo no puede estar vac\xedo.");const{projectId:t}=r.payload,i=Bm(qS,GS,t);try{await Qg(i,{estado:"Terminado Internamente",motivoRechazo:e})}catch(o){console.error("Error al rechazar proyecto:",o),alert("Ocurri\xf3 un error al rechazar el proyecto.")}finally{s(null),n()}},onCancel:()=>s(null),confirmText:r.confirmText,confirmColor:r.confirmColor})]})},pC=e=>{let{projects:t,onOpenModal:n}=e;const[r,s]=(0,i.useState)(null),o=t.reduce((e,t)=>{const n=t.dependencia||"Sin Dependencia";return e[n]||(e[n]=[]),e[n].push(t),e},{});return(0,VS.jsx)("div",{className:"space-y-4",children:Object.entries(o).map(e=>{let[t,i]=e;return(0,VS.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,VS.jsxs)("button",{onClick:()=>{return s(r===(e=t)?null:e);var e},className:"w-full p-4 text-left font-bold text-lg text-gray-800 flex justify-between items-center hover:bg-gray-50 transition",children:[(0,VS.jsxs)("span",{children:[t," ",(0,VS.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",i.length,")"]})]}),(0,VS.jsx)("span",{className:"transform transition-transform duration-300 ".concat(r===t?"rotate-180":""),children:"\u25bc"})]}),r===t&&(0,VS.jsx)("ul",{className:"divide-y divide-gray-200 border-t",children:i.map(e=>{return(0,VS.jsxs)("li",{className:"p-4 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center",children:[(0,VS.jsx)("div",{className:"flex-1 mb-4 md:mb-0",children:(0,VS.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.servicioNombre})}),(0,VS.jsx)("div",{className:"w-full md:w-40 mb-4 md:mb-0",children:(0,VS.jsx)("div",{className:"text-sm text-gray-500 hidden md:block",children:(i=e.fechaApertura,i?new Date(1e3*i.seconds).toLocaleDateString("es-MX"):"---")})}),(0,VS.jsx)("div",{className:"w-full md:w-40 mb-4 md:mb-0",children:(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((t=e.estadoCliente,"Activo"===t?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800")),children:e.estadoCliente})}),(0,VS.jsxs)("div",{className:"w-full md:w-56 flex items-center space-x-4",children:[e.urlHeyzine&&(0,VS.jsx)("button",{onClick:()=>n(e.urlHeyzine),className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:"Ver Proyecto"}),e.urlNotaPdf1&&(0,VS.jsx)("a",{href:e.urlNotaPdf1,download:!0,className:"text-sm font-medium text-red-600 hover:text-red-900",children:"Nota 1"}),e.urlNotaPdf2&&(0,VS.jsx)("a",{href:e.urlNotaPdf2,download:!0,className:"text-sm font-medium text-red-600 hover:text-red-900",children:"Nota 2"})]})]},e.id);var t,i})})]},t)})})},mC=e=>{let{user:t,userData:n}=e;const[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)([]),[l,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)("shelf"),[f,p]=(0,i.useState)(null);return(0,i.useEffect)(()=>{if(!t)return void u(!1);const e=Xg(Sg(Vm(qS,GS),Ig("clienteId","==",t.uid),Ig("estadoCliente","in",["Activo","Terminado"])),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));t.sort((e,t)=>{var n,i;return((null===(n=t.fechaApertura)||void 0===n?void 0:n.seconds)||0)-((null===(i=e.fechaApertura)||void 0===i?void 0:i.seconds)||0)}),s(t);const n=new Map;t.forEach(e=>{if("Terminado"===e.estadoCliente&&e.urlHeyzine){var t,i;const r=e.servicioId,s=n.get(r);(!s||(null===(t=e.fechaApertura)||void 0===t?void 0:t.seconds)>(null===(i=s.fechaApertura)||void 0===i?void 0:i.seconds))&&n.set(r,e)}}),a(Array.from(n.values())),u(!1)},e=>{console.error("Error fetching client projects: ",e),"failed-precondition"===e.code&&console.error("IMPORTANTE: Se requiere un \xedndice compuesto en Firestore. Ve a la URL que aparece en el mensaje de error en la consola para crearlo con un solo clic."),u(!1)});return()=>e()},[t]),(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:["Proyectos de ",n.nombreCompleto]}),(0,VS.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,VS.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,VS.jsx)("button",{onClick:()=>h("shelf"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("shelf"===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Estanter\xeda de Proyectos"}),(0,VS.jsx)("button",{onClick:()=>h("list"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("list"===d?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Lista Detallada"})]})}),l?(0,VS.jsx)("p",{children:"Cargando proyectos..."}):0===r.length?(0,VS.jsx)("p",{className:"text-center text-gray-500 mt-8",children:"No hay proyectos para mostrar."}):"shelf"===d?(0,VS.jsx)(uC,{projects:o,onOpenModal:p}):(0,VS.jsx)(pC,{projects:r,onOpenModal:p}),f&&(0,VS.jsx)(cC,{url:f,onClose:()=>p(null)})]})},gC=e=>{let{chartData:t}=e;const n={labels:t.labels,datasets:[{label:"Valor en Cotizaci\xf3n",data:t.cotizacionData,backgroundColor:"rgba(255, 159, 64, 0.7)"},{label:"Valor Activo",data:t.activoData,backgroundColor:"rgba(54, 162, 235, 0.7)"},{label:"Valor Pdto. Factura",data:t.pendienteFacturaData,backgroundColor:"rgba(255, 206, 86, 0.7)"},{type:"line",label:"Valor Total Ofertado",data:t.totalData,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0,tension:.2,yAxisID:"y1"}]};return(0,VS.jsx)(XT,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},tooltip:{mode:"index",intersect:!1},legend:{position:"bottom"}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0},y1:{position:"right",grid:{drawOnChartArea:!1},beginAtZero:!0}}},data:n})},yC=e=>{let{chartData:t}=e;const n={labels:t.labels,datasets:[{label:"Pagado",data:t.pagadoData,backgroundColor:"rgba(75, 192, 192, 0.7)"},{label:"Programado a Pago",data:t.programadoData,backgroundColor:"rgba(54, 162, 235, 0.7)"},{label:"Vence Hoy",data:t.venceHoyData,backgroundColor:"rgba(255, 159, 64, 0.7)"},{label:"Vencido",data:t.vencidoData,backgroundColor:"rgba(255, 99, 132, 0.7)"},{label:"Pdte. de Programaci\xf3n",data:t.pdteProgramacionData,backgroundColor:"rgba(201, 203, 207, 0.7)"},{type:"line",label:"Total Facturado",data:t.totalFacturadoData,borderColor:"#36A2EB",tension:.2,yAxisID:"y1"}]};return(0,VS.jsx)(XT,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},tooltip:{mode:"index",intersect:!1},legend:{position:"bottom"}},scales:{x:{stacked:!0},y:{stacked:!0,beginAtZero:!0},y1:{position:"right",grid:{drawOnChartArea:!1},beginAtZero:!0}}},data:n})},vC=e=>{let{chartData:t}=e;const n={labels:t.labels,datasets:[{label:"Ingresos Programados",data:t.ingresosData,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.5)",type:"bar"},{label:"Egresos Programados",data:t.egresosData,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",type:"bar"}]};return(0,VS.jsx)(XT,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}},data:n})},bC=e=>{let{chartData:t}=e;const n={labels:t.labels,datasets:[{label:"Proyectos Entregados (Mes Actual)",data:t.completedData,backgroundColor:"rgba(153, 102, 255, 0.7)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1}]};return(0,VS.jsx)(XT,{options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{stepSize:1}}}},data:n})},xC=e=>{let{title:t,value:n,unit:i="",trend:r=null}=e;return(0,VS.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-md",children:[(0,VS.jsx)("h3",{className:"font-bold text-gray-500 truncate",children:t}),(0,VS.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[n,(0,VS.jsx)("span",{className:"text-xl font-semibold ml-1",children:i})]})]})},wC=e=>{let{status:t}=e;return(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat({Atrasado:"bg-red-100 text-red-800","Por Vencer":"bg-orange-100 text-orange-800","A Tiempo":"bg-green-100 text-green-800","Sin Fecha":"bg-gray-100 text-gray-600"}[t]||"bg-gray-100"),children:t})},_C=e=>{let{projects:t,techniciansMap:n}=e;const[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(1),[l,c]=(0,i.useState)(10),u=t.filter(e=>{var t,i;return e.npu&&e.npu.toLowerCase().includes(r.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(r.toLowerCase())||e.servicioNombre&&e.servicioNombre.toLowerCase().includes(r.toLowerCase())||n[null===(t=e.asignadoTecnicosIds)||void 0===t?void 0:t[0]]&&n[null===(i=e.asignadoTecnicosIds)||void 0===i?void 0:i[0]].toLowerCase().includes(r.toLowerCase())}),d=u.slice((o-1)*l,o*l),h=Math.ceil(u.length/l),f=e=>a(e);return(0,VS.jsxs)("div",{className:"mt-6",children:[(0,VS.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,VS.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente, servicio o t\xe9cnico...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{s(e.target.value),a(1)}}),(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:l,onChange:e=>{c(Number(e.target.value)),a(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:15,children:"15"}),(0,VS.jsx)("option",{value:25,children:"25"})]})]})]}),(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Planta/Ubicaci\xf3n"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"T\xe9cnico"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha Asignaci\xf3n"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha L\xedmite"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Notas del Supervisor"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>{var t;return(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,VS.jsx)(wC,{status:e.status})}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:e.ubicacionCliente||e.clienteNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:n[null===(t=e.asignadoTecnicosIds)||void 0===t?void 0:t[0]]||"No asignado"}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:QS(e.fechaAsignacionTecnico)}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:QS(e.fechaEntregaInterna)}),(0,VS.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",title:e.notasSupervisor,children:(0,VS.jsx)("p",{className:"w-48 truncate",children:e.notasSupervisor||"---"})})]},e.id)})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",o," de ",h]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>f(o-1),disabled:1===o,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>f(o+1),disabled:o===h||0===h,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]})]})},kC=e=>{let{title:t,invoices:n,getInvoiceStatusBadge:r}=e;const[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(1),[c,u]=(0,i.useState)(10),{filteredInvoices:d,totalSum:h}=i.useMemo(()=>{const e=s?n.filter(e=>e.estado===s):n,t=e.reduce((e,t)=>e+(t.monto||0),0);return{filteredInvoices:e,totalSum:t}},[n,s]),f=d.slice((a-1)*c,a*c),p=Math.ceil(d.length/c),m=e=>l(e);return(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:t}),(0,VS.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{htmlFor:"".concat(t,"-status-filter"),className:"text-sm font-medium mr-2",children:"Filtrar por Estado:"}),(0,VS.jsxs)("select",{id:"".concat(t,"-status-filter"),value:s,onChange:e=>{o(e.target.value),l(1)},className:"border-gray-300 rounded-md p-2 text-sm",children:[(0,VS.jsx)("option",{value:"",children:"Todos"}),(0,VS.jsx)("option",{value:"Pend. de Autorizaci\xf3n",children:"Pend. de Autorizaci\xf3n"}),(0,VS.jsx)("option",{value:"Prog. a Pago",children:"Prog. a Pago"}),(0,VS.jsx)("option",{value:"Vencida",children:"Vencida"}),(0,VS.jsx)("option",{value:"Pagada",children:"Pagada"}),(0,VS.jsx)("option",{value:"Cancelada",children:"Cancelada"})]})]}),(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:c,onChange:e=>{u(Number(e.target.value)),l(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:15,children:"15"}),(0,VS.jsx)("option",{value:25,children:"25"})]})]})]}),(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:"Estado"}),(0,VS.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:"Monto"}),(0,VS.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:"Planta"}),(0,VS.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:"Factura"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-4 py-2",children:r(e.estado)}),(0,VS.jsxs)("td",{className:"px-4 py-2 font-semibold text-gray-900",children:["$",(e.monto||0).toFixed(2)]}),(0,VS.jsx)("td",{className:"px-4 py-2",children:e.planta||"N/A"}),(0,VS.jsx)("td",{className:"px-4 py-2",children:e.servicio||"General"}),(0,VS.jsx)("td",{className:"px-4 py-2",children:e.folio})]},e.id))}),(0,VS.jsx)("tfoot",{className:"bg-gray-100",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-4 py-3 font-bold text-right",children:"Total Filtrado:"}),(0,VS.jsxs)("td",{className:"px-4 py-3 font-bold text-lg text-gray-900",colSpan:"4",children:["$",h.toFixed(2)]})]})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",a," de ",p]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>m(a-1),disabled:1===a,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>m(a+1),disabled:a===p||0===p,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]})]})},EC=()=>{const[e,t]=(0,i.useState)(!0),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)("kpis"),[u,d]=(0,i.useState)("sortOrder"),[h,f]=(0,i.useState)("asc");if((0,i.useEffect)(()=>{(async()=>{try{const e=Sg(Vm(qS,GS)),t=Sg(Vm(qS,"facturas")),n=Sg(Vm(qS,"usuarios"),Ig("rol","==","tecnico")),[i,r,s]=await Promise.all([Gg(e),Gg(t),Gg(n)]),a=i.docs.map(e=>c({id:e.id},e.data())),l=r.docs.map(e=>c({id:e.id},e.data())),d=((e,t,n,i,r)=>{const s=(new Date).getFullYear(),o=(new Date).getMonth(),a=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],l=new Date;l.setHours(0,0,0,0);const u=864e5,d=Array(12).fill(0).map(()=>({cotizacion:0,activo:0,pendienteFactura:0,total:0}));e.forEach(e=>{var t;if(null!==(t=e.fechaApertura)&&void 0!==t&&t.toDate&&e.fechaApertura.toDate().getFullYear()===s){const t=e.fechaApertura.toDate().getMonth(),n=e.precioCotizacionCliente||0;switch(d[t].total+=n,e.estado){case"Cotizaci\xf3n":d[t].cotizacion+=n;break;case"Activo":case"Terminado Internamente":case"En Revisi\xf3n Final":d[t].activo+=n;break;case"Pendiente de Factura":d[t].pendienteFactura+=n}}});const h=Array(12).fill(0).map(()=>({totalFacturado:0,pdteProgramacion:0,programado:0,venceHoy:0,vencido:0,pagado:0}));t.forEach(e=>{var t;if("cliente"===e.tipo&&null!==(t=e.fechaEmision)&&void 0!==t&&t.toDate&&e.fechaEmision.toDate().getFullYear()===s){const t=e.fechaEmision.toDate().getMonth(),i=e.monto||0;if("Cancelada"!==e.estado&&(h[t].totalFacturado+=i),"Pagada"===e.estado)h[t].pagado+=i;else if("Pendiente"===e.estado){var n;if(null!==(n=e.fechaPromesaPago)&&void 0!==n&&n.toDate){const n=e.fechaPromesaPago.toDate();n.setHours(0,0,0,0),n<l?h[t].vencido+=i:n.getTime()===l.getTime()?h[t].venceHoy+=i:h[t].programado+=i}else h[t].pdteProgramacion+=i}}});const f=Array(8).fill(0).map(()=>({ingresos:0,egresos:0})),p=[],m=new Date;for(let c=0;c<8;c++){const e=new Date(m.getTime()+7*c*u);p.push("Sem ".concat(c+1," (").concat(e.getDate(),"/").concat(e.getMonth()+1,")"))}t.forEach(e=>{var t;if("Pendiente"===e.estado&&null!==(t=e.fechaPromesaPago)&&void 0!==t&&t.toDate){const t=e.fechaPromesaPago.toDate(),n=Math.floor((t-m)/u),i=Math.floor(n/7);i>=0&&i<8&&("cliente"===e.tipo?f[i].ingresos+=e.monto||0:"proveedor"===e.tipo&&(f[i].egresos+=e.monto||0))}});const g={};n.forEach(e=>{g[e.id]={name:e.nombreCompleto.split(" ")[0],completed:0}}),e.forEach(e=>{[e.fechaFinTecnico1,e.fechaFinTecnico2].filter(Boolean).forEach(t=>{const n=t.toDate();n.getMonth()===o&&n.getFullYear()===s&&(e.asignadoTecnicosIds||[]).forEach(e=>{g[e]&&(g[e].completed+=1)})})});let y=0,v=0,b=0,x=0,w=0,_=0;e.forEach(e=>{var t,n,i,r;(e.precioCotizacionCliente||0)>0&&(e.costoProveedor||0)>=0&&(y+=(e.precioCotizacionCliente-e.costoProveedor)/e.precioCotizacionCliente,v++),null!==(t=e.fechaAsignacionTecnico)&&void 0!==t&&t.toDate&&null!==(n=e.fechaFinTecnico1)&&void 0!==n&&n.toDate&&(b+=(e.fechaFinTecnico1.toDate()-e.fechaAsignacionTecnico.toDate())/u,x++),null!==(i=e.fechaApertura)&&void 0!==i&&i.toDate&&null!==(r=e.fechaAsignacionTecnico)&&void 0!==r&&r.toDate&&(w+=(e.fechaAsignacionTecnico.toDate()-e.fechaApertura.toDate())/u,_++)});const k={avgMargin:v>0?(y/v*100).toFixed(1):0,avgDeliveryDays:x>0?(b/x).toFixed(1):0,avgActivationDays:_>0?(w/_).toFixed(1):0,invoicedThisMonth:h[o].totalFacturado.toLocaleString("es-MX",{style:"currency",currency:"MXN"})};l.setHours(0,0,0,0);const E=e.filter(e=>"Activo"===e.estado),T=E.map(e=>{var t;let n="A Tiempo",i=3;const r=null===(t=e.fechaEntregaInterna)||void 0===t?void 0:t.toDate();if(r){r.setHours(0,0,0,0);const e=(r-l)/864e5;e<0?(n="Atrasado",i=1):e<=3&&(n="Por Vencer",i=2)}else n="Sin Fecha",i=4;return c(c({},e),{},{status:n,sortOrder:i})});T.sort((e,t)=>{let n=e[i],s=t[i];var o,a;return i.includes("fecha")&&(n=(null===(o=e[i])||void 0===o?void 0:o.toDate())||("asc"===r?new Date("2999-12-31"):new Date(0)),s=(null===(a=t[i])||void 0===a?void 0:a.toDate())||("asc"===r?new Date("2999-12-31"):new Date(0))),n<s?"asc"===r?-1:1:n>s?"asc"===r?1:-1:0});const N={};n.forEach(e=>{N[e.id]=e.nombreCompleto});const S=new Map(e.map(e=>[e.id,e])),C=e=>{const n=new Date;return n.setHours(0,0,0,0),t.filter(t=>t.tipo===e).map(e=>{var t;const i=e.proyectoId&&"general"!==e.proyectoId?S.get(e.proyectoId):null;let r="Pend. de Autorizaci\xf3n";if("Pagada"===e.estado)r="Pagada";else if("Cancelada"===e.estado)r="Cancelada";else if(null!==(t=e.fechaPromesaPago)&&void 0!==t&&t.toDate){const t=e.fechaPromesaPago.toDate();t.setHours(0,0,0,0),r=t<n?"Vencida":"Prog. a Pago"}return c(c({},e),{},{estado:r,planta:(null===i||void 0===i?void 0:i.ubicacionCliente)||(null===i||void 0===i?void 0:i.clienteNombre)||e.clienteNombre||e.proveedorNombre||"N/A",servicio:(null===i||void 0===i?void 0:i.servicioNombre)||e.descripcion||"Gasto General"})}).sort((e,t)=>t.fechaEmision.toDate()-e.fechaEmision.toDate())},I=C("cliente"),A=C("proveedor");return{kpis:k,pipeline:{labels:a,cotizacionData:d.map(e=>e.cotizacion),activoData:d.map(e=>e.activo),pendienteFacturaData:d.map(e=>e.pendienteFactura),totalData:d.map(e=>e.total)},accountsReceivable:{labels:a,totalFacturadoData:h.map(e=>e.totalFacturado),pagadoData:h.map(e=>e.pagado),programadoData:h.map(e=>e.programado),venceHoyData:h.map(e=>e.venceHoy),vencidoData:h.map(e=>e.vencido),pdteProgramacionData:h.map(e=>e.pdteProgramacion)},cashFlow:{labels:p,ingresosData:f.map(e=>e.ingresos),egresosData:f.map(e=>e.egresos)},technicianProductivity:{labels:Object.values(g).map(e=>e.name),completedData:Object.values(g).map(e=>e.completed)},operationalProjects:T,techniciansMap:N,accountsReceivableList:I,accountsPayableList:A}})(a,l,s.docs.map(e=>c({id:e.id},e.data())),u,h);o(d)}catch(e){console.error("Error al obtener datos para el dashboard directivo:",e),r("No se pudieron cargar las m\xe9tricas.")}finally{t(!1)}})()},[u,h]),e)return(0,VS.jsx)("div",{className:"text-center py-10",children:"Calculando m\xe9tricas... \u2699\ufe0f"});if(n)return(0,VS.jsx)("div",{className:"text-center py-10 text-red-600",children:n});const p=e=>(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat({Pagada:"bg-green-100 text-green-800",Vencida:"bg-red-100 text-red-800","Prog. a Pago":"bg-blue-100 text-blue-800","Pend. de Autorizaci\xf3n":"bg-yellow-100 text-yellow-800",Cancelada:"bg-gray-100 text-gray-700"}[e]||"bg-gray-100"),children:e});return(0,VS.jsxs)("div",{className:"space-y-8",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Directivo"}),(0,VS.jsx)("p",{className:"text-gray-600",children:"Vista general de la salud y rendimiento del negocio."})]}),(0,VS.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,VS.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,VS.jsx)("button",{onClick:()=>l("kpis"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("kpis"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"M\xe9tricas y Finanzas"}),(0,VS.jsx)("button",{onClick:()=>l("operativo"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("operativo"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Seguimiento Operativo"}),(0,VS.jsx)("button",{onClick:()=>l("financiero"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("financiero"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Seguimiento Financiero"})]})}),"kpis"===a&&(0,VS.jsxs)(VS.Fragment,{children:[(null===s||void 0===s?void 0:s.kpis)&&(0,VS.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[(0,VS.jsx)(xC,{title:"Margen Promedio",value:s.kpis.avgMargin,unit:"%"}),(0,VS.jsx)(xC,{title:"Tiempo Prom. Entrega",value:s.kpis.avgDeliveryDays,unit:"d\xedas"}),(0,VS.jsx)(xC,{title:"Tiempo Prom. Activaci\xf3n",value:s.kpis.avgActivationDays,unit:"d\xedas"}),(0,VS.jsx)(xC,{title:"Facturado (Mes Actual)",value:s.kpis.invoicedThisMonth})]}),(0,VS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,VS.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Pipeline de Proyectos (Mensual)"}),(0,VS.jsx)("div",{className:"h-80",children:(null===s||void 0===s?void 0:s.pipeline)&&(0,VS.jsx)(gC,{chartData:s.pipeline})})]}),(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,VS.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Salud de Cuentas por Cobrar (Mensual)"}),(0,VS.jsx)("div",{className:"h-80",children:(null===s||void 0===s?void 0:s.accountsReceivable)&&(0,VS.jsx)(yC,{chartData:s.accountsReceivable})})]}),(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,VS.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Flujo de Caja Proyectado (Pr\xf3ximas 8 Semanas)"}),(0,VS.jsx)("div",{className:"h-80",children:(null===s||void 0===s?void 0:s.cashFlow)&&(0,VS.jsx)(vC,{chartData:s.cashFlow})})]}),(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[(0,VS.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Productividad por T\xe9cnico (Mes Actual)"}),(0,VS.jsx)("div",{className:"h-80",children:(null===s||void 0===s?void 0:s.technicianProductivity)&&(0,VS.jsx)(bC,{chartData:s.technicianProductivity})})]})]})]}),"operativo"===a&&(0,VS.jsxs)("div",{children:[(0,VS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Proyectos Activos y Pendientes de Entrega"}),(0,VS.jsx)("p",{className:"text-gray-600 mt-1",children:"Lista ordenada de los proyectos en curso."})]}),(0,VS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,VS.jsx)("label",{className:"text-sm font-medium",children:"Ordenar por:"}),(0,VS.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"border-gray-300 rounded-md p-2 text-sm",children:[(0,VS.jsx)("option",{value:"sortOrder",children:"Criticidad"}),(0,VS.jsx)("option",{value:"fechaEntregaInterna",children:"Fecha L\xedmite"}),(0,VS.jsx)("option",{value:"fechaAsignacionTecnico",children:"Fecha de Asignaci\xf3n"})]}),(0,VS.jsx)("button",{onClick:()=>f("asc"===h?"desc":"asc"),className:"p-2 border rounded-md text-sm bg-white shadow-sm",children:"asc"===h?"Ascendente \u2191":"Descendente \u2193"})]})]}),(0,VS.jsx)("div",{children:(null===s||void 0===s?void 0:s.operationalProjects)&&(0,VS.jsx)(_C,{projects:s.operationalProjects,techniciansMap:s.techniciansMap})})]}),"financiero"===a&&s&&(0,VS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,VS.jsx)(kC,{title:"Cuentas por Cobrar",invoices:s.accountsReceivableList,getInvoiceStatusBadge:p}),(0,VS.jsx)(kC,{title:"Cuentas por Pagar",invoices:s.accountsPayableList,getInvoiceStatusBadge:p})]})]})},TC=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),s=()=>{r(!0);return Xg(Sg(Vm(qS,GS),Ig("proveedorNombre","==","Ecotech Ingenieria del Medio Ambiente"),Ig("estado","==","Activo")),e=>{t(e.docs.map(e=>c({id:e.id},e.data()))),r(!1)},e=>{console.error("Error fetching projects for Ecotech: ",e),r(!1)})};return(0,i.useEffect)(()=>{const e=s();return()=>e()},[]),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Gesti\xf3n de Proyectos Ecotech"}),n?(0,VS.jsx)("p",{children:"Cargando proyectos de Ecotech..."}):0===e.length?(0,VS.jsx)("p",{className:"text-center text-gray-500 mt-8",children:"No hay proyectos de Ecotech activos."}):(0,VS.jsx)(NC,{projects:e,onUpdateProject:s})]})},NC=e=>{let{projects:t,onUpdateProject:n}=e;const[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(""),[l,c]=(0,i.useState)(1),[u,d]=(0,i.useState)(10),h=e=>{var t,n,r,s,o,a,l,c,u,d,h,f;let{project:p,onClose:m,onFinalized:g}=e;const[y,v]=(0,i.useState)((null===(t=p.datosEcotech)||void 0===t?void 0:t.numeroProyecto)||""),[b,x]=(0,i.useState)((null===(n=p.datosEcotech)||void 0===n?void 0:n.puntosDeTrabajo)||""),[w,_]=(0,i.useState)((null===(r=p.datosEcotech)||void 0===r?void 0:r.notas)||""),[k,E]=(0,i.useState)((null===(s=p.datosEcotech)||void 0===s?void 0:s.numeroGuiaEnvio)||""),[T,N]=(0,i.useState)((null===(o=p.datosEcotech)||void 0===o?void 0:o.numeroGuiaRegreso)||""),[S,C]=(0,i.useState)((null===(a=p.datosEcotech)||void 0===a?void 0:a.fechaMuestreo)||""),[I,A]=(0,i.useState)(!1),P=async e=>{A(!0);const t=Bm(qS,GS,p.id);try{await Qg(t,e),g(),m()}catch(n){alert("Error al actualizar el estado."),A(!1)}};return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-2",children:["Gestionar Proyecto Ecotech: ",p.npu]}),(0,VS.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:["Estado actual: ",(0,VS.jsx)("span",{className:"font-bold",children:(null===(l=p.datosEcotech)||void 0===l?void 0:l.estatus)||"Pendiente"})]}),(0,VS.jsxs)("div",{className:"space-y-4 mb-6",children:["Pendiente"===(null===(c=p.datosEcotech)||void 0===c?void 0:c.estatus)&&(0,VS.jsx)("button",{onClick:()=>P({"datosEcotech.estatus":"Pend. No de proyecto"}),className:"w-full bg-blue-600 text-white font-bold py-3 rounded-lg",children:"Empezar Tarea"}),"Pend. No de proyecto"===(null===(u=p.datosEcotech)||void 0===u?void 0:u.estatus)&&(0,VS.jsxs)("div",{className:"p-4 border rounded-md bg-gray-50",children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Introduce la Fecha de Muestreo"}),(0,VS.jsx)("input",{type:"date",value:S,onChange:e=>C(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("button",{onClick:()=>P({"datosEcotech.estatus":"En Proceso","datosEcotech.fechaMuestreo":oc.fromDate(new Date(S))}),disabled:!S,className:"w-full mt-3 bg-blue-600 text-white font-bold py-2 rounded-lg disabled:bg-gray-400",children:'Guardar Fecha y Poner "En Proceso"'})]}),"En Proceso"===(null===(d=p.datosEcotech)||void 0===d?void 0:d.estatus)&&(0,VS.jsx)("button",{onClick:()=>P({"datosEcotech.estatus":"Enviado Dig.","datosEcotech.fechaEnvioDigital":oc.now()}),className:"w-full bg-blue-600 text-white font-bold py-3 rounded-lg",children:'Marcar como "Enviado Digitalmente"'}),"Enviado Dig."===(null===(h=p.datosEcotech)||void 0===h?void 0:h.estatus)&&(0,VS.jsxs)("div",{className:"p-4 border rounded-md bg-gray-50",children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Introduce la Gu\xeda de Env\xedo F\xedsico"}),(0,VS.jsx)("input",{type:"text",value:k,onChange:e=>E(e.target.value),placeholder:"N\xfamero de gu\xeda...",className:"mt-1 block w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("button",{onClick:()=>P({"datosEcotech.estatus":"Enviado F\xedsicamente","datosEcotech.numeroGuiaEnvio":k}),disabled:!k,className:"w-full mt-3 bg-blue-600 text-white font-bold py-2 rounded-lg disabled:bg-gray-400",children:'Marcar como "Enviado F\xedsicamente"'})]}),"Enviado F\xedsicamente"===(null===(f=p.datosEcotech)||void 0===f?void 0:f.estatus)&&(0,VS.jsxs)("div",{className:"p-4 border rounded-md bg-gray-50",children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Introduce la Gu\xeda de Regreso para Finalizar"}),(0,VS.jsx)("input",{type:"text",value:T,onChange:e=>N(e.target.value),placeholder:"N\xfamero de gu\xeda...",className:"mt-1 block w-full px-3 py-2 border rounded-md"}),(0,VS.jsx)("button",{onClick:()=>P({"datosEcotech.estatus":"Terminado","datosEcotech.numeroGuiaRegreso":T}),disabled:!T,className:"w-full mt-3 bg-green-600 text-white font-bold py-2 rounded-lg disabled:bg-gray-400",children:"Finalizar Proyecto"})]})]}),(0,VS.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,VS.jsx)("h4",{className:"text-md font-semibold text-gray-800",children:"Informaci\xf3n Adicional"}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"N\xfamero de Proyecto (Laboratorio)"}),(0,VS.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Puntos de Trabajo"}),(0,VS.jsx)("input",{type:"number",value:b,onChange:e=>x(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Notas"}),(0,VS.jsx)("textarea",{value:w,onChange:e=>_(e.target.value),rows:"3",className:"mt-1 block w-full px-3 py-2 border rounded-md"})]})]}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:m,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cerrar"}),(0,VS.jsx)("button",{onClick:async()=>{A(!0);const e=Bm(qS,GS,p.id);try{await Qg(e,{"datosEcotech.numeroProyecto":y,"datosEcotech.puntosDeTrabajo":Number(b)||0,"datosEcotech.notas":w,"datosEcotech.numeroGuiaEnvio":k,"datosEcotech.numeroGuiaRegreso":T}),g()}catch(t){alert("No se pudieron guardar los cambios.")}finally{A(!1)}},className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded",children:I?"Guardando...":"Guardar Cambios"})]})]})})},f=t.filter(e=>e.npu&&e.npu.toLowerCase().includes(o.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(o.toLowerCase())||e.servicioNombre&&e.servicioNombre.toLowerCase().includes(o.toLowerCase())),p=l*u,m=p-u,g=f.slice(m,p),y=Math.ceil(f.length/u),v=e=>c(e);return(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,VS.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente o servicio...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{a(e.target.value),c(1)}}),(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:u,onChange:e=>{d(Number(e.target.value)),c(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:25,children:"25"}),(0,VS.jsx)("option",{value:50,children:"50"})]})]})]}),(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xba Proyecto Lab."}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Puntos"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Notas"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gu\xeda Env\xedo"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gu\xeda Regreso"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estatus Interno"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>{var t,n,i,r,o,a;const l=(e=>{var t,n,i,r,s,o;const a=new Date;return a.setHours(0,0,0,0),"Terminado"===(null===(t=e.datosEcotech)||void 0===t?void 0:t.estatus)?{text:"Terminado",class:"bg-blue-100 text-blue-800"}:null!==(n=e.datosEcotech)&&void 0!==n&&null!==(i=n.fechaEnvioDigital)&&void 0!==i&&i.toDate?a>$S(null===(l=e.datosEcotech)||void 0===l?void 0:l.fechaEnvioDigital.toDate(),15)?{text:"Vencido Lab.",class:"bg-red-100 text-red-800 font-bold"}:{text:null===(c=e.datosEcotech)||void 0===c?void 0:c.estatus,class:"bg-green-100 text-green-800"}:null!==(r=e.datosEcotech)&&void 0!==r&&null!==(s=r.fechaMuestreo)&&void 0!==s&&s.toDate?a>$S(null===(u=e.datosEcotech)||void 0===u?void 0:u.fechaMuestreo.toDate(),3)?{text:"Vencido Internamente",class:"bg-orange-100 text-orange-800 font-semibold"}:{text:null===(d=e.datosEcotech)||void 0===d?void 0:d.estatus,class:"bg-green-100 text-green-800"}:{text:(null===(o=e.datosEcotech)||void 0===o?void 0:o.estatus)||"Pendiente",class:"bg-gray-100 text-gray-700"};var l,c,u,d})(e);return(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.npu}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(null===(t=e.datosEcotech)||void 0===t?void 0:t.numeroProyecto)||"---"}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(null===(n=e.datosEcotech)||void 0===n?void 0:n.puntosDeTrabajo)||"---"}),(0,VS.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",title:null===(i=e.datosEcotech)||void 0===i?void 0:i.notas,children:(0,VS.jsx)("p",{className:"w-40 truncate",children:(null===(r=e.datosEcotech)||void 0===r?void 0:r.notas)||"---"})}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(null===(o=e.datosEcotech)||void 0===o?void 0:o.numeroGuiaEnvio)||"---"}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(null===(a=e.datosEcotech)||void 0===a?void 0:a.numeroGuiaRegreso)||"---"}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(l.class),children:l.text})}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,VS.jsx)("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",children:"Gestionar"})})]},e.id)})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",l," de ",y]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>v(l-1),disabled:1===l,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>v(l+1),disabled:l===y||0===y,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),r&&(0,VS.jsx)(h,{project:r,onClose:()=>s(null),onFinalized:n})]})},SC=e=>{let{techData:t}=e;const{nombre:n,proyectosActivos:i,proyectosEntregados:r,horasAsignadas:s,capacidadSemanal:o,saturacion:a,diasParaTerminar:l,rendimiento:c}=t;return(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200 flex flex-col space-y-4",children:[(0,VS.jsx)("h3",{className:"text-xl font-bold text-gray-800 truncate",children:n}),(0,VS.jsxs)("div",{children:[(0,VS.jsxs)("div",{className:"flex justify-between text-sm font-medium text-gray-600",children:[(0,VS.jsx)("span",{children:"Saturaci\xf3n (Horas Semanales)"}),(0,VS.jsxs)("span",{children:[s.toFixed(1),"h / ",o,"h"]})]}),(0,VS.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 mt-1",children:(0,VS.jsx)("div",{className:"h-4 rounded-full ".concat((u=a,u>100?"bg-red-500":u>85?"bg-yellow-500":"bg-green-500")),style:{width:"".concat(Math.min(a,100),"%")}})}),a>100&&(0,VS.jsxs)("p",{className:"text-xs text-red-600 font-semibold mt-1",children:["\xa1Sobrecargado por ",(a-100).toFixed(0),"%!"]})]}),(0,VS.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center border-t border-b py-4",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"text-2xl font-bold",children:i}),(0,VS.jsx)("p",{className:"text-sm text-gray-500",children:"Proyectos Activos"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"text-2xl font-bold",children:r}),(0,VS.jsx)("p",{className:"text-sm text-gray-500",children:"Entregados (2025)"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"text-2xl font-bold",children:l.toFixed(1)}),(0,VS.jsx)("p",{className:"text-sm text-gray-500",children:"D\xedas para Terminar"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsxs)("p",{className:"text-2xl font-bold ".concat((e=>e<80?"text-red-600":e<100?"text-orange-500":"text-green-600")(c)),children:[c.toFixed(0),"%"]}),(0,VS.jsx)("p",{className:"text-sm text-gray-500",children:"Rendimiento (Est. vs Real)"})]})]})]});var u},CC=e=>{let{user:t,userData:n,selectedRole:r}=e;const[s,o]=(0,i.useState)("new"),[a,l]=(0,i.useState)([]),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)([]),[p,m]=(0,i.useState)(!0),[g,y]=(0,i.useState)(null),[v,b]=(0,i.useState)(null),x=async()=>{try{const e=Sg(Vm(qS,GS),Ig("estado","!=","Cotizaci\xf3n")),t=Sg(Vm(qS,"usuarios"),Ig("rol","==","tecnico")),n=Sg(Vm(qS,"usuarios"),Ig("roles","array-contains","tecnico")),i=Sg(Vm(qS,GS),Ig("estado","==","En Revisi\xf3n Final")),[r,s,o,a]=await Promise.all([Gg(e),Gg(t),Gg(n),Gg(i)]),u=r.docs.map(e=>c({id:e.id},e.data())),h=new Map;s.forEach(e=>h.set(e.id,c({id:e.id},e.data()))),o.forEach(e=>h.set(e.id,c({id:e.id},e.data()))),l(u),d(Array.from(h.values())),f(a.docs.map(e=>c({id:e.id},e.data())))}catch(e){console.error("Error fetching supervisor data:",e)}finally{m(!1)}};(0,i.useEffect)(()=>{m(!0),x()},[]),(0,i.useEffect)(()=>{if("review"!==s)return void f([]);const e=Xg(Sg(Vm(qS,GS),Ig("estado","==","En Revisi\xf3n Final")),e=>{f(e.docs.map(e=>c({id:e.id},e.data())))});return()=>e()},[s]);const w=i.useMemo(()=>{if(0===u.length)return{healthData:[],newProjects:[],projectsByTechnician:{}};const e=u.map(e=>{const t=a.filter(t=>{var n;return null===(n=t.asignadoTecnicosIds)||void 0===n?void 0:n.includes(e.id)}),n=t.filter(e=>"Activo"===e.estado&&!e.fechaFinTecnicoReal),i=n.reduce((e,t)=>e+Math.max(0,(t.horasEstimadas||0)-(t.horasRegistradas||0)),0),r=5*(e.horasDisponiblesDiarias||8),s=r>0?i/r*100:0,o=(e.horasDisponiblesDiarias||8)>0?i/(e.horasDisponiblesDiarias||8):0,l=a.filter(t=>{var n,i;return(null===(n=t.asignadoTecnicosIds)||void 0===n?void 0:n.includes(e.id))&&("Archivado"===t.estado||"Facturado"===t.estado)&&(null===(i=t.fase1_fechaFinTecnico||t.fechaFinTecnicoReal)||void 0===i?void 0:i.toDate().getFullYear())===(new Date).getFullYear()}).length,c=a.filter(t=>{var n;return(null===(n=t.asignadoTecnicosIds)||void 0===n?void 0:n.includes(e.id))&&t.horasEstimadas>0&&t.horasRegistradas>0&&t.fechaFinTecnicoReal});let u=100;if(c.length>0){const e=c.reduce((e,t)=>e+t.horasEstimadas/t.horasRegistradas,0);u=e/c.length*100}return{id:e.id,nombre:e.nombreCompleto,proyectosActivos:n.length,proyectosEntregados:l,horasAsignadas:i,capacidadSemanal:r,saturacion:s,diasParaTerminar:o,rendimiento:u}}),t=a.filter(e=>"Activo"===e.estado&&(!e.asignadoTecnicosIds||0===e.asignadoTecnicosIds.length)),n={};u.forEach(e=>{n[e.id]=a.filter(t=>{var n;return"Activo"===t.estado&&(null===(n=t.asignadoTecnicosIds)||void 0===n?void 0:n.includes(e.id))}),n[e.id].sort((e,t)=>(t.prioridad||"").localeCompare(e.prioridad||""))});const i=a.filter(e=>"En Revisi\xf3n Final"===e.estado);return{healthData:e,newProjects:t,projectsByTechnician:n,projectsForReview:i}},[a,u]);return(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Panel de Supervisi\xf3n"}),p?(0,VS.jsx)("p",{children:"Calculando m\xe9tricas..."}):(0,VS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr,3fr] gap-8",children:[(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsx)("h2",{className:"text-lg font-semibold text-gray-700",children:"Vistas de Gesti\xf3n"}),(0,VS.jsx)("button",{onClick:()=>o("new"),className:"w-full p-3 rounded-lg text-left transition-colors ".concat("new"===s?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-50"),children:(0,VS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,VS.jsx)("span",{className:"font-bold",children:"Nuevos por Asignar"}),w.newProjects.length>0&&(0,VS.jsx)("span",{className:"px-2 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full",children:w.newProjects.length})]})}),(0,VS.jsx)("button",{onClick:()=>o("review"),className:"w-full p-3 rounded-lg text-left transition-colors ".concat("review"===s?"bg-blue-600 text-white shadow-lg":"bg-white hover:bg-gray-50"),children:(0,VS.jsxs)("div",{className:"flex justify-between items-center",children:[(0,VS.jsx)("span",{className:"font-bold",children:"Revisi\xf3n Final"}),h.length>0&&(0,VS.jsx)("span",{className:"px-2 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full",children:h.length})]})}),(0,VS.jsx)("hr",{className:"my-4"}),(0,VS.jsx)("h2",{className:"text-lg font-semibold text-gray-700",children:"Equipo T\xe9cnico"}),(0,VS.jsx)("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto pr-2",children:w.healthData.map(e=>(0,VS.jsx)("button",{onClick:()=>o(e.id),className:"w-full text-left transition-colors ".concat(s===e.id?"ring-2 ring-blue-500":""),children:(0,VS.jsx)(SC,{techData:e})},e.id))})]}),(0,VS.jsxs)("div",{className:"min-w-0",children:["new"===s&&(0,VS.jsx)(hC,{projects:w.newProjects,userRole:"supervisor",supervisorView:"new",onAssignClick:b,user:t,userData:n,selectedRole:r}),"review"===s&&(0,VS.jsx)(fC,{projects:h,onUpdateProject:x}),w.projectsByTechnician[s]&&(0,VS.jsx)(hC,{projects:w.projectsByTechnician[s],userRole:"supervisor",supervisorView:"techDetail",onManageClick:y,user:t,userData:n,selectedRole:r})]})]}),g&&(0,VS.jsx)(nC,{project:g,onClose:()=>y(null),onUpdate:x,user:t,userData:n,userRole:"supervisor"}),v&&(0,VS.jsx)(tC,{project:v,onClose:()=>b(null),onFinalized:x})]})},IC=e=>{var t;let{user:n,userData:r,selectedRole:s}=e;const[o,a]=(0,i.useState)([]),[l,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)(null),[f,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(null),[b,x]=(0,i.useState)(!0),[w,_]=(0,i.useState)(null),k=(E=null===r||void 0===r||null===(t=r.ultimoDescanso)||void 0===t?void 0:t.toDate(),T=new Date,!(!E||!T)&&E.getFullYear()===T.getFullYear()&&E.getMonth()===T.getMonth()&&E.getDate()===T.getDate());var E,T;const N=i.useCallback(async e=>{const t=Bm(qS,"usuarios",n.uid),i={projectId:e,inicio:oc.now()};if(d&&d.projectId){const e=Bm(Vm(qS,"registrosDeTiempo"));await Kg(e,{tecnicoId:n.uid,projectId:d.projectId,fechaInicio:d.inicio,fechaFin:oc.now()})}const r=Bm(qS,GS,e);await Qg(r,{["tecnicosStatus.".concat(n.uid)]:"En Proceso"}),await Qg(t,{tareaActiva:i})},[n,d]),S=i.useCallback(async()=>{if(!d)return;const e=Bm(qS,"usuarios",n.uid),t=Bm(Vm(qS,"registrosDeTiempo"));await Kg(t,{tecnicoId:n.uid,projectId:d.projectId,fechaInicio:d.inicio,fechaFin:oc.now()}),await Qg(e,{tareaActiva:ry()})},[n,d]),C=i.useCallback(async()=>{d&&await S(),Xn(WS)},[d,S]),I=i.useCallback(async()=>{if(!d)return;await S();const e=Bm(qS,"usuarios",n.uid);await Qg(e,{enDescanso:{inicio:oc.now(),proyectoPausadoId:d.projectId},ultimoDescanso:oc.now()})},[d,S,n.uid]),A=i.useCallback(async()=>{if(!w||null===n||void 0===n||!n.uid)return;const e=Bm(qS,"usuarios",n.uid);await N(w.proyectoPausadoId),await Qg(e,{enDescanso:ry()})},[w,N,n]);(0,i.useEffect)(()=>{if(null===n||void 0===n||!n.uid)return;let e=()=>{};const t=Xg(Bm(qS,"usuarios",n.uid),t=>{e();const n=t.data();if(_((null===n||void 0===n?void 0:n.enDescanso)||null),null!==n&&void 0!==n&&n.tareaActiva&&n.tareaActiva.projectId){const t=Bm(qS,GS,n.tareaActiva.projectId);e=Xg(t,e=>{h(c(c({},n.tareaActiva),{},{projectId:e.id,projectDetails:e.exists()?c({id:e.id},e.data()):null}))})}else h(null)});return()=>{t(),e()}},[n]),(0,i.useEffect)(()=>{if(!w)return;const e=w.inicio.toMillis()+45e5-Date.now();if(e<=0)return void A();const t=setTimeout(A,e);return()=>clearTimeout(t)},[w,A]),(0,i.useEffect)(()=>{if(!n)return;u(!0);const e=Xg(Sg(Vm(qS,GS),Ig("asignadoTecnicosIds","array-contains",n.uid),Ig("estado","==","Activo")),e=>{a(e.docs.map(e=>c({id:e.id},e.data()))),u(!1)});return()=>e()},[n]);const P=e=>{v({title:"Confirmar Finalizaci\xf3n T\xe9cnica",message:"Esta acci\xf3n registrar\xe1 la fecha de hoy como tu fin de tarea, el proyecto seguira activo hasta que generes la nota de entrega. \xbfEst\xe1s seguro?",onConfirm:()=>(async e=>{const t=Bm(qS,GS,e);try{await Qg(t,{fechaFinTecnicoReal:oc.now()}),SN.success("Tarea t\xe9cnica finalizada y registrada.")}catch(n){alert("Error al finalizar la tarea t\xe9cnica.")}v(null)})(e),confirmText:"S\xed, Finalizar"})},{newProjectsCount:j,kanbanProjects:D}=i.useMemo(()=>{if(null===n||void 0===n||!n.uid)return{newProjectsCount:0,kanbanProjects:[]};const e=o.sort((e,t)=>(t.prioridad||"").localeCompare(e.prioridad||"")),t=o.filter(e=>{var t;return"No Visto"===(null===(t=e.tecnicosStatus)||void 0===t?void 0:t[n.uid])}).length;return{newProjectsCount:t,kanbanProjects:e}},[o,n]),R=e=>{let{project:t,onClose:n,onFinalized:r}=e;const[s,o]=(0,i.useState)(""),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)("");return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Tarea: ",t.npu]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Comentarios Finales (para Nota de Entrega)"}),(0,VS.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),rows:"4",className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subir Evidencia T\xe9cnica (PDF)"}),(0,VS.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{e.target.files[0]&&l(e.target.files[0])},className:"mt-1 block w-full text-sm"})]})]}),(0,VS.jsx)(XS,{message:d,type:"error",onClose:()=>h("")}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:n,disabled:c,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,VS.jsx)("button",{onClick:async()=>{if(a){u(!0),h("");try{const e=Rv(Ov(KS,"evidencia_tecnicos/".concat(t.id,"/").concat(Date.now(),"_").concat(a.name)),a),i=await Mv((await e).ref),{numeroNota:o}=await(async()=>{if("undefined"===typeof window.jspdf)throw new Error("La librer\xeda para generar PDFs (jsPDF) no se ha cargado.");const{jsPDF:e}=window.jspdf,n=new e,i=(new Date).getFullYear(),r=Bm(qS,"contadores","notas_entrega_".concat(i)),o=await iy(qS,async e=>{const t=await e.get(r),n=(t.exists()?t.data().consecutivo:0)+1;return e.set(r,{consecutivo:n},{merge:!0}),n}),a="".concat(i,"-").concat(o.toString().padStart(4,"0")),l=await fetch("https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png"),c=await l.blob(),u=new FileReader;await new Promise((e,t)=>{u.onload=e,u.onerror=t,u.readAsDataURL(c)});const d=u.result;n.addImage(d,"PNG",15,15,50,15),n.setFont("helvetica","bold"),n.setFontSize(10),n.text("ECOLOG\xcdA Y ASESOR\xcdA AMBIENTAL S. DE R.L. DE C.V.",105,35,{align:"center"}),n.setFont("helvetica","normal"),n.setFontSize(8),n.text("HERMANOS ESCOBAR 6150-2 PARQUE INDUSTRIAL OMEGA",105,40,{align:"center"}),n.text("CP.32410 CD. JU\xc1REZ, CHIHUAHUA. RFC EAA12060765A",105,44,{align:"center"}),n.setFontSize(16),n.setFont("helvetica","bold"),n.text("NOTA DE ENTREGA",105,55,{align:"center"}),n.text(a,180,65),n.setFontSize(11),n.setFont("helvetica","normal"),n.text("FECHA: ".concat((new Date).toLocaleDateString("es-MX")),20,75),n.text("PROYECTO: ".concat(t.npu),20,85),n.text("NOMBRE/RAZ\xd3N SOCIAL: ".concat(t.clienteNombre),20,95),n.rect(15,105,180,40),n.text("DESCRIPCI\xd3N",20,111),n.text("CANTIDAD",170,111);const h=n.splitTextToSize(t.servicioNombre,145);n.text(h,20,118),n.text("1",175,118),n.text("Comentarios:",20,155);const f=n.splitTextToSize(s,170);return n.text(f,20,162),n.text("RECIBIDO POR:",20,250),n.line(20,260,100,260),n.text("NOMBRE Y FIRMA",45,265),n.save("Nota_Entrega_".concat(a,".pdf")),{numeroNota:a}})(),l=Bm(qS,GS,t.id),c={estado:"Terminado Internamente"};t.fase1_fechaFinTecnico?(c.fase2_comentariosTecnico=s,c.fase2_urlEvidencia=i,c.fase2_numeroNotaInterna=o,c.fase2_fechaFinTecnico=oc.now()):(c.fase1_comentariosTecnico=s,c.fase1_urlEvidencia=i,c.fase1_numeroNotaInterna=o,c.fase1_fechaFinTecnico=oc.now()),t.fechaFinTecnicoReal||(c.fechaFinTecnicoReal=oc.now()),await Qg(l,c),r(),n()}catch(e){console.error("Error al completar la tarea:",e),h(e.message||"Ocurri\xf3 un error al guardar los datos."),u(!1)}}else h("Es obligatorio subir el archivo PDF de evidencia.")},disabled:c,className:"bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded",children:c?"Enviando...":"Generar Nota y Finalizar Tarea"})]})]})})},M=e=>{let{project:t}=e;const n=(null===d||void 0===d?void 0:d.projectId)===t.id,i=n?"Trabajando en este":d?"Cambiar a este Proyecto":"Empezar a Trabajar";return(0,VS.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-md border-l-4 transition-all ".concat(n?"ring-2 ring-blue-500":""," ").concat("3 - Urgente"===t.prioridad?"border-red-500":"2 - Alta"===t.prioridad?"border-orange-500":"border-gray-300"),children:[(0,VS.jsx)("p",{className:"font-bold text-gray-800",children:t.servicioNombre}),(0,VS.jsx)("p",{className:"text-sm text-gray-600",children:t.clienteNombre}),(0,VS.jsx)("p",{className:"text-sm text-gray-400",children:t.npu}),(0,VS.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Prioridad: ",(0,VS.jsx)("span",{className:"font-semibold",children:t.prioridad||"N/A"})]}),(0,VS.jsx)("button",{onClick:()=>N(t.id),disabled:n||w,className:"w-full mt-4 bg-green-600 text-white font-bold py-2 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-green-700",children:i})]})},O=e=>{var t;let{project:n}=e;if(!n)return null;const i=null===(t=n.projectDetails.proveedorNombre)||void 0===t?void 0:t.toLowerCase().includes("ecologia"),r=!!n.projectDetails.fechaFinTecnicoReal;return(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Herramientas para: ",n.projectDetails.npu]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsx)("button",{onClick:()=>{p(n.projectDetails),g("log")},className:"w-full text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-600 hover:bg-gray-700",children:"Ver Bit\xe1cora"}),i?(0,VS.jsx)("button",{onClick:()=>{p(n.projectDetails),g("task")},className:"w-full text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Generar Nota de Entrega"}):(0,VS.jsxs)(VS.Fragment,{children:[!r&&(0,VS.jsx)("button",{onClick:()=>P(n.projectId),className:"w-full text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Finalizar Parte T\xe9cnica"}),r&&(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("p",{className:"text-center p-2 bg-green-100 text-green-800 rounded-md text-sm font-semibold",children:"Parte T\xe9cnica Finalizada (En espera de proveedor)"}),(0,VS.jsx)("button",{onClick:()=>{p(n.projectDetails),g("task")},className:"w-full text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Generar Nota de Entrega Final"})]})]})]})]})},L=()=>(0,VS.jsxs)("div",{className:"text-center p-10 bg-white rounded-lg shadow-lg h-full flex flex-col justify-center",children:[(0,VS.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"\xbfEn qu\xe9 vas a trabajar hoy?"}),(0,VS.jsx)("p",{className:"text-gray-500",children:"Selecciona un proyecto de tu Kanban para empezar trabajar en un proyecto."})]});return(0,VS.jsxs)("div",{children:[w&&(0,VS.jsx)(YS,{breakInfo:w,onEndBreak:A}),d&&!w&&(0,VS.jsx)(AC,{task:d,onEndDay:C,onStartBreak:I,breakTakenToday:k}),j>0&&b&&(0,VS.jsxs)("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-6 rounded-md shadow-md relative",role:"alert",children:[(0,VS.jsx)("button",{onClick:()=>x(!1),className:"absolute top-2 right-2 text-yellow-700 font-bold text-lg",children:"\xd7"}),(0,VS.jsx)("p",{className:"font-bold",children:"\xa1Atenci\xf3n!"}),(0,VS.jsxs)("p",{children:["Tienes ",j," proyecto(s) nuevo(s) asignado(s). \xa1Rev\xedsalos en tu Kanban!"]})]}),(0,VS.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr,1fr] gap-8",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Mi Kanban de Tareas"}),l?(0,VS.jsx)("p",{children:"Cargando..."}):(0,VS.jsx)("div",{className:"space-y-4 max-h-[75vh] overflow-y-auto pr-4 rounded-lg",children:D.length>0?D.map(e=>(0,VS.jsx)(M,{project:e},e.id)):(0,VS.jsx)("p",{className:"text-gray-500 p-4 bg-white rounded-md",children:"No tienes proyectos activos asignados."})})]}),(0,VS.jsx)("div",{className:"sticky top-40 h-fit",children:d?(0,VS.jsx)(O,{project:d}):(0,VS.jsx)(L,{})})]}),f&&"log"===m&&(0,VS.jsx)(sC,{project:f,user:n,userData:r,onClose:()=>p(null),selectedRole:s}),f&&"task"===m&&(0,VS.jsx)(R,{project:f,onClose:()=>p(null),onFinalized:()=>{}}),y&&(0,VS.jsx)(eC,c(c({},y),{},{onCancel:()=>v(null)}))]})},AC=e=>{var t,n;let{task:r,onEndDay:s,onStartBreak:o,breakTakenToday:a}=e;const l=(e=>{const[t,n]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if(!e)return void n(0);const t=e.toDate().getTime(),i=setInterval(()=>{const e=Date.now();n(e-t)},1e3);return()=>clearInterval(i)},[e]),(e=>{const t=Math.floor(e/1e3),n=String(Math.floor(t/3600)).padStart(2,"0"),i=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(t%60).padStart(2,"0");return"".concat(n,":").concat(i,":").concat(r)})(t)})(r.inicio);return(0,VS.jsxs)("div",{className:"bg-blue-600 text-white p-4 rounded-lg shadow-lg mb-8 flex justify-between items-center sticky top-20 z-30",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-bold",children:"Trabajando ahora en:"}),(0,VS.jsxs)("p",{className:"text-lg",children:[null===(t=r.projectDetails)||void 0===t?void 0:t.npu," - ",null===(n=r.projectDetails)||void 0===n?void 0:n.servicioNombre]})]}),(0,VS.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,VS.jsx)("p",{className:"text-2xl font-mono",children:l}),(0,VS.jsx)("button",{onClick:o,disabled:a,className:"bg-green-500 hover:bg-green-600 font-bold py-3 px-4 rounded-lg disabled:bg-gray-400 disabled:cursor-not-allowed",title:a?"Ya tomaste tu descanso de hoy":"Ir a comer",children:"Ir a Comer"}),(0,VS.jsx)("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 font-bold py-3 px-4 rounded-lg",children:"Finalizar D\xeda"})]})]})},PC=e=>{let{user:t,userData:n}=e;const[r,s]=(0,i.useState)("dashboard"),[o,a]=(0,i.useState)([]),[l,u]=(0,i.useState)(!0),d=()=>{u(!0);const e=Xg(Sg(Vm(qS,GS),Ig("estado","in",["Pendiente de Factura","Facturado"])),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));t.forEach(e=>{if("Facturado"===e.estado&&"Preliminar"===e.faseFacturacion){console.log("[AUTO-REACTIVACI\xd3N] Proyecto ".concat(e.npu," detectado para Fase 2."));const t=Bm(qS,GS,e.id),n={};e.asignadoTecnicosIds&&e.asignadoTecnicosIds.forEach(e=>{n[e]="En Proceso"}),Qg(t,{estado:"Activo",tecnicosStatus:n,faseFacturacion:"Fase 2 Pendiente"})}}),a(t.filter(e=>"Pendiente de Factura"===e.estado)),u(!1)});return e};return(0,i.useEffect)(()=>{let e=()=>{};return"pendientes"===r?e=d():u(!1),()=>e()},[r]),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Panel de Finanzas"}),(0,VS.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,VS.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,VS.jsx)("button",{onClick:()=>s("dashboard"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("dashboard"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Dashboard"}),(0,VS.jsx)("button",{onClick:()=>s("pendientes"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("pendientes"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Pendientes de Gesti\xf3n"}),(0,VS.jsx)("button",{onClick:()=>s("cobrar"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("cobrar"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Cuentas por Cobrar"}),(0,VS.jsx)("button",{onClick:()=>s("pagar"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("pagar"===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Cuentas por Pagar"})]})}),"dashboard"===r&&(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h2",{className:"text-2xl font-bold text-gray-800 my-6",children:"An\xe1lisis Financiero"}),(0,VS.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:(0,VS.jsx)(ZS,{})})]}),"pendientes"===r&&(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h2",{className:"text-2xl font-bold text-gray-800 my-6",children:"Proyectos Pendientes de Facturar"}),l?(0,VS.jsx)("p",{children:"Cargando proyectos..."}):(0,VS.jsx)(jC,{projects:o,onUpdate:d})]}),"cobrar"===r&&(0,VS.jsx)(DC,{invoiceType:"cliente",onUpdate:()=>{}}),"pagar"===r&&(0,VS.jsx)(DC,{invoiceType:"proveedor",onUpdate:()=>{}})]})},jC=e=>{let{projects:t,onUpdate:n}=e;const[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(""),[l,u]=(0,i.useState)(1),[d,h]=(0,i.useState)(10),f=e=>{var t,n,r;let{project:s,onClose:o,onFinalized:a}=e;const[l,u]=(0,i.useState)("upload"),[d,h]=(0,i.useState)(null),[f,p]=(0,i.useState)(null),[m,g]=(0,i.useState)(null),[y,v]=(0,i.useState)(null),[b,x]=(0,i.useState)(!1),[w,_]=(0,i.useState)(""),[k,E]=(0,i.useState)([]),[T,N]=(0,i.useState)(""),[S,C]=(0,i.useState)(""),I=null===(t=s.proveedorNombre)||void 0===t?void 0:t.toLowerCase().includes("ecologia");(0,i.useEffect)(()=>{if("link"===l){const e=Xg(Sg(Vm(qS,"facturas"),jg("fechaEmision","desc")),e=>{E(e.docs.map(e=>c({id:e.id},e.data())))});return()=>e()}},[l]);const A=(e,t)=>{const n=e.target.files[0];if(!n)return;"client"===t&&h(n),"provider"===t&&p(n);const i=new FileReader;i.onload=e=>{const n=e.target.result,i=JS(n);i?("client"===t&&g(i),"provider"===t&&v(i),_("")):_("Error al leer el XML. Aseg\xfarate de que es un archivo CFDI v\xe1lido.")},i.readAsText(n)},P=async(e,t)=>{if(!e)return null;const n=Rv(Ov(KS,t),e);return Mv((await n).ref)};return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Facturas: ",s.npu]}),(0,VS.jsx)("div",{className:"mb-4 border-b border-gray-200",children:(0,VS.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,VS.jsx)("button",{onClick:()=>u("upload"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("upload"===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Subir Nueva Factura (XML)"}),(0,VS.jsx)("button",{onClick:()=>u("link"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("link"===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Enlazar Factura Existente"})]})}),"upload"===l&&(0,VS.jsxs)("div",{className:"grid grid-cols-1 ".concat(I?"":"md:grid-cols-2"," gap-6"),children:[(0,VS.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,VS.jsx)("h4",{className:"font-semibold text-gray-800",children:"Factura a Cliente"}),(null===(n=s.facturasClienteIds)||void 0===n?void 0:n.length)>0?(0,VS.jsx)("p",{className:"text-green-600 font-semibold",children:"\u2713 Factura ya adjuntada."}):(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Subir archivo XML"}),(0,VS.jsx)("input",{type:"file",name:"clientXml",accept:".xml",onChange:e=>A(e,"client"),className:"block w-full text-sm"}),m&&(0,VS.jsxs)("div",{className:"text-xs bg-gray-50 p-2 rounded-md mt-2 space-y-1",children:[(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Folio:"})," ",m.folio]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Subtotal:"})," $",m.subtotal.toFixed(2)]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"IVA:"})," $",m.iva.toFixed(2)]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Total:"})," $",m.monto.toFixed(2)]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Fecha:"})," ",m.fechaEmision.toLocaleDateString()]}),(0,VS.jsxs)("p",{className:"truncate",children:[(0,VS.jsx)("strong",{children:"UUID:"})," ",m.uuid]})]})]})]}),!I&&(0,VS.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,VS.jsx)("h4",{className:"font-semibold text-gray-800",children:"Factura de Proveedor"}),(null===(r=s.facturasProveedorIds)||void 0===r?void 0:r.length)>0?(0,VS.jsx)("p",{className:"text-green-600 font-semibold",children:"\u2713 Factura ya adjuntada."}):(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Subir archivo XML"}),(0,VS.jsx)("input",{type:"file",name:"providerXml",accept:".xml",onChange:e=>A(e,"provider"),className:"block w-full text-sm"}),y&&(0,VS.jsxs)("div",{className:"text-xs bg-gray-50 p-2 rounded-md mt-2 space-y-1",children:[(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Folio:"})," ",y.folio]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Subtotal:"})," $",y.subtotal.toFixed(2)]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"IVA:"})," $",y.iva.toFixed(2)]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Total:"})," $",y.monto.toFixed(2)]}),(0,VS.jsxs)("p",{children:[(0,VS.jsx)("strong",{children:"Fecha:"})," ",y.fechaEmision.toLocaleDateString()]}),(0,VS.jsxs)("p",{className:"truncate",children:[(0,VS.jsx)("strong",{children:"UUID:"})," ",y.uuid]})]})]})]})]}),"link"===l&&(0,VS.jsxs)("div",{className:"grid grid-cols-1 ".concat(I?"":"md:grid-cols-2"," gap-6"),children:[(0,VS.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,VS.jsx)("h4",{className:"font-semibold text-gray-800",children:"Enlazar Factura de Cliente"}),(0,VS.jsxs)("select",{value:T,onChange:e=>N(e.target.value),className:"block w-full border rounded-md p-2",children:[(0,VS.jsx)("option",{value:"",children:"Seleccione una factura..."}),k.filter(e=>"cliente"===e.tipo).map(e=>(0,VS.jsx)("option",{value:e.id,children:"Folio: ".concat(e.folio," - ").concat(e.clienteNombre||e.descripcion," - $").concat(e.monto.toFixed(2))},e.id))]})]}),!I&&(0,VS.jsxs)("div",{className:"space-y-2 p-4 border rounded-lg",children:[(0,VS.jsx)("h4",{className:"font-semibold text-gray-800",children:"Enlazar Factura de Proveedor"}),(0,VS.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"block w-full border rounded-md p-2",children:[(0,VS.jsx)("option",{value:"",children:"Seleccione una factura..."}),k.filter(e=>"proveedor"===e.tipo).map(e=>(0,VS.jsx)("option",{value:e.id,children:"Folio: ".concat(e.folio," - ").concat(e.proveedorNombre||e.descripcion," - $").concat(e.monto.toFixed(2))},e.id))]})]})]}),(0,VS.jsx)(XS,{message:w,type:"error",onClose:()=>_("")}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:o,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,VS.jsx)("button",{onClick:async()=>{x(!0),_("");try{var e,t;const n=Bm(qS,GS,s.id),i={};if("upload"===l){if(d&&m){const e=await P(d,"facturas_clientes/".concat(s.id,"/").concat(d.name)),t=await Yg(Vm(qS,"facturas"),{tipo:"cliente",proyectoId:s.id,folio:m.folio,uuid:m.uuid,subtotal:m.subtotal,iva:m.iva,monto:m.monto,fechaEmision:oc.fromDate(m.fechaEmision),estado:"Pendiente",urlXml:e,pdfUrl:"",clienteNombre:s.clienteNombre});i.facturasClienteIds=sy(t.id)}if(!I&&f&&y){const e=await P(f,"facturas_proveedores/".concat(s.id,"/").concat(f.name)),t=await Yg(Vm(qS,"facturas"),{tipo:"proveedor",proyectoId:s.id,folio:y.folio,uuid:y.uuid,subtotal:y.subtotal,iva:y.iva,monto:y.monto,fechaEmision:oc.fromDate(y.fechaEmision),estado:"Pendiente",urlXml:e,proveedorNombre:s.proveedorNombre});i.facturasProveedorIds=sy(t.id)}}else T&&(await Qg(Bm(qS,"facturas",T),{proyectosIds:sy(s.id)}),i.facturasClienteIds=sy(T)),S&&!I&&(await Qg(Bm(qS,"facturas",S),{proyectosIds:sy(s.id)}),i.facturasProveedorIds=sy(S));const r=(null===(e=s.facturasClienteIds)||void 0===e?void 0:e.length)>0||m||T,c=I||(null===(t=s.facturasProveedorIds)||void 0===t?void 0:t.length)>0||y||S;r&&c&&(i.estado="Facturado"),Object.keys(i).length>0&&await Qg(n,i),a(),o()}catch(n){_("Ocurri\xf3 un error al guardar las facturas."),console.error("Error saving invoices:",n),x(!1)}},className:"bg-[#b0ef26] text-black font-bold py-2 px-4 rounded",disabled:b,children:b?"Guardando...":"Guardar Cambios"})]})]})})},p=t.filter(e=>e.npu&&e.npu.toLowerCase().includes(o.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(o.toLowerCase())||e.servicioNombre&&e.servicioNombre.toLowerCase().includes(o.toLowerCase())),m=p.slice((l-1)*d,l*d),g=Math.ceil(p.length/d),y=e=>u(e);return(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,VS.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente o servicio...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{a(e.target.value),u(1)}}),(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:d,onChange:e=>{h(Number(e.target.value)),u(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:25,children:"25"}),(0,VS.jsx)("option",{value:50,children:"50"})]})]})]}),(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Docs Admin"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Factura Cliente"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Factura Proveedor"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>{var t;return(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-6 py-4",children:e.npu}),(0,VS.jsx)("td",{className:"px-6 py-4",children:e.clienteNombre}),(0,VS.jsx)("td",{className:"px-6 py-4",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-6 py-4",children:(0,VS.jsxs)("div",{className:"flex space-x-2 text-sm",children:[e.urlCotizacionCliente&&(0,VS.jsx)("a",{href:e.urlCotizacionCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"Cot.C"}),e.urlPOCliente&&(0,VS.jsx)("a",{href:e.urlPOCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"PO.C"})]})}),(0,VS.jsx)("td",{className:"px-6 py-4",children:e.facturaClienteId?(0,VS.jsx)("span",{className:"text-green-600",children:"\u2713 Adjuntada"}):(0,VS.jsx)("span",{className:"text-orange-500",children:"Pendiente"})}),(0,VS.jsx)("td",{className:"px-6 py-4",children:null!==(t=e.proveedorNombre)&&void 0!==t&&t.toLowerCase().includes("ecologia")?(0,VS.jsx)("span",{className:"text-gray-500",children:"N/A"}):e.facturaProveedorId?(0,VS.jsx)("span",{className:"text-green-600",children:"\u2713 Adjuntada"}):(0,VS.jsx)("span",{className:"text-orange-500",children:"Pendiente"})}),(0,VS.jsx)("td",{className:"px-6 py-4",children:(0,VS.jsx)("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",children:"Gestionar Facturas"})})]},e.id)})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",l," de ",g]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>y(l-1),disabled:1===l,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>y(l+1),disabled:l===g||0===g,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),r&&(0,VS.jsx)(f,{project:r,onClose:()=>s(null),onFinalized:n})]})},DC=e=>{let{invoiceType:t,onUpdate:n}=e;const[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(1),[y,v]=(0,i.useState)(10);(0,i.useEffect)(()=>{a(!0);const e=Xg(Sg(Vm(qS,"facturas"),Ig("tipo","==",t),jg("fechaEmision","desc")),e=>{s(e.docs.map(e=>c({id:e.id},e.data()))),a(!1)});return()=>e()},[t]);const b=r.filter(e=>e.folio&&String(e.folio).toLowerCase().includes(f.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(f.toLowerCase())||e.proveedorNombre&&e.proveedorNombre.toLowerCase().includes(f.toLowerCase())||e.descripcion&&e.descripcion.toLowerCase().includes(f.toLowerCase())),x=m*y,w=x-y,_=b.slice(w,x),k=Math.ceil(b.length/y),E=e=>g(e),T=e=>{let{onClose:n,onFinalized:r}=e;const[s,o]=(0,i.useState)({folio:"",monto:"",fechaEmision:(new Date).toISOString().split("T")[0],entidadId:"",descripcion:""}),[a,l]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)([]),[p,m]=(0,i.useState)(""),[g,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)("");(0,i.useEffect)(()=>{let e;e="cliente"===t?Sg(Vm(qS,"usuarios"),Ig("rol","==","cliente")):Sg(Vm(qS,"proveedores")),Gg(e).then(e=>{const t=e.docs.map(e=>c({id:e.id},e.data())).sort((e,t)=>(e.nombreCompleto||e.nombre).localeCompare(t.nombreCompleto||t.nombre));f(t)})},[]),(0,i.useEffect)(()=>{u&&o(e=>c(c({},e),{},{folio:u.folio,subtotal:u.subtotal,iva:u.iva,monto:u.monto,fechaEmision:u.fechaEmision.toISOString().split("T")[0]}))},[u]);return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["A\xf1adir Factura General (",t,")"]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Subir archivo XML (la informaci\xf3n se cargar\xe1 autom\xe1ticamente)"}),(0,VS.jsx)("input",{type:"file",name:"xmlFile",accept:".xml",onChange:e=>{const t=e.target.files[0];if(!t)return;l(t);const n=new FileReader;n.onload=e=>{const t=e.target.result,n=JS(t);n?(d(n),b("")):b("Error al leer el XML. Aseg\xfarate de que es un archivo CFDI v\xe1lido.")},n.readAsText(t)},className:"block w-full text-sm"}),(0,VS.jsx)("hr",{}),(0,VS.jsxs)("select",{value:s.entidadId,onChange:e=>o(t=>c(c({},t),{},{entidadId:e.target.value})),name:"entidadId",className:"block w-full border rounded-md p-2",children:[(0,VS.jsxs)("option",{value:"",children:["Seleccione un ",t]}),h.map(e=>(0,VS.jsx)("option",{value:e.id,children:e.nombreCompleto||e.nombre},e.id)),(0,VS.jsx)("option",{value:"otro",children:"Otro (especificar)"})]}),"otro"===s.entidadId&&(0,VS.jsx)("input",{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"Nombre del ".concat(t),className:"block w-full border rounded-md p-2"}),(0,VS.jsx)("input",{type:"text",name:"descripcion",placeholder:"Descripci\xf3n (ej: Renta de oficina)",value:s.descripcion,onChange:e=>o(t=>c(c({},t),{},{descripcion:e.target.value})),className:"block w-full border rounded-md p-2"}),(0,VS.jsx)("input",{type:"text",name:"folio",placeholder:"Folio (del XML)",value:s.folio,disabled:!0,className:"block w-full border rounded-md p-2 bg-gray-100"}),(0,VS.jsx)("input",{type:"number",name:"subtotal",placeholder:"Subtotal (del XML)",value:s.subtotal||"",disabled:!0,className:"block w-full border rounded-md p-2 bg-gray-100"}),(0,VS.jsx)("input",{type:"number",name:"iva",placeholder:"IVA (del XML)",value:s.iva||"",disabled:!0,className:"block w-full border rounded-md p-2 bg-gray-100"}),(0,VS.jsx)("input",{type:"number",name:"monto",placeholder:"Monto (del XML)",value:s.monto,disabled:!0,className:"block w-full border rounded-md p-2 bg-gray-100"}),(0,VS.jsx)("input",{type:"date",name:"fechaEmision",value:s.fechaEmision,disabled:!0,className:"block w-full border rounded-md p-2 bg-gray-100"})]}),(0,VS.jsx)(XS,{message:v,type:"error",onClose:()=>b("")}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:n,children:"Cancelar"}),(0,VS.jsx)("button",{onClick:async()=>{if(u&&a&&""!==s.entidadId&&("otro"!==s.entidadId||p)){y(!0);try{var e,i;const o=await(async(e,t)=>{if(!e)return null;const n=Rv(Ov(KS,t),e);return Mv((await n).ref)})(a,"facturas_".concat(t,"/").concat(Date.now(),"/").concat(a.name)),l="otro"===s.entidadId?p:(null===(e=h.find(e=>e.id===s.entidadId))||void 0===e?void 0:e.nombreCompleto)||(null===(i=h.find(e=>e.id===s.entidadId))||void 0===i?void 0:i.nombre);await Yg(Vm(qS,"facturas"),{tipo:t,proyectoId:"general",folio:s.folio,uuid:u.uuid,subtotal:Number(s.subtotal),iva:Number(s.iva),monto:Number(s.monto),fechaEmision:oc.fromDate(new Date(s.fechaEmision)),estado:"Pendiente",descripcion:s.descripcion||"",urlXml:o,urlPdf:"",["cliente"===t?"clienteNombre":"proveedorNombre"]:l}),r(),n()}catch(o){console.error("Error al guardar factura general:",o),b("Ocurri\xf3 un error al guardar."),y(!1)}}else b("Debes subir un XML v\xe1lido y seleccionar un cliente/proveedor.")},disabled:g,className:"bg-[#b0ef26] text-black font-bold py-2 px-4 rounded",children:g?"Guardando...":"Guardar Factura"})]})]})})},N=e=>{let{invoice:t,onClose:n,onFinalized:r}=e;const[s,o]=(0,i.useState)({fechaPromesaPago:t.fechaPromesaPago?t.fechaPromesaPago.toDate().toISOString().split("T")[0]:"",fechaPagoReal:t.fechaPagoReal?t.fechaPagoReal.toDate().toISOString().split("T")[0]:""}),[a,l]=(0,i.useState)(!1);return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Factura: ",t.folio]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Fecha Promesa de Pago"}),(0,VS.jsx)("input",{type:"date",value:s.fechaPromesaPago,onChange:e=>o(c(c({},s),{},{fechaPromesaPago:e.target.value})),className:"mt-1 block w-full border rounded-md p-2"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Fecha de Pago Real"}),(0,VS.jsx)("input",{type:"date",value:s.fechaPagoReal,onChange:e=>o(c(c({},s),{},{fechaPagoReal:e.target.value})),className:"mt-1 block w-full border rounded-md p-2"})]})]}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,VS.jsx)("button",{onClick:async()=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres cancelar esta factura? Esta acci\xf3n es irreversible.")){if(l(!0),await Qg(Bm(qS,"facturas",t.id),{estado:"Cancelada"}),t.proyectoId&&"general"!==t.proyectoId){const e="cliente"===t.tipo?"facturaClienteId":"facturaProveedorId";await Qg(Bm(qS,GS,t.proyectoId),{[e]:ry(),estado:"Pendiente de Factura"})}r(),n()}},disabled:a,className:"bg-red-600 text-white font-bold py-2 px-4 rounded disabled:bg-red-300",children:"Cancelar Factura"}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:n,disabled:a,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2",children:"Cerrar"}),(0,VS.jsx)("button",{onClick:async()=>{l(!0);const e={fechaPromesaPago:s.fechaPromesaPago?oc.fromDate(new Date(s.fechaPromesaPago)):ry(),fechaPagoReal:s.fechaPagoReal?oc.fromDate(new Date(s.fechaPagoReal)):ry()};s.fechaPagoReal?e.estado="Pagada":"Pagada"===t.estado&&(e.estado="Pendiente"),await Qg(Bm(qS,"facturas",t.id),e),r(),n()},disabled:a,className:"bg-[#b0ef26] text-black font-bold py-2 px-4 rounded",children:a?"Guardando...":"Guardar"})]})]})]})})},S=e=>e?new Date(1e3*e.seconds).toLocaleDateString("es-MX"):"---";return(0,VS.jsxs)("div",{children:[(0,VS.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,VS.jsx)("input",{type:"text",placeholder:"Buscar por folio, cliente/prov. o descripci\xf3n...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{p(e.target.value),g(1)}}),(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:y,onChange:e=>{v(Number(e.target.value)),g(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:25,children:"25"}),(0,VS.jsx)("option",{value:50,children:"50"})]}),(0,VS.jsx)("button",{onClick:()=>u(!0),className:"ml-4 bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg",children:"+ A\xf1adir Factura General"})]})]}),(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Folio"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"cliente"===t?"Cliente":"Proveedor"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Descripci\xf3n"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Subtotal"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"IVA"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Total"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Fecha Emisi\xf3n"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Fecha Promesa Pago"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Fecha Pago"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Estado"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Acciones"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o?(0,VS.jsx)("tr",{children:(0,VS.jsx)("td",{colSpan:"11",children:"Cargando..."})}):_.map(e=>{const t=(e=>{var t;const n=new Date;if(n.setHours(0,0,0,0),"Pagada"===e.estado)return{text:"Pagada",class:"bg-green-100 text-green-800"};if("Cancelada"===e.estado)return{text:"Cancelada",class:"bg-gray-100 text-gray-700"};if(null!==(t=e.fechaPromesaPago)&&void 0!==t&&t.toDate){const t=e.fechaPromesaPago.toDate();return t.setHours(0,0,0,0),t<n?{text:"Vencida",class:"bg-red-100 text-red-800"}:{text:"Prog. a Pago",class:"bg-blue-100 text-blue-800"}}return{text:"Pend. de Autorizaci\xf3n",class:"bg-yellow-100 text-yellow-800"}})(e);return(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("td",{className:"px-6 py-4",children:e.folio}),(0,VS.jsx)("td",{className:"px-6 py-4",children:e.clienteNombre||e.proveedorNombre}),(0,VS.jsx)("td",{className:"px-6 py-4",children:e.descripcion||("general"!==e.proyectoId?"Gasto de Proyecto":"---")}),(0,VS.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(e.subtotal||0).toFixed(2)]}),(0,VS.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(e.iva||0).toFixed(2)]}),(0,VS.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:["$",(e.monto||0).toFixed(2)]}),(0,VS.jsx)("td",{className:"px-6 py-4",children:S(e.fechaEmision)}),(0,VS.jsx)("td",{className:"px-6 py-4",children:S(e.fechaPromesaPago)}),(0,VS.jsx)("td",{className:"px-6 py-4",children:S(e.fechaPagoReal)}),(0,VS.jsx)("td",{className:"px-6 py-4",children:(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(t.class),children:t.text})}),(0,VS.jsx)("td",{className:"px-6 py-4",children:(0,VS.jsx)("button",{onClick:()=>h(e),className:"text-indigo-600",children:"Gestionar"})})]},e.id)})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",m," de ",k]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>E(m-1),disabled:1===m,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>E(m+1),disabled:m===k||0===k,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),l&&(0,VS.jsx)(T,{onClose:()=>u(!1),onFinalized:n}),d&&(0,VS.jsx)(N,{invoice:d,onClose:()=>h(null),onFinalized:n})]})},RC=()=>{const[e,t]=(0,i.useState)([]),[n,r]=(0,i.useState)(!0),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)("desc"),[p,m]=(0,i.useState)(1),[g,y]=(0,i.useState)(10),v=()=>{r(!0);return Xg(Sg(Vm(qS,GS),Ig("estado","in",["Terminado Internamente","En Revisi\xf3n Final"])),e=>{t(e.docs.map(e=>c({id:e.id},e.data()))),r(!1)},e=>{console.error("Error fetching projects for practicante: ",e),r(!1)})};(0,i.useEffect)(()=>{const e=v();return()=>e()},[]);const b=i.useMemo(()=>{const t=[...e];return t.sort((e,t)=>{const n=e.fechaFinTecnico2||e.fechaFinTecnico1,i=t.fechaFinTecnico2||t.fechaFinTecnico1,r=(null===n||void 0===n?void 0:n.toDate())||new Date(0),s=(null===i||void 0===i?void 0:i.toDate())||new Date(0);return r<s?"asc"===h?-1:1:r>s?"asc"===h?1:-1:0}),t},[e,h]),x=b.slice((p-1)*g,p*g),w=Math.ceil(b.length/g),_=e=>m(e),k=e=>{d({title:"Confirmar Env\xedo",message:"\xbfEst\xe1s seguro de que todos los documentos est\xe1n listos y quieres enviar este proyecto a revisi\xf3n final?",onConfirm:()=>{(async e=>{l(e);try{await Qg(Bm(qS,GS,e),{estado:"En Revisi\xf3n Final",motivoRechazo:ry()})}catch(t){console.error("Error sending project to review:",t),alert("Ocurri\xf3 un error al enviar el proyecto a revisi\xf3n.")}finally{l(null)}})(e),d(null)}})},E=e=>{let{project:t,onClose:n,onFinalized:r}=e;const[s,o]=(0,i.useState)(t.urlHeyzine||""),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)(!1),f=e=>t=>{t.target.files[0]&&e(t.target.files[0])},p=async(e,t)=>{if(!e)return null;const n=Rv(Ov(KS,t),e);return Mv((await n).ref)};return(0,VS.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,VS.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,VS.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Entrega Final: ",t.npu]}),(0,VS.jsxs)("div",{className:"space-y-4",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Enlace Heyzine (\xdanico)"}),(0,VS.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),className:"mt-1 block w-full border rounded-md p-2"})]}),(0,VS.jsx)("hr",{}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Subir/Reemplazar Nota de Entrega 1 (Firmada)"}),(0,VS.jsx)("input",{type:"file",accept:".pdf",onChange:f(l),className:"mt-1 block w-full text-sm"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium",children:"Subir/Reemplazar Nota de Entrega 2 (Firmada)"}),(0,VS.jsx)("input",{type:"file",accept:".pdf",onChange:f(u),className:"mt-1 block w-full text-sm"})]})]}),(0,VS.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,VS.jsx)("button",{onClick:n,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,VS.jsx)("button",{onClick:async()=>{h(!0);const e={urlHeyzine:s},i=await p(a,"notas_entrega_cliente/".concat(t.id,"/nota1_").concat(null===a||void 0===a?void 0:a.name)),o=await p(c,"notas_entrega_cliente/".concat(t.id,"/nota2_").concat(null===c||void 0===c?void 0:c.name));i&&(e.urlNotaPdf1=i),o&&(e.urlNotaPdf2=o),Object.keys(e).length>0&&await Qg(Bm(qS,GS,t.id),e),r(),n()},className:"bg-blue-600 text-white font-bold py-2 px-4 rounded",children:d?"Guardando...":"Guardar Documentos"})]})]})})};return(0,VS.jsxs)("div",{children:[(0,VS.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,VS.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Proyectos Listos para Documentar"}),(0,VS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,VS.jsxs)("div",{className:"flex items-center",children:[(0,VS.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,VS.jsxs)("select",{value:g,onChange:e=>{y(Number(e.target.value)),m(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,VS.jsx)("option",{value:10,children:"10"}),(0,VS.jsx)("option",{value:25,children:"25"}),(0,VS.jsx)("option",{value:50,children:"50"})]})]}),(0,VS.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,VS.jsx)("span",{className:"text-sm font-medium",children:"Ordenar por Fecha:"}),(0,VS.jsx)("button",{onClick:()=>f("asc"===h?"desc":"asc"),className:"p-2 border rounded-md text-sm bg-white shadow-sm",children:"asc"===h?"Ascendente \u2191":"Descendente \u2193"})]})]})]}),n?(0,VS.jsx)("p",{children:"Cargando..."}):0===b.length?(0,VS.jsx)("p",{children:"No hay proyectos pendientes."}):(0,VS.jsxs)(VS.Fragment,{children:[(0,VS.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,VS.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,VS.jsx)("thead",{className:"bg-gray-50",children:(0,VS.jsxs)("tr",{children:[(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Documentos y correcciones"}),(0,VS.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,VS.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>{const t="En Revisi\xf3n Final"===e.estado?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800";return(0,VS.jsxs)("tr",{className:e.motivoRechazo?"bg-orange-50":"",children:[(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.npu}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,VS.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(t),children:e.estado})}),(0,VS.jsx)("td",{className:"px-6 py-4",children:(0,VS.jsxs)("div",{className:"flex flex-col space-y-2 text-sm",children:[e.fase1_urlEvidencia&&(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-semibold text-xs",children:"Fase 1:"}),(0,VS.jsx)("a",{href:e.fase1_urlEvidencia,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Evidencia 1"}),(0,VS.jsxs)("p",{children:["Nota Interna: ",(0,VS.jsx)("span",{className:"font-semibold",children:e.fase1_numeroNotaInterna||"N/A"})]})]}),e.fase2_urlEvidencia&&(0,VS.jsxs)("div",{children:[(0,VS.jsx)("p",{className:"font-semibold text-xs",children:"Fase 2:"}),(0,VS.jsx)("a",{href:e.fase2_urlEvidencia,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Evidencia 2"}),(0,VS.jsxs)("p",{children:["Nota Interna: ",(0,VS.jsx)("span",{className:"font-semibold",children:e.fase2_numeroNotaInterna||"N/A"})]})]}),e.motivoRechazo&&(0,VS.jsxs)("div",{className:"mt-2 p-2 bg-red-100 text-red-800 rounded-md text-xs border border-red-200",children:[(0,VS.jsx)("p",{className:"font-bold",children:"Requiere Correcci\xf3n:"}),(0,VS.jsx)("p",{children:e.motivoRechazo})]})]})}),(0,VS.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,VS.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,VS.jsx)("button",{onClick:()=>o(e),className:"text-indigo-600 hover:text-indigo-800",children:"Gestionar Entrega"}),"Terminado Internamente"===e.estado?(0,VS.jsx)("button",{onClick:()=>k(e.id),disabled:a===e.id,className:"text-green-600 hover:text-green-800 disabled:opacity-50",children:a===e.id?"Enviando...":"Enviar a Revisi\xf3n"}):(0,VS.jsx)("span",{className:"text-sm font-semibold text-gray-500",children:"Enviado"})]})})]},e.id)})})]})}),(0,VS.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,VS.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",p," de ",w]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("button",{onClick:()=>_(p-1),disabled:1===p,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,VS.jsx)("button",{onClick:()=>_(p+1),disabled:p===w||0===w,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]})]}),s&&(0,VS.jsx)(E,{project:s,onClose:()=>o(null),onFinalized:v}),u&&(0,VS.jsx)(eC,c(c({},u),{},{onCancel:()=>d(null)}))]})},MC=e=>{let{user:t,userData:n,selectedRole:i}=e;return(0,VS.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(()=>{switch(i){case"administrador":return(0,VS.jsx)(lC,{user:t,userData:n,selectedRole:i});case"cliente":return(0,VS.jsx)(mC,{user:t,userData:n});case"directivo":return(0,VS.jsx)(EC,{user:t,userData:n});case"ecotech":return(0,VS.jsx)(TC,{user:t,userData:n});case"supervisor":return(0,VS.jsx)(CC,{user:t,userData:n,selectedRole:i});case"tecnico":return(0,VS.jsx)(IC,{user:t,userData:n,selectedRole:i});case"finanzas":return(0,VS.jsx)(PC,{user:t,userData:n});case"practicante":return(0,VS.jsx)(RC,{});default:return(0,VS.jsxs)("div",{children:[(0,VS.jsx)("h2",{className:"text-2xl font-bold",children:"Rol no reconocido"}),(0,VS.jsx)("p",{children:"Contacte al administrador."})]})}})()})},OC=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,o]=(0,i.useState)("");return(0,VS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#cdcdcd]",children:(0,VS.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-2xl",children:[(0,VS.jsx)("img",{src:"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png",alt:"Logo Grupo Evelsa",className:"h-16 mx-auto mb-6"}),(0,VS.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-8",children:"Acceso al Portal"}),(0,VS.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o("");try{await function(e,t,n){return Yn(O(e),Rn.credential(t,n))}(WS,e,n)}catch(i){o("Email o contrase\xf1a incorrectos.")}},className:"space-y-6",children:[(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,VS.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,VS.jsxs)("div",{children:[(0,VS.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,VS.jsx)("input",{type:"password",value:n,onChange:e=>r(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),s&&(0,VS.jsx)("p",{className:"text-red-500 text-sm text-center",children:s}),(0,VS.jsx)("button",{type:"submit",className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-3 px-4 rounded-lg transition duration-300 text-lg",children:"Entrar"})]})]})})};function LC(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!0),[a,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{const e=function(e,t,n,i){return O(e).onAuthStateChanged(t,n,i)}(WS,async e=>{if(e){const n=Bm(qS,"usuarios",e.uid),i=await function(e){e=Mm(e,Fm);const t=Mm(e.firestore,qm);return Sm(Gm(t),e._key).then(n=>Jg(t,e,n))}(n);if(i.exists()){const n=i.data();r(n),t(e),n.roles&&n.roles.length>0?l(n.roles[0]):n.rol&&l(n.rol)}else console.error("Usuario autenticado pero no encontrado en Firestore. Deslogueando..."),Xn(WS)}else t(null),r(null),l(null);o(!1)});return()=>e()},[]),(0,i.useEffect)(()=>{const e=async e=>{if(WS.currentUser&&null!==n&&void 0!==n&&n.tareaActiva){console.log("Cierre de ventana detectado, pausando tarea activa...");const e=Bm(qS,"usuarios",WS.currentUser.uid),t=Bm(Vm(qS,"registrosDeTiempo"));await Kg(t,{tecnicoId:WS.currentUser.uid,projectId:n.tareaActiva.projectId,fechaInicio:n.tareaActiva.inicio,fechaFin:oc.now()}),await Qg(e,{tareaActiva:ry()})}};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[n]),s?(0,VS.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#cdcdcd] text-gray-700",children:"Cargando..."}):(0,VS.jsxs)("div",{className:"bg-[#c9c9c9] min-h-screen font-sans",children:[(0,VS.jsx)(LN,{position:"bottom-right",autoClose:8e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),(0,VS.jsx)(rC,{user:e,userData:n,selectedRole:a,setSelectedRole:l}),(0,VS.jsx)("main",{children:e&&n?(0,VS.jsx)(MC,{user:e,userData:n,selectedRole:a}):(0,VS.jsx)(OC,{})})]})}r.createRoot(document.getElementById("root")).render((0,VS.jsx)(i.StrictMode,{children:(0,VS.jsx)(LC,{})}))})();
//# sourceMappingURL=main.6cfe8239.js.map