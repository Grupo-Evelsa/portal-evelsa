/*! For license information please see main.e2869320.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!N.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+T(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+T(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!N.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,R(_);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(C),C=-1),p=!0;var s=f;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,N=!1,k=null,C=-1,S=5,T=-1;function I(){return!(t.unstable_now()-T<S)}function A(){if(null!==k){var e=t.unstable_now();T=e;var n=!0;try{n=k(!0,e)}finally{n?E():(N=!1,k=null)}}else N=!1}if("function"===typeof b)E=function(){b(A)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=A,E=function(){P.postMessage(null)}}else E=function(){y(A,0)};function R(e){k=e,N||(N=!0,E())}function D(e,n){C=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,D(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,R(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,F=Object.assign;function M(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(gi){var r=gi}Reflect.construct(e,[],t)}else{try{t.call()}catch(gi){r=gi}e.call(t.prototype)}else{try{throw Error()}catch(gi){r=gi}e()}}catch(gi){if(gi&&r&&"string"===typeof gi.stack){for(var i=gi.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function V(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case k:return"Profiler";case N:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Rl){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,Ne=null;function ke(e){if(e=xi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=Ei(t),_e(e.stateNode,e.type,t))}}function Ce(e){Ee?Ne?Ne.push(e):Ne=[e]:Ee=e}function Se(){if(Ee){var e=Ee,t=Ne;if(Ne=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Ae=!1;function je(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Ne)&&(Ie(),Se())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Oe(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Me=!1,Ue=null,ze={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,r,i,s,o,a,l){Le=!1,Fe=null,Oe.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,Et,Nt,kt,Ct=!1,St=[],Tt=null,It=null,At=null,jt=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=wi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Mt(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&Mt(Tt)&&(Tt=null),null!==It&&Mt(It)&&(It=null),null!==At&&Mt(At)&&(At=null),jt.forEach(Ut),Pt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==It&&Vt(It,e),null!==At&&Vt(At,e),jt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Kt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Wt(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Lt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&xt(s),null===(s=Xt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=wi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},dn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function kn(){return Nn}var Cn=F({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=sn(Cn),Tn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(jn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Ln=u&&"TextEvent"in window&&!On,Fn=u&&(!Dn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Qn(e){Mr(e,0)}function Xn(e){if(W(_i(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Wn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Gn(t,Wn,e,xe(e)),je(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function sr(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Nr={};function kr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Er[e]=n[t];return e}u&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=kr("animationend"),Sr=kr("animationiteration"),Tr=kr("animationstart"),Ir=kr("transitionend"),Ar=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Rr=0;Rr<jr.length;Rr++){var Dr=jr[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Sr,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Me||(Me=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Me)throw e=Ue,Me=!1,Ue=null,e}function Ur(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=wi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}je(function(){var r=s,i=xe(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Sr:case Tr:l=yn;break;case Ir:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Gr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!wi(c)&&!c[mi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?wi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:_i(l),f=null==c?a:_i(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,wi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=h;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)h=Wr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wr(u),h=Wr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Hn(a))if($n)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?_i(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Mn);case"textInput":return(e=t.data)===Mn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Mr(o,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,yi="__reactEvents$"+di,vi="__reactListeners$"+di,bi="__reactHandles$"+di;function wi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[fi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[fi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ei(e){return e[pi]||null}var Ni=[],Ci=-1;function Si(e){return{current:e}}function Ti(e){0>Ci||(e.current=Ni[Ci],Ni[Ci]=null,Ci--)}function Ai(e,t){Ci++,Ni[Ci]=e.current,e.current=t}var ji={},Pi=Si(ji),Ri=Si(!1),Di=ji;function Oi(e,t){var n=e.type.contextTypes;if(!n)return ji;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fi(){Ti(Ri),Ti(Pi)}function Mi(e,t,n){if(Pi.current!==ji)throw Error(s(168));Ai(Pi,t),Ai(Ri,n)}function Ui(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Di=Pi.current,Ai(Pi,e),Ai(Ri,Ri.current),!0}function Vi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ui(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ri),Ti(Pi),Ai(Pi,e)):Ti(Ri),Ai(Ri,n)}var Bi=null,qi=!1,Hi=!1;function Gi(e){null===Bi?Bi=[e]:Bi.push(e)}function Ki(){if(!Hi&&null!==Bi){Hi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,qi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),We(Ze,Ki),i}finally{bt=t,Hi=!1}}return null}var Wi=[],Qi=0,Xi=null,Yi=0,$i=[],Ji=0,Zi=null,es=1,ts="";function ns(e,t){Wi[Qi++]=Yi,Wi[Qi++]=Xi,Xi=e,Yi=t}function rs(e,t,n){$i[Ji++]=es,$i[Ji++]=ts,$i[Ji++]=Zi,Zi=e;var r=es;e=ts;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,es=1<<32-ot(t)+i|n<<i|r,ts=s+e}else es=1<<s|n<<i|r,ts=e}function is(e){null!==e.return&&(ns(e,1),rs(e,1,0))}function ss(e){for(;e===Xi;)Xi=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null;for(;e===Zi;)Zi=$i[--Ji],$i[Ji]=null,ts=$i[--Ji],$i[Ji]=null,es=$i[--Ji],$i[Ji]=null}var os=null,as=null,ls=!1,cs=null;function us(e,t){var n=Fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ds(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,os=e,as=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,os=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Fc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,os=e,as=null,!0);default:return!1}}function hs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function fs(e){if(ls){var t=as;if(t){var n=t;if(!ds(e,t)){if(hs(e))throw Error(s(418));t=ci(n.nextSibling);var r=os;t&&ds(e,t)?us(r,n):(e.flags=-4097&e.flags|2,ls=!1,os=e)}}else{if(hs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ls=!1,os=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;os=e}function ms(e){if(e!==os)return!1;if(!ls)return ps(e),ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=as)){if(hs(e))throw gs(),Error(s(418));for(;t;)us(e,t),t=ci(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=os?ci(e.stateNode.nextSibling):null;return!0}function gs(){for(var e=as;e;)e=ci(e.nextSibling)}function ys(){as=os=null,ls=!1}function vs(e){null===cs?cs=[e]:cs.push(e)}var bs=w.ReactCurrentBatchConfig;function ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _s(e){return(0,e._init)(e._payload)}function Es(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&_s(s)===t.type)?((r=i(t,n.props)).ref=ws(e,t,n),r.return=e,r):((r=zc(n.type,n.key,n.props,null,e.mode,r)).ref=ws(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Vc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=zc(t.type,t.key,t.props,null,e.mode,n)).ref=ws(e,null,t),n.return=e,n;case _:return(t=Hc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Vc(t,e.mode,n,null)).return=e,t;xs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:d(e,t,n,r,null);xs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,i,null);xs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),ls&&ns(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return ls&&ns(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ls&&ns(i,m),c}function g(i,a,l,c){var u=O(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ls&&ns(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return ls&&ns(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),ls&&ns(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&_s(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=ws(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Vc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=zc(o.type,o.key,o.props,null,r.mode,l)).ref=ws(r,s,o),l.return=r,r=l)}return a(r);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Hc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(O(o))return g(r,s,o,l);xs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=qc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ns=Es(!0),ks=Es(!1),Cs=Si(null),Ss=null,Ts=null,Is=null;function As(){Is=Ts=Ss=null}function js(e){var t=Cs.current;Ti(Cs),e._currentValue=t}function Ps(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rs(e,t){Ss=e,Is=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Na=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===Ss)throw Error(s(308));Ts=e,Ss.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Os=null;function Ls(e){null===Os?Os=[e]:Os.push(e)}function Fs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ls(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ms(e,r)}function Ms(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Us=!1;function zs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ms(e,n)}return null===(i=r.interleaved)?(t.next=t,Ls(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ms(e,n)}function Hs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Gs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ks(e,t,n,r){var i=e.updateQueue;Us=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:Us=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Bl|=o,e.lanes=o,e.memoizedState=d}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Qs={},Xs=Si(Qs),Ys=Si(Qs),$s=Si(Qs);function Zs(e){if(e===Qs)throw Error(s(174));return e}function eo(e,t){switch(Ai($s,t),Ai(Ys,e),Ai(Xs,Qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Xs),Ai(Xs,t)}function to(){Ti(Xs),Ti(Ys),Ti($s)}function no(e){Zs($s.current);var t=Zs(Xs.current),n=le(t,e.type);t!==n&&(Ai(Ys,e),Ai(Xs,n))}function ro(e){Ys.current===e&&(Ti(Xs),Ti(Ys))}var io=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=[];function ao(){for(var e=0;e<oo.length;e++)oo[e]._workInProgressVersionPrimary=null;oo.length=0}var lo=w.ReactCurrentDispatcher,co=w.ReactCurrentBatchConfig,uo=0,ho=null,fo=null,po=null,mo=!1,go=!1,yo=0,vo=0;function bo(){throw Error(s(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,i,o){if(uo=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?ia:sa,e=n(r,i),go){o=0;do{if(go=!1,yo=0,25<=o)throw Error(s(301));o+=1,po=fo=null,t.updateQueue=null,lo.current=oa,e=n(r,i)}while(go)}if(lo.current=ra,t=null!==fo&&null!==fo.next,uo=0,po=fo=ho=null,mo=!1,t)throw Error(s(300));return e}function _o(){var e=0!==yo;return yo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?ho.memoizedState=po=e:po=po.next=e,po}function No(){if(null===fo){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===po?ho.memoizedState:po.next;if(null!==t)po=t,fo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===po?ho.memoizedState=po=e:po=po.next=e}return po}function ko(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=No(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((uo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ho.lanes|=d,Bl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(Na=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ho.lanes|=o,Bl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=No(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(Na=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Io(e,t){var n=ho,r=No(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,Na=!0),r=r.queue,Vo(Po.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,Lo(9,jo.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(s(349));0!==(30&uo)||Ao(n,t,i)}return i}function Ao(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jo(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Do(e)}function Po(e,t,n){return n(function(){Ro(t)&&Do(e)})}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Do(e){var t=Ms(e,1);null!==t&&lc(t,e,1,-1)}function Oo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,ho,e),[t.memoizedState,e]}function Lo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null,stores:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return No().memoizedState}function Mo(e,t,n,r){var i=Eo();ho.flags|=e,i.memoizedState=Lo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=No();r=void 0===r?null:r;var s=void 0;if(null!==fo){var o=fo.memoizedState;if(s=o.destroy,null!==r&&wo(r,o.deps))return void(i.memoizedState=Lo(t,n,s,r))}ho.flags|=e,i.memoizedState=Lo(1|t,n,s,r)}function zo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Uo(2048,8,e,t)}function Bo(e,t){return Uo(4,2,e,t)}function qo(e,t){return Uo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,Ho.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&uo)?(e.baseState&&(e.baseState=!1,Na=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ho.lanes|=n,Bl|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=co.transition;co.transition={};try{e(!1),t()}finally{bt=n,co.transition=r}}function $o(){return No().memoizedState}function Jo(e,t,n){var r=ac(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ea(e))ta(t,n);else if(null!==(n=Fs(e,t,n,r))){lc(n,e,r,oc()),na(n,t,r)}}function Zo(e,t,n){var r=ac(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ea(e))ta(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ls(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(gi){}null!==(n=Fs(e,t,i,r))&&(lc(n,e,r,i=oc()),na(n,t,r))}}function ea(e){var t=e.alternate;return e===ho||null!==t&&t===ho}function ta(e,t){go=mo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function na(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var ra={readContext:Ds,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},ia={readContext:Ds,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,ho,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Oo,useDebugValue:Ko,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Yo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ho,i=Eo();if(ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ol)throw Error(s(349));0!==(30&uo)||Ao(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Po.bind(null,r,o,e),[e]),r.flags|=2048,Lo(9,jo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ol.identifierPrefix;if(ls){var n=ts;t=":"+t+"R"+(n=(es&~(1<<32-ot(es)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sa={readContext:Ds,useCallback:Wo,useContext:Ds,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Bo,useLayoutEffect:qo,useMemo:Qo,useReducer:Co,useRef:Fo,useState:function(){return Co(ko)},useDebugValue:Ko,useDeferredValue:function(e){return Xo(No(),fo.memoizedState,e)},useTransition:function(){return[Co(ko)[0],No().memoizedState]},useMutableSource:To,useSyncExternalStore:Io,useId:$o,unstable_isNewReconciler:!1},oa={readContext:Ds,useCallback:Wo,useContext:Ds,useEffect:Vo,useImperativeHandle:Go,useInsertionEffect:Bo,useLayoutEffect:qo,useMemo:Qo,useReducer:So,useRef:Fo,useState:function(){return So(ko)},useDebugValue:Ko,useDeferredValue:function(e){var t=No();return null===fo?t.memoizedState=e:Xo(t,fo.memoizedState,e)},useTransition:function(){return[So(ko)[0],No().memoizedState]},useMutableSource:To,useSyncExternalStore:Io,useId:$o,unstable_isNewReconciler:!1};function aa(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function la(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=oc(),i=ac(e),s=Bs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(lc(t,e,i,r),Hs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=oc(),i=ac(e),s=Bs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(lc(t,e,i,r),Hs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=oc(),r=ac(e),i=Bs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qs(e,i,r))&&(lc(t,e,r,n),Hs(t,e,r))}};function ua(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function da(e,t,n){var r=!1,i=ji,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Li(t)?Di:Pi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Oi(e,i):ji),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Li(t)?Di:Pi.current,i.context=Oi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(la(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),Ks(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=Bs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,$l=r),ga(0,t)},n}function ba(e,t,n){(n=Bs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ga(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ya;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function xa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bs(-1,1)).tag=2,qs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Ea=w.ReactCurrentOwner,Na=!1;function ka(e,t,n,r){t.child=null===e?ks(t,null,n,r):Ns(t,e.child,n,r)}function Ca(e,t,n,r,i){n=n.render;var s=t.ref;return Rs(t,i),r=xo(e,t,n,r,s,i),n=_o(),null===e||Na?(ls&&n&&is(t),t.flags|=1,ka(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xa(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Xa(e,t,i)}return t.flags|=1,(e=Uc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(Na=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Xa(e,t,i);0!==(131072&e.flags)&&(Na=!0)}}return ja(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ul,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ul,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Ul,Ml),Ml|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Ul,Ml),Ml|=r;return ka(e,t,i,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ja(e,t,n,r,i){var s=Li(n)?Di:Pi.current;return s=Oi(t,s),Rs(t,i),n=xo(e,t,n,r,s,i),r=_o(),null===e||Na?(ls&&r&&is(t),t.flags|=1,ka(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Xa(e,t,i))}function Pa(e,t,n,r,i){if(Li(n)){var s=!0;zi(t)}else s=!1;if(Rs(t,i),null===t.stateNode)Qa(e,t),da(t,n,r),fa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ds(c):c=Oi(t,c=Li(n)?Di:Pi.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&ha(t,o,r,c),Us=!1;var h=t.memoizedState;o.state=h,Ks(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ri.current||Us?("function"===typeof u&&(la(t,n,u,r),l=t.memoizedState),(a=Us||ua(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Vs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:aa(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Oi(t,l=Li(n)?Di:Pi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&ha(t,o,r,l),Us=!1,h=t.memoizedState,o.state=h,Ks(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ri.current||Us?("function"===typeof f&&(la(t,n,f,r),p=t.memoizedState),(c=Us||ua(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,s,i)}function Ra(e,t,n,r,i,s){Aa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Vi(t,n,!1),Xa(e,t,s);r=t.stateNode,Ea.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ns(t,e.child,null,s),t.child=Ns(t,null,a,s)):ka(e,t,a,s),t.memoizedState=r.state,i&&Vi(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),eo(e,t.containerInfo)}function Oa(e,t,n,r,i){return ys(),vs(i),t.flags|=256,ka(e,t,n,r),t.child}var La,Fa,Ma,Ua,za={dehydrated:null,treeContext:null,retryLane:0};function Va(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(io,1&o),null===e)return fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,i,0,null),e=Vc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Va(n),t.memoizedState=za,e):qa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ha(e,t,a,r=ma(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bc({mode:"visible",children:r.children},i,0,null),(o=Vc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ns(t,e.child,null,a),t.child.memoizedState=Va(a),t.memoizedState=za,o);if(0===(1&t.mode))return Ha(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ha(e,t,a,r=ma(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),Na||l){if(null!==(r=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ms(e,i),lc(r,e,i,-1))}return xc(),Ha(e,t,a,r=ma(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,as=ci(i.nextSibling),os=t,ls=!0,cs=null,null!==e&&($i[Ji++]=es,$i[Ji++]=ts,$i[Ji++]=Zi,es=e.id,ts=e.overflow,Zi=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Uc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Uc(r,a):(a=Vc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Va(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,i}return e=(a=e.child).sibling,i=Uc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ha(e,t,n,r){return null!==r&&vs(r),Ns(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ga(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ps(e.return,t,n)}function Ka(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ka(e,t,r.children,n),0!==(2&(r=io.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ga(e,n,t);else if(19===e.tag)Ga(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(io,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,s);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $a(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(ss(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(t),null;case 1:case 17:return Li(t.type)&&Fi(),$a(t),null;case 3:return r=t.stateNode,to(),Ti(Ri),Ti(Pi),ao(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ms(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==cs&&(hc(cs),cs=null))),Fa(e,t),$a(t),null;case 5:ro(t);var i=Zs($s.current);if(n=t.type,null!==e&&null!=t.stateNode)Ma(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return $a(t),null}if(e=Zs(Xs.current),ms(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Ur(Or[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $a(t),null;case 6:if(e&&null!=t.stateNode)Ua(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Zs($s.current),Zs(Xs.current),ms(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=os))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return $a(t),null;case 13:if(Ti(io),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ls&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))gs(),ys(),t.flags|=98560,o=!1;else if(o=ms(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fi]=t}else ys(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$a(t),o=!1}else null!==cs&&(hc(cs),cs=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===zl&&(zl=3):xc())),null!==t.updateQueue&&(t.flags|=4),$a(t),null);case 4:return to(),Fa(e,t),null===e&&Br(t.stateNode.containerInfo),$a(t),null;case 10:return js(t.type._context),$a(t),null;case 19:if(Ti(io),null===(o=t.memoizedState))return $a(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ya(o,!1);else{if(0!==zl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=so(e))){for(t.flags|=128,Ya(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Ql&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ya(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ls)return $a(t),null}else 2*$e()-o.renderingStartTime>Ql&&1073741824!==n&&(t.flags|=128,r=!0,Ya(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=io.current,Ai(io,r?1&n|2:1&n),t):($a(t),null);case 22:case 23:return yc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&($a(t),6&t.subtreeFlags&&(t.flags|=8192)):$a(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ss(t),t.tag){case 1:return Li(t.type)&&Fi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return to(),Ti(Ri),Ti(Pi),ao(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ro(t),null;case 13:if(Ti(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ys()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(io),null;case 4:return to(),null;case 10:return js(t.type._context),null;case 22:case 23:return yc(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Fa=function(){},Ma=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Zs(Xs.current);var s,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ua=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var ol=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&sl(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[yi],delete t[vi],delete t[bi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&sl(n,t,o),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(s(160));vl(o,a,i),ml=null,gl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(gi){Ac(i,t,gi)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),_l(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(g){Ac(e,e.return,g)}try{al(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:wl(t,e),_l(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),_l(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Ac(e,e.return,g)}}break;case 6:if(wl(t,e),_l(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Ac(e,e.return,g)}}break;case 3:if(wl(t,e),_l(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:wl(t,e),_l(e);break;case 13:wl(t,e),_l(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=$e())),4&r&&bl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||d,wl(t,e),tl=u):wl(t,e),_l(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(rl=e,d=e.child;null!==d;){for(h=rl=d;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){Cl(h);continue}}null!==p?(p.return=f,rl=p):Cl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ac(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wl(t,e),_l(e),4&r&&bl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(dl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),pl(e,hl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;fl(e,hl(e),o);break;default:throw Error(s(161))}}catch(hi){Ac(e,e.return,hi)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function El(e,t,n){rl=e,Nl(e,t,n)}function Nl(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||el;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=o,(tl=l)&&!c)for(rl=i;null!==rl;)l=(o=rl).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,rl=l):Sl(i);for(;null!==s;)rl=s,Nl(s,t,n),s=s.sibling;rl=i,el=a,tl=c}kl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,rl=s):kl(e)}}function kl(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:aa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ws(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}tl||512&t.flags&&cl(t)}catch(ki){Ac(t,t.return,ki)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function Cl(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Sl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(hi){Ac(t,n,hi)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(hi){Ac(t,i,hi)}}var s=t.return;try{cl(t)}catch(hi){Ac(t,s,hi)}break;case 5:var o=t.return;try{cl(t)}catch(hi){Ac(t,o,hi)}}}catch(hi){Ac(t,t.return,hi)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Tl,Il=Math.ceil,Al=w.ReactCurrentDispatcher,jl=w.ReactCurrentOwner,Pl=w.ReactCurrentBatchConfig,Dl=0,Ol=null,Ll=null,Fl=0,Ml=0,Ul=Si(0),zl=0,Vl=null,Bl=0,ql=0,Hl=0,Gl=null,Kl=null,Wl=0,Ql=1/0,Xl=null,Yl=!1,$l=null,Jl=null,Zl=!1,ec=null,tc=0,nc=0,rc=null,ic=-1,sc=0;function oc(){return 0!==(6&Dl)?$e():-1!==ic?ic:ic=$e()}function ac(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Fl?Fl&-Fl:null!==bs.transition?(0===sc&&(sc=mt()),sc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function lc(e,t,n,r){if(50<nc)throw nc=0,rc=null,Error(s(185));yt(e,n,r),0!==(2&Dl)&&e===Ol||(e===Ol&&(0===(2&Dl)&&(ql|=n),4===zl&&fc(e,Fl)),cc(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(Ql=$e()+500,qi&&Ki()))}function cc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Ol?Fl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){qi=!0,Gi(e)}(pc.bind(null,e)):Gi(pc.bind(null,e)),oi(function(){0===(6&Dl)&&Ki()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,uc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uc(e,t){if(ic=-1,sc=0,0!==(6&Dl))throw Error(s(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ol?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=_c(e,r);else{t=r;var i=Dl;Dl|=2;var o=wc();for(Ol===e&&Fl===t||(Xl=null,Ql=$e()+500,vc(e,t));;)try{Nc();break}catch(l){bc(e,l)}As(),Al.current=o,Dl=i,null!==Ll?t=0:(Ol=null,Fl=0,t=zl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=dc(e,i))),1===t)throw n=Vl,vc(e,0),fc(e,r),cc(e,$e()),n;if(6===t)fc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=_c(e,r))&&(0!==(o=pt(e))&&(r=o,t=dc(e,o))),1===t))throw n=Vl,vc(e,0),fc(e,r),cc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sc(e,Kl,Xl);break;case 3:if(fc(e,r),(130023424&r)===r&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){oc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sc.bind(null,e,Kl,Xl),t);break}Sc(e,Kl,Xl);break;case 4:if(fc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=ri(Sc.bind(null,e,Kl,Xl),r);break}Sc(e,Kl,Xl);break;default:throw Error(s(329))}}}return cc(e,$e()),e.callbackNode===n?uc.bind(null,e):null}function dc(e,t){var n=Gl;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),2!==(e=_c(e,t))&&(t=Kl,Kl=n,null!==t&&hc(t)),e}function hc(e){null===Kl?Kl=e:Kl.push.apply(Kl,e)}function fc(e,t){for(t&=~Hl,t&=~ql,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function pc(e){if(0!==(6&Dl))throw Error(s(327));Tc();var t=ht(e,0);if(0===(1&t))return cc(e,$e()),null;var n=_c(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=dc(e,r))}if(1===n)throw n=Vl,vc(e,0),fc(e,t),cc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Kl,Xl),cc(e,$e()),null}function mc(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(Ql=$e()+500,qi&&Ki())}}function gc(e){null!==ec&&0===ec.tag&&0===(6&Dl)&&Tc();var t=Dl;Dl|=1;var n=Pl.transition,r=bt;try{if(Pl.transition=null,bt=1,e)return e()}finally{bt=r,Pl.transition=n,0===(6&(Dl=t))&&Ki()}}function yc(){Ml=Ul.current,Ti(Ul)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ll)for(n=Ll.return;null!==n;){var r=n;switch(ss(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fi();break;case 3:to(),Ti(Ri),Ti(Pi),ao();break;case 5:ro(r);break;case 4:to();break;case 13:case 19:Ti(io);break;case 10:js(r.type._context);break;case 22:case 23:yc()}n=n.return}if(Ol=e,Ll=e=Uc(e.current,null),Fl=Ml=t,zl=0,Vl=null,Hl=ql=Bl=0,Kl=Gl=null,null!==Os){for(t=0;t<Os.length;t++)if(null!==(r=(n=Os[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Os=null}return e}function bc(e,t){for(;;){var n=Ll;try{if(As(),lo.current=ra,mo){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}mo=!1}if(uo=0,po=fo=ho=null,go=!1,yo=0,jl.current=null,null===n||null===n.return){zl=1,Vl=t,Ll=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Fl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=xa(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,t),1&p.mode&&wa(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){wa(o,u,t),xc();break e}c=Error(s(426))}else if(ls&&1&l.mode){var y=xa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),_a(y,a,l,0,t),vs(pa(c,l));break e}}o=c=pa(c,l),4!==zl&&(zl=2),null===Gl?Gl=[o]:Gl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Gs(o,va(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Gs(o,ba(o,l,t));break e}}o=o.return}while(null!==o)}Cc(n)}catch(Ii){t=Ii,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function wc(){var e=Al.current;return Al.current=ra,null===e?ra:e}function xc(){0!==zl&&3!==zl&&2!==zl||(zl=4),null===Ol||0===(268435455&Bl)&&0===(268435455&ql)||fc(Ol,Fl)}function _c(e,t){var n=Dl;Dl|=2;var r=wc();for(Ol===e&&Fl===t||(Xl=null,vc(e,t));;)try{Ec();break}catch(i){bc(e,i)}if(As(),Dl=n,Al.current=r,null!==Ll)throw Error(s(261));return Ol=null,Fl=0,zl}function Ec(){for(;null!==Ll;)kc(Ll)}function Nc(){for(;null!==Ll&&!Xe();)kc(Ll)}function kc(e){var t=Tl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?Cc(e):Ll=t,jl.current=null}function Cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Ml)))return void(Ll=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return zl=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===zl&&(zl=5)}function Sc(e,t,n){var r=bt,i=Pl.transition;try{Pl.transition=null,bt=1,function(e,t,n,r){do{Tc()}while(null!==ec);if(0!==(6&Dl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ol&&(Ll=Ol=null,Fl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Zl||(Zl=!0,Oc(tt,function(){return Tc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Pl.transition,Pl.transition=null;var a=bt;bt=1;var l=Dl;Dl|=4,jl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Js){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:aa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Js){Ac(t,t.return,Js)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=ol,ol=!1}(e,n),xl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,El(n,e,i),Ye(),Dl=l,bt=a,Pl.transition=o}else e.current=n;if(Zl&&(Zl=!1,ec=e,tc=i),o=e.pendingLanes,0===o&&(Jl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),cc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Yl)throw Yl=!1,e=$l,$l=null,e;0!==(1&tc)&&0!==e.tag&&Tc(),o=e.pendingLanes,0!==(1&o)?e===rc?nc++:(nc=0,rc=e):nc=0,Ki()}(e,t,n,r)}finally{Pl.transition=i,bt=r}return null}function Tc(){if(null!==ec){var e=wt(tc),t=Pl.transition,n=bt;try{if(Pl.transition=null,bt=16>e?16:e,null===ec)var r=!1;else{if(e=ec,ec=null,tc=0,0!==(6&Dl))throw Error(s(331));var i=Dl;for(Dl|=4,rl=e.current;null!==rl;){var o=rl,a=o.child;if(0!==(16&rl.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var d=rl;switch(d.tag){case 0:case 11:case 15:al(8,d,o)}var h=d.child;if(null!==h)h.return=d,rl=h;else for(;null!==rl;){var f=(d=rl).sibling,p=d.return;if(ul(d),d===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,rl=a;else e:for(;null!==rl;){if(0!==(2048&(o=rl).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,rl=v;break e}rl=o.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(Ii){Ac(l,l.return,Ii)}if(l===a){rl=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,rl=x;break e}rl=l.return}}if(Dl=i,Ki(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(Ii){}r=!0}return r}finally{bt=n,Pl.transition=t}}return!1}function Ic(e,t,n){e=qs(e,t=va(0,t=pa(n,t),1),1),t=oc(),null!==e&&(yt(e,1,t),cc(e,t))}function Ac(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=qs(t,e=ba(t,e=pa(n,e),1),1),e=oc(),null!==t&&(yt(t,1,e),cc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=oc(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Fl&n)===n&&(4===zl||3===zl&&(130023424&Fl)===Fl&&500>$e()-Wl?vc(e,0):Hl|=n),cc(e,t)}function Pc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=oc();null!==(e=Ms(e,t))&&(yt(e,t,n),cc(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Pc(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Pc(e,n)}function Oc(e,t){return We(e,t)}function Lc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fc(e,t,n,r){return new Lc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=Fc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Mc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Vc(n.children,i,o,t);case N:a=8,i|=8;break;case k:return(e=Fc(12,n,t,2|i)).elementType=k,e.lanes=o,e;case I:return(e=Fc(13,n,t,i)).elementType=I,e.lanes=o,e;case A:return(e=Fc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Bc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case S:a=9;break e;case T:a=11;break e;case j:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Fc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Vc(e,t,n,r){return(e=Fc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Fc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function qc(e,t,n){return(e=Fc(6,e,null,t)).lanes=n,e}function Hc(e,t,n){return(t=Fc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kc(e,t,n,r,i,s,o,a,l){return e=new Gc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Fc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zs(s),e}function Wc(e){if(!e)return ji;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ui(e,n,t)}return t}function Qc(e,t,n,r,i,s,o,a,l){return(e=Kc(n,r,!0,e,0,s,0,a,l)).context=Wc(null),n=e.current,(s=Bs(r=oc(),i=ac(n))).callback=void 0!==t&&null!==t?t:null,qs(n,s,i),e.current.lanes=i,yt(e,i,r),cc(e,r),e}function Xc(e,t,n,r){var i=t.current,s=oc(),o=ac(i);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qs(i,t,o))&&(lc(e,i,o,s),Hs(e,i,o)),o}function Yc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)Na=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Na=!1,function(e,t,n){switch(t.tag){case 3:Da(t),ys();break;case 5:no(t);break;case 1:Li(t.type)&&zi(t);break;case 4:eo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Cs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(Ai(io,1&io.current),null!==(e=Xa(e,t,n))?e.sibling:null);Ai(io,1&io.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(io,io.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Xa(e,t,n)}(e,t,n);Na=0!==(131072&e.flags)}else Na=!1,ls&&0!==(1048576&t.flags)&&rs(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qa(e,t),e=t.pendingProps;var i=Oi(t,Pi.current);Rs(t,n),i=xo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,zi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zs(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,fa(t,r,e,n),t=Ra(null,t,r,!0,o,n)):(t.tag=0,ls&&o&&is(t),ka(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===j)return 14}return 2}(r),e=aa(r,e),i){case 0:t=ja(null,t,r,e,n);break e;case 1:t=Pa(null,t,r,e,n);break e;case 11:t=Ca(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,aa(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Pa(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Vs(e,t),Ks(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Oa(e,t,r,n,i=pa(Error(s(423)),t));break e}if(r!==i){t=Oa(e,t,r,n,i=pa(Error(s(424)),t));break e}for(as=ci(t.stateNode.containerInfo.firstChild),os=t,ls=!0,cs=null,n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ys(),r===i){t=Xa(e,t,n);break e}ka(e,t,r,n)}t=t.child}return t;case 5:return no(t),null===e&&fs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Aa(e,t),ka(e,t,a,n),t.child;case 6:return null===e&&fs(t),null;case 13:return Ba(e,t,n);case 4:return eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ns(t,null,r,n):ka(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:aa(r,i),n);case 7:return ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ai(Cs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ri.current){t=Xa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Bs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ps(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ps(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ka(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Rs(t,n),r=r(i=Ds(i)),t.flags|=1,ka(e,t,r,n),t.child;case 14:return i=aa(r=t.type,t.pendingProps),Sa(e,t,r,i=aa(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:aa(r,i),Qa(e,t),t.tag=1,Li(r)?(e=!0,zi(t)):e=!1,Rs(t,n),da(t,r,i),fa(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Zc="function"===typeof reportError?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}function tu(e){this._internalRoot=e}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(){}function su(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Yc(o);a.call(e)}}Xc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Yc(o);s.call(e)}}var o=Qc(t,r,e,0,null,!1,0,"",iu);return e._reactRootContainer=o,e[mi]=o.current,Br(8===e.nodeType?e.parentNode:e),gc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Yc(l);a.call(e)}}var l=Kc(e,0,!1,null,0,!1,0,"",iu);return e._reactRootContainer=l,e[mi]=l.current,Br(8===e.nodeType?e.parentNode:e),gc(function(){Xc(t,l,n,r)}),l}(n,t,e,i,r);return Yc(o)}tu.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Xc(e,t,null,null)},tu.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gc(function(){Xc(null,e,null,null)}),t[mi]=null}},tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),cc(t,$e()),0===(6&Dl)&&(Ql=$e()+500,Ki()))}break;case 13:gc(function(){var t=Ms(e,1);if(null!==t){var n=oc();lc(t,e,1,n)}}),Jc(e,1)}},_t=function(e){if(13===e.tag){var t=Ms(e,134217728);if(null!==t)lc(t,e,134217728,oc());Jc(e,134217728)}},Et=function(e){if(13===e.tag){var t=ac(e),n=Ms(e,t);if(null!==n)lc(n,e,t,oc());Jc(e,t)}},Nt=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(s(90));W(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=mc,Ie=gc;var ou={usingClientEntryPoint:!1,Events:[xi,_i,Ei,Ce,Se,mc]},au={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{it=cu.inject(lu),st=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nu(e))throw Error(s(299));var n=!1,r="",i=Zc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Kc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Br(8===e.nodeType?e.parentNode:e),new eu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return gc(e)},t.hydrate=function(e,t,n){if(!ru(t))throw Error(s(200));return su(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Zc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new tu(t)},t.render=function(e,t,n){if(!ru(t))throw Error(s(200));return su(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(s(40));return!!e._reactRootContainer&&(gc(function(){su(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=mc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ru(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return su(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(u(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new h;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(e){return function(e){const t=u(e);return d.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return d.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const m=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,g=()=>{try{return m()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/portal",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t,n;return null===(n=null===(t=g())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},v=e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},b=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config},w=e=>{var t;return null===(t=g())||void 0===t?void 0:t["_".concat(e)]};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[f(JSON.stringify({alg:"none",type:"JWT"})),f(JSON.stringify(s)),""].join(".")}function E(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function N(){var e;const t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(T,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new C(n,s,t)}}const T=/\{\$([^}]+)}/g;function I(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!I(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A(e){return null!==e&&"object"===typeof e}function j(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class D{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=O),void 0===r.error&&(r.error=O),void 0===r.complete&&(r.complete=O);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O(){}function L(e){return e&&e._delegate?e._delegate:e}class F{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const M="[DEFAULT]";class U{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:M})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===M?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?e:M:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class z{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new U(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const V=[];var B;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(B||(B={}));const q={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},H=B.INFO,G={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},K=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=G[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class W{constructor(e){this.name=e,this._logLevel=H,this._logHandler=K,this._userLogHandler=null,V.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...t),this._logHandler(this,B.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...t),this._logHandler(this,B.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.INFO,...t),this._logHandler(this,B.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.WARN,...t),this._logHandler(this,B.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...t),this._logHandler(this,B.ERROR,...t)}}let Q,X;const Y=new WeakMap,$=new WeakMap,J=new WeakMap,Z=new WeakMap,ee=new WeakMap;let te={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $.get(e);if("objectStoreNames"===t)return e.objectStoreNames||J.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ie(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ne(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(X||(X=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(se(this),n),ie(Y.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ie(e.apply(se(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(se(this),t,...r);return J.set(s,t.sort?t.sort():[t]),ie(s)}}function re(e){return"function"===typeof e?ne(e):(e instanceof IDBTransaction&&function(e){if($.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});$.set(e,t)}(e),t=e,(Q||(Q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,te):e);var t}function ie(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ie(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Y.set(t,e)}).catch(()=>{}),ee.set(t,e),t}(e);if(Z.has(e))return Z.get(e);const t=re(e);return t!==e&&(Z.set(e,t),ee.set(t,e)),t}const se=e=>ee.get(e);const oe=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],le=new Map;function ce(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(le.get(t))return le.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!oe.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return le.set(t,s),s}te=(e=>c(c({},e),{},{get:(t,n,r)=>ce(t,n)||e.get(t,n,r),has:(t,n)=>!!ce(t,n)||e.has(t,n)}))(te);class ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const de="@firebase/app",he="0.9.13",fe=new W("@firebase/app"),pe="@firebase/app-compat",me="@firebase/analytics-compat",ge="@firebase/analytics",ye="@firebase/app-check-compat",ve="@firebase/app-check",be="@firebase/auth",we="@firebase/auth-compat",xe="@firebase/database",_e="@firebase/database-compat",Ee="@firebase/functions",Ne="@firebase/functions-compat",ke="@firebase/installations",Ce="@firebase/installations-compat",Se="@firebase/messaging",Te="@firebase/messaging-compat",Ie="@firebase/performance",Ae="@firebase/performance-compat",je="@firebase/remote-config",Pe="@firebase/remote-config-compat",Re="@firebase/storage",De="@firebase/storage-compat",Oe="@firebase/firestore",Le="@firebase/firestore-compat",Fe="firebase",Me="[DEFAULT]",Ue={[de]:"fire-core",[pe]:"fire-core-compat",[ge]:"fire-analytics",[me]:"fire-analytics-compat",[ve]:"fire-app-check",[ye]:"fire-app-check-compat",[be]:"fire-auth",[we]:"fire-auth-compat",[xe]:"fire-rtdb",[_e]:"fire-rtdb-compat",[Ee]:"fire-fn",[Ne]:"fire-fn-compat",[ke]:"fire-iid",[Ce]:"fire-iid-compat",[Se]:"fire-fcm",[Te]:"fire-fcm-compat",[Ie]:"fire-perf",[Ae]:"fire-perf-compat",[je]:"fire-rc",[Pe]:"fire-rc-compat",[Re]:"fire-gcs",[De]:"fire-gcs-compat",[Oe]:"fire-fst",[Le]:"fire-fst-compat","fire-js":"fire-js",[Fe]:"fire-js-all"},ze=new Map,Ve=new Map;function Be(e,t){try{e.container.addComponent(t)}catch(n){fe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function qe(e){const t=e.name;if(Ve.has(t))return fe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ve.set(t,e);for(const n of ze.values())Be(n,e);return!0}function He(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ge=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ke{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ge.create("app-deleted",{appName:this._name})}}const We="9.23.0";function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Me,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ge.create("bad-app-name",{appName:String(i)});if(n||(n=b()),!n)throw Ge.create("no-options");const s=ze.get(i);if(s){if(I(n,s.options)&&I(r,s.config))return s;throw Ge.create("duplicate-app",{appName:i})}const o=new z(i);for(const l of Ve.values())o.addComponent(l);const a=new Ke(n,r,o);return ze.set(i,a),a}function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me;const t=ze.get(e);if(!t&&e===Me&&b())return Qe();if(!t)throw Ge.create("no-app",{appName:e});return t}function Ye(e,t,n){var r;let i=null!==(r=Ue[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void fe.warn(e.join(" "))}qe(new F("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const $e="firebase-heartbeat-store";let Je=null;function Ze(){return Je||(Je=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ie(o);return r&&o.addEventListener("upgradeneeded",e=>{r(ie(o.result),e.oldVersion,e.newVersion,ie(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($e)}}).catch(e=>{throw Ge.create("idb-open",{originalErrorMessage:e.message})})),Je}async function et(e,t){try{const n=(await Ze()).transaction($e,"readwrite"),r=n.objectStore($e);await r.put(t,tt(e)),await n.done}catch(n){if(n instanceof C)fe.warn(n.message);else{const e=Ge.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});fe.warn(e.message)}}}function tt(e){return"".concat(e.name,"!").concat(e.options.appId)}class nt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new it(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=rt();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=rt(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),st(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),st(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function rt(){return(new Date).toISOString().substring(0,10)}class it{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!k()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ze();return await t.transaction($e).objectStore($e).get(tt(e))}catch(t){if(t instanceof C)fe.warn(t.message);else{const e=Ge.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});fe.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function st(e){return f(JSON.stringify({version:2,heartbeats:e})).length}var ot;ot="",qe(new F("platform-logger",e=>new ue(e),"PRIVATE")),qe(new F("heartbeat",e=>new nt(e),"PRIVATE")),Ye(de,he,ot),Ye(de,he,"esm2017"),Ye("fire-js","");Ye("firebase","9.23.0","app");function at(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ct=lt,ut=new S("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dt=new W("@firebase/auth");function ht(e){if(dt.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dt.error("Auth (".concat(We,"): ").concat(e),...n)}}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gt(e,...n)}function pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gt(e,...n)}function mt(e,t,n){const r=Object.assign(Object.assign({},ct()),{[t]:n});return new S("auth","Firebase",r).create(t,{appName:e.name})}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ut.create(e,...n)}function yt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw gt(t,...r)}}function vt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ht(t),new Error(t)}function bt(e,t){e||vt(t)}function wt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xt(){return"http:"===_t()||"https:"===_t()}function _t(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Et(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(xt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Nt{constructor(e,t){this.shortDelay=e,this.longDelay=t,bt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Et()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kt(e,t){bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ct{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const St={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Tt=new Nt(3e4,6e4);function It(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function At(e,t,n,r){return jt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=j(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ct.fetch()(Rt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))})}async function jt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},St),t);try{const t=new Dt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ot(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ot(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ot(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ot(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw mt(e,a,o);ft(e,a)}}catch(i){if(i instanceof C)throw i;ft(e,"network-request-failed",{message:String(i)})}}async function Pt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await At(e,t,n,r,i);return"mfaPendingCredential"in s&&ft(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Rt(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?kt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class Dt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pt(this.auth,"network-request-failed")),Tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ot(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pt(e,t,r);return i.customData._tokenResponse=n,i}function Lt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Ft(e){return 1e3*Number(e)}function Mt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(ht("Failed to decode base64 JWT payload"),null)}catch(i){return ht("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Ut(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof C&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class zt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Vt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lt(this.lastLoginAt),this.creationTime=Lt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ut(e,async function(e,t){return At(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));yt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map(e=>{var{providerId:t}=e,n=at(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class qt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt("undefined"!==typeof e.idToken,"internal-error"),yt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Mt(e);return yt(t,"internal-error"),yt("undefined"!==typeof t.exp,"internal-error"),yt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yt(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await jt(e,{},async()=>{const n=j({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Rt(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ct.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new qt;return n&&(yt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(yt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(yt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qt,this.toJSON())}_performRefresh(){return vt("not implemented")}}function Ht(e,t){yt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Gt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=at(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ut(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=L(e),r=await n.getIdToken(t),i=Mt(r);yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Lt(Ft(i.auth_time)),issuedAtTime:Lt(Ft(i.iat)),expirationTime:Lt(Ft(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=L(e);await Bt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Bt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ut(this,async function(e,t){return At(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;yt(v&&_,e,"internal-error");const E=qt.fromJSON(this.name,_);yt("string"===typeof v,e,"internal-error"),Ht(u,e.name),Ht(d,e.name),yt("boolean"===typeof b,e,"internal-error"),yt("boolean"===typeof w,e,"internal-error"),Ht(h,e.name),Ht(f,e.name),Ht(p,e.name),Ht(m,e.name),Ht(g,e.name),Ht(y,e.name);const N=new Gt({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(N.providerData=x.map(e=>Object.assign({},e))),m&&(N._redirectEventId=m),N}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new qt;r.updateFromServerResponse(t);const i=new Gt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Bt(i),i}}const Kt=new Map;function Wt(e){bt(e instanceof Function,"Expected a class definition");let t=Kt.get(e);return t?(bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kt.set(e,t),t)}class Qt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Qt.type="NONE";const Xt=Qt;function Yt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class $t{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Yt(this.userKey,r.apiKey,i),this.fullPersistenceKey=Yt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new $t(Wt(Xt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Wt(Xt);const s=Yt(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Gt._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new $t(i,e,n)):new $t(i,e,n)}}function Jt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zt(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(sn(t))return"Blackberry";if(on(t))return"Webos";if(en(t))return"Safari";if((t.includes("chrome/")||tn(t))&&!t.includes("edge/"))return"Chrome";if(rn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/firefox\//i.test(e)}function en(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/crios\//i.test(e)}function nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/iemobile/i.test(e)}function rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/android/i.test(e)}function sn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/blackberry/i.test(e)}function on(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/webos/i.test(e)}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ln(){return function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E();return an(e)||rn(e)||on(e)||sn(e)||/windows phone/i.test(e)||nn(e)}function un(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Jt(E());break;case"Worker":t="".concat(Jt(E()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(We,"/").concat(r)}async function dn(e,t){return At(e,"GET","/v2/recaptchaConfig",It(e,t))}function hn(e){return void 0!==e&&void 0!==e.enterprise}class fn{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function pn(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function mn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class gn{constructor(e){this.type="recaptcha-enterprise",this.auth=wn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;hn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{dn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new fn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&hn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));pn("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function yn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new gn(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class vn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class bn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xn(this),this.idTokenSubscription=new xn(this),this.beforeStateQueue=new vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ut,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?L(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Wt(e))})}async initializeRecaptchaConfig(){const e=await dn(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new fn(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new gn(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new S("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wt(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Wt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return yt(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(dt.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dt.warn("Auth (".concat(We,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function wn(e){return L(e)}class xn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new D(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(e,t,n){const r=wn(e);yt(r._canInitEmulator,r,"emulator-config-failed"),yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=En(t),{host:o,port:a}=function(e){const t=En(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Nn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Nn(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function En(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Nn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class kn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vt("not implemented")}_getIdTokenResponse(e){return vt("not implemented")}_linkToIdToken(e,t){return vt("not implemented")}_getReauthenticationResolver(e){return vt("not implemented")}}async function Cn(e,t){return At(e,"POST","/v1/accounts:update",t)}async function Sn(e,t){return Pt(e,"POST","/v1/accounts:signInWithPassword",It(e,t))}class Tn extends kn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Tn(e,t,"password")}static _fromEmailAndCode(e,t){return new Tn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await yn(e,n,"signInWithPassword");return Sn(e,t)}return Sn(e,n).catch(async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await yn(e,n,"signInWithPassword");return Sn(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",It(e,t))}(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Cn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",It(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function In(e,t){return Pt(e,"POST","/v1/accounts:signInWithIdp",It(e,t))}class An extends kn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new An(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=at(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new An(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return In(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,In(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,In(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=j(t)}return e}}const jn={USER_NOT_FOUND:"user-not-found"};class Pn extends kn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Pn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Pn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",It(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",It(e,t));if(n.temporaryProof)throw Ot(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",It(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),jn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Pn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Rn{constructor(e){var t,n,r,i,s,o;const a=P(R(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);yt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=P(R(e)).link,n=t?P(R(t)).deep_link_id:null,r=P(R(e)).deep_link_id;return(r?P(R(r)).link:null)||r||n||t||e}(e);try{return new Rn(t)}catch(n){return null}}}class Dn{constructor(){this.providerId=Dn.PROVIDER_ID}static credential(e,t){return Tn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Rn.parseLink(t);return yt(n,"argument-error"),Tn._fromEmailAndCode(e,n.code,n.tenantId)}}Dn.PROVIDER_ID="password",Dn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Dn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class On{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ln extends On{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fn extends Ln{constructor(){super("facebook.com")}static credential(e){return An._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Fn.credential(t.oauthAccessToken)}catch(n){return null}}}Fn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fn.PROVIDER_ID="facebook.com";class Mn extends Ln{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return An._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Mn.credential(n,r)}catch(i){return null}}}Mn.GOOGLE_SIGN_IN_METHOD="google.com",Mn.PROVIDER_ID="google.com";class Un extends Ln{constructor(){super("github.com")}static credential(e){return An._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Un.credential(t.oauthAccessToken)}catch(n){return null}}}Un.GITHUB_SIGN_IN_METHOD="github.com",Un.PROVIDER_ID="github.com";class zn extends Ln{constructor(){super("twitter.com")}static credential(e,t){return An._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return zn.credential(n,r)}catch(i){return null}}}async function Vn(e,t){return Pt(e,"POST","/v1/accounts:signUp",It(e,t))}zn.TWITTER_SIGN_IN_METHOD="twitter.com",zn.PROVIDER_ID="twitter.com";class Bn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Gt._fromIdTokenResponse(e,n,r),s=qn(n);return new Bn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=qn(n);return new Bn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function qn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Hn extends C{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Hn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Hn(e,t,n,r)}}function Gn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Hn._fromErrorAndOperation(e,n,t,r);throw n})}async function Kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ut(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Bn._forOperation(e,"link",r)}async function Wn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Ut(e,Gn(r,i,t,e),n);yt(s.idToken,r,"internal-error");const o=Mt(s.idToken);yt(o,r,"internal-error");const{sub:a}=o;return yt(e.uid===a,r,"user-mismatch"),Bn._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&ft(r,"user-mismatch"),s}}async function Qn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Gn(e,r,t),s=await Bn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Xn(e,t){return Qn(wn(e),t)}function Yn(e){return L(e).signOut()}new WeakMap;const $n="__sak";class Jn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($n,"1"),this.storage.removeItem($n),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Zn extends Jn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=E();return en(e)||an(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=cn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);ln()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zn.type="LOCAL";const er=Zn;class tr extends Jn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tr.type="SESSION";const nr=tr;class rr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new rr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}rr.receivers=[];class sr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=ir("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function or(){return window}function ar(){return"undefined"!==typeof or().WorkerGlobalScope&&"function"===typeof or().importScripts}const lr="firebaseLocalStorageDb",cr="firebaseLocalStorage",ur="fbase_key";class dr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hr(e,t){return e.transaction([cr],t?"readwrite":"readonly").objectStore(cr)}function fr(){const e=indexedDB.open(lr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(cr,{keyPath:ur})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(cr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(lr);return new dr(e).toPromise()}(),t(await fr()))})})}async function pr(e,t,n){const r=hr(e,!0).put({[ur]:t,value:n});return new dr(r).toPromise()}function mr(e,t){const n=hr(e,!0).delete(t);return new dr(n).toPromise()}class gr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await fr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ar()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rr._getInstance(ar()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new sr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fr();return await pr(e,$n,"1"),await mr(e,$n),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>pr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=hr(e,!1).get(t),r=await new dr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=hr(e,!1).getAll();return new dr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}gr.type="LOCAL";const yr=gr;mn("rcb"),new Nt(3e4,6e4);const vr="recaptcha";async function br(e,t,n){var r;const i=await n.verify();try{let s;if(yt("string"===typeof i,e,"argument-error"),yt(n.type===vr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){yt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return At(e,"POST","/v2/accounts/mfaEnrollment:start",It(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{yt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;yt(n,e,"missing-multi-factor-info");const o=await function(e,t){return At(e,"POST","/v2/accounts/mfaSignIn:start",It(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return At(e,"POST","/v1/accounts:sendVerificationCode",It(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class wr{constructor(e){this.providerId=wr.PROVIDER_ID,this.auth=wn(e)}verifyPhoneNumber(e,t){return br(this.auth,e,L(t))}static credential(e,t){return Pn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wr.credentialFromTaggedObject(t)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Pn._fromTokenResponse(n,r):null}}function xr(e,t){return t?Wt(t):(yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wr.PROVIDER_ID="phone",wr.PHONE_SIGN_IN_METHOD="phone";class _r extends kn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return In(e,this._buildIdpRequest())}_linkToIdToken(e,t){return In(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return In(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Er(e){return Qn(e.auth,new _r(e),e.bypassAuthState)}function Nr(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Wn(n,new _r(e),e.bypassAuthState)}async function kr(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Kn(n,new _r(e),e.bypassAuthState)}class Cr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Er;case"linkViaPopup":case"linkViaRedirect":return kr;case"reauthViaPopup":case"reauthViaRedirect":return Nr;default:ft(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sr=new Nt(2e3,1e4);class Tr extends Cr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){bt(1===this.filter.length,"Popup operations only handle one event");const e=ir();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Sr.get())};e()}}Tr.currentPopupAction=null;const Ir=new Map;class Ar extends Cr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ir.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Rr(t),r=Pr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ir.set(this.auth._key(),e)}return this.bypassAuthState||Ir.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function jr(e,t){Ir.set(e._key(),t)}function Pr(e){return Wt(e._redirectPersistence)}function Rr(e){return Yt("pendingRedirect",e.config.apiKey,e.name)}async function Dr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=wn(e),i=xr(r,t),s=new Ar(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Or{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Fr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lr(e))}saveEventToCache(e){this.cachedEventUids.add(Lr(e)),this.lastProcessedEventTime=Date.now()}}function Lr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Fr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ur=/^https?/;async function zr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return At(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Vr(r))return}catch(n){}ft(e,"unauthorized-domain")}function Vr(e){const t=wt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ur.test(n))return!1;if(Mr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Br=new Nt(3e4,6e4);function qr(){const e=or().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Hr=null;function Gr(e){return Hr=Hr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{qr(),n(pt(e,"network-request-failed"))},timeout:Br.get()})}if(null===(i=null===(r=or().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=or().gapi)||void 0===s?void 0:s.load)){const t=mn("iframefcb");return or()[t]=()=>{gapi.load?o():n(pt(e,"network-request-failed"))},pn("https://apis.google.com/js/api.js?onload=".concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Hr=null,e})}(e),Hr}const Kr=new Nt(5e3,15e3),Wr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xr(e){const t=e.config;yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:We},i=Qr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(j(r).slice(1))}const Yr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $r{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Jr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Yr),{width:r.toString(),height:i.toString(),top:s,left:o}),c=E().toLowerCase();n&&(a=tn(c)?"_blank":n),Zt(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return an(arguments.length>0&&void 0!==arguments[0]?arguments[0]:E())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new $r(null);const d=window.open(t||"",a,u);yt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new $r(d)}const Zr="__/auth/handler",ei="emulator/auth/handler",ti=encodeURIComponent("fac");async function ni(e,t,n,r,i,s){yt(e.config.authDomain,e,"auth-domain-config-required"),yt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:We,eventId:i};if(t instanceof On){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ln){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ti,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Zr);return kt(t,ei)}(e),"?").concat(j(a).slice(1)).concat(c)}const ri="webStorageSupport";const ii=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nr,this._completeRedirectFn=Dr,this._overrideRedirectResult=jr}async _openPopup(e,t,n,r){var i;bt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Jr(e,await ni(e,t,n,wt(),r),ir())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){or().location.href=e}(await ni(e,t,n,wt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Gr(e),n=or().gapi;return yt(n,e,"internal-error"),t.open({where:document.body,url:Xr(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=pt(e,"network-request-failed"),s=or().setTimeout(()=>{r(i)},Kr.get());function o(){or().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new Or(e);return t.register("authEvent",t=>{yt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ri,{type:ri},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ri];void 0!==i&&t(!!i),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cn()||en()||an()}};var si="@firebase/auth",oi="0.23.2";class ai{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const li=w("authIdTokenMaxAge")||300;let ci=null;function ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();const t=He(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=He(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(I(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ft(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ii,persistence:[yr,er,nr]}),r=w("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>li)return;const r=null===t||void 0===t?void 0:t.token;ci!==r&&(ci=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){L(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){L(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var i;const s=y("auth");return s&&_n(n,"http://".concat(s)),n}var di;di="Browser",qe(new F("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:di,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:un(di)},c=new bn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),qe(new F("auth-internal",e=>(e=>new ai(e))(wn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(si,oi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(di)),Ye(si,oi,"esm2017");var hi,fi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},pi={},mi=mi||{},gi=fi||self;function yi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function vi(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var bi="closure_uid_"+(1e9*Math.random()>>>0),wi=0;function xi(e,t,n){return e.call.apply(e.bind,arguments)}function _i(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ei(e,t,n){return(Ei=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xi:_i).apply(null,arguments)}function Ni(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ki(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ci(){this.s=this.s,this.o=this.o}Ci.prototype.s=!1,Ci.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,bi)&&e[bi]||(e[bi]=++wi))},Ci.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Si=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ti(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ii(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(yi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ai(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ai.prototype.h=function(){this.defaultPrevented=!0};var ji=function(){if(!gi.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{gi.addEventListener("test",()=>{},t),gi.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Pi(e){return/^[\s\xa0]*$/.test(e)}function Ri(){var e=gi.navigator;return e&&(e=e.userAgent)?e:""}function Di(e){return-1!=Ri().indexOf(e)}function Oi(e){return Oi[" "](e),e}Oi[" "]=function(){};var Li,Fi,Mi=Di("Opera"),Ui=Di("Trident")||Di("MSIE"),zi=Di("Edge"),Vi=zi||Ui,Bi=Di("Gecko")&&!(-1!=Ri().toLowerCase().indexOf("webkit")&&!Di("Edge"))&&!(Di("Trident")||Di("MSIE"))&&!Di("Edge"),qi=-1!=Ri().toLowerCase().indexOf("webkit")&&!Di("Edge");function Hi(){var e=gi.document;return e?e.documentMode:void 0}e:{var Gi="",Ki=function(){var e=Ri();return Bi?/rv:([^\);]+)(\)|;)/.exec(e):zi?/Edge\/([\d\.]+)/.exec(e):Ui?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):qi?/WebKit\/(\S+)/.exec(e):Mi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ki&&(Gi=Ki?Ki[1]:""),Ui){var Wi=Hi();if(null!=Wi&&Wi>parseFloat(Gi)){Li=String(Wi);break e}}Li=Gi}if(gi.document&&Ui){var Qi=Hi();Fi=Qi||(parseInt(Li,10)||void 0)}else Fi=void 0;var Xi=Fi;function Yi(e,t){if(Ai.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Bi){e:{try{Oi(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$i[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Yi.$.h.call(this)}}ki(Yi,Ai);var $i={2:"touch",3:"pen",4:"mouse"};Yi.prototype.h=function(){Yi.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ji="closure_listenable_"+(1e6*Math.random()|0),Zi=0;function es(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Zi,this.fa=this.ia=!1}function ts(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ns(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function rs(e){const t={};for(const n in e)t[n]=e[n];return t}const is="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ss(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<is.length;t++)n=is[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function os(e){this.src=e,this.g={},this.h=0}function as(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Si(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ts(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ls(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}os.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ls(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new es(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var cs="closure_lm_"+(1e6*Math.random()|0),us={};function ds(e,t,n,r,i){if(r&&r.once)return fs(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ds(e,t[s],n,r,i);return null}return n=ws(n),e&&e[Ji]?e.O(t,n,vi(r)?!!r.capture:!!r,i):hs(e,t,n,!1,r,i)}function hs(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=vi(i)?!!i.capture:!!i,a=vs(e);if(a||(e[cs]=a=new os(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ys;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ji||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(gs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function fs(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)fs(e,t[s],n,r,i);return null}return n=ws(n),e&&e[Ji]?e.P(t,n,vi(r)?!!r.capture:!!r,i):hs(e,t,n,!0,r,i)}function ps(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ps(e,t[s],n,r,i);else r=vi(r)?!!r.capture:!!r,n=ws(n),e&&e[Ji]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ls(s=e.g[t],n,r,i))&&(ts(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=vs(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ls(t,n,r,i)),(n=-1<e?t[e]:null)&&ms(n))}function ms(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ji])as(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(gs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=vs(t))?(as(n,e),0==n.h&&(n.src=null,t[cs]=null)):ts(e)}}}function gs(e){return e in us?us[e]:us[e]="on"+e}function ys(e,t){if(e.fa)e=!0;else{t=new Yi(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ms(e),e=n.call(r,t)}return e}function vs(e){return(e=e[cs])instanceof os?e:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(e){return"function"===typeof e?e:(e[bs]||(e[bs]=function(t){return e.handleEvent(t)}),e[bs])}function xs(){Ci.call(this),this.i=new os(this),this.S=this,this.J=null}function _s(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ai(t,e);else if(t instanceof Ai)t.target=t.target||e;else{var i=t;ss(t=new Ai(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Es(o,r,!0,t)&&i}if(i=Es(o=t.g=e,r,!0,t)&&i,i=Es(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Es(o=t.g=n[s],r,!1,t)&&i}function Es(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&as(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ki(xs,Ci),xs.prototype[Ji]=!0,xs.prototype.removeEventListener=function(e,t,n,r){ps(this,e,t,n,r)},xs.prototype.N=function(){if(xs.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ts(n[r]);delete t.g[e],t.h--}}this.J=null},xs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ns=gi.JSON.stringify;function ks(){var e=Ps;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Cs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ss,e=>e.reset());class Ss{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ts(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Is(e){gi.setTimeout(()=>{throw e},0)}let As,js=!1,Ps=new class{constructor(){this.h=this.g=null}add(e,t){const n=Cs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Rs=()=>{const e=gi.Promise.resolve(void 0);As=()=>{e.then(Ds)}};var Ds=()=>{for(var e;e=ks();){try{e.h.call(e.g)}catch(n){Is(n)}var t=Cs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}js=!1};function Os(e,t){xs.call(this),this.h=e||1,this.g=t||gi,this.j=Ei(this.qb,this),this.l=Date.now()}function Ls(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Fs(e,t,n){if("function"===typeof e)n&&(e=Ei(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ei(e.handleEvent,e)}return 2147483647<Number(t)?-1:gi.setTimeout(e,t||0)}function Ms(e){e.g=Fs(()=>{e.g=null,e.i&&(e.i=!1,Ms(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ki(Os,xs),(hi=Os.prototype).ga=!1,hi.T=null,hi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_s(this,"tick"),this.ga&&(Ls(this),this.start()))}},hi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},hi.N=function(){Os.$.N.call(this),Ls(this),delete this.g};class Us extends Ci{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(gi.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(e){Ci.call(this),this.h=e,this.g={}}ki(zs,Ci);var Vs=[];function Bs(e,t,n,r){Array.isArray(n)||(n&&(Vs[0]=n.toString()),n=Vs);for(var i=0;i<n.length;i++){var s=ds(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function qs(e){ns(e.g,function(e,t){this.g.hasOwnProperty(t)&&ms(e)},e),e.g={}}function Hs(){this.g=!0}function Gs(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ns(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}zs.prototype.N=function(){zs.$.N.call(this),qs(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hs.prototype.Ea=function(){this.g=!1},Hs.prototype.info=function(){};var Ks={},Ws=null;function Qs(){return Ws=Ws||new xs}function Xs(e){Ai.call(this,Ks.Ta,e)}function Ys(e){const t=Qs();_s(t,new Xs(t))}function $s(e,t){Ai.call(this,Ks.STAT_EVENT,e),this.stat=t}function Js(e){const t=Qs();_s(t,new $s(t,e))}function Zs(e,t){Ai.call(this,Ks.Ua,e),this.size=t}function eo(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return gi.setTimeout(function(){e()},t)}Ks.Ta="serverreachability",ki(Xs,Ai),Ks.STAT_EVENT="statevent",ki($s,Ai),Ks.Ua="timingevent",ki(Zs,Ai);var to={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},no={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ro(){}function io(e){return e.h||(e.h=e.i())}function so(){}ro.prototype.h=null;var oo,ao={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lo(){Ai.call(this,"d")}function co(){Ai.call(this,"c")}function uo(){}function ho(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new zs(this),this.P=po,e=Vi?125:void 0,this.V=new Os(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fo}function fo(){this.i=null,this.g="",this.h=!1}ki(lo,Ai),ki(co,Ai),ki(uo,ro),uo.prototype.g=function(){return new XMLHttpRequest},uo.prototype.i=function(){return{}},oo=new uo;var po=45e3,mo={},go={};function yo(e,t,n){e.L=1,e.v=Lo(jo(t)),e.s=n,e.S=!0,vo(e,null)}function vo(e,t){e.G=Date.now(),_o(e),e.A=jo(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Xo(n.i,"t",r),e.C=0,n=e.l.J,e.h=new fo,e.g=Ya(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Us(Ei(e.Pa,e,e.g),e.O)),Bs(e.U,e.g,"readystatechange",e.nb),t=e.I?rs(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ys(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function bo(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function wo(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=xo(e,n),r==go){4==t&&(e.o=4,Js(14),i=!1),Gs(e.j,e.m,null,"[Incomplete Response]");break}if(r==mo){e.o=4,Js(15),Gs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Gs(e.j,e.m,r,null),So(e,r)}bo(e)&&r!=go&&r!=mo&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Js(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ba(t),t.M=!0,Js(11))):(Gs(e.j,e.m,n,"[Invalid Chunked Response]"),Co(e),ko(e))}function xo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?go:(n=Number(t.substring(n,r)),isNaN(n)?mo:(r+=1)+n>t.length?go:(t=t.slice(r,r+n),e.C=r+n,t))}function _o(e){e.Y=Date.now()+e.P,Eo(e,e.P)}function Eo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eo(Ei(e.lb,e),t)}function No(e){e.B&&(gi.clearTimeout(e.B),e.B=null)}function ko(e){0==e.l.H||e.J||Ga(e.l,e)}function Co(e){No(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ls(e.V),qs(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function So(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||na(n.i,e)))if(!e.K&&na(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ha(n),Da(n)}Va(n),Js(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=eo(Ei(n.ib,n),6e3));if(1>=ta(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Wa(n,11)}else if((e.K||n.g==e)&&Ha(n),!Pi(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ra(s,s.h),s.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Oo(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Xa(r,r.J?r.pa:null,r.Y),o.K){ia(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(No(a),_o(a)),r.g=o}else za(r);0<n.j.length&&La(n)}else"stop"!=c[0]&&"close"!=c[0]||Wa(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Wa(n,7):Ra(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ys()}catch(c){}}function To(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(yi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(yi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(yi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(hi=ho.prototype).setTimeout=function(e){this.P=e},hi.nb=function(e){e=e.target;const t=this.M;t&&3==Sa(e)?t.l():this.Pa(e)},hi.Pa=function(e){try{if(e==this.g)e:{const u=Sa(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Vi||this.g&&(this.h.h||this.g.ja()||Ta(this.g)))){this.J||4!=u||7==t||Ys(),No(this);var n=this.g.da();this.ca=n;t:if(bo(this)){var r=Ta(this.g);e="";var i=r.length,s=4==Sa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Co(this),ko(this);var o="";break t}this.h.i=new gi.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pi(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Js(12),Co(this),ko(this);break e}Gs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,So(this,n)}this.S?(wo(this,u,o),Vi&&this.i&&3==u&&(Bs(this.U,this.V,"tick",this.mb),this.V.start())):(Gs(this.j,this.m,o,null),So(this,o)),4==u&&Co(this),this.i&&!this.J&&(4==u?Ga(this.l,this):(this.i=!1,_o(this)))}else(function(e){const t={};e=(e.g&&2<=Sa(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Pi(e[r]))continue;var n=Ts(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Js(12)):(this.o=0,Js(13)),Co(this),ko(this)}}}catch(u){}},hi.mb=function(){if(this.g){var e=Sa(this.g),t=this.g.ja();this.C<t.length&&(No(this),wo(this,e,t),this.i&&4!=e&&_o(this))}},hi.cancel=function(){this.J=!0,Co(this)},hi.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(Ys(),Js(17)),Co(this),this.o=2,ko(this)):Eo(this,this.Y-e)};var Io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ao(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ao){this.h=e.h,Po(this,e.j),this.s=e.s,this.g=e.g,Ro(this,e.m),this.l=e.l;var t=e.i,n=new Go;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Do(this,n),this.o=e.o}else e&&(t=String(e).match(Io))?(this.h=!1,Po(this,t[1]||"",!0),this.s=Fo(t[2]||""),this.g=Fo(t[3]||"",!0),Ro(this,t[4]),this.l=Fo(t[5]||"",!0),Do(this,t[6]||"",!0),this.o=Fo(t[7]||"")):(this.h=!1,this.i=new Go(null,this.h))}function jo(e){return new Ao(e)}function Po(e,t,n){e.j=n?Fo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ro(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Do(e,t,n){t instanceof Go?(e.i=t,function(e,t){t&&!e.j&&(Ko(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Wo(this,t),Xo(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Mo(t,qo)),e.i=new Go(t,e.h))}function Oo(e,t,n){e.i.set(t,n)}function Lo(e){return Oo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Mo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Uo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Uo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ao.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Mo(t,zo,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Mo(t,zo,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Mo(n,"/"==n.charAt(0)?Bo:Vo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Mo(n,Ho)),e.join("")};var zo=/[#\/\?@]/g,Vo=/[#\?:]/g,Bo=/[#\?]/g,qo=/[#\?@]/g,Ho=/#/g;function Go(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ko(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Wo(e,t){Ko(e),t=Yo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qo(e,t){return Ko(e),t=Yo(e,t),e.g.has(t)}function Xo(e,t,n){Wo(e,t),0<n.length&&(e.i=null,e.g.set(Yo(e,t),Ti(n)),e.h+=n.length)}function Yo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(hi=Go.prototype).add=function(e,t){Ko(this),this.i=null,e=Yo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},hi.forEach=function(e,t){Ko(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},hi.ta=function(){Ko(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},hi.Z=function(e){Ko(this);let t=[];if("string"===typeof e)Qo(this,e)&&(t=t.concat(this.g.get(Yo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},hi.set=function(e,t){return Ko(this),this.i=null,Qo(this,e=Yo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},hi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},hi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var $o=class{constructor(e,t){this.g=e,this.map=t}};function Jo(e){this.l=e||Zo,gi.PerformanceNavigationTiming?e=0<(e=gi.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(gi.g&&gi.g.Ka&&gi.g.Ka()&&gi.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Zo=10;function ea(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ta(e){return e.h?1:e.g?e.g.size:0}function na(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ra(e,t){e.g?e.g.add(t):e.h=t}function ia(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sa(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ti(e.i)}Jo.prototype.cancel=function(){if(this.i=sa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var oa,aa=class{stringify(e){return gi.JSON.stringify(e,void 0)}parse(e){return gi.JSON.parse(e,void 0)}};function la(){this.g=new aa}function ca(e,t,n){const r=n||"";try{To(e,function(e,n){let i=e;vi(e)&&(i=Ns(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ua(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function da(e){this.l=e.fc||null,this.j=e.ob||!1}function ha(e,t){xs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=fa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ki(da,ro),da.prototype.g=function(){return new ha(this.l,this.j)},da.prototype.i=(oa={},function(){return oa}),ki(ha,xs);var fa=0;function pa(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ma(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ga(e)}function ga(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(hi=ha.prototype).open=function(e,t){if(this.readyState!=fa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ga(this)},hi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||gi).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},hi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ma(this)),this.readyState=fa},hi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof gi.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pa(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},hi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ma(this):ga(this),3==this.readyState&&pa(this)}},hi.Za=function(e){this.g&&(this.response=this.responseText=e,ma(this))},hi.Ya=function(e){this.g&&(this.response=e,ma(this))},hi.ka=function(){this.g&&ma(this)},hi.setRequestHeader=function(e,t){this.v.append(e,t)},hi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},hi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ya=gi.JSON.parse;function va(e){xs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ba,this.L=this.M=!1}ki(va,xs);var ba="",wa=/^https?$/i,xa=["POST","PUT"];function _a(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ea(e),ka(e)}function Ea(e){e.F||(e.F=!0,_s(e,"complete"),_s(e,"error"))}function Na(e){if(e.h&&"undefined"!=typeof mi&&(!e.C[1]||4!=Sa(e)||2!=e.da()))if(e.v&&4==Sa(e))Fs(e.La,0,e);else if(_s(e,"readystatechange"),4==Sa(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Io)[1]||null;!i&&gi.self&&gi.self.location&&(i=gi.self.location.protocol.slice(0,-1)),r=!wa.test(i?i.toLowerCase():"")}n=r}if(n)_s(e,"complete"),_s(e,"success");else{e.m=6;try{var s=2<Sa(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Ea(e)}}finally{ka(e)}}}function ka(e,t){if(e.g){Ca(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||_s(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ca(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(gi.clearTimeout(e.A),e.A=null)}function Sa(e){return e.g?e.g.readyState:0}function Ta(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ba:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Rl){return null}}function Ia(e){let t="";return ns(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Aa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ia(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Oo(e,t,n))}function ja(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pa(e){this.Ga=0,this.j=[],this.l=new Hs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ja("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ja("baseRetryDelayMs",5e3,e),this.hb=ja("retryDelaySeedMs",1e4,e),this.eb=ja("forwardChannelMaxRetries",2,e),this.xa=ja("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Jo(e&&e.concurrentRequestLimit),this.Ja=new la,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ra(e){if(Oa(e),3==e.H){var t=e.W++,n=jo(e.I);if(Oo(n,"SID",e.K),Oo(n,"RID",t),Oo(n,"TYPE","terminate"),Ma(e,n),(t=new ho(e,e.l,t)).L=2,t.v=Lo(jo(n)),n=!1,gi.navigator&&gi.navigator.sendBeacon)try{n=gi.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&gi.Image&&((new Image).src=t.v,n=!0),n||(t.g=Ya(t.l,null),t.g.ha(t.v)),t.G=Date.now(),_o(t)}Qa(e)}function Da(e){e.g&&(Ba(e),e.g.cancel(),e.g=null)}function Oa(e){Da(e),e.u&&(gi.clearTimeout(e.u),e.u=null),Ha(e),e.i.cancel(),e.m&&("number"===typeof e.m&&gi.clearTimeout(e.m),e.m=null)}function La(e){if(!ea(e.i)&&!e.m){e.m=!0;var t=e.Na;As||Rs(),js||(As(),js=!0),Ps.add(t,e),e.C=0}}function Fa(e,t){var n;n=t?t.m:e.W++;const r=jo(e.I);Oo(r,"SID",e.K),Oo(r,"RID",n),Oo(r,"AID",e.V),Ma(e,r),e.o&&e.s&&Aa(r,e.o,e.s),n=new ho(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ua(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ra(e.i,n),yo(n,r,t)}function Ma(e,t){e.na&&ns(e.na,function(e,n){Oo(t,n,e)}),e.h&&To({},function(e,n){Oo(t,n,e)})}function Ua(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ei(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{ca(a,e,"req"+n+"_")}catch(Hl){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function za(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;As||Rs(),js||(As(),js=!0),Ps.add(t,e),e.A=0}}function Va(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=eo(Ei(e.Ma,e),Ka(e,e.A)),e.A++,!0)}function Ba(e){null!=e.B&&(gi.clearTimeout(e.B),e.B=null)}function qa(e){e.g=new ho(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=jo(e.wa);Oo(t,"RID","rpc"),Oo(t,"SID",e.K),Oo(t,"AID",e.V),Oo(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Oo(t,"TO",e.qa),Oo(t,"TYPE","xmlhttp"),Ma(e,t),e.o&&e.s&&Aa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Lo(jo(t)),n.s=null,n.S=!0,vo(n,e)}function Ha(e){null!=e.v&&(gi.clearTimeout(e.v),e.v=null)}function Ga(e,t){var n=null;if(e.g==t){Ha(e),Ba(e),e.g=null;var r=2}else{if(!na(e.i,t))return;n=t.F,ia(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;_s(r=Qs(),new Zs(r,n)),La(e)}else za(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ta(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=eo(Ei(e.Na,e,t),Ka(e,e.C)),e.C++,!0))}(e,t)||2==r&&Va(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Wa(e,5);break;case 4:Wa(e,10);break;case 3:Wa(e,6);break;default:Wa(e,2)}}function Ka(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Wa(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ei(e.pb,e);n||(n=new Ao("//www.google.com/images/cleardot.gif"),gi.location&&"http"==gi.location.protocol||Po(n,"https"),Lo(n)),function(e,t){const n=new Hs;if(gi.Image){const r=new Image;r.onload=Ni(ua,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ni(ua,n,r,"TestLoadImage: error",!1,t),r.onabort=Ni(ua,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ni(ua,n,r,"TestLoadImage: timeout",!1,t),gi.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Js(2);e.H=0,e.h&&e.h.za(t),Qa(e),Oa(e)}function Qa(e){if(e.H=0,e.ma=[],e.h){const t=sa(e.i);0==t.length&&0==e.j.length||(Ii(e.ma,t),Ii(e.ma,e.j),e.i.i.length=0,Ti(e.j),e.j.length=0),e.h.ya()}}function Xa(e,t,n){var r=n instanceof Ao?jo(n):new Ao(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ro(r,r.m);else{var i=gi.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Ao(null);r&&Po(s,r),t&&(s.g=t),i&&Ro(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Oo(r,n,t),Oo(r,"VER",e.ra),Ma(e,r),r}function Ya(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new va(new da({ob:!0})):new va(e.va)).Oa(e.J),t}function $a(){}function Ja(){if(Ui&&!(10<=Number(Xi)))throw Error("Environmental error: no available transport.")}function Za(e,t){xs.call(this),this.g=new Pa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Pi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Pi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nl(this)}function el(e){lo.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tl(){co.call(this),this.status=1}function nl(e){this.g=e}function rl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function il(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function sl(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(hi=va.prototype).Oa=function(e){this.M=e},hi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oo.g(),this.C=this.u?io(this.u):io(oo),this.g.onreadystatechange=Ei(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void _a(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=gi.FormData&&e instanceof gi.FormData,!(0<=Si(xa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ca(this),0<this.B&&((this.L=function(e){return Ui&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ei(this.ua,this)):this.A=Fs(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){_a(this,s)}},hi.ua=function(){"undefined"!=typeof mi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_s(this,"timeout"),this.abort(8))},hi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_s(this,"complete"),_s(this,"abort"),ka(this))},hi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ka(this,!0)),va.$.N.call(this)},hi.La=function(){this.s||(this.G||this.v||this.l?Na(this):this.kb())},hi.kb=function(){Na(this)},hi.isActive=function(){return!!this.g},hi.da=function(){try{return 2<Sa(this)?this.g.status:-1}catch(oa){return-1}},hi.ja=function(){try{return this.g?this.g.responseText:""}catch(oa){return""}},hi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ya(t)}},hi.Ia=function(){return this.m},hi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(hi=Pa.prototype).ra=8,hi.H=1,hi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ho(this,this.l,e);let s=this.s;if(this.U&&(s?(s=rs(s),ss(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ua(this,i,t),Oo(n=jo(this.I),"RID",e),Oo(n,"CVER",22),this.F&&Oo(n,"X-HTTP-Session-Id",this.F),Ma(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ia(s)))+"&"+t:this.o&&Aa(n,this.o,s)),ra(this.i,i),this.bb&&Oo(n,"TYPE","init"),this.P?(Oo(n,"$req",t),Oo(n,"SID","null"),i.aa=!0,yo(i,n,null)):yo(i,n,t),this.H=2}}else 3==this.H&&(e?Fa(this,e):0==this.j.length||ea(this.i)||Fa(this))},hi.Ma=function(){if(this.u=null,qa(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=eo(Ei(this.jb,this),e)}},hi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Js(10),Da(this),qa(this))},hi.ib=function(){null!=this.v&&(this.v=null,Da(this),Va(this),Js(19))},hi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Js(2)):(this.l.info("Failed to ping google.com"),Js(1))},hi.isActive=function(){return!!this.h&&this.h.isActive(this)},(hi=$a.prototype).Ba=function(){},hi.Aa=function(){},hi.za=function(){},hi.ya=function(){},hi.isActive=function(){return!0},hi.Va=function(){},Ja.prototype.g=function(e,t){return new Za(e,t)},ki(Za,xs),Za.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Js(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Xa(e,null,e.Y),La(e)},Za.prototype.close=function(){Ra(this.g)},Za.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ns(e),e=n);t.j.push(new $o(t.fb++,e)),3==t.H&&La(t)},Za.prototype.N=function(){this.g.h=null,delete this.j,Ra(this.g),delete this.g,Za.$.N.call(this)},ki(el,lo),ki(tl,co),ki(nl,$a),nl.prototype.Ba=function(){_s(this.g,"a")},nl.prototype.Aa=function(e){_s(this.g,new el(e))},nl.prototype.za=function(e){_s(this.g,new tl)},nl.prototype.ya=function(){_s(this.g,"b")},ki(rl,function(){this.blockSize=-1}),rl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},rl.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)il(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){il(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){il(this,r),i=0;break}}this.h=i,this.i+=t},rl.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ol={};function al(e){return-128<=e&&128>e?function(e,t){var n=ol;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new sl([0|e],0>e?-1:0)}):new sl([0|e],0>e?-1:0)}function ll(e){if(isNaN(e)||!isFinite(e))return ul;if(0>e)return ml(ll(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=cl;return new sl(t,0)}var cl=4294967296,ul=al(0),dl=al(1),hl=al(16777216);function fl(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function pl(e){return-1==e.h}function ml(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new sl(n,~e.h).add(dl)}function gl(e,t){return e.add(ml(t))}function yl(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function vl(e,t){this.g=e,this.h=t}function bl(e,t){if(fl(t))throw Error("division by zero");if(fl(e))return new vl(ul,ul);if(pl(e))return t=bl(ml(e),t),new vl(ml(t.g),ml(t.h));if(pl(t))return t=bl(e,ml(t)),new vl(ml(t.g),t.h);if(30<e.g.length){if(pl(e)||pl(t))throw Error("slowDivide_ only works with positive integers.");for(var n=dl,r=t;0>=r.X(e);)n=wl(n),r=wl(r);var i=xl(n,1),s=xl(r,1);for(r=xl(r,2),n=xl(n,2);!fl(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=xl(r,1),n=xl(n,1)}return t=gl(e,i.R(t)),new vl(i,t)}for(i=ul;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=ll(n)).R(t);pl(o)||0<o.X(e);)o=(s=ll(n-=r)).R(t);fl(s)&&(s=dl),i=i.add(s),e=gl(e,o)}return new vl(i,e)}function wl(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new sl(n,e.h)}function xl(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new sl(i,e.h)}(hi=sl.prototype).ea=function(){if(pl(this))return-ml(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:cl+r)*t,t*=cl}return e},hi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(fl(this))return"0";if(pl(this))return"-"+ml(this).toString(e);for(var t=ll(Math.pow(e,6)),n=this,r="";;){var i=bl(n,t).g,s=((0<(n=gl(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(fl(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},hi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},hi.X=function(e){return pl(e=gl(this,e))?-1:fl(e)?0:1},hi.abs=function(){return pl(this)?ml(this):this},hi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new sl(n,-2147483648&n[n.length-1]?-1:0)},hi.R=function(e){if(fl(this)||fl(e))return ul;if(pl(this))return pl(e)?ml(this).R(ml(e)):ml(ml(this).R(e));if(pl(e))return ml(this.R(ml(e)));if(0>this.X(hl)&&0>e.X(hl))return ll(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,yl(n,2*r+2*i),n[2*r+2*i+1]+=s*l,yl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,yl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,yl(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new sl(n,0)},hi.gb=function(e){return bl(this,e).h},hi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new sl(n,this.h&e.h)},hi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new sl(n,this.h|e.h)},hi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new sl(n,this.h^e.h)},Ja.prototype.createWebChannel=Ja.prototype.g,Za.prototype.send=Za.prototype.u,Za.prototype.open=Za.prototype.m,Za.prototype.close=Za.prototype.close,to.NO_ERROR=0,to.TIMEOUT=8,to.HTTP_ERROR=6,no.COMPLETE="complete",so.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",xs.prototype.listen=xs.prototype.O,va.prototype.listenOnce=va.prototype.P,va.prototype.getLastError=va.prototype.Sa,va.prototype.getLastErrorCode=va.prototype.Ia,va.prototype.getStatus=va.prototype.da,va.prototype.getResponseJson=va.prototype.Wa,va.prototype.getResponseText=va.prototype.ja,va.prototype.send=va.prototype.ha,va.prototype.setWithCredentials=va.prototype.Oa,rl.prototype.digest=rl.prototype.l,rl.prototype.reset=rl.prototype.reset,rl.prototype.update=rl.prototype.j,sl.prototype.add=sl.prototype.add,sl.prototype.multiply=sl.prototype.R,sl.prototype.modulo=sl.prototype.gb,sl.prototype.compare=sl.prototype.X,sl.prototype.toNumber=sl.prototype.ea,sl.prototype.toString=sl.prototype.toString,sl.prototype.getBits=sl.prototype.D,sl.fromNumber=ll,sl.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ml(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ll(Math.pow(n,8)),i=ul,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ll(Math.pow(n,o)),i=i.R(o).add(ll(a))):i=(i=i.R(r)).add(ll(a))}return i};var _l=pi.createWebChannelTransport=function(){return new Ja},El=pi.getStatEventTarget=function(){return Qs()},Nl=pi.ErrorCode=to,kl=pi.EventType=no,Cl=pi.Event=Ks,Sl=pi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Tl=pi.FetchXmlHttpFactory=da,Il=pi.WebChannel=so,Al=pi.XhrIo=va,jl=pi.Md5=rl,Pl=pi.Integer=sl;const Rl="@firebase/firestore";class Dl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dl.UNAUTHENTICATED=new Dl(null),Dl.GOOGLE_CREDENTIALS=new Dl("google-credentials-uid"),Dl.FIRST_PARTY=new Dl("first-party-uid"),Dl.MOCK_USER=new Dl("mock-user");let Ol="9.23.0";const Ll=new W("@firebase/firestore");function Fl(){return Ll.logLevel}function Ml(e){if(Ll.logLevel<=B.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vl);Ll.debug("Firestore (".concat(Ol,"): ").concat(e),...i)}}function Ul(e){if(Ll.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vl);Ll.error("Firestore (".concat(Ol,"): ").concat(e),...i)}}function zl(e){if(Ll.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vl);Ll.warn("Firestore (".concat(Ol,"): ").concat(e),...i)}}function Vl(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Ol,") INTERNAL ASSERTION FAILED: ")+e;throw Ul(t),new Error(t)}function ql(e,t){e||Bl()}function Hl(e,t){return e}const Gl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kl extends C{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Wl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ql{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Xl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dl.UNAUTHENTICATED))}shutdown(){}}class Yl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $l{constructor(e){this.t=e,this.currentUser=Dl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wl,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Ml("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ml("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ml("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ql("string"==typeof t.accessToken),new Ql(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ql(null===e||"string"==typeof e),new Dl(e)}}class Jl{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Dl.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Zl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Jl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Dl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ec{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tc{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&Ml("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,Ml("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ml("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):Ml("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ql("string"==typeof e.token),this.T=e.token,new ec(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class rc{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=nc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ic(e,t){return e<t?-1:e>t?1:0}function sc(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class oc{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Kl(Gl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Kl(Gl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Kl(Gl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kl(Gl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return oc.fromMillis(Date.now())}static fromDate(e){return oc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new oc(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ic(this.nanoseconds,e.nanoseconds):ic(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ac{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ac(e)}static min(){return new ac(new oc(0,0))}static max(){return new ac(new oc(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bl(),void 0===n?n=e.length-t:n>e.length-t&&Bl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cc extends lc{construct(e,t,n){return new cc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new cc(e)}static emptyPath(){return new cc([])}}const uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dc extends lc{construct(e,t,n){return new dc(e,t,n)}static isValidIdentifier(e){return uc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Kl(Gl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Kl(Gl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Kl(Gl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dc(t)}static emptyPath(){return new dc([])}}class hc{constructor(e){this.path=e}static fromPath(e){return new hc(cc.fromString(e))}static fromName(e){return new hc(cc.fromString(e).popFirst(5))}static empty(){return new hc(cc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hc(new cc(e.slice()))}}class fc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fc.UNKNOWN_ID=-1;function pc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ac.fromTimestamp(1e9===r?new oc(n+1,0):new oc(n,r));return new gc(i,hc.empty(),t)}function mc(e){return new gc(e.readTime,e.key,-1)}class gc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gc(ac.min(),hc.empty(),-1)}static max(){return new gc(ac.max(),hc.empty(),-1)}}function yc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=hc.comparator(e.documentKey,t.documentKey),0!==n?n:ic(e.largestBatchId,t.largestBatchId))}const vc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function wc(e){if(e.code!==Gl.FAILED_PRECONDITION||e.message!==vc)throw e;Ml("LocalStore","Unexpectedly lost primary lease")}class xc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xc((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xc?t:xc.resolve(t)}catch(e){return xc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xc.reject(t)}static resolve(e){return new xc((t,n)=>{t(e)})}static reject(e){return new xc((t,n)=>{n(e)})}static waitFor(e){return new xc((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=xc.resolve(!1);for(const n of e)t=t.next(e=>e?xc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new xc((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new xc((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function _c(e){return"IndexedDbTransactionError"===e.name}class Ec{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function Nc(e){return null==e}function kc(e){return 0===e&&1/e==-1/0}function Cc(e){return"number"==typeof e&&Number.isInteger(e)&&!kc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Ec.ct=-1;const Sc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ic=Tc;function Ac(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Rc{constructor(e,t){this.comparator=e,this.root=t||Oc.EMPTY}insert(e,t){return new Rc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oc.BLACK,null,null))}remove(e){return new Rc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dc(this.root,e,this.comparator,!0)}}class Dc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Oc.RED,this.left=null!=r?r:Oc.EMPTY,this.right=null!=i?i:Oc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Oc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Oc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Oc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bl();if(this.right.isRed())throw Bl();const e=this.left.check();if(e!==this.right.check())throw Bl();return e+(this.isRed()?0:1)}}Oc.EMPTY=null,Oc.RED=!0,Oc.BLACK=!1,Oc.EMPTY=new class{constructor(){this.size=0}get key(){throw Bl()}get value(){throw Bl()}get color(){throw Bl()}get left(){throw Bl()}get right(){throw Bl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Oc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lc{constructor(e){this.comparator=e,this.data=new Rc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fc(this.data.getIterator())}getIteratorFrom(e){return new Fc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Lc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lc(this.comparator);return t.data=e,t}}class Fc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mc{constructor(e){this.fields=e,e.sort(dc.comparator)}static empty(){return new Mc([])}unionWith(e){let t=new Lc(dc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Mc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Uc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Uc("Invalid base64 string: "+e):e}}(e);return new zc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new zc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ic(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zc.EMPTY_BYTE_STRING=new zc("");const Vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bc(e){if(ql(!!e),"string"==typeof e){let t=0;const n=Vc.exec(e);if(ql(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:qc(e.seconds),nanos:qc(e.nanos)}}function qc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hc(e){return"string"==typeof e?zc.fromBase64String(e):zc.fromUint8Array(e)}function Gc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kc(e){const t=e.mapValue.fields.__previous_value__;return Gc(t)?Kc(t):t}function Wc(e){const t=Bc(e.mapValue.fields.__local_write_time__.timestampValue);return new oc(t.seconds,t.nanos)}class Qc{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Xc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}const Yc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $c(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gc(e)?4:du(e)?9007199254740991:10:Bl()}function Jc(e,t){if(e===t)return!0;const n=$c(e);if(n!==$c(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wc(e).isEqual(Wc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bc(e.timestampValue),r=Bc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hc(e.bytesValue).isEqual(Hc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return qc(e.geoPointValue.latitude)===qc(t.geoPointValue.latitude)&&qc(e.geoPointValue.longitude)===qc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return qc(e.integerValue)===qc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=qc(e.doubleValue),r=qc(t.doubleValue);return n===r?kc(n)===kc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sc(e.arrayValue.values||[],t.arrayValue.values||[],Jc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ac(n)!==Ac(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jc(n[i],r[i])))return!1;return!0}(e,t);default:return Bl()}}function Zc(e,t){return void 0!==(e.values||[]).find(e=>Jc(e,t))}function eu(e,t){if(e===t)return 0;const n=$c(e),r=$c(t);if(n!==r)return ic(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ic(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=qc(e.integerValue||e.doubleValue),r=qc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return tu(e.timestampValue,t.timestampValue);case 4:return tu(Wc(e),Wc(t));case 5:return ic(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hc(e),r=Hc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ic(n[i],r[i]);if(0!==e)return e}return ic(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ic(qc(e.latitude),qc(t.latitude));return 0!==n?n:ic(qc(e.longitude),qc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=eu(n[i],r[i]);if(e)return e}return ic(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Yc.mapValue&&t===Yc.mapValue)return 0;if(e===Yc.mapValue)return 1;if(t===Yc.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ic(r[o],s[o]);if(0!==e)return e;const t=eu(n[r[o]],i[s[o]]);if(0!==t)return t}return ic(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Bl()}}function tu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ic(e,t);const n=Bc(e),r=Bc(t),i=ic(n.seconds,r.seconds);return 0!==i?i:ic(n.nanos,r.nanos)}function nu(e){return ru(e)}function ru(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Hc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,hc.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ru(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ru(e.fields[i]));return n+"}"}(e.mapValue):Bl();var t,n}function iu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function su(e){return!!e&&"integerValue"in e}function ou(e){return!!e&&"arrayValue"in e}function au(e){return!!e&&"nullValue"in e}function lu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cu(e){return!!e&&"mapValue"in e}function uu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=uu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=uu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function du(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class hu{constructor(e){this.value=e}static empty(){return new hu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=dc.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=uu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());cu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];cu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){jc(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new hu(uu(this.value))}}function fu(e){const t=[];return jc(e.fields,(e,n)=>{const r=new dc([e]);if(cu(n)){const e=fu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Mc(t)}class pu{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new pu(e,0,ac.min(),ac.min(),ac.min(),hu.empty(),0)}static newFoundDocument(e,t,n,r){return new pu(e,1,t,ac.min(),n,r,0)}static newNoDocument(e,t){return new pu(e,2,t,ac.min(),ac.min(),hu.empty(),0)}static newUnknownDocument(e,t){return new pu(e,3,t,ac.min(),ac.min(),hu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ac.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ac.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mu{constructor(e,t){this.position=e,this.inclusive=t}}function gu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?hc.comparator(hc.fromName(o.referenceValue),n.key):eu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function yu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Jc(e.position[n],t.position[n]))return!1;return!0}class vu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wu{}class xu extends wu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Iu(e,t,n):"array-contains"===t?new Ru(e,n):"in"===t?new Du(e,n):"not-in"===t?new Ou(e,n):"array-contains-any"===t?new Lu(e,n):new xu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Au(e,n):new ju(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(eu(t,this.value)):null!==t&&$c(this.value)===$c(t)&&this.matchesComparison(eu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class _u extends wu{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new _u(e,t)}matches(e){return Eu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Eu(e){return"and"===e.op}function Nu(e){return ku(e)&&Eu(e)}function ku(e){for(const t of e.filters)if(t instanceof _u)return!1;return!0}function Cu(e){if(e instanceof xu)return e.field.canonicalString()+e.op.toString()+nu(e.value);if(Nu(e))return e.filters.map(e=>Cu(e)).join(",");{const t=e.filters.map(e=>Cu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Su(e,t){return e instanceof xu?function(e,t){return t instanceof xu&&e.op===t.op&&e.field.isEqual(t.field)&&Jc(e.value,t.value)}(e,t):e instanceof _u?function(e,t){return t instanceof _u&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Su(n,t.filters[r]),!0)}(e,t):void Bl()}function Tu(e){return e instanceof xu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(nu(e.value))}(e):e instanceof _u?function(e){return e.op.toString()+" {"+e.getFilters().map(Tu).join(" ,")+"}"}(e):"Filter"}class Iu extends xu{constructor(e,t,n){super(e,t,n),this.key=hc.fromName(n.referenceValue)}matches(e){const t=hc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Au extends xu{constructor(e,t){super(e,"in",t),this.keys=Pu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ju extends xu{constructor(e,t){super(e,"not-in",t),this.keys=Pu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>hc.fromName(e.referenceValue))}class Ru extends xu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ou(t)&&Zc(t.arrayValue,this.value)}}class Du extends xu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zc(this.value.arrayValue,t)}}class Ou extends xu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zc(this.value.arrayValue,t)}}class Lu extends xu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ou(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Zc(this.value.arrayValue,e))}}class Fu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function Mu(e){return new Fu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Uu(e){const t=Hl(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Cu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Nc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>nu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>nu(e)).join(",")),t.dt=e}return t.dt}function zu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Su(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yu(e.startAt,t.startAt)&&yu(e.endAt,t.endAt)}function Vu(e){return hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function qu(e,t,n,r,i,s,o,a){return new Bu(e,t,n,r,i,s,o,a)}function Hu(e){return new Bu(e)}function Gu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ku(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Wu(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Qu(e){return null!==e.collectionGroup}function Xu(e){const t=Hl(e);if(null===t.wt){t.wt=[];const e=Wu(t),n=Ku(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new vu(e)),t.wt.push(new vu(dc.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new vu(dc.keyField(),e))}}}return t.wt}function Yu(e){const t=Hl(e);if(!t._t)if("F"===t.limitType)t._t=Mu(t.path,t.collectionGroup,Xu(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Xu(t)){const t="desc"===i.dir?"asc":"desc";e.push(new vu(i.field,t))}const n=t.endAt?new mu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mu(t.startAt.position,t.startAt.inclusive):null;t._t=Mu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function $u(e,t){t.getFirstInequalityField(),Wu(e);const n=e.filters.concat([t]);return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ju(e,t,n){return new Bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zu(e,t){return zu(Yu(e),Yu(t))&&e.limitType===t.limitType}function ed(e){return"".concat(Uu(Yu(e)),"|lt:").concat(e.limitType)}function td(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Tu(e)).join(", "),"]")),Nc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>nu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>nu(e)).join(",")),"Target(".concat(t,")")}(Yu(e)),"; limitType=").concat(e.limitType,")")}function nd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):hc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Xu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=gu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Xu(e),t))&&!(e.endAt&&!function(e,t,n){const r=gu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Xu(e),t))}(e,t)}function rd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function id(e){return(t,n)=>{let r=!1;for(const i of Xu(e)){const e=sd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function sd(e,t,n){const r=e.field.isKeyField()?hc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?eu(r,i):Bl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bl()}}class od{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jc(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Pc(this.inner)}size(){return this.innerSize}}const ad=new Rc(hc.comparator);function ld(){return ad}const cd=new Rc(hc.comparator);function ud(){let e=cd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function dd(e){let t=cd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function hd(){return pd()}function fd(){return pd()}function pd(){return new od(e=>e.toString(),(e,t)=>e.isEqual(t))}const md=new Rc(hc.comparator),gd=new Lc(hc.comparator);function yd(){let e=gd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const vd=new Lc(ic);function bd(){return vd}function wd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(t)?"-0":t}}function xd(e){return{integerValue:""+e}}function _d(e,t){return Cc(t)?xd(t):wd(e,t)}class Ed{constructor(){this._=void 0}}function Nd(e,t,n){return e instanceof Sd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Gc(t)&&(t=Kc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Td?Id(e,t):e instanceof Ad?jd(e,t):function(e,t){const n=Cd(e,t),r=Rd(n)+Rd(e.gt);return su(n)&&su(e.gt)?xd(r):wd(e.serializer,r)}(e,t)}function kd(e,t,n){return e instanceof Td?Id(e,t):e instanceof Ad?jd(e,t):n}function Cd(e,t){return e instanceof Pd?su(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Sd extends Ed{}class Td extends Ed{constructor(e){super(),this.elements=e}}function Id(e,t){const n=Dd(t);for(const r of e.elements)n.some(e=>Jc(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ad extends Ed{constructor(e){super(),this.elements=e}}function jd(e,t){let n=Dd(t);for(const r of e.elements)n=n.filter(e=>!Jc(e,r));return{arrayValue:{values:n}}}class Pd extends Ed{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Rd(e){return qc(e.integerValue||e.doubleValue)}function Dd(e){return ou(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Od{constructor(e,t){this.field=e,this.transform=t}}class Ld{constructor(e,t){this.version=e,this.transformResults=t}}class Fd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fd}static exists(e){return new Fd(void 0,e)}static updateTime(e){return new Fd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Md(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ud{}function zd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yd(e.key,Fd.none()):new Gd(e.key,e.data,Fd.none());{const n=e.data,r=hu.empty();let i=new Lc(dc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Kd(e.key,r,new Mc(i.toArray()),Fd.none())}}function Vd(e,t,n){e instanceof Gd?function(e,t,n){const r=e.value.clone(),i=Qd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kd?function(e,t,n){if(!Md(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Qd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Wd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Bd(e,t,n,r){return e instanceof Gd?function(e,t,n,r){if(!Md(e.precondition,t))return n;const i=e.value.clone(),s=Xd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kd?function(e,t,n,r){if(!Md(e.precondition,t))return n;const i=Xd(e.fieldTransforms,r,t),s=t.data;return s.setAll(Wd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Md(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Cd(r.transform,e||null);null!=i&&(null===n&&(n=hu.empty()),n.set(r.field,i))}return n||null}function Hd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sc(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Td&&t instanceof Td||e instanceof Ad&&t instanceof Ad?sc(e.elements,t.elements,Jc):e instanceof Pd&&t instanceof Pd?Jc(e.gt,t.gt):e instanceof Sd&&t instanceof Sd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Gd extends Ud{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kd extends Ud{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Wd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Qd(e,t,n){const r=new Map;ql(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,kd(o,a,n[i]))}return r}function Xd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Nd(e,s,t))}return r}class Yd extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $d extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Vd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Bd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Bd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fd();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=zd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ac.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yd())}isEqual(e){return this.batchId===e.batchId&&sc(this.mutations,e.mutations,(e,t)=>Hd(e,t))&&sc(this.baseMutations,e.baseMutations,(e,t)=>Hd(e,t))}}class Zd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ql(e.mutations.length===n.length);let r=md;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Zd(e,t,n,r)}}class eh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class th{constructor(e,t){this.count=e,this.unchangedNames=t}}var nh,rh;function ih(e){switch(e){default:return Bl();case Gl.CANCELLED:case Gl.UNKNOWN:case Gl.DEADLINE_EXCEEDED:case Gl.RESOURCE_EXHAUSTED:case Gl.INTERNAL:case Gl.UNAVAILABLE:case Gl.UNAUTHENTICATED:return!1;case Gl.INVALID_ARGUMENT:case Gl.NOT_FOUND:case Gl.ALREADY_EXISTS:case Gl.PERMISSION_DENIED:case Gl.FAILED_PRECONDITION:case Gl.ABORTED:case Gl.OUT_OF_RANGE:case Gl.UNIMPLEMENTED:case Gl.DATA_LOSS:return!0}}function sh(e){if(void 0===e)return Ul("GRPC error has no .code"),Gl.UNKNOWN;switch(e){case nh.OK:return Gl.OK;case nh.CANCELLED:return Gl.CANCELLED;case nh.UNKNOWN:return Gl.UNKNOWN;case nh.DEADLINE_EXCEEDED:return Gl.DEADLINE_EXCEEDED;case nh.RESOURCE_EXHAUSTED:return Gl.RESOURCE_EXHAUSTED;case nh.INTERNAL:return Gl.INTERNAL;case nh.UNAVAILABLE:return Gl.UNAVAILABLE;case nh.UNAUTHENTICATED:return Gl.UNAUTHENTICATED;case nh.INVALID_ARGUMENT:return Gl.INVALID_ARGUMENT;case nh.NOT_FOUND:return Gl.NOT_FOUND;case nh.ALREADY_EXISTS:return Gl.ALREADY_EXISTS;case nh.PERMISSION_DENIED:return Gl.PERMISSION_DENIED;case nh.FAILED_PRECONDITION:return Gl.FAILED_PRECONDITION;case nh.ABORTED:return Gl.ABORTED;case nh.OUT_OF_RANGE:return Gl.OUT_OF_RANGE;case nh.UNIMPLEMENTED:return Gl.UNIMPLEMENTED;case nh.DATA_LOSS:return Gl.DATA_LOSS;default:return Bl()}}(rh=nh||(nh={}))[rh.OK=0]="OK",rh[rh.CANCELLED=1]="CANCELLED",rh[rh.UNKNOWN=2]="UNKNOWN",rh[rh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rh[rh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rh[rh.NOT_FOUND=5]="NOT_FOUND",rh[rh.ALREADY_EXISTS=6]="ALREADY_EXISTS",rh[rh.PERMISSION_DENIED=7]="PERMISSION_DENIED",rh[rh.UNAUTHENTICATED=16]="UNAUTHENTICATED",rh[rh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rh[rh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rh[rh.ABORTED=10]="ABORTED",rh[rh.OUT_OF_RANGE=11]="OUT_OF_RANGE",rh[rh.UNIMPLEMENTED=12]="UNIMPLEMENTED",rh[rh.INTERNAL=13]="INTERNAL",rh[rh.UNAVAILABLE=14]="UNAVAILABLE",rh[rh.DATA_LOSS=15]="DATA_LOSS";class oh{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ah}static getOrCreateInstance(){return null===ah&&(ah=new oh),ah}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let ah=null;function lh(){return new TextEncoder}const ch=new Pl([4294967295,4294967295],0);function uh(e){const t=lh().encode(e),n=new jl;return n.update(t),new Uint8Array(n.digest())}function dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Pl([n,r],0),new Pl([i,s],0)]}class hh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new fh("Invalid padding: ".concat(t));if(n<0)throw new fh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new fh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new fh("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=Pl.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Pl.fromNumber(n)));return 1===r.compare(ch)&&(r=new Pl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=uh(e),[n,r]=dh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new hh(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=uh(e),[n,r]=dh(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ph{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ph(ac.min(),r,new Rc(ic),ld(),yd())}}class mh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new mh(n,t,yd(),yd(),yd())}}class gh{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class yh{constructor(e,t){this.targetId=e,this.Vt=t}}class vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class bh{constructor(){this.St=0,this.Dt=_h(),this.Ct=zc.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=yd(),t=yd(),n=yd();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bl()}}),new mh(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=_h()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class wh{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ld(),this.zt=xh(),this.Wt=new Rc(ic)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:Bl()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(Vu(s))if(0===r){const e=new hc(s.path);this.Yt(n,e,pu.newNoDocument(e,ac.min()))}else ql(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=oh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Hc(i).toUint8Array()}catch(e){if(e instanceof Uc)return zl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new hh(a,s,o)}catch(e){return zl(e instanceof fh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&Vu(i.target)){const t=new hc(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,pu.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=yd();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new ph(e,t,this.Wt,this.jt,n);return this.jt=ld(),this.zt=xh(),this.Wt=new Rc(ic),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new bh,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Lc(ic),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ml("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new bh),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function xh(){return new Rc(hc.comparator)}function _h(){return new Rc(hc.comparator)}const Eh={asc:"ASCENDING",desc:"DESCENDING"},Nh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kh={and:"AND",or:"OR"};class Ch{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sh(e,t){return e.useProto3Json||Nc(t)?t:{value:t}}function Th(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ih(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ah(e,t){return Th(e,t.toTimestamp())}function jh(e){return ql(!!e),ac.fromTimestamp(function(e){const t=Bc(e);return new oc(t.seconds,t.nanos)}(e))}function Ph(e,t){return function(e){return new cc(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Rh(e){const t=cc.fromString(e);return ql(Zh(t)),t}function Dh(e,t){return Ph(e.databaseId,t.path)}function Oh(e,t){const n=Rh(t);if(n.get(1)!==e.databaseId.projectId)throw new Kl(Gl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Kl(Gl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new hc(Uh(n))}function Lh(e,t){return Ph(e.databaseId,t)}function Fh(e){const t=Rh(e);return 4===t.length?cc.emptyPath():Uh(t)}function Mh(e){return new cc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uh(e){return ql(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function zh(e,t,n){return{name:Dh(e,t),fields:n.value.mapValue.fields}}function Vh(e,t){let n;if(t instanceof Gd)n={update:zh(e,t.key,t.value)};else if(t instanceof Yd)n={delete:Dh(e,t.key)};else if(t instanceof Kd)n={update:zh(e,t.key,t.data),updateMask:Jh(t.fieldMask)};else{if(!(t instanceof $d))return Bl();n={verify:Dh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Sd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Td)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Bl()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bl()}(e,t.precondition)),n}function Bh(e,t){return{documents:[Lh(e,t.path)]}}function qh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Lh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Lh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return $h(_u.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Xh(e.field),direction:Kh(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Sh(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Hh(e){let t=Fh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ql(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Gh(e);return t instanceof _u&&Nu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new vu(Yh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Nc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new mu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new mu(n,t)}(n.endAt)),qu(t,i,o,s,a,"F",l,c)}function Gh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yh(e.unaryFilter.field);return xu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yh(e.unaryFilter.field);return xu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yh(e.unaryFilter.field);return xu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yh(e.unaryFilter.field);return xu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Bl()}}(e):void 0!==e.fieldFilter?function(e){return xu.create(Yh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _u.create(e.compositeFilter.filters.map(e=>Gh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Bl()}}(e.compositeFilter.op))}(e):Bl()}function Kh(e){return Eh[e]}function Wh(e){return Nh[e]}function Qh(e){return kh[e]}function Xh(e){return{fieldPath:e.canonicalString()}}function Yh(e){return dc.fromServerFormat(e.fieldPath)}function $h(e){return e instanceof xu?function(e){if("=="===e.op){if(lu(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NAN"}};if(au(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lu(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NAN"}};if(au(e.value))return{unaryFilter:{field:Xh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xh(e.field),op:Wh(e.op),value:e.value}}}(e):e instanceof _u?function(e){const t=e.getFilters().map(e=>$h(e));return 1===t.length?t[0]:{compositeFilter:{op:Qh(e.op),filters:t}}}(e):Bl()}function Jh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ef{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ac.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ac.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:zc.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ef(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ef(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tf{constructor(e){this.fe=e}}function nf(e){const t=Hh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ju(t,t.limit,"L"):t}class rf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(qc(e.integerValue));else if("doubleValue"in e){const n=qc(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),kc(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Hc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?du(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Bl()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),hc.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}rf.Ve=new rf;class sf{constructor(){this.rn=new of}addToCollectionParentIndex(e,t){return this.rn.add(t),xc.resolve()}getCollectionParents(e,t){return xc.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return xc.resolve()}deleteFieldIndex(e,t){return xc.resolve()}getDocumentsMatchingTarget(e,t){return xc.resolve(null)}getIndexType(e,t){return xc.resolve(0)}getFieldIndexes(e,t){return xc.resolve([])}getNextCollectionGroupToUpdate(e){return xc.resolve(null)}getMinOffset(e,t){return xc.resolve(gc.min())}getMinOffsetFromCollectionGroup(e,t){return xc.resolve(gc.min())}updateCollectionGroup(e,t,n){return xc.resolve()}updateIndexEntries(e,t){return xc.resolve()}}class of{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lc(cc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Lc(cc.comparator)).toArray()}}new Uint8Array(0);class af{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new af(e,af.DEFAULT_COLLECTION_PERCENTILE,af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}af.DEFAULT_COLLECTION_PERCENTILE=10,af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,af.DEFAULT=new af(41943040,af.DEFAULT_COLLECTION_PERCENTILE,af.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),af.DISABLED=new af(-1,0,0);class lf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new lf(0)}static Mn(){return new lf(-1)}}class cf{constructor(){this.changes=new od(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?xc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class df{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Bd(n.mutation,e,Mc.empty(),oc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,yd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yd();const r=hd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ud();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=hd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,yd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ld();const s=pd(),o=pd();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Bd(o.mutation,t,o.mutation.getFieldMask(),oc.now())):s.set(t.key,Mc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new uf(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=pd();let r=new Rc((e,t)=>e-t),i=yd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Mc.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||yd()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=fd();l.forEach(e=>{if(!i.has(e)){const r=zd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return xc.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return hc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):xc.resolve(hd());let o=-1,a=i;return s.next(t=>xc.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?xc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,yd())).next(e=>({batchId:o,changes:dd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hc(t)).next(e=>{let t=ud();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=ud();return this.indexManager.getCollectionParents(e,r).next(s=>xc.forEach(s,s=>{const o=function(e,t){return new Bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,pu.newInvalidDocument(r)))});let n=ud();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&Bd(s.mutation,i,Mc.empty(),oc.now()),nd(t,i)&&(n=n.insert(e,i))}),n})}}class hf{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return xc.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:jh(n.createTime)}),xc.resolve()}getNamedQuery(e,t){return xc.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:nf(e.bundledQuery),readTime:jh(e.readTime)}}(t)),xc.resolve()}}class ff{constructor(){this.overlays=new Rc(hc.comparator),this.ls=new Map}getOverlay(e,t){return xc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hd();return xc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),xc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),xc.resolve()}getOverlaysForCollection(e,t,n){const r=hd(),i=t.length+1,s=new hc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return xc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Rc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=hd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=hd(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return xc.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new eh(t,n));let i=this.ls.get(t);void 0===i&&(i=yd(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class pf{constructor(){this.fs=new Lc(mf.ds),this.ws=new Lc(mf._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new mf(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new mf(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new hc(new cc([])),n=new mf(t,e),r=new mf(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new hc(new cc([])),n=new mf(t,e),r=new mf(t,e+1);let i=yd();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new mf(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class mf{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return hc.comparator(e.key,t.key)||ic(e.As,t.As)}static _s(e,t){return ic(e.As,t.As)||hc.comparator(e.key,t.key)}}class gf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Lc(mf.ds)}checkEmpty(e){return xc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Jd(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new mf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return xc.resolve(s)}lookupMutationBatch(e,t){return xc.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return xc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return xc.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return xc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new mf(t,0),r=new mf(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),xc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lc(ic);return t.forEach(e=>{const t=new mf(e,0),r=new mf(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),xc.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;hc.isDocumentKey(i)||(i=i.child(""));const s=new mf(new hc(i),0);let o=new Lc(ic);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},s),xc.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ql(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return xc.forEach(t.mutations,r=>{const i=new mf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new mf(t,0),r=this.Rs.firstAfterOrEqual(n);return xc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,xc.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yf{constructor(e){this.Ds=e,this.docs=new Rc(hc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return xc.resolve(n?n.document.mutableCopy():pu.newInvalidDocument(t))}getEntries(e,t){let n=ld();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pu.newInvalidDocument(e))}),xc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ld();const s=t.path,o=new hc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||yc(mc(o),n)<=0||(r.has(o.key)||nd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return xc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Bl()}Cs(e,t){return xc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vf(this)}getSize(e){return xc.resolve(this.size)}}class vf extends cf{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),xc.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class bf{constructor(e){this.persistence=e,this.xs=new od(e=>Uu(e),zu),this.lastRemoteSnapshotVersion=ac.min(),this.highestTargetId=0,this.Ns=0,this.ks=new pf,this.targetCount=0,this.Ms=lf.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),xc.resolve()}getLastRemoteSnapshotVersion(e){return xc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xc.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),xc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),xc.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new lf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,xc.resolve()}updateTargetData(e,t){return this.Fn(t),xc.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,xc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),xc.waitFor(i).next(()=>r)}getTargetCount(e){return xc.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return xc.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),xc.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),xc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),xc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return xc.resolve(n)}containsKey(e,t){return xc.resolve(this.ks.containsKey(t))}}class wf{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ec(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new bf(this),this.indexManager=new sf,this.remoteDocumentCache=function(e){return new yf(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new tf(t),this.qs=new hf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ff,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new gf(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){Ml("MemoryPersistence","Starting transaction:",e);const r=new xf(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return xc.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class xf extends bc{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Qs=new pf,this.js=null}static zs(e){return new _f(e)}get Ws(){if(this.js)return this.js;throw Bl()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),xc.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),xc.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),xc.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xc.forEach(this.Ws,n=>{const r=hc.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,ac.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return xc.or([()=>xc.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Ef{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=yd(),r=yd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ef(e,t.fromCache,n,r)}}class Nf{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Gu(t))return xc.resolve(null);let n=Yu(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ju(t,null,"F"),n=Yu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=yd(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Ju(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return Gu(t)||r.isEqual(ac.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(Fl()<=B.DEBUG&&Ml("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),td(t)),this.Wi(e,s,t,pc(r,-1)))})}ji(e,t){let n=new Lc(id(e));return t.forEach((t,r)=>{nd(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return Fl()<=B.DEBUG&&Ml("QueryEngine","Using full collection scan to execute query:",td(t)),this.Ui.getDocumentsMatchingQuery(e,t,gc.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class kf{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Rc(ic),this.Yi=new od(e=>Uu(e),zu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new df(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Cf(e,t,n,r){return new kf(e,t,n,r)}async function Sf(e,t){const n=Hl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=yd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function Tf(e){const t=Hl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function If(e,t,n){let r=yd(),i=yd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ld();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ac.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ml("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{nr:r,sr:i}})}function Af(e,t){const n=Hl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function jf(e,t){const n=Hl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,xc.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new ef(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Pf(e,t,n){const r=Hl(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!_c(e))throw e;Ml("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Rf(e,t,n){const r=Hl(e);let i=ac.min(),s=yd();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Hl(e),i=r.Yi.get(n);return void 0!==i?xc.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Yu(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:ac.min(),n?s:yd())).next(e=>(Df(r,rd(t),e),{documents:e,ir:s})))}function Df(e,t,n){let r=e.Xi.get(t)||ac.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class Of{constructor(){this.activeTargetIds=bd()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lf{constructor(){this.Hr=new Of,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Of,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ff{Yr(e){}shutdown(){}}class Mf{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ml("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ml("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uf=null;function zf(){return null===Uf?Uf=268435456+Math.round(2147483648*Math.random()):Uf++,"0x"+Uf.toString(16)}const Vf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bf{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const qf="WebChannelConnection";class Hf extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=zf(),o=this.To(e,t);Ml("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then(t=>(Ml("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw zl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ol,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Vf[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=zf();return new Promise((s,o)=>{const a=new Al;a.setWithCredentials(!0),a.listenOnce(kl.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Nl.NO_ERROR:const t=a.getResponseJson();Ml(qf,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Nl.TIMEOUT:Ml(qf,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Kl(Gl.DEADLINE_EXCEEDED,"Request time out"));break;case Nl.HTTP_ERROR:const n=a.getStatus();if(Ml(qf,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gl).indexOf(t)>=0?t:Gl.UNKNOWN}(t.status);o(new Kl(e,t.message))}else o(new Kl(Gl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Kl(Gl.UNAVAILABLE,"Connection failed."));break;default:Bl()}}finally{Ml(qf,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Ml(qf,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=zf(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_l(),o=El(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Tl({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ml(qf,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new Bf({ro:t=>{h?Ml(qf,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Ml(qf,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Ml(qf,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Il.EventType.OPEN,()=>{h||Ml(qf,"RPC '".concat(e,"' stream ").concat(r," transport opened."))}),p(u,Il.EventType.CLOSE,()=>{h||(h=!0,Ml(qf,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())}),p(u,Il.EventType.ERROR,t=>{h||(h=!0,zl(qf,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new Kl(Gl.UNAVAILABLE,"The operation could not be completed")))}),p(u,Il.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];ql(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ml(qf,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=nh[e];if(void 0!==t)return sh(t)}(t),i=o.message;void 0===n&&(n=Gl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.wo(new Kl(n,i)),u.close()}else Ml(qf,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}}),p(o,Cl.STAT_EVENT,t=>{t.stat===Sl.PROXY?Ml(qf,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Sl.NOPROXY&&Ml(qf,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.fo()},0),f}}function Gf(){return"undefined"!=typeof document?document:null}function Kf(e){return new Ch(e,!0)}class Wf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&Ml("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Qf{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Wf(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===Gl.RESOURCE_EXHAUSTED?(Ul(t.toString()),Ul("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===Gl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new Kl(Gl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Ml("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ml("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Xf extends Qf{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ql(void 0===t||"string"==typeof t),zc.fromBase64String(t||"")):(ql(void 0===t||t instanceof Uint8Array),zc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Gl.UNKNOWN:sh(e.code);return new Kl(t,e.message||"")}(o);n=new vh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oh(e,r.document.name),s=jh(r.document.updateTime),o=r.document.createTime?jh(r.document.createTime):ac.min(),a=new hu({mapValue:{fields:r.document.fields}}),l=pu.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new gh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Oh(e,r.document),s=r.readTime?jh(r.readTime):ac.min(),o=pu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Oh(e,r.document),s=r.removedTargetIds||[];n=new gh([],s,i,null)}else{if(!("filter"in t))return Bl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new th(r,i),o=e.targetId;n=new yh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ac.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ac.min():t.readTime?jh(t.readTime):ac.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=Mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Vu(r)?{documents:Bh(e,r)}:{query:qh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ih(e,t.resumeToken);const r=Sh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ac.min())>0){n.readTime=Th(e,t.snapshotVersion.toTimestamp());const r=Sh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=Mh(this.serializer),t.removeTarget=e,this.Wo(t)}}class Yf extends Qf{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(ql(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(ql(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?jh(e.updateTime):jh(t);return n.isEqual(ac.min())&&(n=jh(t)),new Ld(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=jh(e.commitTime);return this.listener.cu(n,t)}return ql(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Mh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Vh(this.serializer,e))};this.Wo(t)}}class $f extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Kl(Gl.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Gl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Gl.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Gl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Gl.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class Jf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Ul(t),this.mu=!1):Ml("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Zf{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{lp(this)&&(Ml("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Hl(e);t.vu.add(4),await tp(t),t.bu.set("Unknown"),t.vu.delete(4),await ep(t)}(this))})}),this.bu=new Jf(n,r)}}async function ep(e){if(lp(e))for(const t of e.Ru)await t(!0)}async function tp(e){for(const t of e.Ru)await t(!1)}function np(e,t){const n=Hl(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),ap(n)?op(n):Cp(n).Ko()&&ip(n,t))}function rp(e,t){const n=Hl(e),r=Cp(n);n.Au.delete(t),r.Ko()&&sp(n,t),0===n.Au.size&&(r.Ko()?r.jo():lp(n)&&n.bu.set("Unknown"))}function ip(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ac.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Cp(e).su(t)}function sp(e,t){e.Vu.qt(t),Cp(e).iu(t)}function op(e){e.Vu=new wh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Cp(e).start(),e.bu.gu()}function ap(e){return lp(e)&&!Cp(e).Uo()&&e.Au.size>0}function lp(e){return 0===Hl(e).vu.size}function cp(e){e.Vu=void 0}async function up(e){e.Au.forEach((t,n)=>{ip(e,t)})}async function dp(e,t){cp(e),ap(e)?(e.bu.Iu(t),op(e)):e.bu.set("Unknown")}async function hp(e,t,n){if(e.bu.set("Online"),t instanceof vh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){Ml("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fp(e,n)}else if(t instanceof gh?e.Vu.Ht(t):t instanceof yh?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(ac.min()))try{const t=await Tf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(zc.EMPTY_BYTE_STRING,r.snapshotVersion)),sp(e,t);const i=new ef(r.target,t,n,r.sequenceNumber);ip(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ml("RemoteStore","Failed to raise snapshot:",t),await fp(e,t)}}async function fp(e,t,n){if(!_c(t))throw t;e.vu.add(1),await tp(e),e.bu.set("Offline"),n||(n=()=>Tf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ml("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await ep(e)})}function pp(e,t){return t().catch(n=>fp(e,n,t))}async function mp(e){const t=Hl(e),n=Sp(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;gp(t);)try{const e=await Af(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,yp(t,e)}catch(e){await fp(t,e)}vp(t)&&bp(t)}function gp(e){return lp(e)&&e.Eu.length<10}function yp(e,t){e.Eu.push(t);const n=Sp(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function vp(e){return lp(e)&&!Sp(e).Uo()&&e.Eu.length>0}function bp(e){Sp(e).start()}async function wp(e){Sp(e).hu()}async function xp(e){const t=Sp(e);for(const n of e.Eu)t.uu(n.mutations)}async function _p(e,t,n){const r=e.Eu.shift(),i=Zd.from(r,t,n);await pp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await mp(e)}async function Ep(e,t){t&&Sp(e).ou&&await async function(e,t){if(ih(n=t.code)&&n!==Gl.ABORTED){const n=e.Eu.shift();Sp(e).Qo(),await pp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await mp(e)}var n}(e,t),vp(e)&&bp(e)}async function Np(e,t){const n=Hl(e);n.asyncQueue.verifyOperationInProgress(),Ml("RemoteStore","RemoteStore received new credentials");const r=lp(n);n.vu.add(3),await tp(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await ep(n)}async function kp(e,t){const n=Hl(e);t?(n.vu.delete(2),await ep(n)):t||(n.vu.add(2),await tp(n),n.bu.set("Unknown"))}function Cp(e){return e.Su||(e.Su=function(e,t,n){const r=Hl(e);return r.fu(),new Xf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:up.bind(null,e),ao:dp.bind(null,e),nu:hp.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),ap(e)?op(e):e.bu.set("Unknown")):(await e.Su.stop(),cp(e))})),e.Su}function Sp(e){return e.Du||(e.Du=function(e,t,n){const r=Hl(e);return r.fu(),new Yf(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:wp.bind(null,e),ao:Ep.bind(null,e),au:xp.bind(null,e),cu:_p.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await mp(e)):(await e.Du.stop(),e.Eu.length>0&&(Ml("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))})),e.Du}class Tp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Tp(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kl(Gl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(e,t){if(Ul("AsyncQueue","".concat(t,": ").concat(e)),_c(e))return new Kl(Gl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ap{constructor(e){this.comparator=e?(t,n)=>e(t,n)||hc.comparator(t.key,n.key):(e,t)=>hc.comparator(e.key,t.key),this.keyedMap=ud(),this.sortedSet=new Rc(this.comparator)}static emptySet(e){return new Ap(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ap))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ap;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class jp{constructor(){this.Cu=new Rc(hc.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Bl():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Pp{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Pp(e,t,Ap.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Rp{constructor(){this.Nu=void 0,this.listeners=[]}}class Dp{constructor(){this.queries=new od(e=>ed(e),Zu),this.onlineState="Unknown",this.ku=new Set}}async function Op(e,t){const n=Hl(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Rp),i)try{s.Nu=await n.onListen(r)}catch(e){const n=Ip(e,"Initialization of query '".concat(td(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Up(n)}async function Lp(e,t){const n=Hl(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Fp(e,t){const n=Hl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&Up(n)}function Mp(e,t,n){const r=Hl(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Up(e){e.ku.forEach(e=>{e.next()})}class zp{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Pp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Pp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Vp{constructor(e){this.key=e}}class Bp{constructor(e){this.key=e}}class qp{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=yd(),this.mutatedKeys=yd(),this.tc=id(e),this.ec=new Ap(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new jp,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=nd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bl()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new Pp(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new jp,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=yd(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new Bp(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new Vp(n))}),t}hc(e){this.Yu=e.ir,this.Zu=yd();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Pp.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class Hp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Gp{constructor(e){this.key=e,this.fc=!1}}class Kp{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new od(e=>ed(e),Zu),this._c=new Map,this.mc=new Set,this.gc=new Rc(hc.comparator),this.yc=new Map,this.Ic=new pf,this.Tc={},this.Ec=new Map,this.Ac=lf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function Wp(e,t){const n=dm(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await jf(n.localStore,Yu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Qp(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&np(n.remoteStore,e)}return i}async function Qp(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Rf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return sm(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Rf(e.localStore,t,!0),o=new qp(t,s.ir),a=o.sc(s.documents),l=mh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);sm(e,n,c.cc);const u=new Hp(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function Xp(e,t){const n=Hl(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!Zu(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Pf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),rp(n.remoteStore,r.targetId),rm(n,r.targetId)}).catch(wc)):(rm(n,r.targetId),await Pf(n.localStore,r.targetId,!0))}async function Yp(e,t){const n=Hl(e);try{const e=await function(e,t){const n=Hl(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(zc.EMPTY_BYTE_STRING,ac.min()).withLastLimboFreeSnapshotVersion(ac.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))});let a=ld(),l=yd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(If(e,s,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(ac.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return xc.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(ql(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?ql(r.fc):e.removedDocuments.size>0&&(ql(r.fc),r.fc=!1))}),await lm(n,e,t)}catch(e){await wc(e)}}function $p(e,t,n){const r=Hl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Hl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)}),r&&Up(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Jp(e,t,n){const r=Hl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Rc(hc.comparator);e=e.insert(s,pu.newNoDocument(s,ac.min()));const n=yd().add(s),i=new ph(ac.min(),new Map,new Rc(ic),e,n);await Yp(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),am(r)}else await Pf(r.localStore,t,!1).then(()=>rm(r,t,n)).catch(wc)}async function Zp(e,t){const n=Hl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Hl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=xc.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);ql(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);nm(n,r,null),tm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await lm(n,e)}catch(e){await wc(e)}}async function em(e,t,n){const r=Hl(e);try{const e=await function(e,t){const n=Hl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ql(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);nm(r,t,n),tm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await lm(r,e)}catch(n){await wc(n)}}function tm(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function nm(e,t,n){const r=Hl(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function rm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||im(e,t)})}function im(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(rp(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),am(e))}function sm(e,t,n){for(const r of n)r instanceof Vp?(e.Ic.addReference(r.key,t),om(e,r)):r instanceof Bp?(Ml("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||im(e,r.key)):Bl()}function om(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(Ml("SyncEngine","New document in limbo: "+n),e.mc.add(r),am(e))}function am(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new hc(cc.fromString(t)),r=e.Ac.next();e.yc.set(r,new Gp(n)),e.gc=e.gc.insert(n,r),np(e.remoteStore,new ef(Yu(Hu(n.path)),r,"TargetPurposeLimboResolution",Ec.ct))}}async function lm(e,t,n){const r=Hl(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ef.Li(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=Hl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>xc.forEach(t,t=>xc.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>xc.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!_c(e))throw e;Ml("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function cm(e,t){const n=Hl(e);if(!n.currentUser.isEqual(t)){Ml("SyncEngine","User change. New user:",t.toKey());const e=await Sf(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new Kl(Gl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await lm(n,e.er)}}function um(e,t){const n=Hl(e),r=n.yc.get(t);if(r&&r.fc)return yd().add(r.key);{let e=yd();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function dm(e){const t=Hl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=um.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jp.bind(null,t),t.dc.nu=Fp.bind(null,t.eventManager),t.dc.Pc=Mp.bind(null,t.eventManager),t}function hm(e){const t=Hl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=em.bind(null,t),t}class fm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Kf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Cf(this.persistence,new Nf,e.initialUser,this.serializer)}createPersistence(e){return new wf(_f.zs,this.serializer)}createSharedClientState(e){return new Lf}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class pm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$p(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=cm.bind(null,this.syncEngine),await kp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dp}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Hf(r));var r;return function(e,t,n,r){return new $f(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>$p(this.syncEngine,e,0),s=Mf.D()?new Mf:new Ff,new Zf(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Kp(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Hl(e);Ml("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await tp(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class mm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Ul("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class gm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Kl(Gl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Hl(e),r=Mh(n.serializer)+"/documents",i={documents:t.map(e=>Dh(n.serializer,e))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){ql(!!t.found),t.found.name,t.found.updateTime;const n=Oh(e,t.found.name),r=jh(t.found.updateTime),i=t.found.createTime?jh(t.found.createTime):ac.min(),s=new hu({mapValue:{fields:t.found.fields}});return pu.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){ql(!!t.missing),ql(!!t.readTime);const n=Oh(e,t.missing),r=jh(t.readTime);return pu.newNoDocument(n,r)}(e,t):Bl()}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());ql(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=hc.fromPath(t);this.mutations.push(new $d(n,this.precondition(n)))}),await async function(e,t){const n=Hl(e),r=Mh(n.serializer)+"/documents",i={writes:t.map(e=>Vh(n.serializer,e))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bl();t=ac.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Kl(Gl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ac.min())?Fd.exists(!1):Fd.updateTime(t):Fd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ac.min()))throw new Kl(Gl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fd.updateTime(t)}return Fd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ym{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new Wf(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new gm(this.datastore),t=this.qc(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Uc(e)}))}).catch(e=>{this.Uc(e)})})}qc(e){try{const t=this.updateFunction(e);return!Nc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ih(t)}return!1}}class vm{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dl.UNAUTHENTICATED,this.clientId=rc.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{Ml("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ml("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Kl(Gl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ip(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function bm(e,t){e.asyncQueue.verifyOperationInProgress(),Ml("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Sf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _m(e);Ml("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>Np(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Np(t.remoteStore,n)),e._onlineComponents=t}function xm(e){return"FirebaseError"===e.name?e.code===Gl.FAILED_PRECONDITION||e.code===Gl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function _m(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ml("FirestoreClient","Using user provided OfflineComponentProvider");try{await bm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!xm(n))throw n;zl("Error using user provided cache. Falling back to memory cache: "+n),await bm(e,new fm)}}else Ml("FirestoreClient","Using default OfflineComponentProvider"),await bm(e,new fm);return e._offlineComponents}async function Em(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ml("FirestoreClient","Using user provided OnlineComponentProvider"),await wm(e,e._uninitializedComponentsProvider._online)):(Ml("FirestoreClient","Using default OnlineComponentProvider"),await wm(e,new pm))),e._onlineComponents}function Nm(e){return Em(e).then(e=>e.syncEngine)}function km(e){return Em(e).then(e=>e.datastore)}async function Cm(e){const t=await Em(e),n=t.eventManager;return n.onListen=Wp.bind(null,t.syncEngine),n.onUnlisten=Xp.bind(null,t.syncEngine),n}function Sm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new mm({next:s=>{t.enqueueAndForget(()=>Lp(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Kl(Gl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Kl(Gl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new zp(Hu(n.path),s,{includeMetadataChanges:!0,Ku:!0});return Op(e,o)}(await Cm(e),e.asyncQueue,t,n,r)),r.promise}function Tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new mm({next:n=>{t.enqueueAndForget(()=>Lp(e,o)),n.fromCache&&"server"===r.source?i.reject(new Kl(Gl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new zp(n,s,{includeMetadataChanges:!0,Ku:!0});return Op(e,o)}(await Cm(e),e.asyncQueue,t,n,r)),r.promise}function Im(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Am=new Map;function jm(e,t,n){if(!n)throw new Kl(Gl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Pm(e){if(!hc.isDocumentKey(e))throw new Kl(Gl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rm(e){if(hc.isDocumentKey(e))throw new Kl(Gl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Dm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Bl()}function Om(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kl(Gl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dm(e);throw new Kl(Gl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Lm{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Kl(Gl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Kl(Gl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Kl(Gl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Im(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Kl(Gl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Kl(Gl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Kl(Gl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class Fm{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Kl(Gl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Kl(Gl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xl;switch(e.type){case"firstParty":return new Zl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Kl(Gl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Am.get(e);t&&(Ml("ComponentProvider","Removing Datastore"),Am.delete(e),t.terminate())}(this),Promise.resolve()}}class Mm{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zm(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mm(this.firestore,e,this._key)}}class Um{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Um(this.firestore,e,this._query)}}class zm extends Um{constructor(e,t,n){super(e,t,Hu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mm(this.firestore,null,new hc(e))}withConverter(e){return new zm(this.firestore,e,this._path)}}function Vm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=L(e),jm("collection","path",t),e instanceof Fm){const n=cc.fromString(t,...r);return Rm(n),new zm(e,null,n)}{if(!(e instanceof Mm||e instanceof zm))throw new Kl(Gl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...r));return Rm(n),new zm(e.firestore,null,n)}}function Bm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=L(e),1===arguments.length&&(t=rc.A()),jm("doc","path",t),e instanceof Fm){const n=cc.fromString(t,...r);return Pm(n),new Mm(e,null,new hc(n))}{if(!(e instanceof Mm||e instanceof zm))throw new Kl(Gl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...r));return Pm(n),new Mm(e.firestore,e instanceof zm?e.converter:null,new hc(n))}}class qm{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Wf(this,"async_queue_retry"),this.Xc=()=>{const e=Gf();e&&Ml("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=Gf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Gf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Wl;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!_c(e))throw e;Ml("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ul("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Tp.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&Bl()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Hm(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class Gm extends Fm{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new qm,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wm(this),this._firestoreClient.terminate()}}function Km(e){return e._firestoreClient||Wm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Wm(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Qc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Im(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new vm(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class Qm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qm(zc.fromBase64String(e))}catch(e){throw new Kl(Gl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Qm(zc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ym{constructor(e){this._methodName=e}}class $m{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Kl(Gl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Kl(Gl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ic(this._lat,e._lat)||ic(this._long,e._long)}}const Jm=/^__.*__$/;class Zm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Kd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gd(e,this.data,t,this.fieldTransforms)}}class eg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Kd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bl()}}class ng{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return bg(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(tg(this.ca)&&Jm.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class rg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Kf(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ng({ca:e,methodName:t,ga:n,path:dc.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ig(e){const t=e._freezeSettings(),n=Kf(e._databaseId);return new rg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sg(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);mg("Data must be an object, but it was:",o,r);const a=fg(r,o);let l,c;if(s.merge)l=new Mc(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=gg(t,r,n);if(!o.contains(i))throw new Kl(Gl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));wg(e,i)||e.push(i)}l=new Mc(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Zm(new hu(a),l,c)}class og extends Ym{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof og}}function ag(e,t,n){return new ng({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class lg extends Ym{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ag(this,e,!0),n=this.pa.map(e=>hg(e,t)),r=new Td(n);return new Od(e.path,r)}isEqual(e){return this===e}}function cg(e,t,n,r){const i=e.ya(1,t,n);mg("Data must be an object, but it was:",i,r);const s=[],o=hu.empty();jc(r,(e,r)=>{const a=vg(t,e,n);r=L(r);const l=i.da(a);if(r instanceof og)s.push(a);else{const e=hg(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Mc(s);return new eg(o,a,i.fieldTransforms)}function ug(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[gg(t,r,n)],l=[i];if(s.length%2!=0)throw new Kl(Gl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(gg(t,s[h])),l.push(s[h+1]);const c=[],u=hu.empty();for(let h=a.length-1;h>=0;--h)if(!wg(c,a[h])){const e=a[h];let t=l[h];t=L(t);const n=o.da(e);if(t instanceof og)c.push(e);else{const r=hg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Mc(c);return new eg(u,d,o.fieldTransforms)}function dg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return hg(n,e.ya(r?4:3,t))}function hg(e,t){if(pg(e=L(e)))return mg("Unsupported field value:",t,e),fg(e,t);if(e instanceof Ym)return function(e,t){if(!tg(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=hg(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=L(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _d(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=oc.fromDate(e);return{timestampValue:Th(t.serializer,n)}}if(e instanceof oc){const n=new oc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Th(t.serializer,n)}}if(e instanceof $m)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qm)return{bytesValue:Ih(t.serializer,e._byteString)};if(e instanceof Mm){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ph(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Dm(e)))}(e,t)}function fg(e,t){const n={};return Pc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jc(e,(e,r)=>{const i=hg(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function pg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof oc||e instanceof $m||e instanceof Qm||e instanceof Mm||e instanceof Ym)}function mg(e,t,n){if(!pg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Dm(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function gg(e,t,n){if((t=L(t))instanceof Xm)return t._internalPath;if("string"==typeof t)return vg(e,t);throw bg("Field path arguments must be of type string or ",e,!1,void 0,n)}const yg=new RegExp("[~\\*/\\[\\]]");function vg(e,t,n){if(t.search(yg)>=0)throw bg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Xm(...t.split("."))._internalPath}catch(r){throw bg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function bg(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Kl(Gl.INVALID_ARGUMENT,a+e+l)}function wg(e,t){return e.some(e=>e.isEqual(t))}class xg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Mm(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _g(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Eg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _g extends xg{data(){return super.data()}}function Eg(e,t){return"string"==typeof t?vg(e,t):t instanceof Xm?t._internalPath:t._delegate._internalPath}function Ng(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Kl(Gl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class Cg extends kg{}function Sg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof kg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Ag).length,n=e.filter(e=>e instanceof Tg).length;if(t>1||t>0&&n>0)throw new Kl(Gl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Tg extends Cg{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Tg(e,t,n)}_apply(e){const t=this._parse(e);return Og(e._query,t),new Um(e.firestore,e.converter,$u(e._query,t))}_parse(e){const t=ig(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Dg(o,s);const t=[];for(const n of o)t.push(Rg(r,e,n));a={arrayValue:{values:t}}}else a=Rg(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Dg(o,s),a=dg(n,"where",o,"in"===s||"not-in"===s);return xu.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ig(e,t,n){const r=t,i=Eg("where",e);return Tg._create(i,r,n)}class Ag extends kg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ag(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:_u.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Og(n,i),n=$u(n,i)}(e._query,t),new Um(e.firestore,e.converter,$u(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jg extends Cg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new jg(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new vu(t,n);return function(e,t){if(null===Ku(e)){const n=Wu(e);null!==n&&Lg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Um(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Pg(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Eg("orderBy",e);return jg._create(n,t)}function Rg(e,t,n){if("string"==typeof(n=L(n))){if(""===n)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qu(t)&&-1!==n.indexOf("/"))throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(cc.fromString(n));if(!hc.isDocumentKey(r))throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return iu(e,new hc(r))}if(n instanceof Mm)return iu(e,n._key);throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Dm(n),"."))}function Dg(e,t){if(!Array.isArray(e)||0===e.length)throw new Kl(Gl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Og(e,t){if(t.isInequality()){const n=Wu(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=Ku(e);null!==i&&Lg(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Kl(Gl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Kl(Gl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Lg(e,t,n){if(!n.isEqual(t))throw new Kl(Gl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class Fg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return jc(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new $m(qc(e.latitude),qc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Kc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wc(e));default:return null}}convertTimestamp(e){const t=Bc(e);return new oc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cc.fromString(e);ql(Zh(n));const r=new Xc(n.get(1),n.get(3)),i=new hc(n.popFirst(5));return r.isEqual(t)||Ul("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Mg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ug extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mm(this.firestore,null,t)}}class zg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vg extends xg{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Eg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Bg extends Vg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class qg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new zg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bg(this._firestore,this._userDataWriter,n.key,n,new zg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kl(Gl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Bg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Bg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Hg(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bl()}}class Gg extends Fg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qm(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mm(this.firestore,null,t)}}function Kg(e){e=Om(e,Um);const t=Om(e.firestore,Gm),n=Km(t),r=new Gg(t);return Ng(e._query),Tm(n,e._query).then(n=>new qg(t,r,e,n))}function Wg(e,t,n){e=Om(e,Mm);const r=Om(e.firestore,Gm),i=ig(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=L(t))||t instanceof Xm?ug(i,"updateDoc",e._key,t,n,a):cg(i,"updateDoc",e._key,t),Yg(r,[s.toMutation(e._key,Fd.exists(!0))])}function Qg(e,t){const n=Om(e.firestore,Gm),r=Bm(e),i=Mg(e.converter,t);return Yg(n,[sg(ig(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fd.exists(!1))]).then(()=>r)}function Xg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=L(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Hm(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Hm(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof Mm)d=Om(e.firestore,Gm),h=Hu(e._key.path),u={next:t=>{n[l]&&n[l]($g(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Om(e,Um);d=Om(t.firestore,Gm),h=t._query;const r=new Gg(d);u={next:e=>{n[l]&&n[l](new qg(d,r,t,e))},error:n[l+1],complete:n[l+2]},Ng(e._query)}return function(e,t,n,r){const i=new mm(r),s=new zp(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>Op(await Cm(e),s)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>Lp(await Cm(e),s))}}(Km(d),h,c,u)}function Yg(e,t){return function(e,t){const n=new Wl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=hm(e);try{const e=await function(e,t){const n=Hl(e),r=oc.now(),i=t.reduce((e,t)=>e.add(t.key),yd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ld(),l=yd();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=qd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Kd(e.key,t,fu(t.value.mapValue),Fd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:dd(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Rc(ic)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await lm(r,e.changes),await mp(r.remoteStore)}catch(e){const t=Ip(e,"Failed to persist write");n.reject(t)}}(await Nm(e),t,n)),n.promise}(Km(e),t)}function $g(e,t,n){const r=n.docs.get(t._key),i=new Gg(e);return new Vg(e,i,t._key,r,new zg(n.hasPendingWrites,n.fromCache),t.converter)}const Jg={maxAttempts:5};function Zg(e,t){if((e=L(e)).firestore!==t)throw new Kl(Gl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class ey extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ig(e)}get(e){const t=Zg(e,this._firestore),n=new Ug(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Bl();const r=e[0];if(r.isFoundDocument())return new xg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new xg(this._firestore,n,t._key,null,t.converter);throw Bl()})}set(e,t,n){const r=Zg(e,this._firestore),i=Mg(r.converter,t,n),s=sg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Zg(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=L(t))||t instanceof Xm?ug(this._dataReader,"Transaction.update",r._key,t,n,o):cg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Zg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zg(e,this._firestore),n=new Gg(this._firestore);return super.get(e).then(e=>new Vg(this._firestore,n,t._key,e._document,new zg(!1,!1),t.converter))}}function ty(e,t,n){e=Om(e,Gm);const r=Object.assign(Object.assign({},Jg),n);return function(e){if(e.maxAttempts<1)throw new Kl(Gl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Wl;return e.asyncQueue.enqueueAndForget(async()=>{const i=await km(e);new ym(e.asyncQueue,i,n,t,r).run()}),r.promise}(Km(e),n=>t(new ey(e,n)),r)}function ny(){return new og("deleteField")}function ry(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lg("arrayUnion",t)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ol=e}(We),qe(new F("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Gm(new $l(e.getProvider("auth-internal")),new tc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Kl(Gl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ye(Rl,"3.13.0",e),Ye(Rl,"3.13.0","esm2017")}();const iy="firebasestorage.googleapis.com",sy="storageBucket";class oy extends C{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(cy(e),"Firebase Storage: ".concat(t," (").concat(cy(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var ay,ly;function cy(e){return"storage/"+e}function uy(){return new oy(ay.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function dy(){return new oy(ay.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hy(){return new oy(ay.CANCELED,"User canceled the upload/download.")}function fy(){return new oy(ay.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function py(e){return new oy(ay.INVALID_ARGUMENT,e)}function my(){return new oy(ay.APP_DELETED,"The Firebase app was deleted.")}function gy(e,t){return new oy(ay.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function yy(e){throw new oy(ay.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ay||(ay={}));class vy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=vy.makeFromUrl(e,t)}catch(i){return new vy(e,"")}if(""===n.path)return n;throw r=e,new oy(ay.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===iy?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new vy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new oy(ay.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class by{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function wy(e){return"string"===typeof e||e instanceof String}function xy(e){return _y()&&e instanceof Blob}function _y(){return"undefined"!==typeof Blob&&!N()}function Ey(e,t,n,r){if(r<t)throw py("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw py("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ny(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ky(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Cy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ly||(ly={}));class Sy{constructor(e,t,n,r,i,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ty(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===ly.NO_ERROR,i=n.getStatus();if(!t||Cy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===ly.ABORT;return void e(!1,new Ty(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Ty(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=uy();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?my():hy())}else{r(dy())}};this.canceled_?t(0,new Ty(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ty{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Iy(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ay(){const e=Iy();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(_y())return new Blob(n);throw new oy(ay.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function jy(e){if("undefined"===typeof atob)throw t="base-64",new oy(ay.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Py="raw",Ry="base64",Dy="base64url",Oy="data_url";class Ly{constructor(e,t){this.data=e,this.contentType=t||null}}function Fy(e,t){switch(e){case Py:return new Ly(My(t));case Ry:case Dy:return new Ly(Uy(e,t));case Oy:return new Ly(function(e){const t=new zy(e);return t.base64?Uy(Ry,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw gy(Oy,"Malformed data URL.")}return My(t)}(t.rest)}(t),new zy(t).contentType)}throw uy()}function My(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Uy(e,t){switch(e){case Ry:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw gy(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Dy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw gy(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jy(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw gy(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class zy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw gy(Oy,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Vy{constructor(e,t){let n=0,r="";xy(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(xy(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Vy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Vy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(_y()){const e=t.map(e=>e instanceof Vy?e.data_:e);return new Vy(Ay.apply(null,e))}{const e=t.map(e=>wy(e)?Fy(Py,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Vy(r,!0)}}uploadData(){return this.data_}}function By(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function qy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Hy(e,t){return t}class Gy{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Hy}}let Ky=null;function Wy(){if(Ky)return Ky;const e=[];e.push(new Gy("bucket")),e.push(new Gy("generation")),e.push(new Gy("metageneration")),e.push(new Gy("name","fullPath",!0));const t=new Gy("name");t.xform=function(e,t){return function(e){return!wy(e)||e.length<2?e:qy(e)}(t)},e.push(t);const n=new Gy("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Gy("timeCreated")),e.push(new Gy("updated")),e.push(new Gy("md5Hash",null,!0)),e.push(new Gy("cacheControl",null,!0)),e.push(new Gy("contentDisposition",null,!0)),e.push(new Gy("contentEncoding",null,!0)),e.push(new Gy("contentLanguage",null,!0)),e.push(new Gy("contentType",null,!0)),e.push(new Gy("metadata","customMetadata",!0)),Ky=e,Ky}function Qy(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new vy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Xy(e,t,n){const r=By(t);if(null===r)return null;return Qy(e,r,n)}function Yy(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class $y{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Jy(e){if(!e)throw uy()}function Zy(e,t){return function(n,r){const i=Xy(e,r,t);return Jy(null!==i),i}}function ev(e,t){return function(n,r){const i=Xy(e,r,t);return Jy(null!==i),function(e,t,n,r){const i=By(t);if(null===i)return null;if(!wy(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return Ny("/b/"+o(i)+"/o/"+o(s),n,r)+ky({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function tv(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new oy(ay.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new oy(ay.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new oy(ay.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new oy(ay.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function nv(e){const t=tv(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new oy(ay.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function rv(e,t,n){const r=Ny(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new $y(r,"GET",Zy(e,n),i);return s.errorHandler=nv(t),s}function iv(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function sv(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=iv(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Yy(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Vy.getBlob(c,r,u);if(null===d)throw fy();const h={name:l.fullPath},f=Ny(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new $y(f,"POST",Zy(e,n),p);return m.urlParams=h,m.headers=o,m.body=d.uploadData(),m.errorHandler=tv(t),m}class ov{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function av(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Jy(!1)}return Jy(!!n&&-1!==(t||["active"]).indexOf(n)),n}const lv=262144;function cv(e,t,n,r,i,s,o,a){const l=new ov(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new oy(ay.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(d,h);if(null===m)throw fy();const g=t.maxUploadRetryTime,y=new $y(n,"POST",function(e,n){const i=av(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?Zy(t,s)(e,n):null,new ov(o,a,"final"===i,c)},g);return y.headers=p,y.body=m.uploadData(),y.progressCallback=a||null,y.errorHandler=tv(e),y}const uv="running",dv="paused",hv="success",fv="canceled",pv="error";function mv(e){switch(e){case"running":case"pausing":case"canceling":return uv;case"paused":return dv;case"success":return hv;case"canceled":return fv;default:return pv}}class gv{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function yv(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then(()=>e(...n))}}class vv{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ly.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ly.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ly.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw yy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw yy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class bv extends vv{initXhr(){this.xhr_.responseType="text"}}function wv(){return new bv}class xv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Wy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(ay.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Cy(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=dy()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(ay.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=iv(t,r,i),a={name:o.fullPath},l=Ny(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Yy(o,n),d=e.maxUploadRetryTime,h=new $y(l,"POST",function(e){let t;av(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Jy(!1)}return Jy(wy(t)),t},d);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=tv(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,wv,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new $y(n,"POST",function(e){const t=av(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){Jy(!1)}n||Jy(!1);const i=Number(n);return Jy(!isNaN(i)),new ov(i,r.size(),"final"===t)},i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=tv(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,wv,t,n);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=lv*this._chunkMultiplier,t=new ov(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,i)=>{let s;try{s=cv(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,wv,r,i,!1);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(lv*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=rv(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,wv,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=sv(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,wv,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=hy(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=mv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new gv(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(mv(this._state)){case hv:yv(this._resolve.bind(null,this.snapshot))();break;case fv:case pv:yv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(mv(this._state)){case uv:case dv:e.next&&yv(e.next.bind(e,this.snapshot))();break;case hv:e.complete&&yv(e.complete.bind(e))();break;default:e.error&&yv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class _v{constructor(e,t){this._service=e,this._location=t instanceof vy?t:vy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _v(e,t)}get root(){const e=new vy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new vy(this._location.bucket,e);return new _v(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new oy(ay.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ev(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Ny(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new $y(r,"GET",ev(e,n),i);return s.errorHandler=nv(t),s}(e.storage,e._location,Wy());return e.storage.makeRequestWithTokens(t,wv).then(e=>{if(null===e)throw new oy(ay.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Nv(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new vy(e._location.bucket,n);return new _v(e.storage,r)}function kv(e,t){if(e instanceof Tv){const n=e;if(null==n._bucket)throw new oy(ay.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sy+"' property when initializing the app?");const r=new _v(n,n._bucket);return null!=t?kv(r,t):r}return void 0!==t?Nv(e,t):e}function Cv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Tv)return new _v(e,t);throw py("To use ref(service, url), the first argument must be a Storage instance.")}return kv(e,t)}function Sv(e,t){const n=null===t||void 0===t?void 0:t[sy];return null==n?null:vy.makeFromBucketSpec(n,e)}class Tv{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=iy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?vy.makeFromBucketSpec(r,this._host):Sv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=vy.makeFromBucketSpec(this._url,e):this._bucket=Sv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ey("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ey("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _v(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new by(my());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=ky(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Sy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Iv="@firebase/storage",Av="0.11.2",jv="storage";function Pv(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new xv(e,new Vy(t),n)}(e=L(e),t,n)}function Rv(e){return Ev(e=L(e))}function Dv(e,t){return Cv(e=L(e),t)}function Ov(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Tv(r,i,s,n,We)}qe(new F(jv,Ov,"PUBLIC").setMultipleInstances(!0)),Ye(Iv,Av,""),Ye(Iv,Av,"esm2017");var Lv=n(579);const Fv={apiKey:"AIzaSyA7H6G0mXCy9DmoLg3fSW3TrxIRcEzz9jg",authDomain:"portal-evelsa.firebaseapp.com",projectId:"portal-evelsa",storageBucket:"portal-evelsa.firebasestorage.app",messagingSenderId:"847174487471",appId:"1:847174487471:web:c3a57fd8315ce619a2335a"},Mv=Qe(Fv),Uv=ui(Mv),zv=function(e,t){const n="string"==typeof e?e:t||"(default)",r=He("object"==typeof e?e:Xe(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=v("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Om(e,Fm))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dl.MOCK_USER;else{t=_(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Kl(Gl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dl(s)}e._authCredentials=new Yl(new Ql(t,n))}}(r,...e)}return r}(Mv),Vv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe(),t=arguments.length>1?arguments[1]:void 0;e=L(e);const n=He(e,jv).getImmediate({identifier:t}),r=v("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:_(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Mv),Bv=e=>{let{message:t,type:n,onClose:r}=e;if(!t)return null;return(0,Lv.jsxs)("div",{className:"".concat("p-4 mb-4 text-sm rounded-lg relative"," ").concat({error:"bg-red-100 text-red-800",success:"bg-green-100 text-green-800"}[n]),role:"alert",children:[(0,Lv.jsx)("span",{className:"font-medium",children:t}),(0,Lv.jsx)("button",{onClick:r,className:"absolute top-0 right-0 mt-2 mr-3 text-2xl font-semibold leading-none",children:"\xd7"})]})},qv=e=>{let{title:t,message:n,onConfirm:r,onCancel:i,confirmText:s="Confirmar",cancelText:o="Cancelar",confirmColor:a="bg-green-600"}=e;return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,Lv.jsx)("h3",{className:"text-lg font-bold mb-4",children:t}),(0,Lv.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:n}),(0,Lv.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:i,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:o}),(0,Lv.jsx)("button",{onClick:r,className:"".concat(a," hover:opacity-90 text-white font-bold py-2 px-4 rounded"),children:s})]})]})})},Hv=e=>{let{title:t,message:n,onConfirm:i,onCancel:s,confirmText:o="Confirmar",cancelText:a="Cancelar",confirmColor:l="bg-orange-600"}=e;const[c,u]=(0,r.useState)("");return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Lv.jsx)("h3",{className:"text-lg font-bold mb-4",children:t}),(0,Lv.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:n}),(0,Lv.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),placeholder:"Escribe el motivo aqu\xed...",rows:"3",className:"w-full p-2 border rounded-md"}),(0,Lv.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Lv.jsx)("button",{onClick:s,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:a}),(0,Lv.jsx)("button",{onClick:()=>i(c),className:"".concat(l," hover:opacity-90 text-white font-bold py-2 px-4 rounded"),children:o})]})]})})},Gv=e=>{let{user:t,userData:n}=e;return(0,Lv.jsx)("header",{className:"bg-white shadow-md sticky top-0 z-40",children:(0,Lv.jsxs)("div",{className:"max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex justify-between items-center",children:[(0,Lv.jsx)("div",{className:"flex items-center",children:n&&"cliente"===n.rol&&n.logoUrl?(0,Lv.jsx)("img",{src:n.logoUrl,onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/150x50/FFFFFF/000000?text=Logo+Cliente"},alt:"Logo Cliente",className:"h-12 w-auto mr-4 object-contain"}):(0,Lv.jsx)("img",{src:"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png",alt:"Logo Grupo Evelsa",className:"h-12 w-auto mr-4"})}),t&&(0,Lv.jsxs)("div",{className:"flex items-center",children:[(0,Lv.jsxs)("span",{className:"text-gray-600 mr-4 hidden sm:block",children:["Hola, ",n?n.nombreCompleto.split(" ")[0]:t.email]}),(0,Lv.jsx)("button",{onClick:()=>Yn(Uv),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300",children:"Salir"})]})]})})},Kv=e=>{let{project:t,user:n,userData:i,onClose:s}=e;const[o,a]=(0,r.useState)([]),[l,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(!0),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=Xg(Sg(Vm(zv,"bitacoras_proyectos"),Ig("projectId","==",t.id),Pg("fecha","asc")),e=>{a(e.docs.map(e=>c({id:e.id},e.data()))),p(!1)},e=>{console.error("Error fetching log entries:",e),v("No se pudo cargar la bit\xe1cora."),p(!1)});return()=>e()},[t.id]);return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl h-[90vh] flex flex-col",children:[(0,Lv.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold",children:["Bit\xe1cora del Proyecto: ",t.npu]}),(0,Lv.jsx)("button",{onClick:s,className:"text-gray-600 hover:text-gray-900 text-2xl font-bold",children:"\xd7"})]}),(0,Lv.jsx)("div",{className:"flex-grow overflow-y-auto border rounded-md p-4 space-y-4 mb-4 bg-gray-50",children:f?(0,Lv.jsx)("p",{children:"Cargando bit\xe1cora..."}):0===o.length?(0,Lv.jsx)("p",{children:"No hay entradas en la bit\xe1cora."}):o.map(e=>{return(0,Lv.jsxs)("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[(0,Lv.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:e.mensaje}),e.adjuntoUrl&&(0,Lv.jsx)("a",{href:e.adjuntoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"Ver adjunto"}),(0,Lv.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-right",children:[e.autorNombre," - ",(t=e.fecha,t?new Date(1e3*t.seconds).toLocaleString("es-MX"):"---")]})]},e.id);var t})}),(0,Lv.jsxs)("div",{className:"border-t pt-4",children:[(0,Lv.jsx)("textarea",{value:l,onChange:e=>u(e.target.value),placeholder:"A\xf1adir nueva nota...",rows:"3",className:"w-full p-2 border rounded-md"}),(0,Lv.jsx)("input",{type:"file",id:"file-input-".concat(t.id),onChange:e=>{e.target.files[0]&&h(e.target.files[0])},className:"w-full text-sm mt-2"}),(0,Lv.jsx)(Bv,{message:y,type:"error",onClose:()=>v("")}),(0,Lv.jsx)("button",{onClick:async()=>{if(l||d){g(!0),v("");try{let e="";if(d){const n=Pv(Dv(Vv,"bitacoras/".concat(t.id,"/").concat(Date.now(),"_").concat(d.name)),d);e=await Rv((await n).ref)}await Qg(Vm(zv,"bitacoras_proyectos"),{projectId:t.id,autorId:n.uid,autorNombre:i.nombreCompleto,mensaje:l,adjuntoUrl:e,fecha:oc.now()}),u(""),h(null);const r=document.getElementById("file-input-".concat(t.id));r&&(r.value="")}catch(e){console.error("Error al guardar en bit\xe1cora:",e),v("No se pudo guardar la nota. Por favor, intente de nuevo.")}finally{g(!1)}}},disabled:m,className:"w-full mt-2 bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg disabled:bg-gray-300",children:m?"Guardando...":"A\xf1adir a la Bit\xe1cora"})]})]})})},Wv=e=>{let{onUserAdded:t}=e;const[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)("cliente"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)("");return(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,Lv.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Crear Nuevo Usuario"}),(0,Lv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),v(""),a&&n&&s)if("cliente"!==c||d)try{const e=ui(Qe(Fv,"Secondary-".concat((new Date).getTime()))),r=await async function(e,t,n){var r;const i=wn(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await yn(i,s,"signUpPassword");o=Vn(i,e)}else o=Vn(i,s).catch(async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await yn(i,s,"signUpPassword");return Vn(i,e)}return Promise.reject(e)});const a=await o.catch(e=>Promise.reject(e)),l=await Bn._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(e,n,s);await function(e,t,n){e=Om(e,Mm);const r=Om(e.firestore,Gm),i=Mg(e.converter,t,n);return Yg(r,[sg(ig(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fd.none())])}(Bm(zv,"usuarios",r.user.uid),{email:n,rol:c,nombreCompleto:a,clienteIdNumerico:"cliente"===c?d.padStart(3,"0"):"",logoUrl:"cliente"===c?f:""}),v("\xa1Usuario ".concat(n," con rol '").concat(c,"' creado con \xe9xito!")),i(""),o(""),l(""),u("cliente"),h(""),p(""),t&&t()}catch(r){g("Error al crear usuario: ".concat(r.message))}else g("Para clientes, el ID Num\xe9rico es obligatorio.");else g("Nombre, email y contrase\xf1a son obligatorios.")},className:"space-y-4",children:[(0,Lv.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),placeholder:"Nombre Completo",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),(0,Lv.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,Lv.jsx)("option",{value:"cliente",children:"Cliente"}),(0,Lv.jsx)("option",{value:"administrador",children:"Administrador"}),(0,Lv.jsx)("option",{value:"directivo",children:"Directivo"}),(0,Lv.jsx)("option",{value:"ecotech",children:"Encargada Ecotech"}),(0,Lv.jsx)("option",{value:"supervisor",children:"Supervisor de Proyectos"}),(0,Lv.jsx)("option",{value:"tecnico",children:"T\xe9cnico"}),(0,Lv.jsx)("option",{value:"finanzas",children:"Finanzas"}),(0,Lv.jsx)("option",{value:"practicante",children:"Practicante"})]}),(0,Lv.jsx)("input",{type:"email",value:n,onChange:e=>i(e.target.value),placeholder:"Email de Acceso",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),(0,Lv.jsx)("input",{type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"Contrase\xf1a (m\xednimo 6 caracteres)",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),"cliente"===c&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("input",{type:"text",value:d,onChange:e=>h(e.target.value),placeholder:"ID Num\xe9rico Cliente (ej: 001)",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"}),(0,Lv.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"URL del Logo (Opcional)",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,Lv.jsx)(Bv,{message:m,type:"error",onClose:()=>g("")}),(0,Lv.jsx)(Bv,{message:y,type:"success",onClose:()=>v("")}),(0,Lv.jsx)("button",{type:"submit",className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg",children:"Crear Usuario"})]})]})},Qv=e=>{let{collectionName:t,title:n,fields:i,placeholderTexts:s}=e;const[o,a]=(0,r.useState)([]),[l,u]=(0,r.useState)({}),[d,h]=(0,r.useState)(!0),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=Xg(Sg(Vm(zv,t)),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));a(t),h(!1)},e=>{console.error("Error fetching ".concat(t,":"),e),p("No se pudieron cargar los datos de ".concat(n,".")),h(!1)});return()=>e()},[t,n]);const y=e=>{const{name:t,value:n}=e.target;u(e=>c(c({},e),{},{[t]:n}))};return(0,Lv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,Lv.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:["A\xf1adir Nuevo ",n.slice(0,-1)]}),(0,Lv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.some(e=>!l[e]))p("Todos los campos son obligatorios.");else{p(""),g("");try{await Qg(Vm(zv,t),l),g("\xa1".concat(n.slice(0,-1)," a\xf1adido con \xe9xito!")),u({})}catch(r){p("Error al a\xf1adir el nuevo \xedtem: ".concat(r.message))}}},className:"space-y-4",children:[i.map((e,t)=>(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700 capitalize",children:e.replace(/([A-Z])/g," $1")}),(0,Lv.jsx)("input",{type:"text",name:e,value:l[e]||"",onChange:y,placeholder:s[t],className:"mt-1 block w-full px-3 py-2 border rounded-md"})]},e)),(0,Lv.jsx)(Bv,{message:f,type:"error",onClose:()=>p("")}),(0,Lv.jsx)(Bv,{message:m,type:"success",onClose:()=>g("")}),(0,Lv.jsx)("button",{type:"submit",className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg",children:"A\xf1adir"})]})]}),(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200",children:[(0,Lv.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:[n," Existentes"]}),(0,Lv.jsx)("div",{className:"overflow-y-auto max-h-96",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsx)("tr",{children:i.map(e=>(0,Lv.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium uppercase",children:e.replace(/([A-Z])/g," $1")},e))})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d?(0,Lv.jsx)("tr",{children:(0,Lv.jsx)("td",{colSpan:i.length,children:"Cargando..."})}):o.map(e=>(0,Lv.jsx)("tr",{children:i.map(t=>(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e[t]},"".concat(e.id,"-").concat(t)))},e.id))})]})})]})]})},Xv=()=>{const[e,t]=(0,r.useState)("projects"),[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),u=()=>{l(!0);const e=Xg(Sg(Vm(zv,"proyectos"),Pg("fechaApertura","desc")),e=>{i(e.docs.map(e=>c({id:e.id},e.data()))),l(!1)}),t=Xg(Sg(Vm(zv,"proyectos"),Ig("estado","==","En Revisi\xf3n Final")),e=>{o(e.docs.map(e=>c({id:e.id},e.data())))});return()=>{e(),t()}};return(0,r.useEffect)(()=>{const e=u();return()=>e()},[]),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Lv.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,Lv.jsx)("button",{onClick:()=>t("projects"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("projects"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Proyectos"}),(0,Lv.jsxs)("button",{onClick:()=>t("review"),className:"relative whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("review"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:["Revisi\xf3n Final",s.length>0&&(0,Lv.jsx)("span",{className:"absolute top-2 -right-4 ml-2 px-2 py-0.5 text-xs font-bold text-white bg-red-500 rounded-full",children:s.length})]}),(0,Lv.jsx)("button",{onClick:()=>t("users"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("users"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Usuarios"}),(0,Lv.jsx)("button",{onClick:()=>t("services"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("services"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Servicios"}),(0,Lv.jsx)("button",{onClick:()=>t("providers"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("providers"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Proveedores"})]})}),"users"===e&&(0,Lv.jsx)(Wv,{onUserAdded:()=>{}}),"projects"===e&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)(Jv,{onProjectAdded:u}),(0,Lv.jsx)("h2",{className:"text-2xl font-bold text-gray-800 my-6",children:"Todos los Proyectos"}),a?(0,Lv.jsx)("p",{children:"Cargando tabla..."}):(0,Lv.jsx)(Zv,{projects:n,onUpdateProject:u,userRole:"administrador"})]}),"review"===e&&(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h2",{className:"text-2xl font-bold text-gray-800 my-6",children:"Proyectos Pendientes de Aprobaci\xf3n Final"}),a?(0,Lv.jsx)("p",{children:"Cargando..."}):0===s.length?(0,Lv.jsx)("p",{children:"No hay proyectos en revisi\xf3n."}):(0,Lv.jsx)(eb,{projects:s,onUpdateProject:u})]}),"services"===e&&(0,Lv.jsx)(Qv,{collectionName:"servicios",title:"Servicios",fields:["nombre","servicioIdNumerico","dependencia"],placeholderTexts:["Nombre del Servicio","ID Num\xe9rico (ej: 0001)","Dependencia"]}),"providers"===e&&(0,Lv.jsx)(Qv,{collectionName:"proveedores",title:"Proveedores",fields:["nombre","proveedorIdNumerico"],placeholderTexts:["Nombre del Proveedor","ID Num\xe9rico (ej: 01)"]})]})},Yv=e=>{let{url:t,onClose:n}=e;return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50",children:(0,Lv.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col",children:[(0,Lv.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,Lv.jsx)("h3",{className:"text-lg font-bold",children:"Visor de Documentos"}),(0,Lv.jsx)("button",{onClick:n,className:"text-gray-600 hover:text-gray-900 text-2xl font-bold",children:"\xd7"})]}),(0,Lv.jsx)("div",{className:"flex-grow",children:(0,Lv.jsx)("iframe",{src:t,title:"Visor de Heyzine",className:"w-full h-full",frameBorder:"0",allowFullScreen:!0})})]})})},$v=e=>{let{projects:t,onOpenModal:n}=e;const r=t.filter(e=>"Terminado"===e.estadoCliente&&(e.urlDocumento1||e.urlDocumento2));return(0,Lv.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8",children:r.map(e=>(0,Lv.jsxs)("button",{className:"group text-left focus:outline-none",onClick:()=>n(e.urlDocumento2||e.urlDocumento1),children:[(0,Lv.jsxs)("div",{className:"relative pt-[141%] bg-gray-200 rounded-lg shadow-lg group-hover:shadow-2xl transition-all duration-300 transform group-hover:-translate-y-1 overflow-hidden",children:[(0,Lv.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/portal-evelsa.firebasestorage.app/o/portada%20Carpetas.jpeg?alt=media&token=417eb65c-1694-4efc-9e2a-55528d43a8d6",alt:"Portada de proyecto",className:"absolute inset-0 w-full h-full object-cover"}),(0,Lv.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40"}),(0,Lv.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-center items-center p-4 text-white text-center",children:[(0,Lv.jsx)("h4",{className:"font-bold text-lg leading-tight",children:e.clienteNombre}),(0,Lv.jsx)("hr",{className:"w-1/4 my-2 border-gray-400"}),(0,Lv.jsx)("p",{className:"text-sm",children:e.servicioNombre})]})]}),(0,Lv.jsx)("p",{className:"text-sm font-semibold text-gray-700 mt-3 truncate group-hover:text-blue-600",children:e.servicioNombre})]},e.id))})},Jv=e=>{var t;let{onProjectAdded:n}=e;const[i,s]=(0,r.useState)({clienteId:"",servicioId:"",proveedorId:"",comentariosApertura:"",fechaApertura:(new Date).toISOString().split("T")[0],precioCotizacionCliente:"",costoProveedor:""}),[o,a]=(0,r.useState)({cotizacionClienteFile:null,poClienteFile:null,cotizacionProveedorFile:null,poProveedorFile:null}),l=r.useRef(null),[u,d]=(0,r.useState)({clientes:[],servicios:[],proveedores:[]}),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),g="ecologia y asesoria ambiental"===(null===(t=u.proveedores.find(e=>e.id===i.proveedorId))||void 0===t?void 0:t.nombre.toLowerCase().trim());(0,r.useEffect)(()=>{(async()=>{try{const[e,t,n]=await Promise.all([Kg(Sg(Vm(zv,"usuarios"),Ig("rol","==","cliente"))),Kg(Vm(zv,"servicios")),Kg(Vm(zv,"proveedores"))]),r=(e,t)=>(e.nombreCompleto||e.nombre).localeCompare(t.nombreCompleto||t.nombre);d({clientes:e.docs.map(e=>c({id:e.id},e.data())).sort(r),servicios:t.docs.map(e=>c({id:e.id},e.data())).sort(r),proveedores:n.docs.map(e=>c({id:e.id},e.data())).sort(r)})}catch(e){f("Error al cargar datos maestros.")}})()},[]),(0,r.useEffect)(()=>{g&&s(e=>c(c({},e),{},{costoProveedor:"0"}))},[i.proveedorId,g]);const y=e=>{const{name:t,value:n}=e.target;s(e=>c(c({},e),{},{[t]:n}))},v=e=>{const{name:t,files:n}=e.target;n[0]&&a(e=>c(c({},e),{},{[t]:n[0]}))},b=async(e,t)=>{if(!e)return null;const n=Pv(Dv(Vv,t),e);return await n,await Rv(n.snapshot.ref)};return(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8",children:[(0,Lv.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Crear Nuevo Proyecto"}),(0,Lv.jsxs)("form",{ref:l,onSubmit:async e=>{if(e.preventDefault(),i.clienteId&&i.servicioId&&i.proveedorId){m(!0),f("");try{var t,r,a,c;const e=await b(o.cotizacionClienteFile,"cotizaciones_clientes/".concat(Date.now(),"_").concat(null===(t=o.cotizacionClienteFile)||void 0===t?void 0:t.name)),d=await b(o.poClienteFile,"po_clientes/".concat(Date.now(),"_").concat(null===(r=o.poClienteFile)||void 0===r?void 0:r.name)),h=await b(o.cotizacionProveedorFile,"cotizaciones_proveedores/".concat(Date.now(),"_").concat(null===(a=o.cotizacionProveedorFile)||void 0===a?void 0:a.name)),f=await b(o.poProveedorFile,"po_proveedores/".concat(Date.now(),"_").concat(null===(c=o.poProveedorFile)||void 0===c?void 0:c.name)),p=new Date(i.fechaApertura).getFullYear(),m=Bm(zv,"contadores","proyectos_".concat(p)),y=await ty(zv,async e=>{const t=await e.get(m),n=(t.exists()?t.data().consecutivo:0)+1;return e.set(m,{consecutivo:n},{merge:!0}),n}),v=p.toString().slice(-2),w=y.toString().padStart(3,"0"),x=u.clientes.find(e=>e.id===i.clienteId),_=u.servicios.find(e=>e.id===i.servicioId),E=u.proveedores.find(e=>e.id===i.proveedorId),N="".concat(x.clienteIdNumerico,"-").concat(_.servicioIdNumerico,"-").concat(E.proveedorIdNumerico,"-").concat(w).concat(v),k=g?"N/A":N.slice(-8),C=d?"Activo":"Cotizaci\xf3n";await Qg(Vm(zv,"proyectos"),{fechaApertura:oc.fromDate(new Date(i.fechaApertura)),npu:N,clienteId:i.clienteId,clienteNombre:x.nombreCompleto,servicioId:i.servicioId,servicioNombre:_.nombre,proveedorId:i.proveedorId,proveedorNombre:E.nombre,comentariosApertura:i.comentariosApertura,estado:C,estadoCliente:C,dependencia:_.dependencia||"Sin Dependencia",asignadoTecnicosIds:[],tecnicosStatus:{},precioCotizacionCliente:Number(i.precioCotizacionCliente)||0,urlCotizacionCliente:e||"",urlPOCliente:d||"",costoProveedor:Number(i.costoProveedor)||0,poProveedor:k,urlCotizacionProveedor:h||"",urlPOProveedor:f||""}),s({clienteId:"",servicioId:"",proveedorId:"",comentariosApertura:"",fechaApertura:(new Date).toISOString().split("T")[0],precioCotizacionCliente:"",costoProveedor:""}),l.current.reset(),n&&n()}catch(d){console.error("Error al crear proyecto:",d),f("Ocurri\xf3 un error: ".concat(d.message))}m(!1)}else f("Cliente, Servicio y Proveedor son obligatorios.")},className:"space-y-6",children:[(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Apertura"}),(0,Lv.jsx)("input",{type:"date",name:"fechaApertura",value:i.fechaApertura,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,Lv.jsxs)("select",{name:"clienteId",value:i.clienteId,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,Lv.jsx)("option",{value:"",children:"Seleccione un Cliente"}),u.clientes.map(e=>(0,Lv.jsx)("option",{value:e.id,children:e.nombreCompleto},e.id))]}),(0,Lv.jsxs)("select",{name:"servicioId",value:i.servicioId,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,Lv.jsx)("option",{value:"",children:"Seleccione un Proyecto/Servicio"}),u.servicios.map(e=>(0,Lv.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,Lv.jsxs)("select",{name:"proveedorId",value:i.proveedorId,onChange:y,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm",children:[(0,Lv.jsx)("option",{value:"",children:"Seleccione un Proveedor"}),u.proveedores.map(e=>(0,Lv.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,Lv.jsx)("textarea",{name:"comentariosApertura",value:i.comentariosApertura,onChange:y,placeholder:"Comentarios de apertura",className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,Lv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 border-t pt-6",children:[(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsx)("h4",{className:"font-semibold text-gray-700",children:"Informaci\xf3n del Cliente"}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Precio Cotizaci\xf3n (sin IVA)"}),(0,Lv.jsx)("input",{type:"number",name:"precioCotizacionCliente",value:i.precioCotizacionCliente,onChange:y,placeholder:"0.00",className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Cotizaci\xf3n"}),(0,Lv.jsx)("input",{type:"file",name:"cotizacionClienteFile",onChange:v,className:"mt-1 block w-full text-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Orden de Compra (PO)"}),(0,Lv.jsx)("input",{type:"file",name:"poClienteFile",onChange:v,className:"mt-1 block w-full text-sm"})]})]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsx)("h4",{className:"font-semibold text-gray-700",children:"Informaci\xf3n del Proveedor"}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Costo (sin IVA)"}),(0,Lv.jsx)("input",{type:"number",name:"costoProveedor",value:i.costoProveedor,onChange:y,placeholder:"0.00",disabled:g,className:"mt-1 block w-full px-3 py-2 border rounded-md disabled:bg-gray-100"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:g?"N\xfamero de Proyecto":"PDF Cotizaci\xf3n Proveedor"}),(0,Lv.jsx)("input",{type:"file",name:"cotizacionProveedorFile",onChange:v,className:"mt-1 block w-full text-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Orden de Compra (PO) Proveedor"}),(0,Lv.jsx)("input",{type:"file",name:"poProveedorFile",onChange:v,className:"mt-1 block w-full text-sm"})]})]})]}),(0,Lv.jsx)(Bv,{message:h,type:"error",onClose:()=>f("")}),(0,Lv.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg disabled:bg-gray-400",children:p?"Creando...":"Crear Proyecto y Generar NPU"})]})]})},Zv=e=>{let{projects:t,onUpdateProject:n,userRole:i,user:s,userData:o}=e;const[a,l]=(0,r.useState)(null),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(1),[g,y]=(0,r.useState)(10),[v,b]=(0,r.useState)({}),[w,x]=(0,r.useState)({}),[_,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=(()=>{const e=Xg(Sg(Vm(zv,"usuarios"),Ig("rol","==","tecnico")),e=>{const t={};e.forEach(e=>{t[e.id]=e.data().nombreCompleto}),b(t)}),t=Xg(Sg(Vm(zv,"facturas")),e=>{const t={};e.forEach(e=>{t[e.id]=e.data().folio}),x(t)});return()=>{e(),t()}})();return()=>e()},[]);const N=e=>{let{project:t,onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)({cotizacionClienteFile:null,poClienteFile:null,cotizacionProveedorFile:null,poProveedorFile:null}),[a,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(""),h=e=>{const{name:t,files:n}=e.target;n[0]&&o(e=>c(c({},e),{},{[t]:n[0]}))},f=async(e,t)=>{if(!e)return null;const n=Pv(Dv(Vv,t),e);return await n,await Rv(n.snapshot.ref)};return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Documentos: ",t.npu]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Cotizaci\xf3n Cliente"}),t.urlCotizacionCliente?(0,Lv.jsx)("a",{href:t.urlCotizacionCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm",children:"Ver actual"}):(0,Lv.jsx)("input",{type:"file",name:"cotizacionClienteFile",onChange:h,className:"mt-1 block w-full text-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Orden de Compra (PO) Cliente"}),t.urlPOCliente?(0,Lv.jsx)("a",{href:t.urlPOCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm",children:"Ver actual"}):(0,Lv.jsx)("input",{type:"file",name:"poClienteFile",onChange:h,className:"mt-1 block w-full text-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Cotizaci\xf3n Proveedor"}),t.urlCotizacionProveedor?(0,Lv.jsx)("a",{href:t.urlCotizacionProveedor,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm",children:"Ver actual"}):(0,Lv.jsx)("input",{type:"file",name:"cotizacionProveedorFile",onChange:h,className:"mt-1 block w-full text-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"PDF Orden de Compra (PO) Proveedor"}),t.urlPOProveedor?(0,Lv.jsx)("a",{href:t.urlPOProveedor,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm",children:"Ver actual"}):(0,Lv.jsx)("input",{type:"file",name:"poProveedorFile",onChange:h,className:"mt-1 block w-full text-sm"})]})]}),(0,Lv.jsx)(Bv,{message:u,type:"error",onClose:()=>d("")}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:n,disabled:a,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{l(!0),d("");try{var e,r,o,a;const l={},c=await f(s.cotizacionClienteFile,"cotizaciones_clientes/".concat(Date.now(),"_").concat(null===(e=s.cotizacionClienteFile)||void 0===e?void 0:e.name)),u=await f(s.poClienteFile,"po_clientes/".concat(Date.now(),"_").concat(null===(r=s.poClienteFile)||void 0===r?void 0:r.name)),d=await f(s.cotizacionProveedorFile,"cotizaciones_proveedores/".concat(Date.now(),"_").concat(null===(o=s.cotizacionProveedorFile)||void 0===o?void 0:o.name)),h=await f(s.poProveedorFile,"po_proveedores/".concat(Date.now(),"_").concat(null===(a=s.poProveedorFile)||void 0===a?void 0:a.name));c&&(l.urlCotizacionCliente=c),u&&(l.urlPOCliente=u),d&&(l.urlCotizacionProveedor=d),h&&(l.urlPOProveedor=h),u&&(l.estado="Activo",l.estadoCliente="Activo"),Object.keys(l).length>0&&await Wg(Bm(zv,"proyectos",t.id),l),i(),n()}catch(c){d("Error al subir documentos."),l(!1)}},disabled:a,className:"bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded",children:a?"Guardando...":"Guardar Cambios"})]})]})})},k=e=>{let{project:t,onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(t.asignadoTecnicosIds||[]),[u,d]=(0,r.useState)(t.fechaEntregaInterna?t.fechaEntregaInterna.toDate().toISOString().split("T")[0]:""),[h,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{const e=Sg(Vm(zv,"usuarios"),Ig("rol","==","tecnico")),t=await Kg(e);o(t.docs.map(e=>c({id:e.id},e.data())))})()},[]);return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Asignar Proyecto: ",t.npu]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xe9cnicos Disponibles"}),(0,Lv.jsx)("div",{className:"mt-2 max-h-48 overflow-y-auto border rounded-md p-2",children:s.map(e=>(0,Lv.jsxs)("div",{className:"flex items-center",children:[(0,Lv.jsx)("input",{type:"checkbox",id:e.id,checked:a.includes(e.id),onChange:()=>{return t=e.id,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),(0,Lv.jsx)("label",{htmlFor:e.id,className:"ml-3 text-sm text-gray-700",children:e.nombreCompleto})]},e.id))})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha L\xedmite de Entrega (Interna)"}),(0,Lv.jsx)("input",{type:"date",value:u,onChange:e=>d(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]})]}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:n,disabled:h,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{f(!0);const e=Bm(zv,"proyectos",t.id),r={};a.forEach(e=>{var n;r[e]=(null===(n=t.tecnicosStatus)||void 0===n?void 0:n[e])||"No Visto"}),await Wg(e,{asignadoTecnicosIds:a,tecnicosStatus:r,fechaAsignacionTecnico:oc.now(),fechaEntregaInterna:u?oc.fromDate(new Date(u)):null}),f(!1),i(),n()},disabled:h,className:"bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded",children:h?"Asignando...":"Guardar Asignaci\xf3n"})]})]})})},C=t.filter(e=>e.npu&&e.npu.toLowerCase().includes(h.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(h.toLowerCase())||e.servicioNombre&&e.servicioNombre.toLowerCase().includes(h.toLowerCase())),S=C.slice((p-1)*g,p*g),T=Math.ceil(C.length/g),I=e=>m(e),A=e=>{if(!e)return"---";const t=e.toDate(),n=6e4*t.getTimezoneOffset();return new Date(t.getTime()+n).toLocaleDateString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit"})},j=e=>{if(!e)return"text-gray-500";const t=e.toDate(),n=new Date;n.setHours(0,0,0,0);const r=t.getTime()-n.getTime(),i=Math.ceil(r/864e5);return i<0?"text-red-600 font-bold":i<=3?"text-orange-500 font-semibold":"text-gray-600"},P=async e=>{var t;await(t=Bm(zv,"proyectos",e),Yg(Om(t.firestore,Gm),[new Yd(t._key,Fd.none())])),E(null)};return(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,Lv.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente, servicio o dependencia...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{f(e.target.value),m(1)}}),(0,Lv.jsxs)("div",{className:"flex items-center",children:[(0,Lv.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,Lv.jsxs)("select",{value:g,onChange:e=>{y(Number(e.target.value)),m(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,Lv.jsx)("option",{value:10,children:"10"}),(0,Lv.jsx)("option",{value:25,children:"25"}),(0,Lv.jsx)("option",{value:50,children:"50"}),(0,Lv.jsx)("option",{value:100,children:"100"})]})]})]}),(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha Apertura"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),"administrador"===i&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Proveedor"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xba Proy. Lab."}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Comentarios"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Prov."}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Precio"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Costo"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Docs Cliente"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Docs Proveedor"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fact. Cliente"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fact. Proveedor"})]}),"supervisor"===i&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha L\xedmite"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado T\xe9cnicos"})]}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),(0,Lv.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(e=>{var t;const n=e.asignadoTecnicosIds&&e.asignadoTecnicosIds.length>0;return(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:A(e.fechaApertura)}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:e.npu}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.servicioNombre}),"administrador"===i&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.proveedorNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.numeroProyectoLaboratorio||"---"}),(0,Lv.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",title:e.comentariosApertura,children:(0,Lv.jsx)("p",{className:"w-32 truncate",children:e.comentariosApertura||"---"})}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:e.poProveedor}),(0,Lv.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-green-600",children:["$",(e.precioCotizacionCliente||0).toFixed(2)]}),(0,Lv.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-red-600",children:["$",(e.costoProveedor||0).toFixed(2)]}),(0,Lv.jsx)("td",{className:"px-4 py-2",children:(0,Lv.jsxs)("div",{className:"flex space-x-2",children:[e.urlCotizacionCliente&&(0,Lv.jsx)("a",{href:e.urlCotizacionCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"Cot"}),e.urlPOCliente&&(0,Lv.jsx)("a",{href:e.urlPOCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"PO"})]})}),(0,Lv.jsx)("td",{className:"px-4 py-2",children:(0,Lv.jsxs)("div",{className:"flex space-x-2",children:[e.urlCotizacionProveedor&&(0,Lv.jsx)("a",{href:e.urlCotizacionProveedor,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"Cot"}),e.urlPOProveedor&&(0,Lv.jsx)("a",{href:e.urlPOProveedor,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"PO"})]})}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:w[e.facturaClienteId]||"---"}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:w[e.facturaProveedorId]||("ecolog\xeda y asesor\xeda ambiental"===(null===(t=e.proveedorNombre)||void 0===t?void 0:t.toLowerCase().trim())?"N/A":"---")})]}),"supervisor"===i&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:(0,Lv.jsx)("span",{className:j(e.fechaEntregaInterna),children:A(e.fechaEntregaInterna)})}),(0,Lv.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:(0,Lv.jsx)("div",{className:"flex flex-col space-y-1",children:(e.asignadoTecnicosIds||[]).map(t=>{const n=e.tecnicosStatus&&e.tecnicosStatus[t]||"No Visto",r="En Proceso"===n?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600";return(0,Lv.jsxs)("span",{className:"text-xs p-1 rounded ".concat(r),children:[v[t]||"Cargando...",": ",n]},t)})})})]}),(0,Lv.jsx)("td",{className:"px-4 py-2",children:(0,Lv.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Activo"===e.estado?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.estado})}),(0,Lv.jsx)("td",{className:"px-4 py-2",children:(0,Lv.jsxs)("div",{className:"flex items-center space-x-4",children:["administrador"===i&&"Cotizaci\xf3n"===e.estado&&(0,Lv.jsx)("button",{onClick:()=>(async e=>{await Wg(Bm(zv,"proyectos",e),{estado:"Activo",estadoCliente:"Activo"})})(e.id),className:"text-green-600",children:"Activar"}),"administrador"===i&&(0,Lv.jsx)("button",{onClick:()=>{l(e),d("manage")},className:"text-indigo-600",children:"Gestionar"}),"administrador"===i&&"Terminado"!==e.estado&&"Archivado"!==e.estado&&(0,Lv.jsx)("button",{onClick:()=>{return t=e.id,n=e.npu,void E({title:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que quieres borrar el proyecto ".concat(n,"? Esta acci\xf3n no se puede deshacer."),onConfirm:()=>P(t),confirmText:"S\xed, Borrar",confirmColor:"bg-red-600"});var t,n},className:"text-red-600",children:"Borrar"}),"supervisor"===i&&(0,Lv.jsx)("button",{onClick:()=>{l(e),d("assign")},className:"text-indigo-600",children:n?"Reasignar":"Asignar"}),"supervisor"===i&&n&&(0,Lv.jsx)("button",{onClick:()=>{l(e),d("log")},className:"text-gray-600",children:"Bit\xe1cora"})]})})]},e.id)})})]})}),(0,Lv.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Lv.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",p," de ",T]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("button",{onClick:()=>I(p-1),disabled:1===p,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,Lv.jsx)("button",{onClick:()=>I(p+1),disabled:p===T||0===T,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),a&&"assign"===u&&(0,Lv.jsx)(k,{project:a,onClose:()=>l(null),onFinalized:n}),a&&"manage"===u&&(0,Lv.jsx)(N,{project:a,onClose:()=>l(null),onFinalized:n}),a&&"log"===u&&(0,Lv.jsx)(Kv,{project:a,user:s,userData:o,onClose:()=>l(null)}),_&&(0,Lv.jsx)(qv,{title:_.title,message:_.message,onConfirm:_.onConfirm,onCancel:()=>E(null),confirmText:_.confirmText,confirmColor:_.confirmColor})]})},eb=e=>{let{projects:t,onUpdateProject:n}=e;const[i,s]=(0,r.useState)(null);return(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Documentos Finales"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.npu}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Lv.jsxs)("div",{className:"flex flex-col space-y-1",children:[e.urlHeyzine&&(0,Lv.jsx)("a",{href:e.urlHeyzine,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Proyecto (Heyzine)"}),e.urlNotaPdf1&&(0,Lv.jsx)("a",{href:e.urlNotaPdf1,target:"_blank",rel:"noopener noreferrer",className:"text-red-600",children:"Ver Nota 1"}),e.urlNotaPdf2&&(0,Lv.jsx)("a",{href:e.urlNotaPdf2,target:"_blank",rel:"noopener noreferrer",className:"text-red-600",children:"Ver Nota 2"})]})}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Lv.jsxs)("div",{className:"flex space-x-4",children:[(0,Lv.jsx)("button",{onClick:()=>(e=>{const t=!!e.urlDocumento2,n="Preliminar"===e.faseFacturacion||"Fase 2 Pendiente"===e.faseFacturacion;s({action:"approve",payload:{project:e},title:"Confirmar Aprobaci\xf3n",message:t?n?"Aprobar y finalizar este proyecto? Se archivar\xe1 y no se volver\xe1 a facturar.":"Aprobar esta entrega final y enviarla a facturaci\xf3n?":"Aprobar esta entrega preliminar y enviarla a facturaci\xf3n?"})})(e),className:"text-green-600 hover:text-green-900",children:"Aprobar"}),(0,Lv.jsx)("button",{onClick:()=>{return t=e.id,void s({action:"reject",payload:{projectId:t},title:"Rechazar Proyecto",message:"Por favor, introduce el motivo del rechazo para notificar al practicante.",confirmText:"Rechazar",confirmColor:"bg-orange-600"});var t},className:"text-orange-600 hover:text-orange-900",children:"Rechazar"})]})})]},e.id))})]})}),"approve"===(null===i||void 0===i?void 0:i.action)&&(0,Lv.jsx)(qv,{title:i.title,message:i.message,onConfirm:async()=>{if(!i||"approve"!==i.action)return;const{project:e}=i.payload,t=Bm(zv,"proyectos",e.id),r=!!e.urlDocumento2;try{r?"Preliminar"===e.faseFacturacion||"Fase 2 Pendiente"===e.faseFacturacion?await Wg(t,{estado:"Archivado",estadoCliente:"Terminado"}):await Wg(t,{estado:"Pendiente de Factura",estadoCliente:"Terminado"}):await Wg(t,{estado:"Pendiente de Factura",faseFacturacion:"Preliminar"})}catch(o){console.error("Error al aprobar proyecto:",o),alert("Ocurri\xf3 un error al aprobar el proyecto.")}finally{s(null),n()}},onCancel:()=>s(null)}),"reject"===(null===i||void 0===i?void 0:i.action)&&(0,Lv.jsx)(Hv,{title:i.title,message:i.message,onConfirm:async e=>{if(!i||"reject"!==i.action)return;if(!e||""===e.trim())return void alert("El motivo del rechazo no puede estar vac\xedo.");const{projectId:t}=i.payload,r=Bm(zv,"proyectos",t);try{await Wg(r,{estado:"Terminado Internamente",motivoRechazo:e})}catch(o){console.error("Error al rechazar proyecto:",o),alert("Ocurri\xf3 un error al rechazar el proyecto.")}finally{s(null),n()}},onCancel:()=>s(null),confirmText:i.confirmText,confirmColor:i.confirmColor})]})},tb=e=>{let{projects:t,onOpenModal:n}=e;const[i,s]=(0,r.useState)(null),o=t.reduce((e,t)=>{const n=t.dependencia||"Sin Dependencia";return e[n]||(e[n]=[]),e[n].push(t),e},{});return(0,Lv.jsx)("div",{className:"space-y-4",children:Object.entries(o).map(e=>{let[t,r]=e;return(0,Lv.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Lv.jsxs)("button",{onClick:()=>{return s(i===(e=t)?null:e);var e},className:"w-full p-4 text-left font-bold text-lg text-gray-800 flex justify-between items-center hover:bg-gray-50 transition",children:[(0,Lv.jsxs)("span",{children:[t," ",(0,Lv.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",r.length,")"]})]}),(0,Lv.jsx)("span",{className:"transform transition-transform duration-300 ".concat(i===t?"rotate-180":""),children:"\u25bc"})]}),i===t&&(0,Lv.jsx)("ul",{className:"divide-y divide-gray-200 border-t",children:r.map(e=>{return(0,Lv.jsxs)("li",{className:"p-4 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center",children:[(0,Lv.jsx)("div",{className:"flex-1 mb-4 md:mb-0",children:(0,Lv.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.servicioNombre})}),(0,Lv.jsx)("div",{className:"w-full md:w-40 mb-4 md:mb-0",children:(0,Lv.jsx)("div",{className:"text-sm text-gray-500 hidden md:block",children:(r=e.fechaApertura,r?new Date(1e3*r.seconds).toLocaleDateString("es-MX"):"---")})}),(0,Lv.jsx)("div",{className:"w-full md:w-40 mb-4 md:mb-0",children:(0,Lv.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((t=e.estadoCliente,"Activo"===t?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800")),children:e.estadoCliente})}),(0,Lv.jsxs)("div",{className:"w-full md:w-56 flex items-center space-x-4",children:[e.urlHeyzine&&(0,Lv.jsx)("button",{onClick:()=>n(e.urlHeyzine),className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:"Ver Proyecto"}),e.urlNotaPdf1&&(0,Lv.jsx)("a",{href:e.urlNotaPdf1,download:!0,className:"text-sm font-medium text-red-600 hover:text-red-900",children:"Nota 1"}),e.urlNotaPdf2&&(0,Lv.jsx)("a",{href:e.urlNotaPdf2,download:!0,className:"text-sm font-medium text-red-600 hover:text-red-900",children:"Nota 2"})]})]},e.id);var t,r})})]},t)})})},nb=e=>{let{user:t,userData:n}=e;const[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)(!0),[l,u]=(0,r.useState)("shelf"),[d,h]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!t)return void a(!1);const e=Xg(Sg(Vm(zv,"proyectos"),Ig("clienteId","==",t.uid),Ig("estadoCliente","in",["Activo","Terminado"])),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));t.sort((e,t)=>t.fechaApertura.seconds-e.fechaApertura.seconds),s(t),a(!1)},e=>{console.error("Error fetching client projects: ",e),"failed-precondition"===e.code&&console.error("IMPORTANTE: Se requiere un \xedndice compuesto en Firestore. Ve a la URL que aparece en el mensaje de error en la consola para crearlo con un solo clic."),a(!1)});return()=>e()},[t]),(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:["Proyectos de ",n.nombreCompleto]}),(0,Lv.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Lv.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,Lv.jsx)("button",{onClick:()=>u("shelf"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("shelf"===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Estanter\xeda de Proyectos"}),(0,Lv.jsx)("button",{onClick:()=>u("list"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("list"===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Lista Detallada"})]})}),o?(0,Lv.jsx)("p",{children:"Cargando proyectos..."}):0===i.length?(0,Lv.jsx)("p",{className:"text-center text-gray-500 mt-8",children:"No hay proyectos para mostrar."}):"shelf"===l?(0,Lv.jsx)($v,{projects:i,onOpenModal:h}):(0,Lv.jsx)(tb,{projects:i,onOpenModal:h}),d&&(0,Lv.jsx)(Yv,{url:d,onClose:()=>h(null)})]})},rb=()=>(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h2",{className:"text-2xl font-bold",children:"Dashboard de Directivos"}),(0,Lv.jsx)("p",{children:"Pr\xf3ximamente: Gr\xe1ficas y reportes."})]}),ib=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),s=()=>{i(!0);return Xg(Sg(Vm(zv,"proyectos"),Ig("proveedorNombre","==","Ecotech Ingenieria del Medio Ambiente"),Ig("estado","!=","Terminado")),e=>{const n=e.docs.map(e=>c({id:e.id},e.data()));t(n),i(!1)},e=>{console.error("Error fetching projects for Ecotech: ",e),"failed-precondition"===e.code&&alert("Se requiere una configuraci\xf3n adicional en la base de datos. Por favor, revise la consola del navegador (F12) para encontrar un enlace y crear el \xedndice necesario."),i(!1)})};return(0,r.useEffect)(()=>{const e=s();return()=>e()},[]),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Gesti\xf3n de Proyectos Ecotech"}),n?(0,Lv.jsx)("p",{children:"Cargando proyectos de Ecotech..."}):0===e.length?(0,Lv.jsx)("p",{className:"text-center text-gray-500 mt-8",children:"No hay proyectos de Ecotech activos."}):(0,Lv.jsx)(sb,{projects:e,onUpdateProject:s})]})},sb=e=>{let{projects:t,onUpdateProject:n}=e;const[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(1),[u,d]=(0,r.useState)(10),h=e=>{let{project:t,onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)(t.numeroProyectoLaboratorio||""),[a,l]=(0,r.useState)(t.puntosDeTrabajo||""),[c,u]=(0,r.useState)(t.notasEcotech||""),[d,h]=(0,r.useState)(t.estatusEcotech||"Pendiente"),[f,p]=(0,r.useState)(t.numeroGuiaEnvio||""),[m,g]=(0,r.useState)(t.numeroGuiaRegreso||""),[y,v]=(0,r.useState)(!1);return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Info de Laboratorio: ",t.npu]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xfamero de Proyecto (Laboratorio)"}),(0,Lv.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Puntos de Trabajo Solicitados"}),(0,Lv.jsx)("input",{type:"number",value:a,onChange:e=>l(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xba de Gu\xeda (Env\xedo)"}),(0,Lv.jsx)("input",{type:"text",value:f,onChange:e=>p(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xba de Gu\xeda (Regreso)"}),(0,Lv.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notas"}),(0,Lv.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),rows:"3",className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Estatus Interno"}),(0,Lv.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md",children:[(0,Lv.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,Lv.jsx)("option",{value:"En Proceso",children:"En Proceso"}),(0,Lv.jsx)("option",{value:"Muestreo Realizado",children:"Muestreo Realizado"}),(0,Lv.jsx)("option",{value:"Resultados Entregados",children:"Resultados Entregados"})]})]})]}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:n,disabled:y,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{v(!0);const e=Bm(zv,"proyectos",t.id);await Wg(e,{numeroProyectoLaboratorio:s,puntosDeTrabajo:Number(a)||0,notasEcotech:c,estatusEcotech:d,numeroGuiaEnvio:f,numeroGuiaRegreso:m}),v(!1),i(),n()},disabled:y,className:"bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded",children:y?"Guardando...":"Guardar Informaci\xf3n"})]})]})})},f=t.filter(e=>e.npu&&e.npu.toLowerCase().includes(o.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(o.toLowerCase())||e.servicioNombre&&e.servicioNombre.toLowerCase().includes(o.toLowerCase())),p=l*u,m=p-u,g=f.slice(m,p),y=Math.ceil(f.length/u),v=e=>c(e);return(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,Lv.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente o servicio...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{a(e.target.value),c(1)}}),(0,Lv.jsxs)("div",{className:"flex items-center",children:[(0,Lv.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,Lv.jsxs)("select",{value:u,onChange:e=>{d(Number(e.target.value)),c(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,Lv.jsx)("option",{value:10,children:"10"}),(0,Lv.jsx)("option",{value:25,children:"25"}),(0,Lv.jsx)("option",{value:50,children:"50"})]})]})]}),(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xba Proyecto Lab."}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Puntos"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Notas"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gu\xeda Env\xedo"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gu\xeda Regreso"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estatus Interno"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.npu}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.numeroProyectoLaboratorio||"---"}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.puntosDeTrabajo||"---"}),(0,Lv.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",title:e.notasEcotech,children:(0,Lv.jsx)("p",{className:"w-40 truncate",children:e.notasEcotech||"---"})}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.numeroGuiaEnvio||"---"}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.numeroGuiaRegreso||"---"}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.estatusEcotech||"Pendiente"}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Lv.jsx)("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",children:"Gestionar"})})]},e.id))})]})}),(0,Lv.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Lv.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",l," de ",y]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("button",{onClick:()=>v(l-1),disabled:1===l,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,Lv.jsx)("button",{onClick:()=>v(l+1),disabled:l===y||0===y,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),i&&(0,Lv.jsx)(h,{project:i,onClose:()=>s(null),onFinalized:n})]})},ob=e=>{let{user:t,userData:n}=e;const[i,s]=(0,r.useState)("new"),[o,a]=(0,r.useState)([]),[l,u]=(0,r.useState)(!0),[d,h]=(0,r.useState)("fechaApertura"),[f,p]=(0,r.useState)("desc");(0,r.useEffect)(()=>{u(!0);const e=Xg(Sg(Vm(zv,"proyectos"),Ig("estado","==","Activo")),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));a(t),u(!1)},e=>{console.error("Error fetching active projects for supervisor:",e),u(!1)});return()=>e()},[]);const m=r.useMemo(()=>{const e=o.filter(e=>{const t=e.asignadoTecnicosIds&&e.asignadoTecnicosIds.length>0;return"new"===i?!t:"assigned"===i&&t});return e.sort((e,t)=>{const n=e[d],r=t[d];if(!n)return 1;if(!r)return-1;let i=0;return n.seconds>r.seconds?i=1:n.seconds<r.seconds&&(i=-1),"asc"===f?i:-i})},[o,i,d,f]);return(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Panel de Supervisi\xf3n"}),(0,Lv.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Lv.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,Lv.jsx)("button",{onClick:()=>s("new"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("new"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Nuevos por Asignar"}),(0,Lv.jsx)("button",{onClick:()=>s("assigned"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("assigned"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Asignados y en Proceso"})]})}),(0,Lv.jsxs)("div",{className:"flex justify-end items-center mb-4",children:[(0,Lv.jsx)("label",{htmlFor:"sort-by",className:"text-sm font-medium text-gray-700 mr-2",children:"Ordenar por:"}),(0,Lv.jsxs)("select",{id:"sort-by",value:d,onChange:e=>h(e.target.value),className:"border rounded-md p-1 text-sm",children:[(0,Lv.jsx)("option",{value:"fechaApertura",children:"Fecha de Apertura"}),(0,Lv.jsx)("option",{value:"fechaEntregaInterna",children:"Fecha L\xedmite"})]}),(0,Lv.jsx)("button",{onClick:()=>p("asc"===f?"desc":"asc"),className:"ml-2 p-1 border rounded-md text-sm",children:"asc"===f?"\u2191 Asc":"\u2193 Desc"})]}),l?(0,Lv.jsx)("p",{children:"Cargando proyectos..."}):(0,Lv.jsx)(Zv,{projects:m,onUpdateProject:()=>{},userRole:"supervisor",user:t,userData:n})]})},ab=e=>{let{user:t,userData:n}=e;const[i,s]=(0,r.useState)("new"),[o,a]=(0,r.useState)([]),[l,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!t)return;u(!0);const e="new"===i?"No Visto":"En Proceso",n=Xg(Sg(Vm(zv,"proyectos"),Ig("estado","==","Activo"),Ig("tecnicosStatus.".concat(t.uid),"==",e)),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));a(t),u(!1)},e=>{console.error("Error fetching projects for tecnico in view ".concat(i,":"),e),"failed-precondition"===e.code&&alert("Se requiere una configuraci\xf3n adicional en la base de datos. Por favor, revise la consola del navegador (F12) para encontrar un enlace y crear el \xedndice necesario."),u(!1)});return()=>n()},[i,t]);return(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Mis Tareas"}),(0,Lv.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Lv.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,Lv.jsx)("button",{onClick:()=>s("new"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("new"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Nuevas Tareas"}),(0,Lv.jsx)("button",{onClick:()=>s("inProgress"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("inProgress"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Tareas en Proceso"})]})}),l?(0,Lv.jsx)("p",{children:"Cargando tareas..."}):(0,Lv.jsx)(lb,{projects:o,onUpdateProject:()=>{},user:t,userData:n,handleStartProject:async e=>{const n=Bm(zv,"proyectos",e.id);await Wg(n,{["tecnicosStatus.".concat(t.uid)]:"En Proceso"})}})]})},lb=e=>{let{projects:t,onUpdateProject:n,user:i,userData:s,handleStartProject:o}=e;const[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),d=e=>{let{project:t,onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)("");return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Tarea: ",t.npu]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Comentarios Finales (para Nota de Entrega)"}),(0,Lv.jsx)("textarea",{value:s,onChange:e=>o(e.target.value),rows:"4",className:"mt-1 block w-full px-3 py-2 border rounded-md"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subir Evidencia T\xe9cnica (PDF)"}),(0,Lv.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{e.target.files[0]&&l(e.target.files[0])},className:"mt-1 block w-full text-sm"})]})]}),(0,Lv.jsx)(Bv,{message:d,type:"error",onClose:()=>h("")}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:n,disabled:c,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{if(a){u(!0),h("");try{const e=Pv(Dv(Vv,"evidencia_tecnicos/".concat(t.id,"/").concat(a.name)),a),r=await Rv((await e).ref),{numeroNota:o}=await(async()=>{if("undefined"===typeof window.jspdf)throw new Error("La librer\xeda para generar PDFs (jsPDF) no se ha cargado.");const{jsPDF:e}=window.jspdf,n=new e,r=(new Date).getFullYear(),i=Bm(zv,"contadores","notas_entrega_".concat(r)),o=await ty(zv,async e=>{const t=await e.get(i),n=(t.exists()?t.data().consecutivo:0)+1;return e.set(i,{consecutivo:n},{merge:!0}),n}),a="".concat(r,"-").concat(o.toString().padStart(4,"0"));n.setFont("helvetica","bold"),n.setFontSize(10),n.text("ECOLOG\xcdA Y ASESOR\xcdA AMBIENTAL S. DE R.L. DE C.V.",105,20,{align:"center"}),n.setFont("helvetica","normal"),n.setFontSize(8),n.text("HERMANOS ESCOBAR 6150-2 PARQUE INDUSTRIAL OMEGA",105,25,{align:"center"}),n.text("CP.32410CD. JU\xc1REZ, CHIHUAHUA. RFC EAA12060765A",105,29,{align:"center"}),n.setFontSize(16),n.setFont("helvetica","bold"),n.text("NOTA DE ENTREGA",105,45,{align:"center"}),n.text(a,180,55),n.setFontSize(11),n.setFont("helvetica","normal"),n.text("FECHA: ".concat((new Date).toLocaleDateString("es-MX")),20,65),n.text("PROYECTO: ".concat(t.npu),20,75),n.text("NOMBRE/RAZ\xd3N SOCIAL: ".concat(t.clienteNombre),20,85),n.rect(15,95,180,20),n.text("DESCRIPCI\xd3N",20,101),n.text("CANTIDAD",170,101),n.text(t.servicioNombre,20,108),n.text("1",175,108),n.text("Comentarios:",20,125);const l=n.splitTextToSize(s,170);return n.text(l,20,132),n.text("RECIBIDO POR:",20,250),n.line(20,260,100,260),n.text("NOMBRE Y FIRMA",45,265),n.save("Nota_Entrega_".concat(a,".pdf")),{numeroNota:a}})(),l=Bm(zv,"proyectos",t.id),c={estado:"Terminado Internamente",comentariosTecnico:s};t.urlDocumento1?(c.urlEvidenciaTecnico2=r,c.numeroNotaInterna2=o,c.fechaFinTecnico2=oc.now()):(c.urlEvidenciaTecnico1=r,c.numeroNotaInterna1=o,c.fechaFinTecnico1=oc.now()),await Wg(l,c),i(),n()}catch(e){console.error("Error al completar la tarea:",e),h(e.message||"Ocurri\xf3 un error al guardar los datos."),u(!1)}}else h("Es obligatorio subir el archivo PDF de evidencia.")},disabled:c,className:"bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded",children:c?"Enviando...":"Generar Nota y Finalizar Tarea"})]})]})})};return(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha L\xedmite"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{return(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(t=e.fechaEntregaInterna,t?new Date(1e3*t.seconds).toLocaleDateString("es-MX"):"---")}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:(0,Lv.jsxs)("div",{className:"flex items-center space-x-4",children:["No Visto"===e.tecnicosStatus[i.uid]&&(0,Lv.jsx)("button",{onClick:()=>o(e),className:"text-green-600 hover:text-green-900",children:"Empezar"}),"En Proceso"===e.tecnicosStatus[i.uid]&&(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("button",{onClick:()=>{l(e),u("task")},className:"text-indigo-600",children:"Gestionar Tarea"}),(0,Lv.jsx)("button",{onClick:()=>{l(e),u("log")},className:"text-gray-600",children:"Bit\xe1cora"})]})]})})]},e.id);var t})})]})}),a&&"task"===c&&(0,Lv.jsx)(d,{project:a,onClose:()=>l(null),onFinalized:n}),a&&"log"===c&&(0,Lv.jsx)(Kv,{project:a,user:i,userData:s,onClose:()=>l(null)})]})},cb=e=>{let{user:t,userData:n}=e;const[i,s]=(0,r.useState)("pendientes"),[o,a]=(0,r.useState)([]),[l,u]=(0,r.useState)(!0),d=()=>{u(!0);const e=Xg(Sg(Vm(zv,"proyectos"),Ig("estado","in",["Pendiente de Factura","Facturado"])),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));t.forEach(e=>{if("Facturado"===e.estado&&"Preliminar"===e.faseFacturacion){console.log("[AUTO-REACTIVACI\xd3N] Proyecto ".concat(e.npu," detectado para Fase 2."));const t=Bm(zv,"proyectos",e.id),n={};e.asignadoTecnicosIds&&e.asignadoTecnicosIds.forEach(e=>{n[e]="En Proceso"}),Wg(t,{estado:"Activo",tecnicosStatus:n,faseFacturacion:"Fase 2 Pendiente"})}}),a(t.filter(e=>"Pendiente de Factura"===e.estado)),u(!1)});return e};return(0,r.useEffect)(()=>{let e=()=>{};return"pendientes"===i?e=d():u(!1),()=>e()},[i]),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Panel de Finanzas"}),(0,Lv.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Lv.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,Lv.jsx)("button",{onClick:()=>s("pendientes"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("pendientes"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Pendientes de Gesti\xf3n"}),(0,Lv.jsx)("button",{onClick:()=>s("cobrar"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("cobrar"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Cuentas por Cobrar"}),(0,Lv.jsx)("button",{onClick:()=>s("pagar"),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ".concat("pagar"===i?"border-blue-500 text-blue-600":"border-transparent text-gray-500"),children:"Cuentas por Pagar"})]})}),"pendientes"===i&&(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h2",{className:"text-2xl font-bold text-gray-800 my-6",children:"Proyectos Pendientes de Facturar"}),l?(0,Lv.jsx)("p",{children:"Cargando proyectos..."}):(0,Lv.jsx)(ub,{projects:o,onUpdate:d})]}),"cobrar"===i&&(0,Lv.jsx)(db,{invoiceType:"cliente",onUpdate:()=>{}}),"pagar"===i&&(0,Lv.jsx)(db,{invoiceType:"proveedor",onUpdate:()=>{}})]})},ub=e=>{let{projects:t,onUpdate:n}=e;const[i,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(""),[l,u]=(0,r.useState)(1),[d,h]=(0,r.useState)(10),f=e=>{var t;let{project:n,onClose:i,onFinalized:s}=e;const[o,a]=(0,r.useState)("upload"),[l,u]=(0,r.useState)({folio:"",monto:n.precioCotizacionCliente||"",fechaEmision:(new Date).toISOString().split("T")[0]}),[d,h]=(0,r.useState)({xmlFile:null,pdfFile:null}),[f,p]=(0,r.useState)({folio:"",monto:n.costoProveedor||"",fechaEmision:(new Date).toISOString().split("T")[0]}),[m,g]=(0,r.useState)({xmlFile:null,pdfFile:null}),[y,v]=(0,r.useState)([]),[b,w]=(0,r.useState)(""),[x,_]=(0,r.useState)(""),[E,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),S=null===(t=n.proveedorNombre)||void 0===t?void 0:t.toLowerCase().includes("ecologia");(0,r.useEffect)(()=>{if("link"===o){const e=Xg(Sg(Vm(zv,"facturas"),Pg("fechaEmision","desc")),e=>{v(e.docs.map(e=>c({id:e.id},e.data())))});return()=>e()}},[o]);const T=e=>t=>{const{name:n,value:r}=t.target;e(e=>c(c({},e),{},{[n]:r}))},I=e=>t=>{const{name:n,files:r}=t.target;r[0]&&e(e=>c(c({},e),{},{[n]:r[0]}))},A=async(e,t)=>{if(!e)return null;const n=Pv(Dv(Vv,t),e);return Rv((await n).ref)};return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Facturas: ",n.npu]}),(0,Lv.jsx)("div",{className:"mb-4 border-b",children:(0,Lv.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,Lv.jsx)("button",{onClick:()=>a("upload"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("upload"===o?"border-blue-500":"border-transparent"),children:"Subir Nueva Factura"}),(0,Lv.jsx)("button",{onClick:()=>a("link"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("link"===o?"border-blue-500":"border-transparent"),children:"Enlazar Factura Existente"})]})}),"upload"===o&&(0,Lv.jsxs)("div",{className:"grid grid-cols-1 ".concat(S?"":"md:grid-cols-2"," gap-6"),children:[(0,Lv.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,Lv.jsx)("h4",{className:"font-semibold text-gray-800",children:"Factura a Cliente"}),n.facturaClienteId?(0,Lv.jsx)("p",{className:"text-green-600",children:"\u2713 Factura ya adjuntada."}):(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("input",{type:"text",name:"folio",placeholder:"Folio Factura",value:l.folio,onChange:T(u),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"number",name:"monto",placeholder:"Monto",value:l.monto,onChange:T(u),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"date",name:"fechaEmision",value:l.fechaEmision,onChange:T(u),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("label",{className:"text-xs",children:"XML:"}),(0,Lv.jsx)("input",{type:"file",name:"xmlFile",accept:".xml",onChange:I(h),className:"block w-full text-sm"}),(0,Lv.jsx)("label",{className:"text-xs",children:"PDF:"}),(0,Lv.jsx)("input",{type:"file",name:"pdfFile",accept:".pdf",onChange:I(h),className:"block w-full text-sm"})]})]}),!S&&(0,Lv.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,Lv.jsx)("h4",{className:"font-semibold text-gray-800",children:"Factura de Proveedor"}),n.facturaProveedorId?(0,Lv.jsx)("p",{className:"text-green-600",children:"\u2713 Factura ya adjuntada."}):(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsx)("input",{type:"text",name:"folio",placeholder:"Folio Factura",value:f.folio,onChange:T(p),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"number",name:"monto",placeholder:"Monto",value:f.monto,onChange:T(p),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"date",name:"fechaEmision",value:f.fechaEmision,onChange:T(p),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("label",{className:"text-xs",children:"XML:"}),(0,Lv.jsx)("input",{type:"file",name:"xmlFile",accept:".xml",onChange:I(g),className:"block w-full text-sm"}),(0,Lv.jsx)("label",{className:"text-xs",children:"PDF:"}),(0,Lv.jsx)("input",{type:"file",name:"pdfFile",accept:".pdf",onChange:I(g),className:"block w-full text-sm"})]})]})]}),"link"===o&&(0,Lv.jsxs)("div",{className:"grid grid-cols-1 ".concat(S?"":"md:grid-cols-2"," gap-6"),children:[(0,Lv.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,Lv.jsx)("h4",{className:"font-semibold text-gray-800",children:"Enlazar Factura de Cliente"}),(0,Lv.jsxs)("select",{value:b,onChange:e=>w(e.target.value),className:"block w-full border rounded-md p-2",children:[(0,Lv.jsx)("option",{value:"",children:"Seleccione una factura..."}),y.filter(e=>"cliente"===e.tipo).map(e=>(0,Lv.jsx)("option",{value:e.id,children:"Folio: ".concat(e.folio," - ").concat(e.clienteNombre," - $").concat(e.monto.toFixed(2))},e.id))]})]}),!S&&(0,Lv.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg",children:[(0,Lv.jsx)("h4",{className:"font-semibold text-gray-800",children:"Enlazar Factura de Proveedor"}),(0,Lv.jsxs)("select",{value:x,onChange:e=>_(e.target.value),className:"block w-full border rounded-md p-2",children:[(0,Lv.jsx)("option",{value:"",children:"Seleccione una factura..."}),y.filter(e=>"proveedor"===e.tipo).map(e=>(0,Lv.jsx)("option",{value:e.id,children:"Folio: ".concat(e.folio," - ").concat(e.proveedorNombre," - $").concat(e.monto.toFixed(2))},e.id))]})]})]}),(0,Lv.jsx)(Bv,{message:k,type:"error",onClose:()=>C("")}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:i,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{N(!0),C("");try{const e=Bm(zv,"proyectos",n.id),t={};let r=n.facturasClienteIds||[],a=n.facturasProveedorIds||[];if("upload"===o){if(d.xmlFile&&d.pdfFile&&l.folio){const e=await A(d.xmlFile,"facturas_clientes/".concat(n.id,"/").concat(d.xmlFile.name)),i=await A(d.pdfFile,"facturas_clientes/".concat(n.id,"/").concat(d.pdfFile.name)),s=await Qg(Vm(zv,"facturas"),{tipo:"cliente",proyectoId:n.id,folio:l.folio,monto:Number(l.monto),fechaEmision:oc.fromDate(new Date(l.fechaEmision)),estado:"Pendiente",urlXml:e,urlPdf:i,clienteNombre:n.clienteNombre});r.push(s.id),t.facturasClienteIds=r}if(!S&&m.xmlFile&&m.pdfFile&&f.folio){const e=await A(m.xmlFile,"facturas_proveedores/".concat(n.id,"/").concat(m.xmlFile.name)),r=await A(m.pdfFile,"facturas_proveedores/".concat(n.id,"/").concat(m.pdfFile.name)),i=await Qg(Vm(zv,"facturas"),{tipo:"proveedor",proyectoId:n.id,folio:f.folio,monto:Number(f.monto),fechaEmision:oc.fromDate(new Date(f.fechaEmision)),estado:"Pendiente",urlXml:e,urlPdf:r,proveedorNombre:n.proveedorNombre});a.push(i.id),t.facturasProveedorIds=a}}else b&&(await Wg(Bm(zv,"facturas",b),{proyectosIds:ry(n.id)}),r.push(b),t.facturasClienteIds=ry(b)),x&&!S&&(await Wg(Bm(zv,"facturas",x),{proyectosIds:ry(n.id)}),a.push(x),t.facturasProveedorIds=ry(x));const c=r.length>0,u=S||a.length>0;c&&u&&(t.estado="Facturado"),Object.keys(t).length>0&&await Wg(e,t),s(),i()}catch(e){console.error("Error al guardar la factura:",e),C("Ocurri\xf3 un error al guardar la factura."),N(!1)}},className:"bg-[#b0ef26] text-black font-bold py-2 px-4 rounded",children:E?"Guardando...":"Guardar Cambios"})]})]})})},p=t.filter(e=>e.npu&&e.npu.toLowerCase().includes(o.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(o.toLowerCase())||e.servicioNombre&&e.servicioNombre.toLowerCase().includes(o.toLowerCase())),m=p.slice((l-1)*d,l*d),g=Math.ceil(p.length/d),y=e=>u(e);return(0,Lv.jsxs)(Lv.Fragment,{children:[(0,Lv.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,Lv.jsx)("input",{type:"text",placeholder:"Buscar por NPU, cliente o servicio...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{a(e.target.value),u(1)}}),(0,Lv.jsxs)("div",{className:"flex items-center",children:[(0,Lv.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,Lv.jsxs)("select",{value:d,onChange:e=>{h(Number(e.target.value)),u(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,Lv.jsx)("option",{value:10,children:"10"}),(0,Lv.jsx)("option",{value:25,children:"25"}),(0,Lv.jsx)("option",{value:50,children:"50"})]})]})]}),(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Docs Admin"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Factura Cliente"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Factura Proveedor"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>{var t;return(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.npu}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.clienteNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.servicioNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:(0,Lv.jsxs)("div",{className:"flex space-x-2 text-sm",children:[e.urlCotizacionCliente&&(0,Lv.jsx)("a",{href:e.urlCotizacionCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"Cot.C"}),e.urlPOCliente&&(0,Lv.jsx)("a",{href:e.urlPOCliente,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500",children:"PO.C"})]})}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.facturaClienteId?(0,Lv.jsx)("span",{className:"text-green-600",children:"\u2713 Adjuntada"}):(0,Lv.jsx)("span",{className:"text-orange-500",children:"Pendiente"})}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:null!==(t=e.proveedorNombre)&&void 0!==t&&t.toLowerCase().includes("ecologia")?(0,Lv.jsx)("span",{className:"text-gray-500",children:"N/A"}):e.facturaProveedorId?(0,Lv.jsx)("span",{className:"text-green-600",children:"\u2713 Adjuntada"}):(0,Lv.jsx)("span",{className:"text-orange-500",children:"Pendiente"})}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:(0,Lv.jsx)("button",{onClick:()=>s(e),className:"text-indigo-600 hover:text-indigo-900",children:"Gestionar Facturas"})})]},e.id)})})]})}),(0,Lv.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Lv.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",l," de ",g]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("button",{onClick:()=>y(l-1),disabled:1===l,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,Lv.jsx)("button",{onClick:()=>y(l+1),disabled:l===g||0===g,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),i&&(0,Lv.jsx)(f,{project:i,onClose:()=>s(null),onFinalized:n})]})},db=e=>{let{invoiceType:t,onUpdate:n}=e;const[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)(!0),[l,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(1),[y,v]=(0,r.useState)(10);(0,r.useEffect)(()=>{a(!0);const e=Xg(Sg(Vm(zv,"facturas"),Ig("tipo","==",t),Pg("fechaEmision","desc")),e=>{s(e.docs.map(e=>c({id:e.id},e.data()))),a(!1)});return()=>e()},[t]);const b=i.filter(e=>e.folio&&e.folio.toLowerCase().includes(f.toLowerCase())||e.clienteNombre&&e.clienteNombre.toLowerCase().includes(f.toLowerCase())||e.proveedorNombre&&e.proveedorNombre.toLowerCase().includes(f.toLowerCase())||e.descripcion&&e.descripcion.toLowerCase().includes(f.toLowerCase())),w=m*y,x=w-y,_=b.slice(x,w),E=Math.ceil(b.length/y),N=e=>g(e),k=e=>{let{onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)({folio:"",monto:"",fechaEmision:(new Date).toISOString().split("T")[0],entidadId:"",descripcion:""}),[a,l]=(0,r.useState)({xmlFile:null,pdfFile:null}),[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)("");(0,r.useEffect)(()=>{let e;e="cliente"===t?Sg(Vm(zv,"usuarios"),Ig("rol","==","cliente")):Sg(Vm(zv,"proveedores")),Kg(e).then(e=>{const t=e.docs.map(e=>c({id:e.id},e.data())).sort((e,t)=>(e.nombreCompleto||e.nombre).localeCompare(t.nombreCompleto||t.nombre));d(t)})},[]);const v=e=>{const{name:t,value:n}=e.target;o(e=>c(c({},e),{},{[t]:n}))},b=e=>{const{name:t,files:n}=e.target;n[0]&&l(e=>c(c({},e),{},{[t]:n[0]}))},w=async(e,t)=>{if(!e)return null;const n=Pv(Dv(Vv,t),e);return Rv((await n).ref)};return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["A\xf1adir Factura General (",t,")"]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("select",{value:s.entidadId,onChange:v,name:"entidadId",className:"block w-full border rounded-md p-2",children:[(0,Lv.jsxs)("option",{value:"",children:["Seleccione un ",t]}),u.map(e=>(0,Lv.jsx)("option",{value:e.id,children:e.nombreCompleto||e.nombre},e.id)),(0,Lv.jsx)("option",{value:"otro",children:"Otro (especificar)"})]}),"otro"===s.entidadId&&(0,Lv.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"Nombre del ".concat(t),className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"text",name:"descripcion",placeholder:"Descripci\xf3n (ej: Renta de oficina)",value:s.descripcion,onChange:v,className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"text",name:"folio",placeholder:"Folio",value:s.folio,onChange:v,className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"number",name:"monto",placeholder:"Monto",value:s.monto,onChange:v,className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("input",{type:"date",name:"fechaEmision",value:s.fechaEmision,onChange:v,className:"block w-full border rounded-md p-2"}),(0,Lv.jsx)("label",{className:"text-xs",children:"XML:"}),(0,Lv.jsx)("input",{type:"file",name:"xmlFile",accept:".xml",onChange:b,className:"block w-full text-sm"}),(0,Lv.jsx)("label",{className:"text-xs",children:"PDF:"}),(0,Lv.jsx)("input",{type:"file",name:"pdfFile",accept:".pdf",onChange:b,className:"block w-full text-sm"})]}),(0,Lv.jsx)(Bv,{message:g,type:"error",onClose:()=>y("")}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:n,children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{if(s.folio&&s.monto&&a.xmlFile&&a.pdfFile&&""!==s.entidadId&&("otro"!==s.entidadId||h)){m(!0);try{var e,r;const o=await w(a.xmlFile,"facturas_".concat(t,"/").concat(Date.now(),"/").concat(a.xmlFile.name)),l=await w(a.pdfFile,"facturas_".concat(t,"/").concat(Date.now(),"/").concat(a.pdfFile.name)),c="otro"===s.entidadId?h:(null===(e=u.find(e=>e.id===s.entidadId))||void 0===e?void 0:e.nombreCompleto)||(null===(r=u.find(e=>e.id===s.entidadId))||void 0===r?void 0:r.nombre);await Qg(Vm(zv,"facturas"),{tipo:t,proyectoId:"general",folio:s.folio,monto:Number(s.monto),fechaEmision:oc.fromDate(new Date(s.fechaEmision)),estado:"Pendiente",descripcion:s.descripcion||"",urlXml:o,urlPdf:l,["cliente"===t?"clienteNombre":"proveedorNombre"]:c}),i(),n()}catch(o){console.error("Error al guardar factura general:",o),y("Ocurri\xf3 un error al guardar."),m(!1)}}else y("Todos los campos y archivos son obligatorios.")},className:"bg-[#b0ef26] text-black font-bold py-2 px-4 rounded",children:p?"Guardando...":"Guardar"})]})]})})},C=e=>{let{invoice:t,onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)({fechaPromesaPago:t.fechaPromesaPago?t.fechaPromesaPago.toDate().toISOString().split("T")[0]:"",fechaPagoReal:t.fechaPagoReal?t.fechaPagoReal.toDate().toISOString().split("T")[0]:""}),[a,l]=(0,r.useState)(!1);return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Factura: ",t.folio]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Fecha Promesa de Pago"}),(0,Lv.jsx)("input",{type:"date",value:s.fechaPromesaPago,onChange:e=>o(c(c({},s),{},{fechaPromesaPago:e.target.value})),className:"mt-1 block w-full border rounded-md p-2"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Fecha de Pago Real"}),(0,Lv.jsx)("input",{type:"date",value:s.fechaPagoReal,onChange:e=>o(c(c({},s),{},{fechaPagoReal:e.target.value})),className:"mt-1 block w-full border rounded-md p-2"})]})]}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,Lv.jsx)("button",{onClick:async()=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres cancelar esta factura? Esta acci\xf3n es irreversible.")){if(l(!0),await Wg(Bm(zv,"facturas",t.id),{estado:"Cancelada"}),t.proyectoId&&"general"!==t.proyectoId){const e="cliente"===t.tipo?"facturaClienteId":"facturaProveedorId";await Wg(Bm(zv,"proyectos",t.proyectoId),{[e]:ny(),estado:"Pendiente de Factura"})}i(),n()}},disabled:a,className:"bg-red-600 text-white font-bold py-2 px-4 rounded disabled:bg-red-300",children:"Cancelar Factura"}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("button",{onClick:n,disabled:a,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2",children:"Cerrar"}),(0,Lv.jsx)("button",{onClick:async()=>{l(!0);const e={fechaPromesaPago:s.fechaPromesaPago?oc.fromDate(new Date(s.fechaPromesaPago)):null,fechaPagoReal:s.fechaPagoReal?oc.fromDate(new Date(s.fechaPagoReal)):null};s.fechaPagoReal?e.estado="Pagada":"Pagada"===t.estado&&(e.estado="Pendiente"),await Wg(Bm(zv,"facturas",t.id),e),i(),n()},disabled:a,className:"bg-[#b0ef26] text-black font-bold py-2 px-4 rounded",children:a?"Guardando...":"Guardar"})]})]})]})})},S=e=>e?new Date(1e3*e.seconds).toLocaleDateString("es-MX"):"---",T=e=>"Pagada"===e.estado?"bg-green-100 text-green-800":"Cancelada"===e.estado?"bg-gray-100 text-gray-500 line-through":e.fechaVencimiento&&e.fechaVencimiento.toDate()<new Date?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800";return(0,Lv.jsxs)("div",{children:[(0,Lv.jsxs)("div",{className:"mb-4 flex flex-col md:flex-row justify-between items-center",children:[(0,Lv.jsx)("input",{type:"text",placeholder:"Buscar por folio, cliente/prov. o descripci\xf3n...",className:"w-full md:w-1/3 px-3 py-2 border border-gray-300 rounded-md mb-2 md:mb-0",onChange:e=>{p(e.target.value),g(1)}}),(0,Lv.jsxs)("div",{className:"flex items-center",children:[(0,Lv.jsx)("span",{className:"text-sm mr-2",children:"Mostrar:"}),(0,Lv.jsxs)("select",{value:y,onChange:e=>{v(Number(e.target.value)),g(1)},className:"px-2 py-1 border border-gray-300 rounded-md",children:[(0,Lv.jsx)("option",{value:10,children:"10"}),(0,Lv.jsx)("option",{value:25,children:"25"}),(0,Lv.jsx)("option",{value:50,children:"50"})]}),(0,Lv.jsx)("button",{onClick:()=>u(!0),className:"ml-4 bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg",children:"+ A\xf1adir Factura General"})]})]}),(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Folio"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"cliente"===t?"Cliente":"Proveedor"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Descripci\xf3n"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Monto"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Fecha Emisi\xf3n"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Fecha Promesa Pago"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Fecha Pago"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Estado"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o?(0,Lv.jsx)("tr",{children:(0,Lv.jsx)("td",{colSpan:"9",children:"Cargando..."})}):_.map(e=>(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.folio}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.clienteNombre||e.proveedorNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:e.descripcion||("general"!==e.proyectoId?"Gasto de Proyecto":"---")}),(0,Lv.jsxs)("td",{className:"px-6 py-4",children:["$",(e.monto||0).toFixed(2)]}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:S(e.fechaEmision)}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:S(e.fechaPromesaPago)}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:S(e.fechaPagoReal)}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:(0,Lv.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(T(e)),children:e.estado})}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:(0,Lv.jsx)("button",{onClick:()=>h(e),className:"text-indigo-600",children:"Gestionar"})})]},e.id))})]})}),(0,Lv.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,Lv.jsxs)("span",{className:"text-sm text-gray-700",children:["P\xe1gina ",m," de ",E]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("button",{onClick:()=>N(m-1),disabled:1===m,className:"px-3 py-1 border rounded-md bg-white mr-2 disabled:opacity-50",children:"Anterior"}),(0,Lv.jsx)("button",{onClick:()=>N(m+1),disabled:m===E||0===E,className:"px-3 py-1 border rounded-md bg-white disabled:opacity-50",children:"Siguiente"})]})]}),l&&(0,Lv.jsx)(k,{onClose:()=>u(!1),onFinalized:n}),d&&(0,Lv.jsx)(C,{invoice:d,onClose:()=>h(null),onFinalized:n})]})},hb=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),h=()=>{i(!0);return Xg(Sg(Vm(zv,"proyectos"),Ig("estado","in",["Terminado Internamente","En Revisi\xf3n Final"])),e=>{const n=e.docs.map(e=>c({id:e.id},e.data()));t(n),i(!1)},e=>{console.error("Error fetching projects for practicante: ",e),i(!1)})};(0,r.useEffect)(()=>{const e=h();return()=>e()},[]);const f=e=>{let{project:t,onClose:n,onFinalized:i}=e;const[s,o]=(0,r.useState)(t.urlHeyzine||""),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),f=e=>t=>{t.target.files[0]&&e(t.target.files[0])},p=async(e,t)=>{if(!e)return null;const n=Pv(Dv(Vv,t),e);return Rv((await n).ref)};return(0,Lv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,Lv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg",children:[(0,Lv.jsxs)("h3",{className:"text-lg font-bold mb-4",children:["Gestionar Entrega Final: ",t.npu]}),(0,Lv.jsxs)("div",{className:"space-y-4",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Enlace Heyzine (\xdanico)"}),(0,Lv.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value),className:"mt-1 block w-full border rounded-md p-2"})]}),(0,Lv.jsx)("hr",{}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Subir/Reemplazar Nota de Entrega 1 (Firmada)"}),(0,Lv.jsx)("input",{type:"file",accept:".pdf",onChange:f(l),className:"mt-1 block w-full text-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium",children:"Subir/Reemplazar Nota de Entrega 2 (Firmada)"}),(0,Lv.jsx)("input",{type:"file",accept:".pdf",onChange:f(u),className:"mt-1 block w-full text-sm"})]})]}),(0,Lv.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,Lv.jsx)("button",{onClick:n,className:"bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded",children:"Cancelar"}),(0,Lv.jsx)("button",{onClick:async()=>{h(!0);const e={urlHeyzine:s},r=await p(a,"notas_entrega_cliente/".concat(t.id,"/nota1_").concat(null===a||void 0===a?void 0:a.name)),o=await p(c,"notas_entrega_cliente/".concat(t.id,"/nota2_").concat(null===c||void 0===c?void 0:c.name));r&&(e.urlNotaPdf1=r),o&&(e.urlNotaPdf2=o),Object.keys(e).length>0&&await Wg(Bm(zv,"proyectos",t.id),e),i(),n()},className:"bg-blue-600 text-white font-bold py-2 px-4 rounded",children:d?"Guardando...":"Guardar Documentos"})]})]})})},p=e=>{d({title:"Confirmar Env\xedo",message:"\xbfEst\xe1s seguro de que todos los documentos est\xe1n listos y quieres enviar este proyecto a revisi\xf3n final?",onConfirm:()=>(async e=>{l(e);try{await Wg(Bm(zv,"proyectos",e),{estado:"En Revisi\xf3n Final",motivoRechazo:ny()})}catch(t){console.error("Error sending project to review:",t),alert("Ocurri\xf3 un error al enviar el proyecto a revisi\xf3n.")}finally{l(null)}})(e)})};return(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Proyectos Listos para Documentar"}),n?(0,Lv.jsx)("p",{children:"Cargando..."}):0===e.length?(0,Lv.jsx)("p",{children:"No hay proyectos pendientes."}):(0,Lv.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:(0,Lv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Lv.jsx)("thead",{className:"bg-gray-50",children:(0,Lv.jsxs)("tr",{children:[(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"NPU"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Servicio"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Documentos del T\xe9cnico"}),(0,Lv.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),(0,Lv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,Lv.jsxs)("tr",{className:e.motivoRechazo?"bg-orange-50":"",children:[(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.npu}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.clienteNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.servicioNombre}),(0,Lv.jsx)("td",{className:"px-6 py-4",children:(0,Lv.jsxs)("div",{className:"flex flex-col space-y-1 text-sm",children:[e.urlEvidenciaTecnico1&&(0,Lv.jsxs)("div",{className:"p-2 border-b",children:[(0,Lv.jsx)("p",{className:"font-semibold text-xs",children:"Fase 1:"}),(0,Lv.jsx)("a",{href:e.urlEvidenciaTecnico1,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Evidencia 1"}),(0,Lv.jsxs)("p",{children:["Nota Interna 1: ",(0,Lv.jsx)("span",{className:"font-semibold",children:e.numeroNotaInterna1||"N/A"})]})]}),e.urlEvidenciaTecnico2&&(0,Lv.jsxs)("div",{className:"p-2",children:[(0,Lv.jsx)("p",{className:"font-semibold text-xs",children:"Fase 2:"}),(0,Lv.jsx)("a",{href:e.urlEvidenciaTecnico2,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Evidencia 2"}),(0,Lv.jsxs)("p",{children:["Nota Interna 2: ",(0,Lv.jsx)("span",{className:"font-semibold",children:e.numeroNotaInterna2||"N/A"})]})]}),e.urlEvidenciaTecnico&&!e.urlEvidenciaTecnico1&&(0,Lv.jsx)("a",{href:e.urlEvidenciaTecnico,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:"Ver Evidencia"}),e.motivoRechazo&&(0,Lv.jsxs)("div",{className:"mt-2 p-2 bg-orange-100 text-orange-800 rounded-md",children:[(0,Lv.jsx)("p",{className:"font-bold text-xs",children:"Correcciones Pendientes:"}),(0,Lv.jsx)("p",{className:"text-xs",children:e.motivoRechazo})]})]})}),(0,Lv.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,Lv.jsx)("button",{onClick:()=>o(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Gestionar Entrega"}),"Terminado Internamente"===e.estado&&(0,Lv.jsx)("button",{onClick:()=>p(e.id),disabled:a===e.id,className:"text-green-600 hover:text-green-900 disabled:opacity-50",children:a===e.id?"Enviando...":"Enviar a Revisi\xf3n"})]})]},e.id))})]})}),s&&(0,Lv.jsx)(f,{project:s,onClose:()=>o(null),onFinalized:h}),u&&(0,Lv.jsx)(qv,{title:u.title,message:u.message,onConfirm:u.onConfirm,onCancel:()=>d(null)})]})},fb=e=>{let{user:t,userData:n}=e;return(0,Lv.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(()=>{switch(n.rol){case"administrador":return(0,Lv.jsx)(Xv,{user:t,userData:n});case"cliente":return(0,Lv.jsx)(nb,{user:t,userData:n});case"directivo":return(0,Lv.jsx)(rb,{user:t,userData:n});case"ecotech":return(0,Lv.jsx)(ib,{user:t,userData:n});case"supervisor":return(0,Lv.jsx)(ob,{user:t,userData:n});case"tecnico":return(0,Lv.jsx)(ab,{user:t,userData:n});case"finanzas":return(0,Lv.jsx)(cb,{user:t,userData:n});case"practicante":return(0,Lv.jsx)(hb,{});default:return(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("h2",{className:"text-2xl font-bold",children:"Rol no reconocido"}),(0,Lv.jsx)("p",{children:"Contacte al administrador."})]})}})()})},pb=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)("");return(0,Lv.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#cdcdcd]",children:(0,Lv.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-2xl",children:[(0,Lv.jsx)("img",{src:"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png",alt:"Logo Grupo Evelsa",className:"h-16 mx-auto mb-6"}),(0,Lv.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-8",children:"Acceso al Portal"}),(0,Lv.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),o("");try{await function(e,t,n){return Xn(L(e),Dn.credential(t,n))}(Uv,e,n)}catch(r){o("Email o contrase\xf1a incorrectos.")}},className:"space-y-6",children:[(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,Lv.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),(0,Lv.jsxs)("div",{children:[(0,Lv.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contrase\xf1a"}),(0,Lv.jsx)("input",{type:"password",value:n,onChange:e=>i(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm"})]}),s&&(0,Lv.jsx)("p",{className:"text-red-500 text-sm text-center",children:s}),(0,Lv.jsx)("button",{type:"submit",className:"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-3 px-4 rounded-lg transition duration-300 text-lg",children:"Entrar"})]})]})})};function mb(){const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=function(e,t,n,r){return L(e).onAuthStateChanged(t,n,r)}(Uv,async e=>{if(e){const n=Bm(zv,"usuarios",e.uid),r=await function(e){e=Om(e,Mm);const t=Om(e.firestore,Gm);return Sm(Km(t),e._key).then(n=>$g(t,e,n))}(n);r.exists()?(i(r.data()),t(e)):(console.error("Usuario autenticado pero no encontrado en Firestore. Deslogueando..."),Yn(Uv))}else t(null),i(null);o(!1)});return()=>e()},[]),s?(0,Lv.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#cdcdcd] text-gray-700",children:"Cargando..."}):(0,Lv.jsxs)("div",{className:"bg-[#c9c9c9] min-h-screen font-sans",children:[(0,Lv.jsx)(Gv,{user:e,userData:n}),(0,Lv.jsx)("main",{children:e&&n?(0,Lv.jsx)(fb,{user:e,userData:n}):(0,Lv.jsx)(pb,{})})]})}i.createRoot(document.getElementById("root")).render((0,Lv.jsx)(r.StrictMode,{children:(0,Lv.jsx)(mb,{})}))})();
//# sourceMappingURL=main.e2869320.js.map