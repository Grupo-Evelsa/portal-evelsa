{"ast":null,"code":"import _objectSpread from\"C:/Users/CAD/Documents/portal-evelsa/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{initializeApp}from'firebase/app';import{getAuth,onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from'firebase/auth';import{getFirestore,collection,addDoc,query,where,getDocs,doc,getDoc,updateDoc,onSnapshot,setDoc,Timestamp,runTransaction}from'firebase/firestore';import{getStorage,ref,uploadBytesResumable,getDownloadURL}from'firebase/storage';// --- INSTRUCCIONES DE CONFIGURACIÓN DE FIREBASE ---\n// Pega aquí el objeto de configuración que obtuviste de tu proyecto de Firebase.\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyA7H6G0mXCy9DmoLg3fSW3TrxIRcEzz9jg\",authDomain:\"portal-evelsa.firebaseapp.com\",projectId:\"portal-evelsa\",storageBucket:\"portal-evelsa.firebasestorage.app\",messagingSenderId:\"847174487471\",appId:\"1:847174487471:web:c3a57fd8315ce619a2335a\"};// --- Inicialización de Firebase ---\nconst app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);const storage=getStorage(app);// --- Componente de Alerta Reutilizable ---\nconst Alert=_ref=>{let{message,type,onClose}=_ref;if(!message)return null;const baseClasses=\"p-4 mb-4 text-sm rounded-lg\";const typeClasses={error:\"bg-red-100 text-red-700\",success:\"bg-green-100 text-green-700\"};return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(baseClasses,\" \").concat(typeClasses[type]),role:\"alert\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"float-right font-bold\",children:\"X\"})]});};// --- Componente de Cabecera ---\nconst Header=_ref2=>{let{user,userData}=_ref2;return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[userData&&userData.rol==='cliente'&&userData.logoUrl?/*#__PURE__*/_jsx(\"img\",{src:userData.logoUrl,onError:e=>{e.target.onerror=null;e.target.src=\"https://placehold.co/100x40/003366/FFFFFF?text=Logo\";},alt:\"Logo Cliente\",className:\"h-10 w-auto mr-3 object-contain\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-10 h-10 text-blue-800 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Portal Grupo Evelsa\"})]}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 mr-4\",children:[\"Hola, \",userData?userData.nombreCompleto:user.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>signOut(auth),className:\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300\",children:\"Cerrar Sesi\\xF3n\"})]})]})});};// --- Componentes de Gestión (Para Empleados) ---\nconst UserManagement=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[nombreCompleto,setNombreCompleto]=useState('');const[rol,setRol]=useState('cliente');const[clienteIdNumerico,setClienteIdNumerico]=useState('');const[logoUrl,setLogoUrl]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const resetForm=()=>{setEmail('');setPassword('');setNombreCompleto('');setRol('cliente');setClienteIdNumerico('');setLogoUrl('');};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');if(!nombreCompleto||!email||!password||rol==='cliente'&&!clienteIdNumerico){setError('Por favor, complete todos los campos requeridos.');return;}try{const tempApp=initializeApp(firebaseConfig,'Secondary');const tempAuth=getAuth(tempApp);const userCredential=await createUserWithEmailAndPassword(tempAuth,email,password);await setDoc(doc(db,\"usuarios\",userCredential.user.uid),{email,rol,nombreCompleto,clienteIdNumerico:rol==='cliente'?clienteIdNumerico.padStart(3,'0'):'',logoUrl:rol==='cliente'?logoUrl:''});setSuccess(\"\\xA1Usuario \".concat(email,\" creado con \\xE9xito!\"));resetForm();}catch(err){setError(\"Error al crear usuario: \".concat(err.message));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Crear Usuario (Cliente o Empleado)\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nombreCompleto,onChange:e=>setNombreCompleto(e.target.value),placeholder:\"Nombre Completo\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsxs(\"select\",{value:rol,onChange:e=>setRol(e.target.value),className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cliente\",children:\"Cliente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"empleado\",children:\"Empleado\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Contrase\\xF1a\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),rol==='cliente'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clienteIdNumerico,onChange:e=>setClienteIdNumerico(e.target.value),placeholder:\"ID Num\\xE9rico Cliente (ej: 001)\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:logoUrl,onChange:e=>setLogoUrl(e.target.value),placeholder:\"URL del Logo (Opcional)\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"})]}),/*#__PURE__*/_jsx(Alert,{message:error,type:\"error\",onClose:()=>setError('')}),/*#__PURE__*/_jsx(Alert,{message:success,type:\"success\",onClose:()=>setSuccess('')}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg\",children:\"Crear Usuario\"})]})]});};// Componentes similares para ServiceManagement y ProviderManagement...\n// Por simplicidad, se omite su código pero seguirían la misma estructura que UserManagement\n// para crear documentos en colecciones 'servicios' y 'proveedores' respectivamente.\nconst NewProjectForm=_ref3=>{let{onProjectAdded}=_ref3;const[formData,setFormData]=useState({clienteId:'',servicioId:'',proveedorId:'',comentarios:''});const[collections,setCollections]=useState({clientes:[],servicios:[],proveedores:[]});const[error,setError]=useState('');const[loading,setLoading]=useState(false);useEffect(()=>{const fetchData=async()=>{try{const[clientesSnap,serviciosSnap,proveedoresSnap]=await Promise.all([getDocs(query(collection(db,\"usuarios\"),where(\"rol\",\"==\",\"cliente\"))),getDocs(collection(db,\"servicios\")),getDocs(collection(db,\"proveedores\"))]);setCollections({clientes:clientesSnap.docs.map(doc=>_objectSpread({id:doc.id},doc.data())),servicios:serviciosSnap.docs.map(doc=>_objectSpread({id:doc.id},doc.data())),proveedores:proveedoresSnap.docs.map(doc=>_objectSpread({id:doc.id},doc.data()))});}catch(e){setError(\"Error al cargar datos maestros. Asegúrese de que las colecciones 'servicios' y 'proveedores' existan.\");}};fetchData();},[]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(!formData.clienteId||!formData.servicioId||!formData.proveedorId){setError('Cliente, Servicio y Proveedor son obligatorios.');return;}setLoading(true);setError('');try{const anioActual=new Date().getFullYear();const contadorRef=doc(db,\"contadores\",\"proyectos_\".concat(anioActual));const nuevoConsecutivo=await runTransaction(db,async transaction=>{const contadorDoc=await transaction.get(contadorRef);if(!contadorDoc.exists()){transaction.set(contadorRef,{consecutivo:1});return 1;}const nuevoValor=contadorDoc.data().consecutivo+1;transaction.update(contadorRef,{consecutivo:nuevoValor});return nuevoValor;});const ultimosDosDigitosAnio=anioActual.toString().slice(-2);const consecutivoFormateado=nuevoConsecutivo.toString().padStart(3,'0');const cliente=collections.clientes.find(c=>c.id===formData.clienteId);const servicio=collections.servicios.find(s=>s.id===formData.servicioId);const proveedor=collections.proveedores.find(p=>p.id===formData.proveedorId);const npu=\"\".concat(cliente.clienteIdNumerico,\"-\").concat(servicio.servicioIdNumerico,\"-\").concat(proveedor.proveedorIdNumerico,\"-\").concat(consecutivoFormateado).concat(ultimosDosDigitosAnio);await addDoc(collection(db,\"proyectos\"),{fechaApertura:Timestamp.now(),npu,clienteId:cliente.id,clienteNombre:cliente.nombreCompleto,servicioId:servicio.id,servicioNombre:servicio.nombre,proveedorId:proveedor.id,proveedorNombre:proveedor.nombre,comentarios:formData.comentarios,estado:'Activo',fechaEntrega:null,notaEntrega:'',urlHeyzine:'',urlPdf:''});setFormData({clienteId:'',servicioId:'',proveedorId:'',comentarios:''});if(onProjectAdded)onProjectAdded();}catch(err){console.error(\"Error al crear proyecto:\",err);setError(\"Ocurri\\xF3 un error: \".concat(err.message));}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Crear Nuevo Proyecto\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Fecha de Apertura: \",new Date().toLocaleDateString('es-MX')]}),/*#__PURE__*/_jsxs(\"select\",{name:\"clienteId\",value:formData.clienteId,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un Cliente\"}),collections.clientes.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.id,children:c.nombreCompleto},c.id))]}),/*#__PURE__*/_jsxs(\"select\",{name:\"servicioId\",value:formData.servicioId,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un Proyecto/Servicio\"}),collections.servicios.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s.id,children:s.nombre},s.id))]}),/*#__PURE__*/_jsxs(\"select\",{name:\"proveedorId\",value:formData.proveedorId,onChange:handleChange,className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccione un Proveedor\"}),collections.proveedores.map(p=>/*#__PURE__*/_jsx(\"option\",{value:p.id,children:p.nombre},p.id))]}),/*#__PURE__*/_jsx(\"textarea\",{name:\"comentarios\",value:formData.comentarios,onChange:handleChange,placeholder:\"Comentarios\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsx(Alert,{message:error,type:\"error\",onClose:()=>setError('')}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-gray-400\",children:loading?'Creando...':'Crear Proyecto y Generar NPU'})]})]});};const ProjectsTable=_ref4=>{let{projects,onUpdateProject}=_ref4;// ... La tabla ahora muestra las columnas: NPU, Cliente, Proyecto, Proveedor, Fecha Apertura, Estado, Acciones\n// ... El modal de acciones ahora es para \"Gestionar Entrega\"\n// (Código omitido por brevedad, pero la funcionalidad se describe)\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto bg-white rounded-lg shadow\",children:/*#__PURE__*/_jsx(\"p\",{className:\"p-4\",children:\"Tabla de proyectos mejorada aqu\\xED...\"})});// Placeholder\n};const ClientProjectCards=_ref5=>{let{projects}=_ref5;// La vista del cliente se mantiene similar, pero muestra más información\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:projects.map(project=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 border\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-500\",children:project.npu}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-blue-800 mt-1\",children:project.servicioNombre}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 font-semibold \".concat(project.estado==='Activo'?'text-orange-500':'text-green-600'),children:[\"Estado: \",project.estado]})]},project.id))});};const Dashboard=_ref6=>{let{user,userData}=_ref6;const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);const[view,setView]=useState('projects');// projects, users, services, providers\nuseEffect(()=>{// ... Lógica de carga de proyectos\n},[user,userData]);const EmployeeView=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",\"aria-label\":\"Tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('projects'),className:\"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm \".concat(view==='projects'?'border-blue-500 text-blue-600':'border-transparent'),children:\"Proyectos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('users'),className:\"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm \".concat(view==='users'?'border-blue-500 text-blue-600':'border-transparent'),children:\"Usuarios\"})]})}),view==='projects'&&/*#__PURE__*/_jsx(NewProjectForm,{}),view==='users'&&/*#__PURE__*/_jsx(UserManagement,{})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-6\",children:userData.rol==='empleado'?'Panel de Administración':\"Proyectos de \".concat(userData.nombreCompleto)}),userData.rol==='empleado'?/*#__PURE__*/_jsx(EmployeeView,{}):/*#__PURE__*/_jsx(ClientProjectCards,{projects:projects})]});};const AuthPage=()=>{// ... Sin cambios significativos\nconst[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const handleLogin=async e=>{e.preventDefault();// ...\n};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-100\"});};export default function App(){const[user,setUser]=useState(null);const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async currentUser=>{if(currentUser){const userDocRef=doc(db,\"usuarios\",currentUser.uid);const unsubDoc=onSnapshot(userDocRef,doc=>{if(doc.exists()){setUserData(doc.data());}else{signOut(auth);}setUser(currentUser);setLoading(false);});return()=>unsubDoc();}else{setUser(null);setUserData(null);setLoading(false);}});return()=>unsubscribe();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:\"Cargando...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 min-h-screen font-sans\",children:[/*#__PURE__*/_jsx(Header,{user:user,userData:userData}),/*#__PURE__*/_jsx(\"main\",{children:user&&userData?/*#__PURE__*/_jsx(Dashboard,{user:user,userData:userData}):/*#__PURE__*/_jsx(AuthPage,{})})]});}","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","addDoc","query","where","getDocs","doc","getDoc","updateDoc","onSnapshot","setDoc","Timestamp","runTransaction","getStorage","ref","uploadBytesResumable","getDownloadURL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","storage","Alert","_ref","message","type","onClose","baseClasses","typeClasses","error","success","className","concat","role","children","onClick","Header","_ref2","user","userData","rol","logoUrl","src","onError","e","target","onerror","alt","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","nombreCompleto","email","UserManagement","setEmail","password","setPassword","setNombreCompleto","setRol","clienteIdNumerico","setClienteIdNumerico","setLogoUrl","setError","setSuccess","resetForm","handleSubmit","preventDefault","tempApp","tempAuth","userCredential","uid","padStart","err","onSubmit","value","onChange","placeholder","NewProjectForm","_ref3","onProjectAdded","formData","setFormData","clienteId","servicioId","proveedorId","comentarios","collections","setCollections","clientes","servicios","proveedores","loading","setLoading","fetchData","clientesSnap","serviciosSnap","proveedoresSnap","Promise","all","docs","map","_objectSpread","id","data","handleChange","name","prev","anioActual","Date","getFullYear","contadorRef","nuevoConsecutivo","transaction","contadorDoc","get","exists","set","consecutivo","nuevoValor","update","ultimosDosDigitosAnio","toString","slice","consecutivoFormateado","cliente","find","c","servicio","s","proveedor","p","npu","servicioIdNumerico","proveedorIdNumerico","fechaApertura","now","clienteNombre","servicioNombre","nombre","proveedorNombre","estado","fechaEntrega","notaEntrega","urlHeyzine","urlPdf","console","toLocaleDateString","disabled","ProjectsTable","_ref4","projects","onUpdateProject","ClientProjectCards","_ref5","project","Dashboard","_ref6","setProjects","view","setView","EmployeeView","AuthPage","handleLogin","App","setUser","setUserData","unsubscribe","currentUser","userDocRef","unsubDoc"],"sources":["C:/Users/CAD/Documents/portal-evelsa/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { \r\n    getAuth, \r\n    onAuthStateChanged, \r\n    createUserWithEmailAndPassword, \r\n    signInWithEmailAndPassword, \r\n    signOut \r\n} from 'firebase/auth';\r\nimport { \r\n    getFirestore, \r\n    collection, \r\n    addDoc, \r\n    query, \r\n    where, \r\n    getDocs, \r\n    doc, \r\n    getDoc,\r\n    updateDoc,\r\n    onSnapshot,\r\n    setDoc,\r\n    Timestamp,\r\n    runTransaction\r\n} from 'firebase/firestore';\r\nimport { \r\n    getStorage, \r\n    ref, \r\n    uploadBytesResumable, \r\n    getDownloadURL \r\n} from 'firebase/storage';\r\n\r\n// --- INSTRUCCIONES DE CONFIGURACIÓN DE FIREBASE ---\r\n// Pega aquí el objeto de configuración que obtuviste de tu proyecto de Firebase.\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA7H6G0mXCy9DmoLg3fSW3TrxIRcEzz9jg\",\r\n  authDomain: \"portal-evelsa.firebaseapp.com\",\r\n  projectId: \"portal-evelsa\",\r\n  storageBucket: \"portal-evelsa.firebasestorage.app\",\r\n  messagingSenderId: \"847174487471\",\r\n  appId: \"1:847174487471:web:c3a57fd8315ce619a2335a\"\r\n};\r\n\r\n// --- Inicialización de Firebase ---\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\n// --- Componente de Alerta Reutilizable ---\r\nconst Alert = ({ message, type, onClose }) => {\r\n    if (!message) return null;\r\n    const baseClasses = \"p-4 mb-4 text-sm rounded-lg\";\r\n    const typeClasses = {\r\n        error: \"bg-red-100 text-red-700\",\r\n        success: \"bg-green-100 text-green-700\"\r\n    };\r\n    return (\r\n        <div className={`${baseClasses} ${typeClasses[type]}`} role=\"alert\">\r\n            <span className=\"font-medium\">{message}</span>\r\n            <button onClick={onClose} className=\"float-right font-bold\">X</button>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- Componente de Cabecera ---\r\nconst Header = ({ user, userData }) => (\r\n    <header className=\"bg-white shadow-md\">\r\n        <div className=\"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center\">\r\n            <div className=\"flex items-center\">\r\n                 {userData && userData.rol === 'cliente' && userData.logoUrl ? (\r\n                    <img src={userData.logoUrl} onError={(e)=>{e.target.onerror = null; e.target.src=\"https://placehold.co/100x40/003366/FFFFFF?text=Logo\"}} alt=\"Logo Cliente\" className=\"h-10 w-auto mr-3 object-contain\"/>\r\n                ) : (\r\n                    <svg className=\"w-10 h-10 text-blue-800 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\"></path></svg>\r\n                )}\r\n                <h1 className=\"text-2xl font-bold text-gray-800\">Portal Grupo Evelsa</h1>\r\n            </div>\r\n            {user && (\r\n                <div className=\"flex items-center\">\r\n                    <span className=\"text-gray-600 mr-4\">\r\n                        Hola, {userData ? userData.nombreCompleto : user.email}\r\n                    </span>\r\n                    <button\r\n                        onClick={() => signOut(auth)}\r\n                        className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300\"\r\n                    >\r\n                        Cerrar Sesión\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    </header>\r\n);\r\n\r\n// --- Componentes de Gestión (Para Empleados) ---\r\n\r\nconst UserManagement = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [nombreCompleto, setNombreCompleto] = useState('');\r\n    const [rol, setRol] = useState('cliente');\r\n    const [clienteIdNumerico, setClienteIdNumerico] = useState('');\r\n    const [logoUrl, setLogoUrl] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    const resetForm = () => {\r\n        setEmail(''); setPassword(''); setNombreCompleto(''); setRol('cliente');\r\n        setClienteIdNumerico(''); setLogoUrl('');\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError(''); setSuccess('');\r\n\r\n        if (!nombreCompleto || !email || !password || (rol === 'cliente' && !clienteIdNumerico)) {\r\n            setError('Por favor, complete todos los campos requeridos.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const tempApp = initializeApp(firebaseConfig, 'Secondary');\r\n            const tempAuth = getAuth(tempApp);\r\n            const userCredential = await createUserWithEmailAndPassword(tempAuth, email, password);\r\n            \r\n            await setDoc(doc(db, \"usuarios\", userCredential.user.uid), {\r\n                email, rol, nombreCompleto,\r\n                clienteIdNumerico: rol === 'cliente' ? clienteIdNumerico.padStart(3, '0') : '',\r\n                logoUrl: rol === 'cliente' ? logoUrl : '',\r\n            });\r\n\r\n            setSuccess(`¡Usuario ${email} creado con éxito!`);\r\n            resetForm();\r\n        } catch (err) {\r\n            setError(`Error al crear usuario: ${err.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-200\">\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Crear Usuario (Cliente o Empleado)</h3>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                 {/* ... Form fields ... */}\r\n                 <input type=\"text\" value={nombreCompleto} onChange={e => setNombreCompleto(e.target.value)} placeholder=\"Nombre Completo\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                 <select value={rol} onChange={e => setRol(e.target.value)} className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\">\r\n                    <option value=\"cliente\">Cliente</option>\r\n                    <option value=\"empleado\">Empleado</option>\r\n                 </select>\r\n                 <input type=\"email\" value={email} onChange={e => setEmail(e.target.value)} placeholder=\"Email\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                 <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} placeholder=\"Contraseña\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                 {rol === 'cliente' && (\r\n                     <>\r\n                        <input type=\"text\" value={clienteIdNumerico} onChange={e => setClienteIdNumerico(e.target.value)} placeholder=\"ID Numérico Cliente (ej: 001)\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                        <input type=\"text\" value={logoUrl} onChange={e => setLogoUrl(e.target.value)} placeholder=\"URL del Logo (Opcional)\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                     </>\r\n                 )}\r\n                 <Alert message={error} type=\"error\" onClose={() => setError('')} />\r\n                 <Alert message={success} type=\"success\" onClose={() => setSuccess('')} />\r\n                 <button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg\">Crear Usuario</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Componentes similares para ServiceManagement y ProviderManagement...\r\n// Por simplicidad, se omite su código pero seguirían la misma estructura que UserManagement\r\n// para crear documentos en colecciones 'servicios' y 'proveedores' respectivamente.\r\n\r\n\r\nconst NewProjectForm = ({ onProjectAdded }) => {\r\n    const [formData, setFormData] = useState({\r\n        clienteId: '',\r\n        servicioId: '',\r\n        proveedorId: '',\r\n        comentarios: ''\r\n    });\r\n    const [collections, setCollections] = useState({ clientes: [], servicios: [], proveedores: [] });\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [clientesSnap, serviciosSnap, proveedoresSnap] = await Promise.all([\r\n                    getDocs(query(collection(db, \"usuarios\"), where(\"rol\", \"==\", \"cliente\"))),\r\n                    getDocs(collection(db, \"servicios\")),\r\n                    getDocs(collection(db, \"proveedores\"))\r\n                ]);\r\n                setCollections({\r\n                    clientes: clientesSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })),\r\n                    servicios: serviciosSnap.docs.map(doc => ({ id: doc.id, ...doc.data() })),\r\n                    proveedores: proveedoresSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }))\r\n                });\r\n            } catch (e) {\r\n                setError(\"Error al cargar datos maestros. Asegúrese de que las colecciones 'servicios' y 'proveedores' existan.\");\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!formData.clienteId || !formData.servicioId || !formData.proveedorId) {\r\n            setError('Cliente, Servicio y Proveedor son obligatorios.');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const anioActual = new Date().getFullYear();\r\n            const contadorRef = doc(db, \"contadores\", `proyectos_${anioActual}`);\r\n            \r\n            const nuevoConsecutivo = await runTransaction(db, async (transaction) => {\r\n                const contadorDoc = await transaction.get(contadorRef);\r\n                if (!contadorDoc.exists()) {\r\n                    transaction.set(contadorRef, { consecutivo: 1 });\r\n                    return 1;\r\n                }\r\n                const nuevoValor = contadorDoc.data().consecutivo + 1;\r\n                transaction.update(contadorRef, { consecutivo: nuevoValor });\r\n                return nuevoValor;\r\n            });\r\n            \r\n            const ultimosDosDigitosAnio = anioActual.toString().slice(-2);\r\n            const consecutivoFormateado = nuevoConsecutivo.toString().padStart(3, '0');\r\n            \r\n            const cliente = collections.clientes.find(c => c.id === formData.clienteId);\r\n            const servicio = collections.servicios.find(s => s.id === formData.servicioId);\r\n            const proveedor = collections.proveedores.find(p => p.id === formData.proveedorId);\r\n\r\n            const npu = `${cliente.clienteIdNumerico}-${servicio.servicioIdNumerico}-${proveedor.proveedorIdNumerico}-${consecutivoFormateado}${ultimosDosDigitosAnio}`;\r\n\r\n            await addDoc(collection(db, \"proyectos\"), {\r\n                fechaApertura: Timestamp.now(),\r\n                npu,\r\n                clienteId: cliente.id,\r\n                clienteNombre: cliente.nombreCompleto,\r\n                servicioId: servicio.id,\r\n                servicioNombre: servicio.nombre,\r\n                proveedorId: proveedor.id,\r\n                proveedorNombre: proveedor.nombre,\r\n                comentarios: formData.comentarios,\r\n                estado: 'Activo',\r\n                fechaEntrega: null,\r\n                notaEntrega: '',\r\n                urlHeyzine: '',\r\n                urlPdf: ''\r\n            });\r\n            \r\n            setFormData({ clienteId: '', servicioId: '', proveedorId: '', comentarios: '' });\r\n            if (onProjectAdded) onProjectAdded();\r\n\r\n        } catch (err) {\r\n            console.error(\"Error al crear proyecto:\", err);\r\n            setError(`Ocurrió un error: ${err.message}`);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-8\">\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Crear Nuevo Proyecto</h3>\r\n            {/* ... Formulario con dropdowns para cliente, servicio, proveedor ... */}\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <p className=\"text-sm text-gray-500\">Fecha de Apertura: {new Date().toLocaleDateString('es-MX')}</p>\r\n                 <select name=\"clienteId\" value={formData.clienteId} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\">\r\n                    <option value=\"\">Seleccione un Cliente</option>\r\n                    {collections.clientes.map(c => <option key={c.id} value={c.id}>{c.nombreCompleto}</option>)}\r\n                 </select>\r\n                 <select name=\"servicioId\" value={formData.servicioId} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\">\r\n                    <option value=\"\">Seleccione un Proyecto/Servicio</option>\r\n                    {collections.servicios.map(s => <option key={s.id} value={s.id}>{s.nombre}</option>)}\r\n                 </select>\r\n                 <select name=\"proveedorId\" value={formData.proveedorId} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\">\r\n                    <option value=\"\">Seleccione un Proveedor</option>\r\n                    {collections.proveedores.map(p => <option key={p.id} value={p.id}>{p.nombre}</option>)}\r\n                 </select>\r\n                <textarea name=\"comentarios\" value={formData.comentarios} onChange={handleChange} placeholder=\"Comentarios\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"></textarea>\r\n                <Alert message={error} type=\"error\" onClose={() => setError('')} />\r\n                <button type=\"submit\" disabled={loading} className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg disabled:bg-gray-400\">\r\n                    {loading ? 'Creando...' : 'Crear Proyecto y Generar NPU'}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst ProjectsTable = ({ projects, onUpdateProject }) => {\r\n    // ... La tabla ahora muestra las columnas: NPU, Cliente, Proyecto, Proveedor, Fecha Apertura, Estado, Acciones\r\n    // ... El modal de acciones ahora es para \"Gestionar Entrega\"\r\n    // (Código omitido por brevedad, pero la funcionalidad se describe)\r\n    return <div className=\"overflow-x-auto bg-white rounded-lg shadow\"><p className=\"p-4\">Tabla de proyectos mejorada aquí...</p></div>; // Placeholder\r\n};\r\n\r\nconst ClientProjectCards = ({ projects }) => {\r\n    // La vista del cliente se mantiene similar, pero muestra más información\r\n     return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {projects.map(project => (\r\n                <div key={project.id} className=\"bg-white rounded-xl shadow-lg p-6 border\">\r\n                    <p className=\"text-sm font-semibold text-gray-500\">{project.npu}</p>\r\n                    <h3 className=\"text-xl font-bold text-blue-800 mt-1\">{project.servicioNombre}</h3>\r\n                    <p className={`mt-2 font-semibold ${project.estado === 'Activo' ? 'text-orange-500' : 'text-green-600'}`}>\r\n                        Estado: {project.estado}\r\n                    </p>\r\n                    {/* ... botones de descarga ... */}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Dashboard = ({ user, userData }) => {\r\n    const [projects, setProjects] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [view, setView] = useState('projects'); // projects, users, services, providers\r\n\r\n    useEffect(() => {\r\n        // ... Lógica de carga de proyectos\r\n    }, [user, userData]);\r\n\r\n    const EmployeeView = () => (\r\n         <>\r\n            <div className=\"mb-6 border-b border-gray-200\">\r\n                <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\r\n                    <button onClick={() => setView('projects')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${view === 'projects' ? 'border-blue-500 text-blue-600' : 'border-transparent'}`}>\r\n                        Proyectos\r\n                    </button>\r\n                     <button onClick={() => setView('users')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${view === 'users' ? 'border-blue-500 text-blue-600' : 'border-transparent'}`}>\r\n                        Usuarios\r\n                    </button>\r\n                    {/* Se necesitarían componentes para gestionar Servicios y Proveedores */}\r\n                </nav>\r\n            </div>\r\n            {view === 'projects' && <NewProjectForm />}\r\n            {view === 'users' && <UserManagement />}\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">\r\n                {userData.rol === 'empleado' ? 'Panel de Administración' : `Proyectos de ${userData.nombreCompleto}`}\r\n            </h1>\r\n            {userData.rol === 'empleado' ? <EmployeeView /> : <ClientProjectCards projects={projects} />}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AuthPage = () => {\r\n    // ... Sin cambios significativos\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        // ...\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-100\">\r\n            {/* ... Formulario de login ... */}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [userData, setUserData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n            if (currentUser) {\r\n                const userDocRef = doc(db, \"usuarios\", currentUser.uid);\r\n                const unsubDoc = onSnapshot(userDocRef, (doc) => {\r\n                    if (doc.exists()) {\r\n                        setUserData(doc.data());\r\n                    } else {\r\n                        signOut(auth);\r\n                    }\r\n                    setUser(currentUser);\r\n                    setLoading(false);\r\n                });\r\n                return () => unsubDoc();\r\n            } else {\r\n                setUser(null);\r\n                setUserData(null);\r\n                setLoading(false);\r\n            }\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div className=\"min-h-screen flex items-center justify-center\">Cargando...</div>;\r\n    }\r\n    \r\n    return (\r\n        <div className=\"bg-gray-50 min-h-screen font-sans\">\r\n             <Header user={user} userData={userData}/>\r\n             <main>\r\n                {user && userData ? <Dashboard user={user} userData={userData} /> : <AuthPage />}\r\n             </main>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}