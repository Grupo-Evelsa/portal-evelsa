{"ast":null,"code":"import _objectSpread from\"C:/Users/CAD/Documents/portal-evelsa/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{initializeApp}from'firebase/app';import{getAuth,onAuthStateChanged,createUserWithEmailAndPassword,signInWithEmailAndPassword,signOut}from'firebase/auth';import{getFirestore,collection,addDoc,query,where,getDocs,doc,getDoc,updateDoc,onSnapshot,setDoc,Timestamp,runTransaction,orderBy,deleteDoc}from'firebase/firestore';import{getStorage,ref,uploadBytesResumable,getDownloadURL}from'firebase/storage';// --- INSTRUCCIONES DE CONFIGURACIÓN DE FIREBASE ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyA7H6G0mXCy9DmoLg3fSW3TrxIRcEzz9jg\",authDomain:\"portal-evelsa.firebaseapp.com\",projectId:\"portal-evelsa\",storageBucket:\"portal-evelsa.firebasestorage.app\",messagingSenderId:\"847174487471\",appId:\"1:847174487471:web:c3a57fd8315ce619a2335a\"};// --- Inicialización de Firebase ---\nconst app=initializeApp(firebaseConfig);const auth=getAuth(app);const db=getFirestore(app);const storage=getStorage(app);// --- Componentes Reutilizables ---\nconst Alert=_ref=>{let{message,type,onClose}=_ref;if(!message)return null;const baseClasses=\"p-4 mb-4 text-sm rounded-lg relative\";const typeClasses={error:\"bg-red-100 text-red-800\",success:\"bg-green-100 text-green-800\"};return/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(baseClasses,\" \").concat(typeClasses[type]),role:\"alert\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"absolute top-0 right-0 mt-2 mr-3 text-2xl font-semibold leading-none\",children:\"\\xD7\"})]});};// --- Componente de Cabecera ---\nconst Header=_ref2=>{let{user,userData}=_ref2;const logoGrupoEvelsa=\"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png\";return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white shadow-md sticky top-0 z-40\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:userData&&userData.rol==='cliente'&&userData.logoUrl?/*#__PURE__*/_jsx(\"img\",{src:userData.logoUrl,onError:e=>{e.target.onerror=null;e.target.src=\"https://placehold.co/150x50/FFFFFF/000000?text=Logo+Cliente\";},alt:\"Logo Cliente\",className:\"h-12 w-auto mr-4 object-contain\"}):/*#__PURE__*/_jsx(\"img\",{src:logoGrupoEvelsa,alt:\"Logo Grupo Evelsa\",className:\"h-12 w-auto mr-4\"})}),user&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-600 mr-4 hidden sm:block\",children:[\"Hola, \",userData?userData.nombreCompleto.split(' ')[0]:user.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>signOut(auth),className:\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300\",children:\"Salir\"})]})]})});};// --- Componentes de Gestión (Para Administradores) ---\nconst UserManagement=_ref3=>{let{onUserAdded}=_ref3;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[nombreCompleto,setNombreCompleto]=useState('');const[rol,setRol]=useState('cliente');const[clienteIdNumerico,setClienteIdNumerico]=useState('');const[logoUrl,setLogoUrl]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const resetForm=()=>{setEmail('');setPassword('');setNombreCompleto('');setRol('cliente');setClienteIdNumerico('');setLogoUrl('');};const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');if(!nombreCompleto||!email||!password){setError('Nombre, email y contraseña son obligatorios.');return;}if(rol==='cliente'&&!clienteIdNumerico){setError('Para clientes, el ID Numérico es obligatorio.');return;}try{const tempApp=initializeApp(firebaseConfig,\"Secondary-\".concat(new Date().getTime()));const tempAuth=getAuth(tempApp);const userCredential=await createUserWithEmailAndPassword(tempAuth,email,password);await setDoc(doc(db,\"usuarios\",userCredential.user.uid),{email,rol,nombreCompleto,clienteIdNumerico:rol==='cliente'?clienteIdNumerico.padStart(3,'0'):'',logoUrl:rol==='cliente'?logoUrl:''});setSuccess(\"\\xA1Usuario \".concat(email,\" con rol '\").concat(rol,\"' creado con \\xE9xito!\"));resetForm();if(onUserAdded)onUserAdded();}catch(err){setError(\"Error al crear usuario: \".concat(err.message));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg border border-gray-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Crear Nuevo Usuario\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nombreCompleto,onChange:e=>setNombreCompleto(e.target.value),placeholder:\"Nombre Completo\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsxs(\"select\",{value:rol,onChange:e=>setRol(e.target.value),className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cliente\",children:\"Cliente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"administrador\",children:\"Administrador\"}),/*#__PURE__*/_jsx(\"option\",{value:\"directivo\",children:\"Directivo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ecotech\",children:\"Encargada Ecotech\"}),/*#__PURE__*/_jsx(\"option\",{value:\"supervisor\",children:\"Supervisor de Proyectos\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tecnico\",children:\"T\\xE9cnico\"}),/*#__PURE__*/_jsx(\"option\",{value:\"finanzas\",children:\"Finanzas\"}),/*#__PURE__*/_jsx(\"option\",{value:\"practicante\",children:\"Practicante\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Email de Acceso\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Contrase\\xF1a (m\\xEDnimo 6 caracteres)\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),rol==='cliente'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:clienteIdNumerico,onChange:e=>setClienteIdNumerico(e.target.value),placeholder:\"ID Num\\xE9rico Cliente (ej: 001)\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:logoUrl,onChange:e=>setLogoUrl(e.target.value),placeholder:\"URL del Logo (Opcional)\",className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"})]}),/*#__PURE__*/_jsx(Alert,{message:error,type:\"error\",onClose:()=>setError('')}),/*#__PURE__*/_jsx(Alert,{message:success,type:\"success\",onClose:()=>setSuccess('')}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg\",children:\"Crear Usuario\"})]})]});};// --- Dashboards Esqueleto para cada Rol ---\nconst AdminDashboard=()=>{const[view,setView]=useState('projects');return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",\"aria-label\":\"Tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('projects'),className:\"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm \".concat(view==='projects'?'border-blue-500 text-blue-600':'border-transparent text-gray-500'),children:\"Proyectos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setView('users'),className:\"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm \".concat(view==='users'?'border-blue-500 text-blue-600':'border-transparent text-gray-500'),children:\"Usuarios\"})]})}),view==='users'&&/*#__PURE__*/_jsx(UserManagement,{}),view==='projects'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Vista de Proyectos (Admin)\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Aqu\\xED ir\\xE1 la tabla completa de proyectos.\"})]})]});};// --- Componentes para la Vista de Cliente ---\nconst HeyzineViewerModal=_ref4=>{let{url,onClose}=_ref4;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 border-b\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold\",children:\"Visor de Documentos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-600 hover:text-gray-900 text-2xl font-bold\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow\",children:/*#__PURE__*/_jsx(\"iframe\",{src:url,className:\"w-full h-full\",frameBorder:\"0\",allowFullScreen:true})})]})});};const ProjectsShelf=_ref5=>{let{projects,onOpenModal}=_ref5;const finishedProjects=projects.filter(p=>p.estadoCliente==='Terminado'&&(p.urlDocumento1||p.urlDocumento2));const coverTemplateUrl=\"https://firebasestorage.googleapis.com/v0/b/portal-evelsa.firebasestorage.app/o/portada%20Carpetas.jpeg?alt=media&token=417eb65c-1694-4efc-9e2a-55528d43a8d6\";return/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8\",children:finishedProjects.map(project=>/*#__PURE__*/_jsxs(\"button\",{className:\"group text-left focus:outline-none\",onClick:()=>onOpenModal(project.urlDocumento2||project.urlDocumento1),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative pt-[141%] bg-gray-200 rounded-lg shadow-lg group-hover:shadow-2xl transition-all duration-300 transform group-hover:-translate-y-1 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:coverTemplateUrl,alt:\"Portada de proyecto\",className:\"absolute inset-0 w-full h-full object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-40\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 flex flex-col justify-center items-center p-4 text-white text-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-lg leading-tight\",children:project.clienteNombre}),/*#__PURE__*/_jsx(\"hr\",{className:\"w-1/4 my-2 border-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:project.servicioNombre})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-semibold text-gray-700 mt-3 truncate group-hover:text-blue-600\",children:project.servicioNombre})]},project.id))});};const ClientProjectsList=_ref6=>{let{projects,onOpenModal}=_ref6;const[activeAccordion,setActiveAccordion]=useState(null);const groupedProjects=projects.reduce((acc,project)=>{const key=project.dependencia||'Sin Dependencia';if(!acc[key])acc[key]=[];acc[key].push(project);return acc;},{});const toggleAccordion=key=>setActiveAccordion(activeAccordion===key?null:key);const formatDate=timestamp=>!timestamp?'---':new Date(timestamp.seconds*1000).toLocaleDateString('es-MX');const getStatusClass=estado=>estado==='Activo'?'bg-orange-100 text-orange-800':'bg-green-100 text-green-800';return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:Object.entries(groupedProjects).map(_ref7=>{let[dependencia,projs]=_ref7;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleAccordion(dependencia),className:\"w-full p-4 text-left font-bold text-lg text-gray-800 flex justify-between items-center hover:bg-gray-50 transition\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[dependencia,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-normal text-gray-500\",children:[\"(\",projs.length,\")\"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"transform transition-transform duration-300 \".concat(activeAccordion===dependencia?'rotate-180':''),children:\"\\u25BC\"})]}),activeAccordion===dependencia&&/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200 border-t\",children:projs.map(project=>/*#__PURE__*/_jsxs(\"li\",{className:\"p-4 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 mb-4 md:mb-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:project.servicioNombre})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full md:w-40 mb-4 md:mb-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 hidden md:block\",children:formatDate(project.fechaApertura)})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full md:w-40 mb-4 md:mb-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \".concat(getStatusClass(project.estadoCliente)),children:project.estadoCliente})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full md:w-56 flex items-center space-x-4\",children:[project.urlDocumento1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onOpenModal(project.urlDocumento1),className:\"text-sm font-medium text-blue-600 hover:text-blue-900\",children:\"Ver Doc. 1\"}),project.urlDocumento2&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onOpenModal(project.urlDocumento2),className:\"text-sm font-medium text-blue-600 hover:text-blue-900\",children:\"Ver Doc. 2\"}),project.urlNotaPdf1&&/*#__PURE__*/_jsx(\"a\",{href:project.urlNotaPdf1,download:true,className:\"text-sm font-medium text-red-600 hover:text-red-900\",children:\"Nota 1\"}),project.urlNotaPdf2&&/*#__PURE__*/_jsx(\"a\",{href:project.urlNotaPdf2,download:true,className:\"text-sm font-medium text-red-600 hover:text-red-900\",children:\"Nota 2\"})]})]},project.id))})]},dependencia);})});};const ClientDashboard=_ref8=>{let{user,userData}=_ref8;const[projects,setProjects]=useState([]);const[loading,setLoading]=useState(true);const[clientView,setClientView]=useState('shelf');const[modalUrl,setModalUrl]=useState(null);useEffect(()=>{if(!user){setLoading(false);return;}const q=query(collection(db,\"proyectos\"),where(\"clienteId\",\"==\",user.uid),where(\"estadoCliente\",\"in\",[\"Activo\",\"Terminado\"]));const unsubscribe=onSnapshot(q,querySnapshot=>{const projectsData=querySnapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));// Ordenar en el cliente\nprojectsData.sort((a,b)=>b.fechaApertura.seconds-a.fechaApertura.seconds);setProjects(projectsData);setLoading(false);},error=>{console.error(\"Error fetching client projects: \",error);if(error.code==='failed-precondition'){console.error(\"IMPORTANTE: Se requiere un índice compuesto en Firestore. Ve a la URL que aparece en el mensaje de error en la consola para crearlo con un solo clic.\");}setLoading(false);});return()=>unsubscribe();},[user]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-6\",children:[\"Proyectos de \",userData.nombreCompleto]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",\"aria-label\":\"Tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setClientView('shelf'),className:\"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm \".concat(clientView==='shelf'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Estanter\\xEDa de Proyectos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setClientView('list'),className:\"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm \".concat(clientView==='list'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Lista Detallada\"})]})}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Cargando proyectos...\"}):projects.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500 mt-8\",children:\"No hay proyectos para mostrar.\"}):clientView==='shelf'?/*#__PURE__*/_jsx(ProjectsShelf,{projects:projects,onOpenModal:setModalUrl}):/*#__PURE__*/_jsx(ClientProjectsList,{projects:projects,onOpenModal:setModalUrl}),modalUrl&&/*#__PURE__*/_jsx(HeyzineViewerModal,{url:modalUrl,onClose:()=>setModalUrl(null)})]});};// ... (Resto de los dashboards esqueleto)\nconst DirectivoDashboard=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Dashboard de Directivos\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pr\\xF3ximamente: Gr\\xE1ficas y reportes.\"})]});const EcotechDashboard=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Dashboard de Ecotech\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pr\\xF3ximamente: Proyectos de Ecotech.\"})]});const SupervisorDashboard=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Dashboard de Supervisor\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pr\\xF3ximamente: Proyectos para asignar.\"})]});const TecnicoDashboard=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Dashboard de T\\xE9cnico\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pr\\xF3ximamente: Mis proyectos asignados.\"})]});const FinanzasDashboard=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Dashboard de Finanzas\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pr\\xF3ximamente: Cuentas por pagar y por cobrar.\"})]});const PracticanteDashboard=()=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Dashboard de Practicante\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pr\\xF3ximamente: Proyectos listos para documentar.\"})]});// --- Componente Principal \"Router\" ---\nconst Dashboard=_ref9=>{let{user,userData}=_ref9;const renderDashboardByRole=()=>{switch(userData.rol){case'administrador':return/*#__PURE__*/_jsx(AdminDashboard,{});case'cliente':return/*#__PURE__*/_jsx(ClientDashboard,{user:user,userData:userData});case'directivo':return/*#__PURE__*/_jsx(DirectivoDashboard,{});case'ecotech':return/*#__PURE__*/_jsx(EcotechDashboard,{});case'supervisor':return/*#__PURE__*/_jsx(SupervisorDashboard,{});case'tecnico':return/*#__PURE__*/_jsx(TecnicoDashboard,{});case'finanzas':return/*#__PURE__*/_jsx(FinanzasDashboard,{});case'practicante':return/*#__PURE__*/_jsx(PracticanteDashboard,{});default:return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold\",children:\"Rol no reconocido\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Contacte al administrador.\"})]});}};return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\",children:renderDashboardByRole()});};const AuthPage=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const handleLogin=async e=>{e.preventDefault();setError('');try{await signInWithEmailAndPassword(auth,email,password);}catch(err){setError(\"Email o contraseña incorrectos.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#cdcdcd]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white p-8 rounded-xl shadow-2xl\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png\",alt:\"Logo Grupo Evelsa\",className:\"h-16 mx-auto mb-6\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center text-gray-800 mb-8\",children:\"Acceso al Portal\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true,className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,className:\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm text-center\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-3 px-4 rounded-lg transition duration-300 text-lg\",children:\"Entrar\"})]})]})});};export default function App(){const[user,setUser]=useState(null);const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const unsubscribe=onAuthStateChanged(auth,async currentUser=>{if(currentUser){const userDocRef=doc(db,\"usuarios\",currentUser.uid);const userDoc=await getDoc(userDocRef);if(userDoc.exists()){setUserData(userDoc.data());setUser(currentUser);}else{console.error(\"Usuario autenticado pero no encontrado en Firestore. Deslogueando...\");signOut(auth);}}else{setUser(null);setUserData(null);}setLoading(false);});return()=>unsubscribe();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-[#cdcdcd] text-gray-700\",children:\"Cargando...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-[#c9c9c9] min-h-screen font-sans\",children:[/*#__PURE__*/_jsx(Header,{user:user,userData:userData}),/*#__PURE__*/_jsx(\"main\",{children:user&&userData?/*#__PURE__*/_jsx(Dashboard,{user:user,userData:userData}):/*#__PURE__*/_jsx(AuthPage,{})})]});}","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","addDoc","query","where","getDocs","doc","getDoc","updateDoc","onSnapshot","setDoc","Timestamp","runTransaction","orderBy","deleteDoc","getStorage","ref","uploadBytesResumable","getDownloadURL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","storage","Alert","_ref","message","type","onClose","baseClasses","typeClasses","error","success","className","concat","role","children","onClick","Header","_ref2","user","userData","logoGrupoEvelsa","rol","logoUrl","src","onError","e","target","onerror","alt","nombreCompleto","split","email","UserManagement","_ref3","onUserAdded","setEmail","password","setPassword","setNombreCompleto","setRol","clienteIdNumerico","setClienteIdNumerico","setLogoUrl","setError","setSuccess","resetForm","handleSubmit","preventDefault","tempApp","Date","getTime","tempAuth","userCredential","uid","padStart","err","onSubmit","value","onChange","placeholder","AdminDashboard","view","setView","HeyzineViewerModal","_ref4","url","frameBorder","allowFullScreen","ProjectsShelf","_ref5","projects","onOpenModal","finishedProjects","filter","p","estadoCliente","urlDocumento1","urlDocumento2","coverTemplateUrl","map","project","clienteNombre","servicioNombre","id","ClientProjectsList","_ref6","activeAccordion","setActiveAccordion","groupedProjects","reduce","acc","key","dependencia","push","toggleAccordion","formatDate","timestamp","seconds","toLocaleDateString","getStatusClass","estado","Object","entries","_ref7","projs","length","fechaApertura","urlNotaPdf1","href","download","urlNotaPdf2","ClientDashboard","_ref8","setProjects","loading","setLoading","clientView","setClientView","modalUrl","setModalUrl","q","unsubscribe","querySnapshot","projectsData","docs","_objectSpread","data","sort","a","b","console","code","DirectivoDashboard","EcotechDashboard","SupervisorDashboard","TecnicoDashboard","FinanzasDashboard","PracticanteDashboard","Dashboard","_ref9","renderDashboardByRole","AuthPage","handleLogin","required","App","setUser","setUserData","currentUser","userDocRef","userDoc","exists"],"sources":["C:/Users/CAD/Documents/portal-evelsa/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport { \r\n    getAuth, \r\n    onAuthStateChanged, \r\n    createUserWithEmailAndPassword, \r\n    signInWithEmailAndPassword, \r\n    signOut \r\n} from 'firebase/auth';\r\nimport { \r\n    getFirestore, \r\n    collection, \r\n    addDoc, \r\n    query, \r\n    where, \r\n    getDocs, \r\n    doc, \r\n    getDoc,\r\n    updateDoc,\r\n    onSnapshot,\r\n    setDoc,\r\n    Timestamp,\r\n    runTransaction,\r\n    orderBy,\r\n    deleteDoc\r\n} from 'firebase/firestore';\r\nimport { \r\n    getStorage, \r\n    ref, \r\n    uploadBytesResumable, \r\n    getDownloadURL \r\n} from 'firebase/storage';\r\n\r\n// --- INSTRUCCIONES DE CONFIGURACIÓN DE FIREBASE ---\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA7H6G0mXCy9DmoLg3fSW3TrxIRcEzz9jg\",\r\n  authDomain: \"portal-evelsa.firebaseapp.com\",\r\n  projectId: \"portal-evelsa\",\r\n  storageBucket: \"portal-evelsa.firebasestorage.app\",\r\n  messagingSenderId: \"847174487471\",\r\n  appId: \"1:847174487471:web:c3a57fd8315ce619a2335a\"\r\n};\r\n\r\n// --- Inicialización de Firebase ---\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\n\r\n// --- Componentes Reutilizables ---\r\nconst Alert = ({ message, type, onClose }) => {\r\n    if (!message) return null;\r\n    const baseClasses = \"p-4 mb-4 text-sm rounded-lg relative\";\r\n    const typeClasses = { error: \"bg-red-100 text-red-800\", success: \"bg-green-100 text-green-800\" };\r\n    return (\r\n        <div className={`${baseClasses} ${typeClasses[type]}`} role=\"alert\">\r\n            <span className=\"font-medium\">{message}</span>\r\n            <button onClick={onClose} className=\"absolute top-0 right-0 mt-2 mr-3 text-2xl font-semibold leading-none\">&times;</button>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Componente de Cabecera ---\r\nconst Header = ({ user, userData }) => {\r\n    const logoGrupoEvelsa = \"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png\";\r\n    return (\r\n        <header className=\"bg-white shadow-md sticky top-0 z-40\">\r\n            <div className=\"max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex justify-between items-center\">\r\n                <div className=\"flex items-center\">\r\n                    {userData && userData.rol === 'cliente' && userData.logoUrl ? (\r\n                        <img src={userData.logoUrl} onError={(e)=>{e.target.onerror = null; e.target.src=\"https://placehold.co/150x50/FFFFFF/000000?text=Logo+Cliente\"}} alt=\"Logo Cliente\" className=\"h-12 w-auto mr-4 object-contain\"/>\r\n                    ) : (\r\n                        <img src={logoGrupoEvelsa} alt=\"Logo Grupo Evelsa\" className=\"h-12 w-auto mr-4\"/>\r\n                    )}\r\n                </div>\r\n                {user && (\r\n                    <div className=\"flex items-center\">\r\n                        <span className=\"text-gray-600 mr-4 hidden sm:block\">\r\n                            Hola, {userData ? userData.nombreCompleto.split(' ')[0] : user.email}\r\n                        </span>\r\n                        <button onClick={() => signOut(auth)} className=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300\">\r\n                            Salir\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </header>\r\n    );\r\n};\r\n\r\n// --- Componentes de Gestión (Para Administradores) ---\r\n\r\nconst UserManagement = ({ onUserAdded }) => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [nombreCompleto, setNombreCompleto] = useState('');\r\n    const [rol, setRol] = useState('cliente');\r\n    const [clienteIdNumerico, setClienteIdNumerico] = useState('');\r\n    const [logoUrl, setLogoUrl] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    const resetForm = () => {\r\n        setEmail(''); setPassword(''); setNombreCompleto(''); setRol('cliente');\r\n        setClienteIdNumerico(''); setLogoUrl('');\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError(''); setSuccess('');\r\n\r\n        if (!nombreCompleto || !email || !password) {\r\n            setError('Nombre, email y contraseña son obligatorios.');\r\n            return;\r\n        }\r\n        if (rol === 'cliente' && !clienteIdNumerico) {\r\n             setError('Para clientes, el ID Numérico es obligatorio.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const tempApp = initializeApp(firebaseConfig, `Secondary-${new Date().getTime()}`);\r\n            const tempAuth = getAuth(tempApp);\r\n            const userCredential = await createUserWithEmailAndPassword(tempAuth, email, password);\r\n            \r\n            await setDoc(doc(db, \"usuarios\", userCredential.user.uid), {\r\n                email, rol, nombreCompleto,\r\n                clienteIdNumerico: rol === 'cliente' ? clienteIdNumerico.padStart(3, '0') : '',\r\n                logoUrl: rol === 'cliente' ? logoUrl : '',\r\n            });\r\n\r\n            setSuccess(`¡Usuario ${email} con rol '${rol}' creado con éxito!`);\r\n            resetForm();\r\n            if (onUserAdded) onUserAdded();\r\n        } catch (err) {\r\n            setError(`Error al crear usuario: ${err.message}`);\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-200\">\r\n            <h3 className=\"text-xl font-bold text-gray-800 mb-4\">Crear Nuevo Usuario</h3>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                 <input type=\"text\" value={nombreCompleto} onChange={e => setNombreCompleto(e.target.value)} placeholder=\"Nombre Completo\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                 <select value={rol} onChange={e => setRol(e.target.value)} className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\">\r\n                    <option value=\"cliente\">Cliente</option>\r\n                    <option value=\"administrador\">Administrador</option>\r\n                    <option value=\"directivo\">Directivo</option>\r\n                    <option value=\"ecotech\">Encargada Ecotech</option>\r\n                    <option value=\"supervisor\">Supervisor de Proyectos</option>\r\n                    <option value=\"tecnico\">Técnico</option>\r\n                    <option value=\"finanzas\">Finanzas</option>\r\n                    <option value=\"practicante\">Practicante</option>\r\n                 </select>\r\n                 <input type=\"email\" value={email} onChange={e => setEmail(e.target.value)} placeholder=\"Email de Acceso\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                 <input type=\"password\" value={password} onChange={e => setPassword(e.target.value)} placeholder=\"Contraseña (mínimo 6 caracteres)\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                 {rol === 'cliente' && (\r\n                     <>\r\n                        <input type=\"text\" value={clienteIdNumerico} onChange={e => setClienteIdNumerico(e.target.value)} placeholder=\"ID Numérico Cliente (ej: 001)\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                        <input type=\"text\" value={logoUrl} onChange={e => setLogoUrl(e.target.value)} placeholder=\"URL del Logo (Opcional)\" className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                     </>\r\n                 )}\r\n                 <Alert message={error} type=\"error\" onClose={() => setError('')} />\r\n                 <Alert message={success} type=\"success\" onClose={() => setSuccess('')} />\r\n                 <button type=\"submit\" className=\"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-2 px-4 rounded-lg\">Crear Usuario</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Dashboards Esqueleto para cada Rol ---\r\n\r\nconst AdminDashboard = () => {\r\n    const [view, setView] = useState('projects');\r\n    return (\r\n        <div>\r\n            <div className=\"mb-6 border-b border-gray-200\">\r\n                <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\r\n                    <button onClick={() => setView('projects')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${view === 'projects' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500'}`}>Proyectos</button>\r\n                    <button onClick={() => setView('users')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${view === 'users' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500'}`}>Usuarios</button>\r\n                    {/* Futuras pestañas: Servicios, Proveedores, etc. */}\r\n                </nav>\r\n            </div>\r\n            {view === 'users' && <UserManagement />}\r\n            {view === 'projects' && <div><h2 className=\"text-2xl font-bold\">Vista de Proyectos (Admin)</h2><p>Aquí irá la tabla completa de proyectos.</p></div>}\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- Componentes para la Vista de Cliente ---\r\n\r\nconst HeyzineViewerModal = ({ url, onClose }) => {\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50\">\r\n            <div className=\"bg-white rounded-lg shadow-xl w-full h-full max-w-6xl max-h-[90vh] flex flex-col\">\r\n                <div className=\"flex justify-between items-center p-4 border-b\">\r\n                    <h3 className=\"text-lg font-bold\">Visor de Documentos</h3>\r\n                    <button onClick={onClose} className=\"text-gray-600 hover:text-gray-900 text-2xl font-bold\">&times;</button>\r\n                </div>\r\n                <div className=\"flex-grow\">\r\n                    <iframe src={url} className=\"w-full h-full\" frameBorder=\"0\" allowFullScreen></iframe>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProjectsShelf = ({ projects, onOpenModal }) => {\r\n    const finishedProjects = projects.filter(p => p.estadoCliente === 'Terminado' && (p.urlDocumento1 || p.urlDocumento2));\r\n    const coverTemplateUrl = \"https://firebasestorage.googleapis.com/v0/b/portal-evelsa.firebasestorage.app/o/portada%20Carpetas.jpeg?alt=media&token=417eb65c-1694-4efc-9e2a-55528d43a8d6\";\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-8\">\r\n            {finishedProjects.map(project => (\r\n                <button key={project.id} className=\"group text-left focus:outline-none\" onClick={() => onOpenModal(project.urlDocumento2 || project.urlDocumento1)}>\r\n                    <div className=\"relative pt-[141%] bg-gray-200 rounded-lg shadow-lg group-hover:shadow-2xl transition-all duration-300 transform group-hover:-translate-y-1 overflow-hidden\">\r\n                        <img src={coverTemplateUrl} alt=\"Portada de proyecto\" className=\"absolute inset-0 w-full h-full object-cover\"/>\r\n                        <div className=\"absolute inset-0 bg-black bg-opacity-40\"></div>\r\n                        <div className=\"absolute inset-0 flex flex-col justify-center items-center p-4 text-white text-center\">\r\n                            <h4 className=\"font-bold text-lg leading-tight\">{project.clienteNombre}</h4>\r\n                            <hr className=\"w-1/4 my-2 border-gray-400\"/>\r\n                            <p className=\"text-sm\">{project.servicioNombre}</p>\r\n                        </div>\r\n                    </div>\r\n                    <p className=\"text-sm font-semibold text-gray-700 mt-3 truncate group-hover:text-blue-600\">{project.servicioNombre}</p>\r\n                </button>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ClientProjectsList = ({ projects, onOpenModal }) => {\r\n    const [activeAccordion, setActiveAccordion] = useState(null);\r\n    const groupedProjects = projects.reduce((acc, project) => {\r\n        const key = project.dependencia || 'Sin Dependencia';\r\n        if (!acc[key]) acc[key] = [];\r\n        acc[key].push(project);\r\n        return acc;\r\n    }, {});\r\n\r\n    const toggleAccordion = (key) => setActiveAccordion(activeAccordion === key ? null : key);\r\n    const formatDate = (timestamp) => !timestamp ? '---' : new Date(timestamp.seconds * 1000).toLocaleDateString('es-MX');\r\n    const getStatusClass = (estado) => estado === 'Activo' ? 'bg-orange-100 text-orange-800' : 'bg-green-100 text-green-800';\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {Object.entries(groupedProjects).map(([dependencia, projs]) => (\r\n                <div key={dependencia} className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n                    <button onClick={() => toggleAccordion(dependencia)} className=\"w-full p-4 text-left font-bold text-lg text-gray-800 flex justify-between items-center hover:bg-gray-50 transition\">\r\n                        <span>{dependencia} <span className=\"text-sm font-normal text-gray-500\">({projs.length})</span></span>\r\n                        <span className={`transform transition-transform duration-300 ${activeAccordion === dependencia ? 'rotate-180' : ''}`}>▼</span>\r\n                    </button>\r\n                    {activeAccordion === dependencia && (\r\n                        <ul className=\"divide-y divide-gray-200 border-t\">\r\n                            {projs.map(project => (\r\n                                <li key={project.id} className=\"p-4 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center\">\r\n                                    <div className=\"flex-1 mb-4 md:mb-0\"><div className=\"text-sm font-medium text-gray-900\">{project.servicioNombre}</div></div>\r\n                                    <div className=\"w-full md:w-40 mb-4 md:mb-0\"><div className=\"text-sm text-gray-500 hidden md:block\">{formatDate(project.fechaApertura)}</div></div>\r\n                                    <div className=\"w-full md:w-40 mb-4 md:mb-0\"><span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusClass(project.estadoCliente)}`}>{project.estadoCliente}</span></div>\r\n                                    <div className=\"w-full md:w-56 flex items-center space-x-4\">\r\n                                        {project.urlDocumento1 && <button onClick={() => onOpenModal(project.urlDocumento1)} className=\"text-sm font-medium text-blue-600 hover:text-blue-900\">Ver Doc. 1</button>}\r\n                                        {project.urlDocumento2 && <button onClick={() => onOpenModal(project.urlDocumento2)} className=\"text-sm font-medium text-blue-600 hover:text-blue-900\">Ver Doc. 2</button>}\r\n                                        {project.urlNotaPdf1 && <a href={project.urlNotaPdf1} download className=\"text-sm font-medium text-red-600 hover:text-red-900\">Nota 1</a>}\r\n                                        {project.urlNotaPdf2 && <a href={project.urlNotaPdf2} download className=\"text-sm font-medium text-red-600 hover:text-red-900\">Nota 2</a>}\r\n                                    </div>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ClientDashboard = ({ user, userData }) => {\r\n    const [projects, setProjects] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [clientView, setClientView] = useState('shelf');\r\n    const [modalUrl, setModalUrl] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (!user) { setLoading(false); return; }\r\n        \r\n        const q = query(\r\n            collection(db, \"proyectos\"), \r\n            where(\"clienteId\", \"==\", user.uid),\r\n            where(\"estadoCliente\", \"in\", [\"Activo\", \"Terminado\"])\r\n        );\r\n        \r\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n            const projectsData = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n            // Ordenar en el cliente\r\n            projectsData.sort((a, b) => b.fechaApertura.seconds - a.fechaApertura.seconds);\r\n            setProjects(projectsData);\r\n            setLoading(false);\r\n        }, (error) => {\r\n            console.error(\"Error fetching client projects: \", error);\r\n            if (error.code === 'failed-precondition') {\r\n                 console.error(\"IMPORTANTE: Se requiere un índice compuesto en Firestore. Ve a la URL que aparece en el mensaje de error en la consola para crearlo con un solo clic.\");\r\n            }\r\n            setLoading(false);\r\n        });\r\n        \r\n        return () => unsubscribe();\r\n    }, [user]);\r\n\r\n    return (\r\n        <>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-6\">Proyectos de {userData.nombreCompleto}</h1>\r\n            <div className=\"mb-6 border-b border-gray-200\">\r\n                <nav className=\"-mb-px flex space-x-8\" aria-label=\"Tabs\">\r\n                    <button onClick={() => setClientView('shelf')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${clientView === 'shelf' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\r\n                        Estantería de Proyectos\r\n                    </button>\r\n                    <button onClick={() => setClientView('list')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${clientView === 'list' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\r\n                        Lista Detallada\r\n                    </button>\r\n                </nav>\r\n            </div>\r\n            \r\n            {loading ? (\r\n                <p>Cargando proyectos...</p>\r\n            ) : projects.length === 0 ? (\r\n                <p className=\"text-center text-gray-500 mt-8\">No hay proyectos para mostrar.</p>\r\n            ) : clientView === 'shelf' ? (\r\n                <ProjectsShelf projects={projects} onOpenModal={setModalUrl} />\r\n            ) : (\r\n                <ClientProjectsList projects={projects} onOpenModal={setModalUrl} />\r\n            )}\r\n\r\n            {modalUrl && <HeyzineViewerModal url={modalUrl} onClose={() => setModalUrl(null)} />}\r\n        </>\r\n    );\r\n};\r\n\r\n// ... (Resto de los dashboards esqueleto)\r\nconst DirectivoDashboard = () => <div><h2 className=\"text-2xl font-bold\">Dashboard de Directivos</h2><p>Próximamente: Gráficas y reportes.</p></div>;\r\nconst EcotechDashboard = () => <div><h2 className=\"text-2xl font-bold\">Dashboard de Ecotech</h2><p>Próximamente: Proyectos de Ecotech.</p></div>;\r\nconst SupervisorDashboard = () => <div><h2 className=\"text-2xl font-bold\">Dashboard de Supervisor</h2><p>Próximamente: Proyectos para asignar.</p></div>;\r\nconst TecnicoDashboard = () => <div><h2 className=\"text-2xl font-bold\">Dashboard de Técnico</h2><p>Próximamente: Mis proyectos asignados.</p></div>;\r\nconst FinanzasDashboard = () => <div><h2 className=\"text-2xl font-bold\">Dashboard de Finanzas</h2><p>Próximamente: Cuentas por pagar y por cobrar.</p></div>;\r\nconst PracticanteDashboard = () => <div><h2 className=\"text-2xl font-bold\">Dashboard de Practicante</h2><p>Próximamente: Proyectos listos para documentar.</p></div>;\r\n\r\n\r\n// --- Componente Principal \"Router\" ---\r\nconst Dashboard = ({ user, userData }) => {\r\n    \r\n    const renderDashboardByRole = () => {\r\n        switch (userData.rol) {\r\n            case 'administrador':\r\n                return <AdminDashboard />;\r\n            case 'cliente':\r\n                return <ClientDashboard user={user} userData={userData} />;\r\n            case 'directivo':\r\n                return <DirectivoDashboard />;\r\n            case 'ecotech':\r\n                return <EcotechDashboard />;\r\n            case 'supervisor':\r\n                return <SupervisorDashboard />;\r\n            case 'tecnico':\r\n                return <TecnicoDashboard />;\r\n            case 'finanzas':\r\n                return <FinanzasDashboard />;\r\n            case 'practicante':\r\n                return <PracticanteDashboard />;\r\n            default:\r\n                return <div><h2 className=\"text-2xl font-bold\">Rol no reconocido</h2><p>Contacte al administrador.</p></div>;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8\">\r\n            {renderDashboardByRole()}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AuthPage = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const handleLogin = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        try { await signInWithEmailAndPassword(auth, email, password); } \r\n        catch (err) { setError(\"Email o contraseña incorrectos.\"); }\r\n    };\r\n    \r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-[#cdcdcd]\">\r\n            <div className=\"max-w-md w-full bg-white p-8 rounded-xl shadow-2xl\">\r\n                <img src=\"https://www.grupoevelsa.com/assets/images/Logo Evelsa 2.png\" alt=\"Logo Grupo Evelsa\" className=\"h-16 mx-auto mb-6\"/>\r\n                <h2 className=\"text-2xl font-bold text-center text-gray-800 mb-8\">Acceso al Portal</h2>\r\n                <form onSubmit={handleLogin} className=\"space-y-6\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700\">Email</label>\r\n                        <input type=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700\">Contraseña</label>\r\n                        <input type=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm\"/>\r\n                    </div>\r\n                    {error && <p className=\"text-red-500 text-sm text-center\">{error}</p>}\r\n                    <button type=\"submit\" className=\"w-full bg-[#b0ef26] hover:bg-[#9ac91e] text-black font-bold py-3 px-4 rounded-lg transition duration-300 text-lg\">\r\n                        Entrar\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default function App() {\r\n    const [user, setUser] = useState(null);\r\n    const [userData, setUserData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\r\n            if (currentUser) {\r\n                const userDocRef = doc(db, \"usuarios\", currentUser.uid);\r\n                const userDoc = await getDoc(userDocRef);\r\n                if (userDoc.exists()) {\r\n                    setUserData(userDoc.data());\r\n                    setUser(currentUser);\r\n                } else { \r\n                    console.error(\"Usuario autenticado pero no encontrado en Firestore. Deslogueando...\");\r\n                    signOut(auth); \r\n                }\r\n            } else {\r\n                setUser(null);\r\n                setUserData(null);\r\n            }\r\n            setLoading(false);\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    if (loading) {\r\n        return <div className=\"min-h-screen flex items-center justify-center bg-[#cdcdcd] text-gray-700\">Cargando...</div>;\r\n    }\r\n    \r\n    return (\r\n        <div className=\"bg-[#c9c9c9] min-h-screen font-sans\">\r\n             <Header user={user} userData={userData}/>\r\n             <main>\r\n                {user && userData ? <Dashboard user={user} userData={userData} /> : <AuthPage />}\r\n             </main>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}